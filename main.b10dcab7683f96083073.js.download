(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"++hd":function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"a",function(){return s});var r=n("fXoL");const i={above:5,below:-5};let o=(()=>{class t{constructor(t,e,n){this.componentResolver=t,this.injector=e,this.elRef=n,this.position="below"}ngOnChanges(){this.componentRef&&(this.componentRef.instance.content=this.content,this.componentRef.changeDetectorRef.detectChanges())}showTooltip(){if(!this.componentRef){const t=this.componentResolver.resolveComponentFactory(s);this.componentRef=t.create(this.injector),this.componentRef.instance.content=this.content,this.componentRef.changeDetectorRef.detectChanges()}const t=this.componentRef.location.nativeElement;t.dataset.position=this.position,t.parentNode||document.body.appendChild(t);const{top:e,bottom:n,left:r,width:o}=this.elRef.nativeElement.getBoundingClientRect(),a=r+o/2-t.getBoundingClientRect().width/2,c="above"===this.position?e-5-t.offsetHeight:n+5;t.style.transform=`translate3d(${a}px, ${c+i[this.position]}px, 0)`,t.getBoundingClientRect(),t.dataset.state="visible",t.style.transform=`translate3d(${a}px, ${c}px, 0)`,this.cachedPosition=[a,c]}onLeave(){this.hideTooltip()}hideTooltip(){if(!this.componentRef)return;const t=this.componentRef.location.nativeElement;t.dataset.state="hidden";const[e,n]=this.cachedPosition;t.style.transform=`translate3d(${e}px, ${n+i[this.position]}px, 0)`}ngOnDestroy(){if(this.componentRef){const t=this.componentRef.location.nativeElement;t.parentNode&&t.parentNode.removeChild(t),this.componentRef.destroy(),this.componentRef=null}}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.j),r.Ib(r.r),r.Ib(r.l))},t.\u0275dir=r.Db({type:t,selectors:[["","ng-run-tooltip",""]],hostBindings:function(t,e){1&t&&r.Tb("mouseenter",function(){return e.showTooltip()})("mouseleave",function(){return e.onLeave()})},inputs:{content:["ng-run-tooltip","content"],position:["ng-run-tooltip-position","position"]},features:[r.vb]}),t})(),s=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Cb({type:t,selectors:[["ng-run-tooltip"]],inputs:{content:"content"},decls:2,vars:1,consts:[[1,"tooltip-content"]],template:function(t,e){1&t&&(r.Nb(0,"div",0),r.uc(1),r.Mb()),2&t&&(r.wb(1),r.vc(e.content))},styles:["[_nghost-%COMP%]{position:absolute;top:0;left:0;z-index:9999;transition:all cubic-bezier(.46,.1,.52,.98);pointer-events:none}.tooltip-content[_ngcontent-%COMP%]{background:hsla(0,0%,100%,.95);padding:5px 10px;color:#111;opacity:0;will-change:opacity;transition-delay:25ms;transition-duration:325ms;box-shadow:0 2px 10px rgba(0,0,0,.2);overflow:hidden;border-radius:4px}[data-state=hidden][_nghost-%COMP%]{transition-duration:.275s}[data-state=visible][_nghost-%COMP%]{opacity:1;transition-duration:.35s}[data-state=visible][_nghost-%COMP%]   .tooltip-content[_ngcontent-%COMP%]{opacity:1;transition:opacity 325ms ease}"]}),t})()},"+eVz":function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("2Vo4"),i=n("fXoL"),o=n("ofXK");function s(t,e){if(1&t){const t=i.Ob();i.Nb(0,"div",5),i.Tb("click",function(){return i.lc(t),i.Xb(2).close()}),i.Mb()}}function a(t,e){if(1&t){const t=i.Ob();i.Lb(0),i.Nb(1,"div",1,2),i.Tb("click",function(){i.lc(t);const e=i.jc(2);return i.Xb().toggle(e)}),i.bc(3),i.Mb(),i.Nb(4,"div",3),i.bc(5,1),i.Mb(),i.sc(6,s,1,0,"div",4),i.Kb()}if(2&t){const t=e.ngIf,n=i.Xb();i.wb(1),i.Ab("trigger--with-arrow",n.showArrow)("trigger--opened",t.opened),i.wb(3),i.rc("top","left"===n.align?n.top:null,"px")("left","left"===n.align?n.left:null,"px"),i.Ab("menu--opened",t.opened)("menu--right","right"===n.align)("menu--top","top"===n.align),i.wb(2),i.dc("ngIf",t.opened)}}const c=[[["","menuTrigger",""]],"*"],u=function(t){return{opened:t}},l=["[menuTrigger]","*"];let h=(()=>{class t{constructor(){this.showArrow=!1,this.align="left",this.opened=new r.a(!1)}toggle(t){const{top:e,left:n}=t.getBoundingClientRect();this.top=e+t.clientHeight+5,this.left=n,this.opened.next(!this.opened.value)}close(){this.opened.next(!1)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Cb({type:t,selectors:[["ng-run-dropdown-menu"]],inputs:{showArrow:"showArrow",align:"align"},outputs:{opened:"opened"},ngContentSelectors:l,decls:2,vars:5,consts:[[4,"ngIf"],[1,"flex-y-center","trigger","h-100",3,"click"],["target",""],[1,"menu"],["class","menu-backdrop",3,"click",4,"ngIf"],[1,"menu-backdrop",3,"click"]],template:function(t,e){1&t&&(i.cc(c),i.sc(0,a,7,15,"ng-container",0),i.Yb(1,"async")),2&t&&i.dc("ngIf",i.gc(3,u,i.Zb(1,1,e.opened)))},directives:[o.m],pipes:[o.b],styles:['[_nghost-%COMP%]{position:relative;display:block;height:100%}[_nghost-%COMP%]     .menu-item{position:relative;display:flex;justify-content:space-between;align-items:center;padding:0 15px;line-height:35px;white-space:nowrap;cursor:pointer}[_nghost-%COMP%]     .menu-item:hover{background:#f3f3f3}.menu[_ngcontent-%COMP%]{visibility:hidden;position:fixed;height:0;z-index:2;overflow:hidden;margin-top:8px;color:#333;background:#fff;border-radius:4px;box-shadow:0 2px 10px rgba(0,0,0,.2);opacity:0;transition:opacity .1s linear,top .1s linear,visibility .1s linear,margin .1s linear;pointer-events:none}.menu--opened[_ngcontent-%COMP%]{height:auto;visibility:visible;margin-top:0;opacity:1;pointer-events:auto}.menu--right[_ngcontent-%COMP%]{top:100%}.menu--right[_ngcontent-%COMP%], .menu--top[_ngcontent-%COMP%]{position:absolute;right:0}.menu--top[_ngcontent-%COMP%]{bottom:100%}.menu-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1;background:rgba(0,0,0,.25)}.trigger--with-arrow[_ngcontent-%COMP%]{padding-right:25px}.trigger--with-arrow[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;margin-top:-2px;right:10px;display:inline-block;padding:3px;border-width:0 2px 2px 0;border-style:solid;transform:rotate(45deg) translateY(-50%)}']}),t})()},"/X4X":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("fXoL");let i=(()=>{class t{constructor(t,e){this.resolver=t,this.injector=e,this.containers=new Map,this.componentRefs=new Map}registerContainer(t,e){this.containers.set(t,e)}putComponentToContainer(t,e,n={}){if(!this.containers.has(e))return;const r=this.resolver.resolveComponentFactory(t),i=this.containers.get(e).createComponent(r,null,this.injector);for(const o in n)n.hasOwnProperty(o)&&(i.instance[o]=n[o]);i.changeDetectorRef.detectChanges(),this.componentRefs.set(e,i)}destroyComponentFromContainer(t){this.componentRefs.has(t)&&(this.componentRefs.get(t).destroy(),this.componentRefs.delete(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(r.j),r.Qb(r.r))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},"/uUt":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return n=>n.lift(new o(t,e))}class o{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new s(t,this.compare,this.keySelector))}}class s extends r.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}},0:function(t,e,n){t.exports=n("zUnb")},"0EUg":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("bHdf");function i(){return Object(r.a)(1)}},"0IqT":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("fXoL"),i=n("/X4X");let o=(()=>{class t{constructor(t,e,n){this.name=t,this.containerRegistry=e,this.vcRef=n,this.containerRegistry.registerContainer(t,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb("ng-run-container"),r.Ib(i.a),r.Ib(r.O))},t.\u0275dir=r.Db({type:t,selectors:[["ng-template","ng-run-container",""]]}),t})()},"0njA":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("fXoL");let i=(()=>{class t{constructor(){this.width="24",this.height="24"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Cb({type:t,selectors:[["ng-run-icon"]],inputs:{name:"name",width:"width",height:"height"},decls:2,vars:3,consts:[[1,"icon"]],template:function(t,e){1&t&&(r.Wb(),r.Nb(0,"svg",0),r.Jb(1,"use"),r.Mb()),2&t&&(r.xb("width",e.width)("height",e.height),r.wb(1),r.xb("href","#icon-"+e.name))},styles:["[_nghost-%COMP%]{display:flex;align-items:center}.icon[_ngcontent-%COMP%]{fill:var(--color)}"]}),t})()},"1G5W":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("zx2A");function i(t){return e=>e.lift(new o(t))}class o{constructor(t){this.notifier=t}call(t,e){const n=new s(t),i=Object(r.c)(this.notifier,new r.a(n));return i&&!n.seenValue?(n.add(i),e.subscribe(n)):n}}class s extends r.b{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}},"1oDK":function(t,e,n){"use strict";function r(t,e){t.addCommand(monaco.KeyCode.F2,()=>{monaco.languages.typescript.getTypeScriptWorker().then(e=>{const n=t.getModel();e(n.uri).then(e=>{const r=[];r.push(e.getSyntacticDiagnostics(n.uri.toString())),r.push(e.getSemanticDiagnostics(n.uri.toString())),Promise.all(r).then(e=>{for(let r=0;r<e.length;r++)for(let i=0;i<e[r].length;i++){const o=n.getPositionAt(e[r][i].start);return t.setPosition(o),void t.revealLineInCenter(o.lineNumber)}})})})})}n.r(e),n.d(e,"plugIn",function(){return r})},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2Vo4":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("XNiG"),i=n("9ppp");class o extends r.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new i.a;return this._value}next(t){super.next(this._value=t)}}},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"30Go":function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",function(){return i}),n.d(e,"__assign",function(){return o}),n.d(e,"__rest",function(){return s}),n.d(e,"__decorate",function(){return a}),n.d(e,"__param",function(){return c}),n.d(e,"__metadata",function(){return u}),n.d(e,"__awaiter",function(){return l}),n.d(e,"__generator",function(){return h}),n.d(e,"__exportStar",function(){return d}),n.d(e,"__values",function(){return f}),n.d(e,"__read",function(){return p}),n.d(e,"__spread",function(){return g}),n.d(e,"__spreadArrays",function(){return m}),n.d(e,"__await",function(){return y}),n.d(e,"__asyncGenerator",function(){return b}),n.d(e,"__asyncDelegator",function(){return v}),n.d(e,"__asyncValues",function(){return w}),n.d(e,"__makeTemplateObject",function(){return _}),n.d(e,"__importStar",function(){return S}),n.d(e,"__importDefault",function(){return C});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function a(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function c(t,e){return function(n,r){e(n,r,t)}}function u(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function l(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r.throw(t))}catch(e){o(e)}}function c(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}c((r=r.apply(t,e||[])).next())})}function h(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function d(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function f(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function p(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function g(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t}function m(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function y(t){return this instanceof y?(this.v=t,this):new y(t)}function b(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(t){i[t]&&(r[t]=function(e){return new Promise(function(n,r){o.push([t,e,n,r])>1||a(t,e)})})}function a(t,e){try{(n=i[t](e)).value instanceof y?Promise.resolve(n.value.v).then(c,u):l(o[0][2],n)}catch(r){l(o[0][3],r)}var n}function c(t){a("next",t)}function u(t){a("throw",t)}function l(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}}function v(t){var e,n;return e={},r("next"),r("throw",function(t){throw t}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:y(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function w(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=f(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise(function(r,i){!function(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)}(r,i,(e=t[n](e)).done,e.value)})}}}function _(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function S(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function C(t){return t&&t.__esModule?t:{default:t}}},"3c/+":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("fXoL"),i=n("jhN1");let o=(()=>{class t{constructor(t){this.sanitizer=t}transform(t){return this.sanitizer.bypassSecurityTrustResourceUrl(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(i.b))},t.\u0275pipe=r.Hb({name:"safeUrl",type:t,pure:!0}),t})()},"4I5i":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})()},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new c(t,this.project,this.concurrent))}}class c extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"5roe":function(t,e,n){"use strict";n.d(e,"a",function(){return y});var r=n("Xv3O"),i=n("2Vo4"),o=n("XNiG"),s=n("xgIS"),a=n("vkgz"),c=n("1G5W"),u=n("fXoL"),l=n("ofXK");const h=["splitter",""];function d(t,e){if(1&t){const t=u.Ob();u.Nb(0,"div",2),u.Tb("mousedown",function(e){u.lc(t);const n=u.Xb().index;return u.Xb().onSeparatorMouseDown(e,n)})("touchstart",function(e){u.lc(t);const n=u.Xb().index;return u.Xb().onSeparatorMouseDown(e,n)}),u.Mb()}if(2&t){const t=u.Xb().index,e=u.Xb();u.zb("separator separator--",e.direction,""),u.rc("width","horizontal"===e.direction?e.separatorSize:"auto","px")("height","horizontal"===e.direction?"auto":e.separatorSize,"px")("order",2*t+1)}}function f(t,e){1&t&&u.sc(0,d,1,9,"div",1),2&t&&u.dc("ngIf",!e.last)}const p=["*"],g="ontouchstart"in window,m={MOVE:g?"touchmove":"mousemove",RELEASE:g?"touchend":"mouseup"};let y=(()=>{class t{constructor(t){this.elRef=t,this.direction="horizontal",this.areas$=new i.a([]),this.separatorSize=16,this.destroyed$=new o.a}get containerSize(){return this.elRef.nativeElement.getBoundingClientRect()[this.resizeProp]}get separatorsSize(){return this.separatorSize*(this.visibleAreas.length-1)}get visibleAreas(){return this.areas.filter(t=>!t.hidden)}ngAfterContentInit(){this.resizeProp="horizontal"===this.direction?"width":"height","vertical"===this.direction&&(this.elRef.nativeElement.style.flexDirection="column"),this.areas=this.areaDirs.toArray(),this.updateLayout()}updateLayout(){this.areas$.next(this.visibleAreas.map(t=>t.size/100)),this.visibleAreas.forEach((t,e)=>{t.elRef.nativeElement.style.order=(2*e).toString()}),this.updateAreasSize()}onSeparatorMouseDown(t,e){const n="horizontal"===this.direction?"pageX":"pageY",r=g?t.touches[0][n]:t[n];this.positions=this.getPositions();const i=this.positions[e+1];document.body.classList.add("dragging");const o=Object(s.a)(document,m.RELEASE).pipe(Object(a.a)(()=>document.body.classList.remove("dragging")));Object(s.a)(document,m.MOVE).pipe(Object(c.a)(o)).subscribe(t=>{let o=i+((g?t.touches[0][n]:t[n])-r)/(this.containerSize-this.separatorsSize);o=Math.max(0,Math.min(1,o)),this.calculatePositions(e+1,o)})}calculatePositions(t,e){this.positions[t]=e;for(let r=0;r<this.positions.length;r++)r<t&&(this.positions[r]=Math.min(this.positions[r],e)),r>t&&(this.positions[r]=Math.max(this.positions[r],e));const n=this.areas$.value;this.positions.forEach((t,e)=>{const r=this.positions[e+1];void 0!==n[e]&&(n[e]=(void 0===r?1:r)-t)}),this.updateAreasSize()}updateAreasSize(){const t=this.areas$.value,e=100-100*this.separatorsSize/this.containerSize;this.visibleAreas.forEach((n,r)=>{const i=e*t[r];n.size=100*t[r],n.elRef.nativeElement.style[this.resizeProp]=i+"%"})}getPositions(){return this.areas$.value.reduce((t,e,n)=>[...t,(n>0?t[n]:0)+e],[0])}ngOnDestroy(){this.destroyed$.next()}}return t.\u0275fac=function(e){return new(e||t)(u.Ib(u.l))},t.\u0275cmp=u.Cb({type:t,selectors:[["","splitter",""]],contentQueries:function(t,e,n){if(1&t&&u.Bb(n,r.a,!1),2&t){let t;u.ic(t=u.Ub())&&(e.areaDirs=t)}},inputs:{direction:["splitterDirection","direction"]},attrs:h,ngContentSelectors:p,decls:3,vars:3,consts:[["ngFor","",3,"ngForOf"],[3,"class","width","height","order","mousedown","touchstart",4,"ngIf"],[3,"mousedown","touchstart"]],template:function(t,e){1&t&&(u.cc(),u.bc(0),u.sc(1,f,1,1,"ng-template",0),u.Yb(2,"async")),2&t&&(u.wb(1),u.dc("ngForOf",u.Zb(2,1,e.areas$)))},directives:[l.l,l.m],pipes:[l.b],styles:["[_nghost-%COMP%]{display:flex;width:100%;height:100%}.separator[_ngcontent-%COMP%]{position:relative;cursor:col-resize;z-index:1;flex-shrink:0;background:var(--box-resizer-bg);border-left:1px solid var(--box-resizer-border-left-color);border-right:1px solid var(--box-resizer-border-right-color)}.separator--vertical[_ngcontent-%COMP%]{cursor:row-resize;border-left:none;border-right:none;border-top:1px solid var(--box-resizer-border-left-color);border-bottom:1px solid var(--box-resizer-border-right-color)}"],changeDetection:0}),t})()},"6Joi":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r,o=n("30Go"),s=n("q/0M"),a=n("zVF4"),c=n("x7I3"),u=i.SDK_VERSION,l=new s.Logger("@firebase/firestore"),h=function(t){return t[t.DEBUG=0]="DEBUG",t[t.ERROR=1]="ERROR",t[t.SILENT=2]="SILENT",t}({});function d(){return l.logLevel===s.LogLevel.DEBUG?h.DEBUG:l.logLevel===s.LogLevel.SILENT?h.SILENT:h.ERROR}function f(t){switch(t){case h.DEBUG:l.logLevel=s.LogLevel.DEBUG;break;case h.ERROR:l.logLevel=s.LogLevel.ERROR;break;case h.SILENT:l.logLevel=s.LogLevel.SILENT;break;default:l.error("Firestore ("+u+"): Invalid value passed to `setLogLevel`")}}function p(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(l.logLevel<=s.LogLevel.DEBUG){var i=n.map(m);l.debug.apply(l,o.__spreadArrays(["Firestore ("+u+") ["+t+"]: "+e],i))}}function g(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(l.logLevel<=s.LogLevel.ERROR){var r=e.map(m);l.error.apply(l,o.__spreadArrays(["Firestore ("+u+"): "+t],r))}}function m(t){if("string"==typeof t)return t;var e=v.getPlatform();try{return e.formatJSON(t)}catch(n){return t}}function y(t){var e="FIRESTORE ("+u+") INTERNAL ASSERTION FAILED: "+t;throw g(e),new Error(e)}function b(t,e){t||y(e)}var v=function(){function t(){}return t.setPlatform=function(e){t.platform&&y("Platform already defined"),t.platform=e},t.getPlatform=function(){return t.platform||y("Platform not set"),t.platform},t}();function w(){return v.getPlatform().emptyByteString}var _={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},S=function(t){function e(e,n){var r=t.call(this,n)||this;return r.code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return o.__extends(e,t),e}(Error);function C(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new S(_.INVALID_ARGUMENT,t)}for(var r in n.prototype=t.prototype,t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}function I(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function E(t,e){return void 0!==t?t:e}function T(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Number(n);isNaN(r)||e(r,t[n])}}function k(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function O(t){for(var e in b(null!=t&&"object"==typeof t,"isEmpty() expects object parameter."),t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function x(t,e){if(0!==e.length)throw new S(_.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+$(e.length,"argument")+".")}function A(t,e,n){if(e.length!==n)throw new S(_.INVALID_ARGUMENT,"Function "+t+"() requires "+$(n,"argument")+", but was called with "+$(e.length,"argument")+".")}function N(t,e,n){if(e.length<n)throw new S(_.INVALID_ARGUMENT,"Function "+t+"() requires at least "+$(n,"argument")+", but was called with "+$(e.length,"argument")+".")}function M(t,e,n,r){if(e.length<n||e.length>r)throw new S(_.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+$(e.length,"argument")+".")}function D(t,e,n,r){if(!(e instanceof Array)||e.length<r)throw new S(_.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" argument to be an array with at least "+$(r,"element")+".")}function P(t,e,n,r){V(t,e,K(n)+" argument",r)}function R(t,e,n,r){void 0!==r&&P(t,e,n,r)}function j(t,e,n,r){V(t,e,n+" option",r)}function L(t,e,n,r){void 0!==r&&j(t,e,n,r)}function F(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var o=[],s=0,a=i;s<a.length;s++){var c=a[s];if(c===r)return;o.push(B(c))}var u=B(r);throw new S(_.INVALID_ARGUMENT,"Invalid value "+u+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,r,i)}function U(t,e,n,r){if(!e.some(function(t){return t===r}))throw new S(_.INVALID_ARGUMENT,"Invalid value "+B(r)+" provided to function "+t+"() for its "+K(n)+" argument. Acceptable values: "+e.join(", "))}function V(t,e,n,r){if(!("object"===e?q(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=B(r);throw new S(_.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function q(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function B(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":y("Unknown wrong type: "+typeof t)}function z(t,e,n){if(void 0===n)throw new S(_.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+K(e)+" argument, but it was undefined.")}function W(t,e,n){k(e,function(e,r){if(n.indexOf(e)<0)throw new S(_.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))})}function H(t,e,n,r){var i=B(r);return new S(_.INVALID_ARGUMENT,"Function "+t+"() requires its "+K(n)+" argument to be a "+e+", but it was: "+i)}function K(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function $(t,e){return t+" "+e+(1===t?"":"s")}var Q=function(){function t(){}return t.newId=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",n=0;n<20;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return b(20===e.length,"Invalid auto ID: "+e),e},t}();function G(t,e){return t<e?-1:t>e?1:0}function X(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].isEqual(e[n]))return!1;return!0}function Y(t){return t+"\0"}function Z(){if("undefined"==typeof Uint8Array)throw new S(_.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function J(){if(!v.getPlatform().base64Available)throw new S(_.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var tt=function(){function t(t){J(),this._binaryString=t}return t.fromBase64String=function(e){A("Blob.fromBase64String",arguments,1),P("Blob.fromBase64String","string",1,e),J();try{var n=v.getPlatform().atob(e);return new t(n)}catch(r){throw new S(_.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+r)}},t.fromUint8Array=function(e){if(A("Blob.fromUint8Array",arguments,1),Z(),!(e instanceof Uint8Array))throw H("Blob.fromUint8Array","Uint8Array",1,e);var n=Array.prototype.map.call(e,function(t){return String.fromCharCode(t)}).join("");return new t(n)},t.prototype.toBase64=function(){return A("Blob.toBase64",arguments,0),J(),v.getPlatform().btoa(this._binaryString)},t.prototype.toUint8Array=function(){A("Blob.toUint8Array",arguments,0),Z();for(var t=new Uint8Array(this._binaryString.length),e=0;e<this._binaryString.length;e++)t[e]=this._binaryString.charCodeAt(e);return t},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._binaryString===t._binaryString},t.prototype._compareTo=function(t){return G(this._binaryString,t._binaryString)},t}(),et=C(tt,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),nt=function(){return function(t,e,n,r,i){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i}}(),rt="(default)",it=function(){function t(t,e){this.projectId=t,this.database=e||rt}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return this.database===rt},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.compareTo=function(t){return G(this.projectId,t.projectId)||G(this.database,t.database)},t}(),ot=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.setPreviousValue(t)},this.writeNewSequenceNumber=function(t){return e.writeSequenceNumber(t)})}return t.prototype.setPreviousValue=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(t),t},t.INVALID=-1,t}(),st="__name__",at=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&y("offset "+e+" out of range "+t.length),void 0===n?n=t.length-e:n>t.length-e&&y("length "+n+" out of range "+(t.length-e)),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return b(this.length>=(t=void 0===t?1:t),"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return b(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return b(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return b(t<this.length,"Index out of range"),this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),ct=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(t){if(t.indexOf("//")>=0)throw new S(_.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter(function(t){return t.length>0}))},e.EMPTY_PATH=new e([]),e}(at),ut=/^[_a-zA-Z][_a-zA-Z0-9]*$/,lt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return ut.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&this.get(0)===st},e.keyField=function(){return new e([st])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new S(_.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new S(_.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var c=t[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new S(_.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=c,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new S(_.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.EMPTY_PATH=new e([]),e}(at),ht=function(){function t(e){this.path=e,b(t.isDocumentKey(e),"Invalid DocumentKey with an odd number of segments: "+e.toArray().join("/"))}return t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===ct.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return ct.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new ct(e.slice()))},t.fromPathString=function(e){return new t(ct.fromString(e))},t.EMPTY=new t(new ct([])),t}(),dt=function(){return function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}}(),ft=function(t){return t.All="all",t.ListenStreamIdle="listen_stream_idle",t.ListenStreamConnectionBackoff="listen_stream_connection_backoff",t.WriteStreamIdle="write_stream_idle",t.WriteStreamConnectionBackoff="write_stream_connection_backoff",t.OnlineStateTimeout="online_state_timeout",t.ClientMetadataRefresh="client_metadata_refresh",t.LruGarbageCollection="lru_garbage_collection",t.RetryTransaction="retry_transaction",t}({}),pt=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new dt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new S(_.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}(),gt=function(){function t(){this.tail=Promise.resolve(),this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.timerIdsToSkip=[]}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._isShuttingDown},enumerable:!0,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenAfterShutdown=function(t){this.verifyNotFailed(),this.enqueueInternal(t)},t.prototype.enqueueEvenAfterShutdown=function(t){return this.verifyNotFailed(),this.enqueueInternal(t)},t.prototype.enqueueAndInitiateShutdown=function(t){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(e){switch(e.label){case 0:return this.verifyNotFailed(),this._isShuttingDown?[3,2]:(this._isShuttingDown=!0,[4,this.enqueueEvenAfterShutdown(t)]);case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.enqueue=function(t){return this.verifyNotFailed(),this._isShuttingDown?new Promise(function(t){}):this.enqueueInternal(t)},t.prototype.enqueueInternal=function(t){var e=this,n=this.tail.then(function(){return e.operationInProgress=!0,t().catch(function(t){e.failure=t,e.operationInProgress=!1;var n=t.stack||t.message||"";throw g("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout(function(){throw t},0),t}).then(function(t){return e.operationInProgress=!1,t})});return this.tail=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.verifyNotFailed(),b(e>=0,"Attempted to schedule an operation with a negative delay of "+e),this.timerIdsToSkip.indexOf(t)>-1&&(e=0);var i=pt.createAndSchedule(this,t,e,n,function(t){return r.removeDelayedOperation(t)});return this.delayedOperations.push(i),i},t.prototype.verifyNotFailed=function(){this.failure&&y("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},t.prototype.verifyOperationInProgress=function(){b(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},t.prototype.drain=function(){return this.enqueueEvenAfterShutdown(function(){return Promise.resolve()})},t.prototype.containsDelayedOperation=function(t){for(var e=0,n=this.delayedOperations;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.runDelayedOperationsEarly=function(t){var e=this;return this.drain().then(function(){b(t===ft.All||e.containsDelayedOperation(t),"Attempted to drain to missing operation "+t),e.delayedOperations.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),t!==ft.All&&i.timerId===t)break}return e.drain()})},t.prototype.skipDelaysForTimerId=function(t){this.timerIdsToSkip.push(t)},t.prototype.removeDelayedOperation=function(t){var e=this.delayedOperations.indexOf(t);b(e>=0,"Delayed operation not found."),this.delayedOperations.splice(e,1)},t}(),mt="\x01";function yt(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=vt(e)),e=bt(t.get(n),e);return vt(e)}function bt(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case mt:n+="\x01\x11";break;default:n+=o}}return n}function vt(t){return t+mt+"\x01"}function wt(t){var e=t.length;if(b(e>=2,"Invalid path "+t),2===e)return b(t.charAt(0)===mt&&"\x01"===t.charAt(1),"Non-empty path "+t+" had length 2"),ct.EMPTY_PATH;for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf(mt,o);switch((s<0||s>n)&&y('Invalid encoded resource path: "'+t+'"'),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),c=void 0;0===i.length?c=a:(c=i+=a,i=""),r.push(c);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:y('Invalid encoded resource path: "'+t+'"')}o=s+2}return new ct(r)}var _t=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new S(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new S(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new S(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new S(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?G(this.nanoseconds,t.nanoseconds):G(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t}(),St=function(){function t(t){this.timestamp=t}return t.fromMicroseconds=function(e){var n=Math.floor(e/1e6);return new t(new _t(n,e%1e6*1e3))},t.fromTimestamp=function(e){return new t(e)},t.forDeletedDoc=function(){return t.MIN},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t.MIN=new t(new _t(0,0)),t}(),Ct=function(){function t(t,e){this.comparator=t,this.root=e||Et.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Et.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Et.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new It(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new It(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new It(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new It(this.root,t,this.comparator,!0)},t}(),It=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){b(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Et=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw y("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw y("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check();if(t!==this.right.check())throw y("Black depths differ");return t+(this.isRed()?0:1)},t.EMPTY=null,t.RED=!0,t.BLACK=!1,t}(),Tt=function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw y("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw y("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw y("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw y("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw y("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Et(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}();Et.EMPTY=new Tt;var kt=function(){function t(t){this.comparator=t,this.data=new Ct(this.comparator)}return t.fromMapKeys=function(e){var n=new t(e.comparator);return e.forEach(function(t){n=n.add(t)}),n},t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Ot(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Ot(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Ot=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),xt=new Ct(ht.comparator);function At(){return xt}function Nt(){return At()}var Mt=new Ct(ht.comparator);function Dt(){return Mt}var Pt=new Ct(ht.comparator);function Rt(){return Pt}var jt=new kt(ht.comparator);function Lt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=jt,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Ft=new kt(G);function Ut(){return Ft}var Vt=-1,qt=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r,b(r.length>0,"Cannot create an empty mutation batch")}return t.prototype.applyToRemoteDocument=function(t,e,n){e&&b(e.key.isEqual(t),"applyToRemoteDocument: key "+t+" should match maybeDoc key\n        "+e.key);var r=n.mutationResults;b(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=o.applyToRemoteDocument(e,r[i]))}return e},t.prototype.applyToLocalView=function(t,e){e&&b(e.key.isEqual(t),"applyToLocalDocument: key "+t+" should match maybeDoc key\n        "+e.key);for(var n=0,r=this.baseMutations;n<r.length;n++)(a=r[n]).key.isEqual(t)&&(e=a.applyToLocalView(e,e,this.localWriteTime));for(var i=e,o=0,s=this.mutations;o<s.length;o++){var a;(a=s[o]).key.isEqual(t)&&(e=a.applyToLocalView(e,i,this.localWriteTime))}return e},t.prototype.applyToLocalDocumentSet=function(t){var e=this,n=t;return this.mutations.forEach(function(r){var i=e.applyToLocalView(r.key,t.get(r.key));i&&(n=n.insert(r.key,i))}),n},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Lt())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&X(this.mutations,t.mutations)&&X(this.baseMutations,t.baseMutations)},t}(),Bt=function(){function t(t,e,n,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.streamToken=r,this.docVersions=i}return t.from=function(e,n,r,i){b(e.mutations.length===r.length,"Mutations sent "+e.mutations.length+" must equal results received "+r.length);for(var o=Rt(),s=e.mutations,a=0;a<s.length;a++)o=o.insert(s[a].key,r[a].version);return new t(e,n,r,i,o)},t}(),zt=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&y("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(r){return t.reject(r)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),Wt="SimpleDb",Ht=function(){function t(e){this.db=e,12.2===t.getIOSVersion(a.getUA())&&g("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.openOrCreate=function(e,n,r){return b(t.isAvailable(),"IndexedDB not supported in current environment."),p(Wt,"Opening database:",e),new zt(function(i,o){var s=window.indexedDB.open(e,n);s.onsuccess=function(e){i(new t(e.target.result))},s.onblocked=function(){o(new S(_.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=function(t){var e=t.target.error;o("VersionError"===e.name?new S(_.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):e)},s.onupgradeneeded=function(t){p(Wt,'Database "'+e+'" requires upgrade from version:',t.oldVersion),r.createOrUpgrade(t.target.result,s.transaction,t.oldVersion,Je).next(function(){p(Wt,"Database upgrade to version "+Je+" complete")})}}).toPromise()},t.delete=function(t){return p(Wt,"Removing database:",t),Gt(window.indexedDB.deleteDatabase(t)).toPromise()},t.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(t.isMockPersistence())return!0;if(void 0===window.navigator)return!1;var e=a.getUA(),n=t.getIOSVersion(e),r=0<n&&n<10,i=t.getAndroidVersion(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.isMockPersistence=function(){return"undefined"!=typeof process&&"YES"===process.env.USE_MOCK_PERSISTENCE},t.getStore=function(t,e){return t.store(e)},t.getIOSVersion=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.getAndroidVersion=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.setVersionChangeListener=function(t){this.db.onversionchange=function(e){return t(e)}},t.prototype.runTransaction=function(t,e,n){return o.__awaiter(this,void 0,void 0,function(){var r,i,s,a,c,u;return o.__generator(this,function(l){switch(l.label){case 0:r=t.startsWith("readonly"),i=t.endsWith("idempotent"),s=0,a=function(){var t,a,u,l;return o.__generator(this,function(o){switch(o.label){case 0:++s,t=$t.open(c.db,r?"readonly":"readwrite",e),o.label=1;case 1:return o.trys.push([1,3,,4]),(a=n(t).catch(function(e){return t.abort(e),zt.reject(e)}).toPromise()).catch(function(){}),[4,t.completionPromise];case 2:return o.sent(),[2,{value:a}];case 3:return u=o.sent(),p(Wt,"Transaction failed with error: %s. Retrying: %s.",u.message,l=i&&"FirebaseError"!==u.name&&s<3),l?[3,4]:[2,{value:Promise.reject(u)}];case 4:return[2]}})},c=this,l.label=1;case 1:return[5,a()];case 2:return"object"==typeof(u=l.sent())?[2,u.value]:[3,1];case 3:return[2]}})})},t.prototype.close=function(){this.db.close()},t}(),Kt=function(){function t(t){this.dbCursor=t,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.dbCursor=t},enumerable:!0,configurable:!0}),t.prototype.done=function(){this.shouldStop=!0},t.prototype.skip=function(t){this.nextKey=t},t.prototype.delete=function(){return Gt(this.dbCursor.delete())},t}(),$t=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this.completionDeferred=new dt,this.transaction.oncomplete=function(){e.completionDeferred.resolve()},this.transaction.onabort=function(){t.error?e.completionDeferred.reject(t.error):e.completionDeferred.resolve()},this.transaction.onerror=function(t){var n=Yt(t.target.error);e.completionDeferred.reject(n)}}return t.open=function(e,n,r){return new t(e.transaction(r,n))},Object.defineProperty(t.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){t&&this.completionDeferred.reject(t),this.aborted||(p(Wt,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return b(!!e,"Object store not part of transaction: "+t),new Qt(e)},t}(),Qt=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(p(Wt,"PUT",this.store.name,t,e),n=this.store.put(e,t)):(p(Wt,"PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Gt(n)},t.prototype.add=function(t){return p(Wt,"ADD",this.store.name,t,t),Gt(this.store.add(t))},t.prototype.get=function(t){var e=this;return Gt(this.store.get(t)).next(function(n){return void 0===n&&(n=null),p(Wt,"GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return p(Wt,"DELETE",this.store.name,t),Gt(this.store.delete(t))},t.prototype.count=function(){return p(Wt,"COUNT",this.store.name),Gt(this.store.count())},t.prototype.loadAll=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.iterateCursor(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.deleteAll=function(t,e){p(Wt,"DELETE ALL",this.store.name);var n=this.options(t,e);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,function(t,e,n){return n.delete()})},t.prototype.iterate=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.iterateCursor(r,e)},t.prototype.iterateSerial=function(t){var e=this.cursor({});return new zt(function(n,r){e.onerror=function(t){var e=Yt(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.iterateCursor=function(t,e){var n=[];return new zt(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Kt(i),s=e(i.primaryKey,i.value,o);if(s instanceof zt){var a=s.catch(function(t){return o.done(),zt.reject(t)});n.push(a)}o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}else r()}}).next(function(){return zt.waitFor(n)})},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:(b(void 0===e,"3rd argument must not be defined if 2nd is a range."),e=t)),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.keysOnly?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Gt(t){return new zt(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Yt(t.target.error);n(e)}})}var Xt=!1;function Yt(t){var e=Ht.getIOSVersion(a.getUA());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new S("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Xt||(Xt=!0,setTimeout(function(){throw r},0)),r}}return t}var Zt=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}return t.forUser=function(e,n,r,i){return b(""!==e.uid,"UserID must not be an empty string."),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ne(t).iterate({index:on.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.acknowledgeBatch=function(t,e,n){return this.getMutationQueueMetadata(t).next(function(e){return e.lastStreamToken=ee(n),ie(t).put(e)})},t.prototype.getLastStreamToken=function(t){return this.getMutationQueueMetadata(t).next(function(t){return t.lastStreamToken})},t.prototype.setLastStreamToken=function(t,e){return this.getMutationQueueMetadata(t).next(function(n){return n.lastStreamToken=ee(e),ie(t).put(n)})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=re(t),s=ne(t);return s.add({}).next(function(a){b("number"==typeof a,"Auto-generated key is not a number");for(var c=new qt(a,e,n,r),u=i.serializer.toDbMutationBatch(i.userId,c),l=[],h=new kt(function(t,e){return G(t.canonicalString(),e.canonicalString())}),d=0,f=r;d<f.length;d++){var p=f[d],g=sn.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(u)),l.push(o.put(g,sn.PLACEHOLDER))}return h.forEach(function(e){l.push(i.indexManager.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.documentKeysByBatchId[a]=c.keys()}),zt.waitFor(l).next(function(){return c})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return ne(t).get(e).next(function(t){return t?(b(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),n.serializer.fromDbMutationBatch(t)):null})},t.prototype.lookupMutationKeys=function(t,e){var n=this;return this.documentKeysByBatchId[e]?zt.resolve(this.documentKeysByBatchId[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.documentKeysByBatchId[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return ne(t).iterate({index:on.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(b(e.batchId>=r,"Should have found mutation after "+r),o=n.serializer.fromDbMutationBatch(e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=Vt;return ne(t).iterate({index:on.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,Vt],[this.userId,Number.POSITIVE_INFINITY]);return ne(t).loadAll(on.userMutationsIndex,n).next(function(t){return t.map(function(t){return e.serializer.fromDbMutationBatch(t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=sn.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return re(t).iterate({range:i},function(r,i,s){var a=r[0],c=r[2],u=wt(r[1]);if(a===n.userId&&e.path.isEqual(u))return ne(t).get(c).next(function(t){if(!t)throw y("Dangling document-mutation reference found: "+r+" which points to "+c);b(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+c),o.push(n.serializer.fromDbMutationBatch(t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new kt(G),i=[];return e.forEach(function(e){var o=sn.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=re(t).iterate({range:s},function(t,i,o){var s=t[0],a=t[2],c=wt(t[1]);s===n.userId&&e.path.isEqual(c)?r=r.add(a):o.done()});i.push(a)}),zt.waitFor(i).next(function(){return n.lookupMutationBatches(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this;b(!e.isDocumentQuery(),"Document queries shouldn't go down this path"),b(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=e.path,i=r.length+1,o=sn.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new kt(G);return re(t).iterate({range:s},function(t,e,o){var s=t[0],c=t[2],u=wt(t[1]);s===n.userId&&r.isPrefixOf(u)?u.length===i&&(a=a.add(c)):o.done()}).next(function(){return n.lookupMutationBatches(t,a)})},t.prototype.lookupMutationBatches=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(ne(t).get(e).next(function(t){if(null===t)throw y("Dangling document-mutation reference found, which points to "+e);b(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),r.push(n.serializer.fromDbMutationBatch(t))}))}),zt.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return te(t.simpleDbTransaction,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.removeCachedMutationKeys(e.batchId)}),zt.forEach(r,function(e){return n.referenceDelegate.removeMutationReference(t,e)})})},t.prototype.removeCachedMutationKeys=function(t){delete this.documentKeysByBatchId[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return zt.resolve();var r=IDBKeyRange.lowerBound(sn.prefixForUser(e.userId)),i=[];return re(t).iterate({range:r},function(t,n,r){if(t[0]===e.userId){var o=wt(t[1]);i.push(o)}else r.done()}).next(function(){b(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map(function(t){return t.canonicalString()}))})})},t.prototype.containsKey=function(t,e){return Jt(t,this.userId,e)},t.prototype.getMutationQueueMetadata=function(t){var e=this;return ie(t).get(this.userId).next(function(t){return t||new rn(e.userId,Vt,"")})},t}();function Jt(t,e,n){var r=sn.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return re(t).iterate({range:o,keysOnly:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function te(t,e,n){var r=t.store(on.store),i=t.store(sn.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,c=r.iterate({range:s},function(t,e,n){return a++,n.delete()});o.push(c.next(function(){b(1===a,"Dangling document-mutation reference found: Missing batch "+n.batchId)}));for(var u=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=sn.key(e,d.key.path,n.batchId);o.push(i.delete(f)),u.push(d.key)}return zt.waitFor(o).next(function(){return u})}function ee(t){return t instanceof Uint8Array?(b(Ht.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence."),t.toString()):t}function ne(t){return Fn.getStore(t,on.store)}function re(t){return Fn.getStore(t,sn.store)}function ie(t){return Fn.getStore(t,rn.store)}var oe=function(t){return t[t.QueryCache=0]="QueryCache",t[t.SyncEngine=1]="SyncEngine",t}({}),se=function(){function t(t,e){this.generatorId=t,b((1&t)===t,"Generator ID "+t+" contains more than 1 reserved bits"),this.seek(void 0!==e?e:this.generatorId)}return t.prototype.next=function(){var t=this.nextId;return this.nextId+=2,t},t.prototype.after=function(t){return this.seek(t+2),this.next()},t.prototype.seek=function(t){b((1&t)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=t},t.forQueryCache=function(){return new t(oe.QueryCache,2)},t.forSyncEngine=function(){return new t(oe.SyncEngine)},t}(),ae=function(){function t(t,e){this.referenceDelegate=t,this.serializer=e,this.targetIdGenerator=se.forQueryCache()}return t.prototype.allocateTargetId=function(t){var e=this;return this.retrieveMetadata(t).next(function(n){return n.highestTargetId=e.targetIdGenerator.after(n.highestTargetId),e.saveMetadata(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.retrieveMetadata(t).next(function(t){return St.fromTimestamp(new _t(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return le(t.simpleDbTransaction)},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.retrieveMetadata(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.saveMetadata(t,i)})},t.prototype.addQueryData=function(t,e){var n=this;return this.saveQueryData(t,e).next(function(){return n.retrieveMetadata(t).next(function(r){return r.targetCount+=1,n.updateMetadataFromQueryData(e,r),n.saveMetadata(t,r)})})},t.prototype.updateQueryData=function(t,e){return this.saveQueryData(t,e)},t.prototype.removeQueryData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return ce(t).delete(e.targetId)}).next(function(){return n.retrieveMetadata(t)}).next(function(e){return b(e.targetCount>0,"Removing from an empty query cache"),e.targetCount-=1,n.saveMetadata(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return ce(t).iterate(function(s,a){var c=r.serializer.fromDbTarget(a);c.sequenceNumber<=e&&null===n.get(c.targetId)&&(i++,o.push(r.removeQueryData(t,c)))}).next(function(){return zt.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){var n=this;return ce(t).iterate(function(t,r){var i=n.serializer.fromDbTarget(r);e(i)})},t.prototype.retrieveMetadata=function(t){return ue(t.simpleDbTransaction)},t.prototype.saveMetadata=function(t,e){return(n=t,Fn.getStore(n,fn.store)).put(fn.key,e);var n},t.prototype.saveQueryData=function(t,e){return ce(t).put(this.serializer.toDbTarget(e))},t.prototype.updateMetadataFromQueryData=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getQueryCount=function(t){return this.retrieveMetadata(t).next(function(t){return t.targetCount})},t.prototype.getQueryData=function(t,e){var n=this,r=e.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return ce(t).iterate({range:i,index:hn.queryTargetsIndexName},function(t,r,i){var s=n.serializer.fromDbTarget(r);e.isEqual(s.query)&&(o=s,i.done())}).next(function(){return o})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=he(t);return e.forEach(function(e){var s=yt(e.path);i.push(o.put(new dn(n,s))),i.push(r.referenceDelegate.addReference(t,e))}),zt.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=he(t);return zt.forEach(e,function(e){var o=yt(e.path);return zt.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=he(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=he(t),i=Lt();return r.iterate({range:n,keysOnly:!0},function(t,e,n){var r=wt(t[1]),o=new ht(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=yt(e.path),r=IDBKeyRange.bound([n],[Y(n)],!1,!0),i=0;return he(t).iterate({index:dn.documentTargetsIndex,keysOnly:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.getQueryDataForTarget=function(t,e){var n=this;return ce(t).get(e).next(function(t){return t?n.serializer.fromDbTarget(t):null})},t}();function ce(t){return Fn.getStore(t,hn.store)}function ue(t){return Ht.getStore(t,fn.store).get(fn.key).next(function(t){return b(null!==t,"Missing metadata row."),t})}function le(t){return ue(t).next(function(t){return t.highestListenSequenceNumber})}function he(t){return Fn.getStore(t,dn.store)}var de=function(){function t(t){this.fields=t}return t.fromSet=function(e){return new t(e)},t.fromArray=function(e){var n=new kt(lt.comparator);return e.forEach(function(t){return n=n.add(t)}),new t(n)},t.prototype.covers=function(t){var e=!1;return this.fields.forEach(function(n){n.isPrefixOf(t)&&(e=!0)}),e},t.prototype.isEqual=function(t){return this.fields.isEqual(t.fields)},t}(),fe=function(){function t(t,e){this.field=t,this.transform=e}return t.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},t}(),pe=function(){return function(t,e){this.version=t,this.transformResults=e}}(),ge=function(t){return t[t.Set=0]="Set",t[t.Patch=1]="Patch",t[t.Transform=2]="Transform",t[t.Delete=3]="Delete",t}({}),me=function(){function t(t,e){this.updateTime=t,this.exists=e,b(void 0===t||void 0===e,'Precondition can specify "exists" or "updateTime" but not both')}return t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),t.prototype.isValidFor=function(t){return void 0!==this.updateTime?t instanceof qe&&t.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===t instanceof qe:(b(this.isNone,"Precondition should be empty"),!0)},t.prototype.isEqual=function(t){return n=t.updateTime,!((null!=(e=this.updateTime)?!n||!e.isEqual(n):e!==n)||this.exists!==t.exists);var e,n},t.NONE=new t,t}(),ye=function(){function t(){}return t.prototype.verifyKeyMatches=function(t){null!=t&&b(t.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},t.getPostMutationVersion=function(t){return t instanceof qe?t.version:St.MIN},t}(),be=function(t){function e(e,n,r){var i=t.call(this)||this;return i.key=e,i.value=n,i.precondition=r,i.type=ge.Set,i}return o.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){return this.verifyKeyMatches(t),b(null==e.transformResults,"Transform results received by SetMutation."),new qe(this.key,e.version,{hasCommittedMutations:!0},this.value)},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=ye.getPostMutationVersion(t);return new qe(this.key,r,{hasLocalMutations:!0},this.value)},e.prototype.extractBaseValue=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.precondition.isEqual(t.precondition)},e}(ye),ve=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.key=e,o.data=n,o.fieldMask=r,o.precondition=i,o.type=ge.Patch,o}return o.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),b(null==e.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(t))return new ze(this.key,e.version);var n=this.patchDocument(t);return new qe(this.key,e.version,{hasCommittedMutations:!0},n)},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=ye.getPostMutationVersion(t),i=this.patchDocument(t);return new qe(this.key,r,{hasLocalMutations:!0},i)},e.prototype.extractBaseValue=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.fieldMask.isEqual(t.fieldMask)&&this.precondition.isEqual(t.precondition)},e.prototype.patchDocument=function(t){var e;return e=t instanceof qe?t.data():Fe.EMPTY,this.patchObject(e)},e.prototype.patchObject=function(t){var e=this;return this.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=e.data.field(n);t=null!==r?t.set(n,r):t.delete(n)}}),t},e}(ye),we=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.fieldTransforms=n,r.type=ge.Transform,r.precondition=me.exists(!0),r}return o.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),b(null!=e.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(t))return new ze(this.key,e.version);var n=this.requireDocument(t),r=this.serverTransformResults(t,e.transformResults),i=e.version,o=this.transformObject(n.data(),r);return new qe(this.key,i,{hasCommittedMutations:!0},o)},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=this.requireDocument(t),i=this.localTransformResults(n,t,e),o=this.transformObject(r.data(),i);return new qe(this.key,r.version,{hasLocalMutations:!0},o)},e.prototype.extractBaseValue=function(t){for(var e=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=t instanceof qe?t.field(i.field):void 0,s=i.transform.computeBaseValue(o||null);null!=s&&(e=null==e?Fe.EMPTY.set(i.field,s):e.set(i.field,s))}return e},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&X(this.fieldTransforms,t.fieldTransforms)&&this.precondition.isEqual(t.precondition)},e.prototype.requireDocument=function(t){b(t instanceof qe,"Unknown MaybeDocument type "+t);var e=t;return b(e.key.isEqual(this.key),"Can only transform a document with the same key"),e},e.prototype.serverTransformResults=function(t,e){var n=[];b(this.fieldTransforms.length===e.length,"server transform result count ("+e.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<e.length;r++){var i=this.fieldTransforms[r],o=i.transform,s=null;t instanceof qe&&(s=t.field(i.field)),n.push(o.applyToRemoteDocument(s,e[r]))}return n},e.prototype.localTransformResults=function(t,e,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var s=o[i],a=s.transform,c=null;e instanceof qe&&(c=e.field(s.field)),null===c&&n instanceof qe&&(c=n.field(s.field)),r.push(a.applyToLocalView(c,t))}return r},e.prototype.transformObject=function(t,e){b(e.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++)t=t.set(this.fieldTransforms[n].field,e[n]);return t},e}(ye),_e=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.precondition=n,r.type=ge.Delete,r}return o.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){return this.verifyKeyMatches(t),b(null==e.transformResults,"Transform results received by DeleteMutation."),new Be(this.key,e.version,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){return this.verifyKeyMatches(t),this.precondition.isValidFor(t)?(t&&b(t.key.isEqual(this.key),"Can only apply mutation to document with same key"),new Be(this.key,St.forDeletedDoc())):t},e.prototype.extractBaseValue=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.precondition.isEqual(t.precondition)},e}(ye),Se=function(t){return t[t.NullValue=0]="NullValue",t[t.BooleanValue=1]="BooleanValue",t[t.NumberValue=2]="NumberValue",t[t.TimestampValue=3]="TimestampValue",t[t.StringValue=4]="StringValue",t[t.BlobValue=5]="BlobValue",t[t.RefValue=6]="RefValue",t[t.GeoPointValue=7]="GeoPointValue",t[t.ArrayValue=8]="ArrayValue",t[t.ObjectValue=9]="ObjectValue",t}({}),Ce=function(t){return t[t.Default=0]="Default",t[t.Estimate=1]="Estimate",t[t.Previous=2]="Previous",t}({}),Ie=function(){function t(t,e){this.serverTimestampBehavior=t,this.timestampsInSnapshots=e}return t.fromSnapshotOptions=function(e,n){switch(e.serverTimestamps){case"estimate":return new t(Ce.Estimate,n);case"previous":return new t(Ce.Previous,n);case"none":case void 0:return new t(Ce.Default,n);default:return y("fromSnapshotOptions() called with invalid options.")}},t}(),Ee=function(){function t(){}return t.prototype.toString=function(){var t=this.value();return null===t?"null":t.toString()},t.prototype.defaultCompareTo=function(t){return b(this.typeOrder!==t.typeOrder,"Default compareTo should not be used for values of same type."),G(this.typeOrder,t.typeOrder)},t}(),Te=function(t){function e(){var e=t.call(this)||this;return e.typeOrder=Se.NullValue,e.internalValue=null,e}return o.__extends(e,t),e.prototype.value=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e},e.prototype.compareTo=function(t){return t instanceof e?0:this.defaultCompareTo(t)},e.INSTANCE=new e,e}(Ee),ke=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=Se.BooleanValue,n}return o.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?G(this,t):this.defaultCompareTo(t)},e.of=function(t){return t?e.TRUE:e.FALSE},e.TRUE=new e(!0),e.FALSE=new e(!1),e}(Ee),Oe=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=Se.NumberValue,n}return o.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.compareTo=function(t){return t instanceof e?(n=this.internalValue)<(r=t.internalValue)?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1:this.defaultCompareTo(t);var n,r},e}(Ee);function xe(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}var Ae=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&xe(this.internalValue,t.internalValue)},e}(Oe),Ne=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&xe(this.internalValue,t.internalValue)},e.NAN=new e(NaN),e.POSITIVE_INFINITY=new e(1/0),e.NEGATIVE_INFINITY=new e(-1/0),e}(Oe),Me=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=Se.StringValue,n}return o.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?G(this.internalValue,t.internalValue):this.defaultCompareTo(t)},e}(Ee),De=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=Se.TimestampValue,n}return o.__extends(e,t),e.prototype.value=function(t){return!t||t.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):t instanceof Pe?-1:this.defaultCompareTo(t)},e}(Ee),Pe=function(t){function e(e,n){var r=t.call(this)||this;return r.localWriteTime=e,r.previousValue=n,r.typeOrder=Se.TimestampValue,r}return o.__extends(e,t),e.prototype.value=function(t){return t&&t.serverTimestampBehavior===Ce.Estimate?new De(this.localWriteTime).value(t):t&&t.serverTimestampBehavior===Ce.Previous&&this.previousValue?this.previousValue.value(t):null},e.prototype.isEqual=function(t){return t instanceof e&&this.localWriteTime.isEqual(t.localWriteTime)},e.prototype.compareTo=function(t){return t instanceof e?this.localWriteTime._compareTo(t.localWriteTime):t instanceof De?1:this.defaultCompareTo(t)},e.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},e}(Ee),Re=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=Se.BlobValue,n}return o.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(Ee),je=function(t){function e(e,n){var r=t.call(this)||this;return r.databaseId=e,r.key=n,r.typeOrder=Se.RefValue,r}return o.__extends(e,t),e.prototype.value=function(t){return this.key},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.databaseId.isEqual(t.databaseId)},e.prototype.compareTo=function(t){if(t instanceof e){var n=this.databaseId.compareTo(t.databaseId);return 0!==n?n:ht.comparator(this.key,t.key)}return this.defaultCompareTo(t)},e}(Ee),Le=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=Se.GeoPointValue,n}return o.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(Ee),Fe=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=Se.ObjectValue,n}return o.__extends(e,t),e.prototype.value=function(t){var e={};return this.internalValue.inorderTraversal(function(n,r){e[n]=r.value(t)}),e},e.prototype.forEach=function(t){this.internalValue.inorderTraversal(t)},e.prototype.isEqual=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),r=t.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext();if(i.key!==o.key||!i.value.isEqual(o.value))return!1}return!n.hasNext()&&!r.hasNext()}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),r=t.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext(),s=G(i.key,o.key)||i.value.compareTo(o.value);if(s)return s}return G(n.hasNext(),r.hasNext())}return this.defaultCompareTo(t)},e.prototype.set=function(t,n){if(b(!t.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===t.length)return this.setChild(t.firstSegment(),n);var r=this.child(t.firstSegment());r instanceof e||(r=e.EMPTY);var i=r.set(t.popFirst(),n);return this.setChild(t.firstSegment(),i)},e.prototype.delete=function(t){if(b(!t.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===t.length)return new e(this.internalValue.remove(t.firstSegment()));var n=this.child(t.firstSegment());if(n instanceof e){var r=n.delete(t.popFirst());return new e(this.internalValue.insert(t.firstSegment(),r))}return this},e.prototype.contains=function(t){return null!==this.field(t)},e.prototype.field=function(t){b(!t.isEmpty(),"Can't get field of empty path");var n=this;return t.forEach(function(t){n=n instanceof e?n.internalValue.get(t):null}),n},e.prototype.fieldMask=function(){var t=new kt(lt.comparator);return this.internalValue.forEach(function(n,r){var i=new lt([n]);if(r instanceof e){var o=r.fieldMask().fields;o.isEmpty()?t=t.add(i):o.forEach(function(e){t=t.add(i.child(e))})}else t=t.add(i)}),de.fromSet(t)},e.prototype.toString=function(){return this.internalValue.toString()},e.prototype.child=function(t){return this.internalValue.get(t)||void 0},e.prototype.setChild=function(t,n){return new e(this.internalValue.insert(t,n))},e.EMPTY=new e(new Ct(G)),e}(Ee),Ue=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=Se.ArrayValue,n}return o.__extends(e,t),e.prototype.value=function(t){return this.internalValue.map(function(e){return e.value(t)})},e.prototype.contains=function(t){for(var e=0,n=this.internalValue;e<n.length;e++)if(n[e].isEqual(t))return!0;return!1},e.prototype.forEach=function(t){this.internalValue.forEach(t)},e.prototype.isEqual=function(t){if(t instanceof e){if(this.internalValue.length!==t.internalValue.length)return!1;for(var n=0;n<this.internalValue.length;n++)if(!this.internalValue[n].isEqual(t.internalValue[n]))return!1;return!0}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=Math.min(this.internalValue.length,t.internalValue.length),r=0;r<n;r++){var i=this.internalValue[r].compareTo(t.internalValue[r]);if(i)return i}return G(this.internalValue.length,t.internalValue.length)}return this.defaultCompareTo(t)},e.prototype.toString=function(){return"["+this.internalValue.map(function(t){return t.toString()}).join(",")+"]"},e}(Ee),Ve=function(){function t(t,e){this.key=t,this.version=e}return t.compareByKey=function(t,e){return ht.comparator(t.key,e.key)},t}(),qe=function(t){function e(e,n,r,i,o,s){var a=t.call(this,e,n)||this;return a.objectValue=i,a.proto=o,a.converter=s,b(void 0!==a.objectValue||void 0!==a.proto&&void 0!==a.converter,"If objectValue is not defined, proto and converter need to be set."),a.hasLocalMutations=!!r.hasLocalMutations,a.hasCommittedMutations=!!r.hasCommittedMutations,a}return o.__extends(e,t),e.prototype.field=function(t){if(this.objectValue)return this.objectValue.field(t);this.fieldValueCache||(this.fieldValueCache=new Map);var e=t.canonicalString(),n=this.fieldValueCache.get(e);if(void 0===n){var r=this.getProtoField(t);n=void 0===r?null:this.converter(r),this.fieldValueCache.set(e,n)}return n},e.prototype.data=function(){var t=this;if(!this.objectValue){var e=Fe.EMPTY;k(this.proto.fields||{},function(n,r){e=e.set(new lt([n]),t.converter(r))}),this.objectValue=e,this.fieldValueCache=void 0}return this.objectValue},e.prototype.value=function(){return this.data().value()},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.hasLocalMutations===t.hasLocalMutations&&this.hasCommittedMutations===t.hasCommittedMutations&&this.data().isEqual(t.data())},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data().toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.getProtoField=function(t){b(void 0!==this.proto,"Can only call getProtoField() when proto is defined");for(var e=this.proto.fields?this.proto.fields[t.firstSegment()]:void 0,n=1;n<t.length;++n){if(!e||!e.mapValue||!e.mapValue.fields)return;e=e.mapValue.fields[t.get(n)]}return e},e.compareByField=function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?r.compareTo(i):y("Trying to compare documents on fields that don't exist")},e}(Ve),Be=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return o.__extends(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Ve),ze=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Ve),We=function(){function t(t){this.mapKeyFn=t,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(o[0].isEqual(t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){k(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return O(this.inner)},t}(),He=function(){function t(){this.changes=new We(function(t){return t.toString()}),this.changesApplied=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return b(void 0!==this._readTime,"Read time is not set. All removeEntry() calls must include a readTime if `trackRemovals` is used."),this._readTime},set:function(t){b(void 0===this._readTime||this._readTime.isEqual(t),"All changes in a RemoteDocumentChangeBuffer must have the same read time"),this._readTime=t},enumerable:!0,configurable:!0}),t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.readTime=e,this.changes.set(t.key,t)},t.prototype.removeEntry=function(t,e){this.assertNotApplied(),e&&(this.readTime=e),this.changes.set(t,null)},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?zt.resolve(n):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){b(!this.changesApplied,"Changes have already been applied.")},t}(),Ke=function(){function t(t,e){this.serializer=t,this.indexManager=e}return t.prototype.addEntry=function(t,e,n){return Qe(t).put(Ge(e),n)},t.prototype.removeEntry=function(t,e){var n=Qe(t),r=Ge(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.setMetadata(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return Qe(t).get(Ge(e)).next(function(t){return n.maybeDecodeDocument(t)})},t.prototype.getSizedEntry=function(t,e){var n=this;return Qe(t).get(Ge(e)).next(function(t){var e=n.maybeDecodeDocument(t);return e?{maybeDocument:e,size:Xe(t)}:null})},t.prototype.getEntries=function(t,e){var n=this,r=Nt();return this.forEachDbEntry(t,e,function(t,e){var i=n.maybeDecodeDocument(e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.getSizedEntries=function(t,e){var n=this,r=Nt(),i=new Ct(ht.comparator);return this.forEachDbEntry(t,e,function(t,e){var o=n.maybeDecodeDocument(e);o?(r=r.insert(t,o),i=i.insert(t,Xe(e))):(r=r.insert(t,null),i=i.insert(t,0))}).next(function(){return{maybeDocuments:r,sizeMap:i}})},t.prototype.forEachDbEntry=function(t,e,n){if(e.isEmpty())return zt.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Qe(t).iterate({range:r},function(t,e,r){for(var s=ht.fromSegments(t);o&&ht.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.skip(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this;b(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var i=Dt(),o=e.path.length+1,s={};if(n.isEqual(St.MIN)){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var c=e.path.toArray(),u=this.serializer.toDbTimestampKey(n);s.range=IDBKeyRange.lowerBound([c,u],!0),s.index=un.collectionReadTimeIndex}return Qe(t).iterate(s,function(t,n,s){if(t.length===o){var a=r.serializer.fromDbRemoteDocument(n);e.path.isPrefixOf(a.key.path)?a instanceof qe&&e.matches(a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.getNewDocumentChanges=function(t,e){var n=this,r=At(),i=this.serializer.toDbTimestampKey(e),o=Qe(t),s=IDBKeyRange.lowerBound(i,!0);return o.iterate({index:un.readTimeIndex,range:s},function(t,e){var o=n.serializer.fromDbRemoteDocument(e);r=r.insert(o.key,o),i=e.readTime}).next(function(){return{changedDocs:r,readTime:n.serializer.fromDbTimestampKey(i)}})},t.prototype.getLastDocumentChange=function(t){var e,n=this,r=Qe(t),i=St.MIN;return r.iterate({index:un.readTimeIndex,reverse:!0},function(t,r,o){e=n.serializer.fromDbRemoteDocument(r),r.readTime&&(i=n.serializer.fromDbTimestampKey(r.readTime)),o.done()}).next(function(){return{changedDoc:e,readTime:i}})},t.prototype.newChangeBuffer=function(e){return new t.RemoteDocumentChangeBuffer(this,!!e&&e.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return $e(t).get(ln.key).next(function(t){return b(!!t,"Missing document cache metadata"),t})},t.prototype.setMetadata=function(t,e){return $e(t).put(ln.key,e)},t.prototype.maybeDecodeDocument=function(t){if(t){var e=this.serializer.fromDbRemoteDocument(t);return e instanceof Be&&e.version.isEqual(St.forDeletedDoc())?null:e}return null},t.RemoteDocumentChangeBuffer=function(t){function e(e,n){var r=t.call(this)||this;return r.documentCache=e,r.trackRemovals=n,r.documentSizes=new We(function(t){return t.toString()}),r}return o.__extends(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new kt(function(t,e){return G(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.documentSizes.get(o);if(b(void 0!==a,"Cannot modify a document that wasn't read (for "+o+")"),s){b(!e.readTime.isEqual(St.MIN),"Cannot add a document with a read time of zero");var c=e.documentCache.serializer.toDbRemoteDocument(s,e.readTime);i=i.add(o.path.popLast());var u=Xe(c);r+=u-a,n.push(e.documentCache.addEntry(t,o,c))}else if(r-=a,e.trackRemovals){var l=e.documentCache.serializer.toDbRemoteDocument(new Be(o,St.forDeletedDoc()),e.readTime);n.push(e.documentCache.addEntry(t,o,l))}else n.push(e.documentCache.removeEntry(t,o))}),i.forEach(function(r){n.push(e.documentCache.indexManager.addToCollectionParentIndex(t,r))}),n.push(this.documentCache.updateMetadata(t,r)),zt.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.documentCache.getSizedEntry(t,e).next(function(t){return null===t?(n.documentSizes.set(e,0),null):(n.documentSizes.set(e,t.size),t.maybeDocument)})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.documentCache.getSizedEntries(t,e).next(function(t){var e=t.maybeDocuments;return t.sizeMap.forEach(function(t,e){n.documentSizes.set(t,e)}),e})},e}(He),t}();function $e(t){return Fn.getStore(t,ln.store)}function Qe(t){return Fn.getStore(t,un.store)}function Ge(t){return t.path.toArray()}function Xe(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw y("Unknown remote document type");e=t.noDocument}return JSON.stringify(e).length}var Ye=function(){function t(){this.collectionParentIndex=new Ze}return t.prototype.addToCollectionParentIndex=function(t,e){return this.collectionParentIndex.add(e),zt.resolve()},t.prototype.getCollectionParents=function(t,e){return zt.resolve(this.collectionParentIndex.getEntries(e))},t}(),Ze=function(){function t(){this.index={}}return t.prototype.add=function(t){b(t.length%2==1,"Expected a collection path.");var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new kt(ct.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new kt(ct.comparator)).toArray()},t}(),Je=9,tn=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;b(n<r&&n>=0&&r<=Je,"Unexpected schema upgrade from v"+n+" to v{toVersion}.");var o=new $t(e);n<1&&r>=1&&(function(t){t.createObjectStore(nn.store)}(t),function(t){t.createObjectStore(rn.store,{keyPath:rn.keyPath}),t.createObjectStore(on.store,{keyPath:on.keyPath,autoIncrement:!0}).createIndex(on.userMutationsIndex,on.userMutationsKeyPath,{unique:!0}),t.createObjectStore(sn.store)}(t),gn(t),function(t){t.createObjectStore(un.store)}(t));var s=zt.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(dn.store),t.deleteObjectStore(hn.store),t.deleteObjectStore(fn.store)}(t),gn(t)),s=s.next(function(){return function(t){var e=t.store(fn.store),n=new fn(0,0,St.MIN.toTimestamp(),0);return e.put(fn.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(on.store).loadAll().next(function(n){t.deleteObjectStore(on.store),t.createObjectStore(on.store,{keyPath:on.keyPath,autoIncrement:!0}).createIndex(on.userMutationsIndex,on.userMutationsKeyPath,{unique:!0});var r=e.store(on.store),i=n.map(function(t){return r.put(t)});return zt.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(mn.store,{keyPath:mn.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.removeAcknowledgedMutations(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(ln.store)}(t),i.addDocumentGlobal(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ensureSequenceNumbers(o)})),n<8&&r>=8&&(s=s.next(function(){return i.createCollectionParentIndex(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(un.store);e.createIndex(un.readTimeIndex,un.readTimeIndexPath,{unique:!1}),e.createIndex(un.collectionReadTimeIndex,un.collectionReadTimeIndexPath,{unique:!1})}(e)})),s},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(un.store).iterate(function(t,n){e+=Xe(n)}).next(function(){var n=new ln(e);return t.store(ln.store).put(ln.key,n)})},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(rn.store),r=t.store(on.store);return n.loadAll().next(function(n){return zt.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,Vt],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(on.userMutationsIndex,i).next(function(r){return zt.forEach(r,function(r){b(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=e.serializer.fromDbMutationBatch(r);return te(t,n.userId,i).next(function(){})})})})})},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(dn.store),n=t.store(un.store);return le(t).next(function(t){var r=[];return n.iterate(function(n,i){var o=new ct(n),s=function(t){return[0,yt(t)]}(o);r.push(e.get(s).next(function(n){return n?zt.resolve():function(n){return e.put(new dn(0,yt(n),t))}(o)}))}).next(function(){return zt.waitFor(r)})})},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(pn.store,{keyPath:pn.keyPath});var n=e.store(pn.store),r=new Ze,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:yt(i)})}};return e.store(un.store).iterate({keysOnly:!0},function(t,e){var n=new ct(t);return i(n.popLast())}).next(function(){return e.store(sn.store).iterate({keysOnly:!0},function(t,e){var n=wt(t[1]);return i(n.popLast())})})},t}(),en=function(){return function(t,e){this.seconds=t,this.nanoseconds=e}}(),nn=function(){function t(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}return t.store="owner",t.key="owner",t}(),rn=function(){function t(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}return t.store="mutationQueues",t.keyPath="userId",t}(),on=function(){function t(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}return t.store="mutations",t.keyPath="batchId",t.userMutationsIndex="userMutationsIndex",t.userMutationsKeyPath=["userId","batchId"],t}(),sn=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,yt(e)]},t.key=function(t,e,n){return[t,yt(e),n]},t.store="documentMutations",t.PLACEHOLDER=new t,t}(),an=function(){return function(t,e){this.path=t,this.readTime=e}}(),cn=function(){return function(t,e){this.path=t,this.version=e}}(),un=function(){function t(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o}return t.store="remoteDocuments",t.readTimeIndex="readTimeIndex",t.readTimeIndexPath="readTime",t.collectionReadTimeIndex="collectionReadTimeIndex",t.collectionReadTimeIndexPath=["parentPath","readTime"],t}(),ln=function(){function t(t){this.byteSize=t}return t.store="remoteDocumentGlobal",t.key="remoteDocumentGlobalKey",t}(),hn=function(){function t(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s}return t.store="targets",t.keyPath="targetId",t.queryTargetsIndexName="queryTargetsIndex",t.queryTargetsKeyPath=["canonicalId","targetId"],t}(),dn=function(){function t(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n,b(0===t==(void 0!==n),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return t.store="targetDocuments",t.keyPath=["targetId","path"],t.documentTargetsIndex="documentTargetsIndex",t.documentTargetsKeyPath=["path","targetId"],t}(),fn=function(){function t(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return t.key="targetGlobalKey",t.store="targetGlobal",t}(),pn=function(){function t(t,e){this.collectionId=t,this.parent=e}return t.store="collectionParents",t.keyPath=["collectionId","parent"],t}();function gn(t){t.createObjectStore(dn.store,{keyPath:dn.keyPath}).createIndex(dn.documentTargetsIndex,dn.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(hn.store,{keyPath:hn.keyPath}).createIndex(hn.queryTargetsIndexName,hn.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(fn.store)}var mn=function(){function t(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r}return t.store="clientMetadata",t.keyPath="clientId",t}(),yn=o.__spreadArrays([rn.store,on.store,sn.store,un.store,hn.store,nn.store,fn.store,dn.store],[mn.store]),bn=o.__spreadArrays(yn,[ln.store]),vn=o.__spreadArrays(bn,[pn.store]),wn=function(){function t(){this.collectionParentsCache=new Ze}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(b(e.length%2==1,"Expected a collection path."),!this.collectionParentsCache.has(e)){var r=e.lastSegment(),i=e.popLast();return t.addOnCommittedListener(function(){n.collectionParentsCache.add(e)}),_n(t).put({collectionId:r,parent:yt(i)})}return zt.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Y(e),""],!1,!0);return _n(t).loadAll(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(wt(o.parent))}return n})},t}();function _n(t){return Fn.getStore(t,pn.store)}var Sn=function(t){return t[t.Listen=0]="Listen",t[t.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",t[t.LimboResolution=2]="LimboResolution",t}({}),Cn=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=St.MIN),void 0===o&&(o=St.MIN),void 0===s&&(s=w()),this.query=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.query,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.query,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.query,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t.prototype.isEqual=function(t){return this.targetId===t.targetId&&this.purpose===t.purpose&&this.sequenceNumber===t.sequenceNumber&&this.snapshotVersion.isEqual(t.snapshotVersion)&&this.lastLimboFreeSnapshotVersion.isEqual(t.lastLimboFreeSnapshotVersion)&&this.resumeToken===t.resumeToken&&this.query.isEqual(t.query)},t}(),In=function(){function t(t){this.remoteSerializer=t}return t.prototype.fromDbRemoteDocument=function(t){if(t.document)return this.remoteSerializer.fromDocument(t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=ht.fromSegments(t.noDocument.path),n=this.fromDbTimestamp(t.noDocument.readTime);return new Be(e,n,{hasCommittedMutations:!!t.hasCommittedMutations})}return t.unknownDocument?(e=ht.fromSegments(t.unknownDocument.path),n=this.fromDbTimestamp(t.unknownDocument.version),new ze(e,n)):y("Unexpected DbRemoteDocument")},t.prototype.toDbRemoteDocument=function(t,e){var n=this.toDbTimestampKey(e),r=t.key.path.popLast().toArray();if(t instanceof qe){var i=t.proto?t.proto:this.remoteSerializer.toDocument(t);return new un(null,null,i,a=t.hasCommittedMutations,n,r)}if(t instanceof Be){var o=t.key.path.toArray(),s=this.toDbTimestamp(t.version),a=t.hasCommittedMutations;return new un(null,new an(o,s),null,a,n,r)}if(t instanceof ze){o=t.key.path.toArray();var c=this.toDbTimestamp(t.version);return new un(new cn(o,c),null,null,!0,n,r)}return y("Unexpected MaybeDocument")},t.prototype.toDbTimestampKey=function(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]},t.prototype.fromDbTimestampKey=function(t){var e=new _t(t[0],t[1]);return St.fromTimestamp(e)},t.prototype.toDbTimestamp=function(t){var e=t.toTimestamp();return new en(e.seconds,e.nanoseconds)},t.prototype.fromDbTimestamp=function(t){var e=new _t(t.seconds,t.nanoseconds);return St.fromTimestamp(e)},t.prototype.toDbMutationBatch=function(t,e){var n=this,r=e.baseMutations.map(function(t){return n.remoteSerializer.toMutation(t)}),i=e.mutations.map(function(t){return n.remoteSerializer.toMutation(t)});return new on(t,e.batchId,e.localWriteTime.toMillis(),r,i)},t.prototype.fromDbMutationBatch=function(t){var e=this,n=(t.baseMutations||[]).map(function(t){return e.remoteSerializer.fromMutation(t)}),r=t.mutations.map(function(t){return e.remoteSerializer.fromMutation(t)}),i=_t.fromMillis(t.localWriteTimeMs);return new qt(t.batchId,i,n,r)},t.prototype.toDbResourcePaths=function(t){var e=[];return t.forEach(function(t){e.push(yt(t.path))}),e},t.prototype.fromDbResourcePaths=function(t){for(var e=Lt(),n=0,r=t;n<r.length;n++)e=e.add(new ht(wt(r[n])));return e},t.prototype.fromDbTarget=function(t){var e,n=this.fromDbTimestamp(t.readTime),r=void 0!==t.lastLimboFreeSnapshotVersion?this.fromDbTimestamp(t.lastLimboFreeSnapshotVersion):St.MIN,i=t.resumeToken;return e=void 0!==t.query.documents?this.remoteSerializer.fromDocumentsTarget(t.query):this.remoteSerializer.fromQueryTarget(t.query),new Cn(e,t.targetId,Sn.Listen,t.lastListenSequenceNumber,n,r,i)},t.prototype.toDbTarget=function(t){b(Sn.Listen===t.purpose,"Only queries with purpose "+Sn.Listen+" may be stored, got "+t.purpose);var e,n,r=this.toDbTimestamp(t.snapshotVersion),i=this.toDbTimestamp(t.lastLimboFreeSnapshotVersion);return e=t.query.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(t.query):this.remoteSerializer.toQueryTarget(t.query),t.resumeToken instanceof Uint8Array?(b(Ht.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence ."),n=t.resumeToken.toString()):n=t.resumeToken,new hn(t.targetId,t.query.canonicalId(),r,n,t.sequenceNumber,i,e)},t}();function En(t,e){var n=t[1],r=e[1],i=G(t[0],e[0]);return 0===i?G(n,r):i}var Tn=function(){function t(t){this.maxElements=t,this.buffer=new kt(En),this.previousIndex=0}return t.prototype.nextIndex=function(){return++this.previousIndex},t.prototype.addElement=function(t){var e=[t,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();En(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),t}(),kn={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},On=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t.COLLECTION_DISABLED=-1,t.MINIMUM_CACHE_SIZE_BYTES=1048576,t.DEFAULT=new t(t.DEFAULT_CACHE_SIZE_BYTES=41943040,t.DEFAULT_COLLECTION_PERCENTILE=10,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3),t.DISABLED=new t(t.COLLECTION_DISABLED,0,0),t}(),xn=function(){function t(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.hasRun=!1,this.gcTask=null}return t.prototype.start=function(){b(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==On.COLLECTION_DISABLED&&this.scheduleGC()},t.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),t.prototype.scheduleGC=function(){var t=this;b(null===this.gcTask,"Cannot schedule GC while a task is pending");var e=this.hasRun?3e5:6e4;p("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(ft.LruGarbageCollection,e,function(){return t.gcTask=null,t.hasRun=!0,t.localStore.collectGarbage(t.garbageCollector).then(function(){return t.scheduleGC()}).catch(Un)})},t}(),An=function(){function t(t,e){this.delegate=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.delegate.getSequenceNumberCount(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return zt.resolve(ot.INVALID);var r=new Tn(e);return this.delegate.forEachTarget(t,function(t){return r.addElement(t.sequenceNumber)}).next(function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(t,function(t){return r.addElement(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.delegate.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.delegate.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return this.params.cacheSizeCollectionThreshold===On.COLLECTION_DISABLED?(p("LruGarbageCollector","Garbage collection skipped; disabled"),zt.resolve(kn)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(p("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),kn):n.runGarbageCollection(t,e)})},t.prototype.getCacheSize=function(t){return this.delegate.getCacheSize(t)},t.prototype.runGarbageCollection=function(t,e){var n,r,i,o,s,a,c,u=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>u.params.maximumSequenceNumbersToCollect?(p("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+u.params.maximumSequenceNumbersToCollect+" from "+e),r=u.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),u.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),u.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),u.removeOrphanedDocuments(t,n)}).next(function(t){return c=Date.now(),d()<=h.DEBUG&&p("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(c-a)+"ms\nTotal Duration: "+(c-l)+"ms"),zt.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),Nn=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),Mn="IndexedDbPersistence",Dn=18e5,Pn=5e3,Rn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",jn="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",Ln=function(t){function e(e,n){var r=t.call(this)||this;return r.simpleDbTransaction=e,r.currentSequenceNumber=n,r}return o.__extends(e,t),e}(Nn),Fn=function(){function t(e,n,r,i,o,s,a,c){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.queue=s,this.sequenceNumberSyncer=c,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(t){return Promise.resolve()},this.referenceDelegate=new Bn(this,o),this.dbName=n+t.MAIN_DATABASE,this.serializer=new In(a),this.document=i.document,this.queryCache=new ae(this.referenceDelegate,this.serializer),this.indexManager=new wn,this.remoteDocumentCache=new Ke(this.serializer,this.indexManager),!i.window||!i.window.localStorage)throw new S(_.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=i.window,this.webStorage=this.window.localStorage}return t.getStore=function(t,e){if(t instanceof Ln)return Ht.getStore(t.simpleDbTransaction,e);throw y("IndexedDbPersistence must use instances of IndexedDbTransaction")},t.createIndexedDbPersistence=function(e){return o.__awaiter(this,void 0,void 0,function(){var n;return o.__generator(this,function(r){switch(r.label){case 0:if(!t.isAvailable())throw new S(_.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return[4,(n=new t(e.allowTabSynchronization,e.persistenceKey,e.clientId,e.platform,e.lruParams,e.queue,e.serializer,e.sequenceNumberSyncer)).start()];case 1:return r.sent(),[2,n]}})})},t.prototype.start=function(){var t=this;return b(!this.started,"IndexedDbPersistence double-started!"),b(null!==this.window,"Expected 'window' to be defined"),Ht.openOrCreate(this.dbName,Je,new tn(this.serializer)).then(function(e){return t.simpleDb=e,t.updateClientMetadataAndTryBecomePrimary()}).then(function(){return t.attachVisibilityHandler(),t.attachWindowUnloadHook(),t.scheduleClientMetadataAndPrimaryLeaseRefreshes(),t.simpleDb.runTransaction("readonly-idempotent",[fn.store],function(t){return le(t)})}).then(function(e){t.listenSequence=new ot(e,t.sequenceNumberSyncer)}).then(function(){t._started=!0}).catch(function(e){return t.simpleDb&&t.simpleDb.close(),Promise.reject(e)})},t.prototype.setPrimaryStateListener=function(t){var e=this;return this.primaryStateListener=function(n){return o.__awaiter(e,void 0,void 0,function(){return o.__generator(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.simpleDb.setVersionChangeListener(function(n){return o.__awaiter(e,void 0,void 0,function(){return o.__generator(this,function(e){switch(e.label){case 0:return null!==n.newVersion?[3,2]:[4,t()];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.queue.enqueueAndForget(function(){return o.__awaiter(e,void 0,void 0,function(){return o.__generator(this,function(t){switch(t.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.updateClientMetadataAndTryBecomePrimary=function(){var t=this;return this.simpleDb.runTransaction("readwrite-idempotent",vn,function(e){return qn(e).put(new mn(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.verifyPrimaryLease(e).next(function(e){e||(t.isPrimary=!1,t.queue.enqueueAndForget(function(){return t.primaryStateListener(!1)}))})}).next(function(){return t.canActAsPrimary(e)}).next(function(n){return t.isPrimary&&!n?t.releasePrimaryLeaseIfHeld(e).next(function(){return!1}):!!n&&t.acquireOrExtendPrimaryLease(e).next(function(){return!0})})}).catch(function(e){if(!t.allowTabSynchronization)throw e;return p(Mn,"Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.queue.enqueueAndForget(function(){return t.primaryStateListener(e)}),t.isPrimary=e})},t.prototype.verifyPrimaryLease=function(t){var e=this;return Vn(t).get(nn.key).next(function(t){return zt.resolve(e.isLocalClient(t))})},t.prototype.removeClientMetadata=function(t){return qn(t).delete(this.clientId)},t.prototype.maybeGarbageCollectMultiClientState=function(){return o.__awaiter(this,void 0,void 0,function(){var e=this;return o.__generator(this,function(n){switch(n.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,Dn)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary-idempotent",function(n){var r=t.getStore(n,mn.store);return r.loadAll().next(function(t){var n=e.filterActiveClients(t,Dn),i=t.filter(function(t){return-1===n.indexOf(t)});return zt.forEach(i,function(t){return r.delete(t.clientId)}).next(function(){return i})})})]);case 1:n.sent().forEach(function(t){e.window.localStorage.removeItem(e.zombiedClientLocalStorageKey(t.clientId))}),n.label=2;case 2:return[2]}})})},t.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var t=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(ft.ClientMetadataRefresh,4e3,function(){return t.updateClientMetadataAndTryBecomePrimary().then(function(){return t.maybeGarbageCollectMultiClientState()}).then(function(){return t.scheduleClientMetadataAndPrimaryLeaseRefreshes()})})},t.prototype.isLocalClient=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.canActAsPrimary=function(t){var e=this;return Vn(t).get(nn.key).next(function(n){if(null!==n&&e.isWithinAge(n.leaseTimestampMs,Pn)&&!e.isClientZombied(n.ownerId)){if(e.isLocalClient(n)&&e.networkEnabled)return!0;if(!e.isLocalClient(n)){if(!n.allowTabSynchronization)throw new S(_.FAILED_PRECONDITION,jn);return!1}}return!(!e.networkEnabled||!e.inForeground)||qn(t).loadAll().next(function(t){return void 0===e.filterActiveClients(t,Pn).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&p(Mn,"Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return o.__awaiter(this,void 0,void 0,function(){var t=this;return o.__generator(this,function(e){switch(e.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite-idempotent",[nn.store,mn.store],function(e){return t.releasePrimaryLeaseIfHeld(e).next(function(){return t.removeClientMetadata(e)})})];case 1:return e.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2]}})})},t.prototype.filterActiveClients=function(t,e){var n=this;return t.filter(function(t){return n.isWithinAge(t.updateTimeMs,e)&&!n.isClientZombied(t.clientId)})},t.prototype.getActiveClients=function(){var t=this;return this.simpleDb.runTransaction("readonly-idempotent",[mn.store],function(e){return qn(e).loadAll().next(function(e){return t.filterActiveClients(e,Dn).map(function(t){return t.clientId})})})},t.clearPersistence=function(e){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(n){switch(n.label){case 0:return t.isAvailable()?[4,Ht.delete(e+t.MAIN_DATABASE)]:[2,Promise.resolve()];case 1:return n.sent(),[2]}})})},Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),t.prototype.getMutationQueue=function(t){return b(this.started,"Cannot initialize MutationQueue before persistence is started."),Zt.forUser(t,this.serializer,this.indexManager,this.referenceDelegate)},t.prototype.getQueryCache=function(){return b(this.started,"Cannot initialize QueryCache before persistence is started."),this.queryCache},t.prototype.getRemoteDocumentCache=function(){return b(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},t.prototype.getIndexManager=function(){return b(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},t.prototype.runTransaction=function(t,e,n){var r=this;p(Mn,"Starting transaction:",t);var i,o=e.endsWith("idempotent"),s=e.startsWith("readonly");return this.simpleDb.runTransaction(s?o?"readonly-idempotent":"readonly":o?"readwrite-idempotent":"readwrite",vn,function(o){return i=new Ln(o,r.listenSequence.next()),"readwrite-primary"===e||"readwrite-primary-idempotent"===e?r.verifyPrimaryLease(o).next(function(t){return!!t||r.canActAsPrimary(o)}).next(function(e){if(!e)throw g("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.queue.enqueueAndForget(function(){return r.primaryStateListener(!1)}),new S(_.FAILED_PRECONDITION,Rn);return n(i)}).next(function(t){return r.acquireOrExtendPrimaryLease(o).next(function(){return t})}):r.verifyAllowTabSynchronization(o).next(function(){return n(i)})}).then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.verifyAllowTabSynchronization=function(t){var e=this;return Vn(t).get(nn.key).next(function(t){if(null!==t&&e.isWithinAge(t.leaseTimestampMs,Pn)&&!e.isClientZombied(t.ownerId)&&!e.isLocalClient(t)&&!t.allowTabSynchronization)throw new S(_.FAILED_PRECONDITION,jn)})},t.prototype.acquireOrExtendPrimaryLease=function(t){var e=new nn(this.clientId,this.allowTabSynchronization,Date.now());return Vn(t).put(nn.key,e)},t.isAvailable=function(){return Ht.isAvailable()},t.buildStoragePrefix=function(t){var e=t.databaseId.projectId;return t.databaseId.isDefaultDatabase||(e+="."+t.databaseId.database),"firestore/"+t.persistenceKey+"/"+e+"/"},t.prototype.releasePrimaryLeaseIfHeld=function(t){var e=this,n=Vn(t);return n.get(nn.key).next(function(t){return e.isLocalClient(t)?(p(Mn,"Releasing primary lease."),n.delete(nn.key)):zt.resolve()})},t.prototype.isWithinAge=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(g("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.attachVisibilityHandler=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){t.queue.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.updateClientMetadataAndTryBecomePrimary()})},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},t.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(b(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},t.prototype.attachWindowUnloadHook=function(){var t=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){t.markClientZombied(),t.queue.enqueueAndForget(function(){return t.shutdown()})},this.window.addEventListener("unload",this.windowUnloadHandler))},t.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(b("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},t.prototype.isClientZombied=function(t){try{var e=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(t));return p(Mn,"Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(n){return g(Mn,"Failed to get zombied client id.",n),!1}},t.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(t){g("Failed to set zombie client id.",t)}},t.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(t){}},t.prototype.zombiedClientLocalStorageKey=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t.MAIN_DATABASE="main",t}();function Un(t){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(e){if(!function(t){return t.code===_.FAILED_PRECONDITION&&t.message===Rn}(t))throw t;return p(Mn,"Unexpectedly lost primary lease"),[2]})})}function Vn(t){return t.store(nn.store)}function qn(t){return t.store(mn.store)}var Bn=function(){function t(t,e){this.db=t,this.inMemoryPins=null,this.garbageCollector=new An(this,e)}return t.prototype.getSequenceNumberCount=function(t){var e=this.orphanedDocmentCount(t);return this.db.getQueryCache().getQueryCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.orphanedDocmentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getQueryCache().forEachTarget(t,e)},t.prototype.forEachOrphanedDocumentSequenceNumber=function(t,e){return this.forEachOrphanedDocument(t,function(t,n){return e(n)})},t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.addReference=function(t,e){return zn(t,e)},t.prototype.removeReference=function(t,e){return zn(t,e)},t.prototype.removeTargets=function(t,e,n){return this.db.getQueryCache().removeTargets(t,e,n)},t.prototype.removeMutationReference=function(t,e){return zn(t,e)},t.prototype.isPinned=function(t,e){return this.inMemoryPins.containsKey(e)?zt.resolve(!0):function(t,e){var n=!1;return ie(t).iterateSerial(function(r){return Jt(t,r,e).next(function(t){return t&&(n=!0),zt.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.forEachOrphanedDocument(t,function(s,a){if(a<=e){var c=n.isPinned(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),he(t).delete([0,yt(s.path)])})});i.push(c)}}).next(function(){return zt.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getQueryCache().updateQueryData(t,n)},t.prototype.updateLimboDocument=function(t,e){return zn(t,e)},t.prototype.forEachOrphanedDocument=function(t,e){var n,r=he(t),i=ot.INVALID;return r.iterate({index:dn.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==ot.INVALID&&e(new ht(wt(n)),i),i=s,n=o):i=ot.INVALID}).next(function(){i!==ot.INVALID&&e(new ht(wt(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function zn(t,e){return he(t).put(function(t,e){return new dn(0,yt(t.path),e)}(e,t.currentSequenceNumber))}var Wn=function(){function t(t,e,n){this.remoteDocumentCache=t,this.mutationQueue=e,this.indexManager=n}return t.prototype.getDocument=function(t,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.getDocumentInternal(t,e,r)})},t.prototype.getDocumentInternal=function(t,e,n){return this.remoteDocumentCache.getEntry(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].applyToLocalView(e,t);return t})},t.prototype.applyLocalMutationsToDocuments=function(t,e,n){var r=Nt();return e.forEach(function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].applyToLocalView(t,e);r=r.insert(t,e)}),r},t.prototype.getDocuments=function(t,e){var n=this;return this.remoteDocumentCache.getEntries(t,e).next(function(e){return n.getLocalViewOfDocuments(t,e)})},t.prototype.getLocalViewOfDocuments=function(t,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(r){var i=n.applyLocalMutationsToDocuments(t,e,r),o=At();return i.forEach(function(t,e){e||(e=new Be(t,St.forDeletedDoc())),o=o.insert(t,e)}),o})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return e.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(t,e.path):e.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(t,e,n):this.getDocumentsMatchingCollectionQuery(t,e,n)},t.prototype.getDocumentsMatchingDocumentQuery=function(t,e){return this.getDocument(t,new ht(e)).next(function(t){var e=Dt();return t instanceof qe&&(e=e.insert(t.key,t)),e})},t.prototype.getDocumentsMatchingCollectionGroupQuery=function(t,e,n){var r=this;b(e.path.isEmpty(),"Currently we only support collection group queries at the root.");var i=e.collectionGroup,o=Dt();return this.indexManager.getCollectionParents(t,i).next(function(s){return zt.forEach(s,function(s){var a=e.asCollectionQueryAtPath(s.child(i));return r.getDocumentsMatchingCollectionQuery(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.getDocumentsMatchingCollectionQuery=function(t,e,n){var r,i,o=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o.mutationQueue.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.addMissingBaseDocuments(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var c=a[s],u=c.key,l=r.get(u),h=c.applyToLocalView(l,l,o.localWriteTime);r=h instanceof qe?r.insert(u,h):r.remove(u)}})}).next(function(){return r.forEach(function(t,n){e.matches(n)||(r=r.remove(t))}),r})},t.prototype.addMissingBaseDocuments=function(t,e,n){for(var r=Lt(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var c=a[s];c instanceof ve&&null===n.get(c.key)&&(r=r.add(c.key))}var u=n;return this.remoteDocumentCache.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof qe&&(u=u.insert(t,e))}),u})},t}(),Hn=function(){function t(){this.refsByKey=new kt(Kn.compareByKey),this.refsByTarget=new kt(Kn.compareByTargetId)}return t.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},t.prototype.addReference=function(t,e){var n=new Kn(t,e);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},t.prototype.addReferences=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.removeRef(new Kn(t,e))},t.prototype.removeReferences=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.removeReferencesForId=function(t){var e=this,n=ht.EMPTY,r=new Kn(n,t),i=new Kn(n,t+1),o=[];return this.refsByTarget.forEachInRange([r,i],function(t){e.removeRef(t),o.push(t.key)}),o},t.prototype.removeAllReferences=function(){var t=this;this.refsByKey.forEach(function(e){return t.removeRef(e)})},t.prototype.removeRef=function(t){this.refsByKey=this.refsByKey.delete(t),this.refsByTarget=this.refsByTarget.delete(t)},t.prototype.referencesForId=function(t){var e=ht.EMPTY,n=new Kn(e,t),r=new Kn(e,t+1),i=Lt();return this.refsByTarget.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new Kn(t,0),n=this.refsByKey.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Kn=function(){function t(t,e){this.key=t,this.targetOrBatchId=e}return t.compareByKey=function(t,e){return ht.comparator(t.key,e.key)||G(t.targetOrBatchId,e.targetOrBatchId)},t.compareByTargetId=function(t,e){return G(t.targetOrBatchId,e.targetOrBatchId)||ht.comparator(t.key,e.key)},t}(),$n="LocalStore",Qn=function(){function t(t,e,n){this.persistence=t,this.queryEngine=e,this.localViewReferences=new Hn,this.queryDataByTarget=new Ct(G),this.targetIdByQuery=new We(function(t){return t.canonicalId()}),this.lastDocumentChangeReadTime=St.MIN,b(t.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=t.getMutationQueue(n),this.remoteDocuments=t.getRemoteDocumentCache(),this.queryCache=t.getQueryCache(),this.localDocuments=new Wn(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager()),this.queryEngine.setLocalDocumentsView(this.localDocuments)}return t.prototype.start=function(){return this.synchronizeLastDocumentChangeReadTime()},t.prototype.handleUserChange=function(t){return o.__awaiter(this,void 0,void 0,function(){var e,n,r,i=this;return o.__generator(this,function(o){switch(o.label){case 0:return e=this.mutationQueue,n=this.localDocuments,[4,this.persistence.runTransaction("Handle user change","readonly-idempotent",function(r){var o;return i.mutationQueue.getAllMutationBatches(r).next(function(s){return o=s,e=i.persistence.getMutationQueue(t),n=new Wn(i.remoteDocuments,e,i.persistence.getIndexManager()),e.getAllMutationBatches(r)}).next(function(t){for(var e=[],i=[],s=Lt(),a=0,c=o;a<c.length;a++){e.push((f=c[a]).batchId);for(var u=0,l=f.mutations;u<l.length;u++)s=s.add(l[u].key)}for(var h=0,d=t;h<d.length;h++){var f;i.push((f=d[h]).batchId);for(var p=0,g=f.mutations;p<g.length;p++)s=s.add(g[p].key)}return n.getDocuments(r,s).next(function(t){return{affectedDocuments:t,removedBatchIds:e,addedBatchIds:i}})})})];case 1:return r=o.sent(),this.mutationQueue=e,this.localDocuments=n,this.queryEngine.setLocalDocumentsView(this.localDocuments),[2,r]}})})},t.prototype.localWrite=function(t){var e,n=this,r=_t.now(),i=t.reduce(function(t,e){return t.add(e.key)},Lt());return this.persistence.runTransaction("Locally write mutations","readwrite-idempotent",function(o){return n.localDocuments.getDocuments(o,i).next(function(i){e=i;for(var s=[],a=0,c=t;a<c.length;a++){var u=c[a],l=u.extractBaseValue(e.get(u.key));null!=l&&s.push(new ve(u.key,l,l.fieldMask(),me.exists(!0)))}return n.mutationQueue.addMutationBatch(o,r,s,t)})}).then(function(t){var n=t.applyToLocalDocumentSet(e);return{batchId:t.batchId,changes:n}})},t.prototype.lookupMutationDocuments=function(t){var e=this;return this.persistence.runTransaction("Lookup mutation documents","readonly-idempotent",function(n){return e.mutationQueue.lookupMutationKeys(n,t).next(function(t){return t?e.localDocuments.getDocuments(n,t):zt.resolve(null)})})},t.prototype.acknowledgeBatch=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary-idempotent",function(n){var r=t.batch.keys(),i=e.remoteDocuments.newChangeBuffer({trackRemovals:!0});return e.mutationQueue.acknowledgeBatch(n,t.batch,t.streamToken).next(function(){return e.applyWriteToRemoteDocuments(n,t,i)}).next(function(){return i.apply(n)}).next(function(){return e.mutationQueue.performConsistencyCheck(n)}).next(function(){return e.localDocuments.getDocuments(n,r)})})},t.prototype.rejectBatch=function(t){var e=this;return this.persistence.runTransaction("Reject batch","readwrite-primary-idempotent",function(n){var r;return e.mutationQueue.lookupMutationBatch(n,t).next(function(t){return b(null!==t,"Attempt to reject nonexistent batch!"),r=t.keys(),e.mutationQueue.removeMutationBatch(n,t)}).next(function(){return e.mutationQueue.performConsistencyCheck(n)}).next(function(){return e.localDocuments.getDocuments(n,r)})})},t.prototype.getHighestUnacknowledgedBatchId=function(){var t=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly-idempotent",function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)})},t.prototype.getLastStreamToken=function(){var t=this;return this.persistence.runTransaction("Get last stream token","readonly-idempotent",function(e){return t.mutationQueue.getLastStreamToken(e)})},t.prototype.setLastStreamToken=function(t){var e=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary-idempotent",function(n){return e.mutationQueue.setLastStreamToken(n,t)})},t.prototype.getLastRemoteSnapshotVersion=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly-idempotent",function(e){return t.queryCache.getLastRemoteSnapshotVersion(e)})},t.prototype.applyRemoteEvent=function(e){var n=this,r=e.snapshotVersion,i=this.queryDataByTarget;return this.persistence.runTransaction("Apply remote event","readwrite-primary-idempotent",function(o){var s=n.remoteDocuments.newChangeBuffer({trackRemovals:!0});i=n.queryDataByTarget;var a=[];T(e.targetChanges,function(e,s){var c=i.get(e);if(c){a.push(n.queryCache.removeMatchingKeys(o,s.removedDocuments,e).next(function(){return n.queryCache.addMatchingKeys(o,s.addedDocuments,e)}));var u=s.resumeToken;if(u.length>0){var l=c.withResumeToken(u,r).withSequenceNumber(o.currentSequenceNumber);i=i.insert(e,l),t.shouldPersistQueryData(c,l,s)&&a.push(n.queryCache.updateQueryData(o,l))}}});var c=At(),u=Lt();if(e.documentUpdates.forEach(function(t,e){u=u.add(t)}),a.push(s.getEntries(o,u).next(function(t){e.documentUpdates.forEach(function(i,u){var l=t.get(i);u instanceof Be&&u.version.isEqual(St.MIN)?(s.removeEntry(i,r),c=c.insert(i,u)):null==l||u.version.compareTo(l.version)>0||0===u.version.compareTo(l.version)&&l.hasPendingWrites?(St.MIN.isEqual(r)&&g($n,"Cannot add a document when the remote version is zero"),s.addEntry(u,r),c=c.insert(i,u)):p($n,"Ignoring outdated watch update for ",i,". Current version:",l.version," Watch version:",u.version),e.resolvedLimboDocuments.has(i)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,i))})})),!r.isEqual(St.MIN)){var l=n.queryCache.getLastRemoteSnapshotVersion(o).next(function(t){return b(r.compareTo(t)>=0,"Watch stream reverted to previous snapshot?? "+r+" < "+t),n.queryCache.setTargetsMetadata(o,o.currentSequenceNumber,r)});a.push(l)}return zt.waitFor(a).next(function(){return s.apply(o)}).next(function(){return n.localDocuments.getLocalViewOfDocuments(o,c)})}).then(function(t){return n.queryDataByTarget=i,t})},t.shouldPersistQueryData=function(t,e,n){return b(e.resumeToken.length>0,"Attempted to persist query data with no resume token"),0===t.resumeToken.length||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0},t.prototype.notifyLocalViewChanges=function(t){for(var e=this,n=0,r=t;n<r.length;n++){var i=r[n],o=i.targetId;if(this.localViewReferences.addReferences(i.addedKeys,o),this.localViewReferences.removeReferences(i.removedKeys,o),!i.fromCache){var s=this.queryDataByTarget.get(o);b(null!==s,"Can't set limbo-free snapshot version for unknown target: "+o);var a=s.withLastLimboFreeSnapshotVersion(s.snapshotVersion);this.queryDataByTarget=this.queryDataByTarget.insert(o,a)}}return this.persistence.runTransaction("notifyLocalViewChanges","readwrite-idempotent",function(n){return zt.forEach(t,function(t){return zt.forEach(t.removedKeys,function(t){return e.persistence.referenceDelegate.removeReference(n,t)})})})},t.prototype.nextMutationBatch=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch","readonly-idempotent",function(n){return void 0===t&&(t=Vt),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t)})},t.prototype.readDocument=function(t){var e=this;return this.persistence.runTransaction("read document","readonly-idempotent",function(n){return e.localDocuments.getDocument(n,t)})},t.prototype.allocateQuery=function(t){var e=this;return this.persistence.runTransaction("Allocate query","readwrite-idempotent",function(n){var r;return e.queryCache.getQueryData(n,t).next(function(i){return i?zt.resolve(r=i):e.queryCache.allocateTargetId(n).next(function(i){return r=new Cn(t,i,Sn.Listen,n.currentSequenceNumber),e.queryCache.addQueryData(n,r).next(function(){return r})})})}).then(function(n){return b(null===e.queryDataByTarget.get(n.targetId),"Tried to allocate an already allocated query: "+t),e.queryDataByTarget=e.queryDataByTarget.insert(n.targetId,n),e.targetIdByQuery.set(t,n.targetId),n})},t.prototype.getQueryData=function(t,e){var n=this.targetIdByQuery.get(e);return void 0!==n?zt.resolve(this.queryDataByTarget.get(n)):this.queryCache.getQueryData(t,e)},t.prototype.releaseQuery=function(t,e){var n,r=this;return this.persistence.runTransaction("Release query",e?"readwrite-idempotent":"readwrite-primary-idempotent",function(i){var o=r.targetIdByQuery.get(t);b(void 0!==o,"Tried to release nonexistent query: "+t);var s=r.queryDataByTarget.get(n=o),a=r.localViewReferences.removeReferencesForId(n);return e?zt.resolve():zt.forEach(a,function(t){return r.persistence.referenceDelegate.removeReference(i,t)}).next(function(){r.persistence.referenceDelegate.removeTarget(i,s)})}).then(function(){r.queryDataByTarget=r.queryDataByTarget.remove(n),r.targetIdByQuery.delete(t)})},t.prototype.executeQuery=function(t,e){var n=this,r=St.MIN,i=Lt();return this.persistence.runTransaction("Execute query","readonly-idempotent",function(o){return n.getQueryData(o,t).next(function(t){if(t)return r=t.lastLimboFreeSnapshotVersion,n.queryCache.getMatchingKeysForTargetId(o,t.targetId).next(function(t){i=t})}).next(function(){return n.queryEngine.getDocumentsMatchingQuery(o,t,e?r:St.MIN,e?i:Lt())}).next(function(t){return{documents:t,remoteKeys:i}})})},t.prototype.remoteDocumentKeys=function(t){var e=this;return this.persistence.runTransaction("Remote document keys","readonly-idempotent",function(n){return e.queryCache.getMatchingKeysForTargetId(n,t)})},t.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},t.prototype.removeCachedMutationBatchMetadata=function(t){this.mutationQueue.removeCachedMutationKeys(t)},t.prototype.setNetworkEnabled=function(t){this.persistence.setNetworkEnabled(t)},t.prototype.applyWriteToRemoteDocuments=function(t,e,n){var r=this,i=e.batch,o=i.keys(),s=zt.resolve();return o.forEach(function(r){s=s.next(function(){return n.getEntry(t,r)}).next(function(t){var o=t,s=e.docVersions.get(r);b(null!==s,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(s)<0)&&((o=i.applyToRemoteDocument(r,o,e))?n.addEntry(o,e.commitVersion):b(!t,"Mutation batch "+i+" applied to document "+t+" resulted in null"))})}),s.next(function(){return r.mutationQueue.removeMutationBatch(t,i)})},t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary-idempotent",function(n){return t.collect(n,e.queryDataByTarget)})},t.prototype.getQueryForTarget=function(t){var e=this,n=this.queryDataByTarget.get(t);return n?Promise.resolve(n.query):this.persistence.runTransaction("Get query data","readonly-idempotent",function(n){return e.queryCache.getQueryDataForTarget(n,t).next(function(t){return t?t.query:null})})},t.prototype.getNewDocumentChanges=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly-idempotent",function(e){return t.remoteDocuments.getNewDocumentChanges(e,t.lastDocumentChangeReadTime)}).then(function(e){var n=e.changedDocs;return t.lastDocumentChangeReadTime=e.readTime,n})},t.prototype.synchronizeLastDocumentChangeReadTime=function(){return o.__awaiter(this,void 0,void 0,function(){var t,e=this;return o.__generator(this,function(n){return this.remoteDocuments instanceof Ke?(t=this.remoteDocuments,[2,this.persistence.runTransaction("Synchronize last document change read time","readonly-idempotent",function(e){return t.getLastDocumentChange(e)}).then(function(t){e.lastDocumentChangeReadTime=t.readTime})]):[2]})})},t.RESUME_TOKEN_MAX_AGE_MICROS=3e8,t}(),Gn=function(){function t(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=w(),this.batchesByDocumentKey=new kt(Kn.compareByKey)}return t.prototype.checkEmpty=function(t){return zt.resolve(0===this.mutationQueue.length)},t.prototype.acknowledgeBatch=function(t,e,n){var r=e.batchId,i=this.indexOfExistingBatchId(r,"acknowledged");b(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return b(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,zt.resolve()},t.prototype.getLastStreamToken=function(t){return zt.resolve(this.lastStreamToken)},t.prototype.setLastStreamToken=function(t,e){return this.lastStreamToken=e,zt.resolve()},t.prototype.addMutationBatch=function(t,e,n,r){b(0!==r.length,"Mutation batches should not be empty");var i=this.nextBatchId;this.nextBatchId++,this.mutationQueue.length>0&&b(this.mutationQueue[this.mutationQueue.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order");var o=new qt(i,e,n,r);this.mutationQueue.push(o);for(var s=0,a=r;s<a.length;s++){var c=a[s];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new Kn(c.key,i)),this.indexManager.addToCollectionParentIndex(t,c.key.path.popLast())}return zt.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return zt.resolve(this.findMutationBatch(e))},t.prototype.lookupMutationKeys=function(t,e){var n=this.findMutationBatch(e);return b(null!=n,"Failed to find local mutation batch."),zt.resolve(n.keys())},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.indexOfBatchId(e+1),r=n<0?0:n;return zt.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return zt.resolve(0===this.mutationQueue.length?Vt:this.nextBatchId-1)},t.prototype.getAllMutationBatches=function(t){return zt.resolve(this.mutationQueue.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Kn(e,0),i=new Kn(e,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],function(t){b(e.isEqual(t.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(t.targetOrBatchId);b(null!==r,"Batches in the index must exist in the main table"),o.push(r)}),zt.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new kt(G);return e.forEach(function(t){var e=new Kn(t,0),i=new Kn(t,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([e,i],function(e){b(t.isEqual(e.key),"For each key, should only iterate over a single key's batches"),r=r.add(e.targetOrBatchId)})}),zt.resolve(this.findMutationBatches(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){b(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=e.path,r=n.length+1,i=n;ht.isDocumentKey(i)||(i=i.child(""));var o=new Kn(new ht(i),0),s=new kt(G);return this.batchesByDocumentKey.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.targetOrBatchId)),!0)},o),zt.resolve(this.findMutationBatches(s))},t.prototype.findMutationBatches=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.findMutationBatch(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;b(0===this.indexOfExistingBatchId(e.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return zt.forEach(e.mutations,function(i){var o=new Kn(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.removeMutationReference(t,i.key)}).next(function(){n.batchesByDocumentKey=r})},t.prototype.removeCachedMutationKeys=function(t){},t.prototype.containsKey=function(t,e){var n=new Kn(e,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return zt.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return 0===this.mutationQueue.length&&b(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),zt.resolve()},t.prototype.indexOfExistingBatchId=function(t,e){var n=this.indexOfBatchId(t);return b(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+e),n},t.prototype.indexOfBatchId=function(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId},t.prototype.findMutationBatch=function(t){var e=this.indexOfBatchId(t);if(e<0||e>=this.mutationQueue.length)return null;var n=this.mutationQueue[e];return b(n.batchId===t,"If found batch must match"),n},t}(),Xn=function(){function t(t){this.persistence=t,this.queries=new We(function(t){return t.canonicalId()}),this.lastRemoteSnapshotVersion=St.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new Hn,this.targetCount=0,this.targetIdGenerator=se.forQueryCache()}return t.prototype.getTargetCount=function(t){return zt.resolve(this.targetCount)},t.prototype.forEachTarget=function(t,e){return this.queries.forEach(function(t,n){return e(n)}),zt.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return zt.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return zt.resolve(this.highestSequenceNumber)},t.prototype.allocateTargetId=function(t){var e=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=e,zt.resolve(e)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.highestSequenceNumber&&(this.highestSequenceNumber=e),zt.resolve()},t.prototype.saveQueryData=function(t){this.queries.set(t.query,t);var e=t.targetId;e>this.highestTargetId&&(this.highestTargetId=e),t.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=t.sequenceNumber)},t.prototype.addQueryData=function(t,e){return b(!this.queries.has(e.query),"Adding a query that already exists"),this.saveQueryData(e),this.targetCount+=1,zt.resolve()},t.prototype.updateQueryData=function(t,e){return b(this.queries.has(e.query),"Updating a non-existent query"),this.saveQueryData(e),zt.resolve()},t.prototype.removeQueryData=function(t,e){return b(this.targetCount>0,"Removing a target from an empty cache"),b(this.queries.has(e.query),"Removing a non-existent target from the cache"),this.queries.delete(e.query),this.references.removeReferencesForId(e.targetId),this.targetCount-=1,zt.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.queries.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.queries.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),zt.waitFor(o).next(function(){return i})},t.prototype.getQueryCount=function(t){return zt.resolve(this.targetCount)},t.prototype.getQueryData=function(t,e){var n=this.queries.get(e)||null;return zt.resolve(n)},t.prototype.getQueryDataForTarget=function(t,e){return y("Not yet implemented.")},t.prototype.addMatchingKeys=function(t,e,n){this.references.addReferences(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.addReference(t,e))}),zt.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){this.references.removeReferences(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.removeReference(t,e))}),zt.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this.references.removeReferencesForId(e),zt.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.references.referencesForId(e);return zt.resolve(n)},t.prototype.containsKey=function(t,e){return zt.resolve(this.references.containsKey(e))},t}(),Yn=function(){function t(t,e){this.indexManager=t,this.sizer=e,this.docs=new Ct(ht.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){b(!n.isEqual(St.MIN),"Cannot add a document with a read time of zero");var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.sizer(e);return this.docs=this.docs.insert(r,{maybeDocument:e,size:s,readTime:n}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return zt.resolve(n?n.maybeDocument:null)},t.prototype.getEntries=function(t,e){var n=this,r=Nt();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.maybeDocument:null)}),zt.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){b(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var r=Dt(),i=new ht(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,c=a.maybeDocument,u=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;u.compareTo(n)<=0||c instanceof qe&&e.matches(c)&&(r=r.insert(c.key,c))}return zt.resolve(r)},t.prototype.forEachDocumentKey=function(t,e){return zt.forEach(this.docs,function(t){return e(t)})},t.prototype.getNewDocumentChanges=function(t,e){throw new Error("getNewDocumentChanges() is not supported with MemoryPersistence")},t.prototype.newChangeBuffer=function(e){return new t.RemoteDocumentChangeBuffer(this)},t.prototype.getSize=function(t){return zt.resolve(this.size)},t.RemoteDocumentChangeBuffer=function(t){function e(e){var n=t.call(this)||this;return n.documentCache=e,n}return o.__extends(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i?n.push(e.documentCache.addEntry(t,i,e.readTime)):e.documentCache.removeEntry(r)}),zt.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.documentCache.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.documentCache.getEntries(t,e)},e}(He),t}(),Zn=function(){function t(t,e){var n=this;this.clientId=t,this.mutationQueues={},this.listenSequence=new ot(0),this._started=!1,this._started=!0,this.referenceDelegate=e(this),this.queryCache=new Xn(this),this.indexManager=new Ye,this.remoteDocumentCache=new Yn(this.indexManager,function(t){return n.referenceDelegate.documentSize(t)})}return t.createLruPersistence=function(e,n,r){return new t(e,function(t){return new er(t,new In(n),r)})},t.createEagerPersistence=function(e){return new t(e,function(t){return new tr(t)})},t.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),t.prototype.getActiveClients=function(){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){return[2,[this.clientId]]})})},t.prototype.setPrimaryStateListener=function(t){return t(!0)},t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(t){},t.prototype.getIndexManager=function(){return this.indexManager},t.prototype.getMutationQueue=function(t){var e=this.mutationQueues[t.toKey()];return e||(e=new Gn(this.indexManager,this.referenceDelegate),this.mutationQueues[t.toKey()]=e),e},t.prototype.getQueryCache=function(){return this.queryCache},t.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},t.prototype.runTransaction=function(t,e,n){var r=this;p("MemoryPersistence","Starting transaction:",t);var i=new Jn(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next(function(t){return r.referenceDelegate.onTransactionCommitted(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.mutationQueuesContainKey=function(t,e){return zt.or((n=this.mutationQueues,r=[],k(n,function(t,e){return r.push(e)}),r).map(function(n){return function(){return n.containsKey(t,e)}}));var n,r},t}(),Jn=function(t){function e(e){var n=t.call(this)||this;return n.currentSequenceNumber=e,n}return o.__extends(e,t),e}(Nn),tr=function(){function t(t){this.persistence=t,this.inMemoryPins=null,this._orphanedDocuments=null}return Object.defineProperty(t.prototype,"orphanedDocuments",{get:function(){if(this._orphanedDocuments)return this._orphanedDocuments;throw y("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.addReference=function(t,e){return this.orphanedDocuments.delete(e),zt.resolve()},t.prototype.removeReference=function(t,e){return this.orphanedDocuments.add(e),zt.resolve()},t.prototype.removeMutationReference=function(t,e){return this.orphanedDocuments.add(e),zt.resolve()},t.prototype.removeTarget=function(t,e){var n=this,r=this.persistence.getQueryCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.orphanedDocuments.add(t)})}).next(function(){return r.removeQueryData(t,e)})},t.prototype.onTransactionStarted=function(){this._orphanedDocuments=new Set},t.prototype.onTransactionCommitted=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return zt.forEach(this.orphanedDocuments,function(r){return e.isReferenced(t,r).next(function(t){t||n.removeEntry(r)})}).next(function(){return e._orphanedDocuments=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.isReferenced(t,e).next(function(t){t?n.orphanedDocuments.delete(e):n.orphanedDocuments.add(e)})},t.prototype.documentSize=function(t){return 0},t.prototype.isReferenced=function(t,e){var n=this;return zt.or([function(){return n.persistence.getQueryCache().containsKey(t,e)},function(){return n.persistence.mutationQueuesContainKey(t,e)},function(){return zt.resolve(n.inMemoryPins.containsKey(e))}])},t}(),er=function(){function t(t,e,n){this.persistence=t,this.serializer=e,this.inMemoryPins=null,this.orphanedSequenceNumbers=new We(function(t){return yt(t.path)}),this.garbageCollector=new An(this,n)}return t.prototype.onTransactionStarted=function(){},t.prototype.onTransactionCommitted=function(t){return zt.resolve()},t.prototype.forEachTarget=function(t,e){return this.persistence.getQueryCache().forEachTarget(t,e)},t.prototype.getSequenceNumberCount=function(t){var e=this.orphanedDocumentCount(t);return this.persistence.getQueryCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.orphanedDocumentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,function(t){e++}).next(function(){return e})},t.prototype.forEachOrphanedDocumentSequenceNumber=function(t,e){var n=this;return zt.forEach(this.orphanedSequenceNumbers,function(r,i){return n.isPinned(t,r,i).next(function(t){return t?zt.resolve():e(i)})})},t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.removeTargets=function(t,e,n){return this.persistence.getQueryCache().removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.forEachDocumentKey(t,function(i){return n.isPinned(t,i,e).next(function(t){t||(r++,o.removeEntry(i))})}).next(function(){return o.apply(t)}).next(function(){return r})},t.prototype.removeMutationReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),zt.resolve()},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getQueryCache().updateQueryData(t,n)},t.prototype.addReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),zt.resolve()},t.prototype.removeReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),zt.resolve()},t.prototype.updateLimboDocument=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),zt.resolve()},t.prototype.documentSize=function(t){var e,n=this.serializer.toDbRemoteDocument(t,t.version);if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw y("Unknown remote document type");e=n.noDocument}return JSON.stringify(e).length},t.prototype.isPinned=function(t,e,n){var r=this;return zt.or([function(){return r.persistence.mutationQueuesContainKey(t,e)},function(){return zt.resolve(r.inMemoryPins.containsKey(e))},function(){return r.persistence.getQueryCache().containsKey(t,e)},function(){var t=r.orphanedSequenceNumbers.get(e);return zt.resolve(void 0!==t&&t>n)}])},t.prototype.getCacheSize=function(t){return this.persistence.getRemoteDocumentCache().getSize(t)},t}(),nr=function(){function t(){}return t.prototype.setLocalDocumentsView=function(t){this.localDocumentsView=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){return b(void 0!==this.localDocumentsView,"setLocalDocumentsView() not called"),this.localDocumentsView.getDocumentsMatchingQuery(t,e,St.MIN)},t}(),rr=Number,ir=rr.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),or=rr.MAX_SAFE_INTEGER||Math.pow(2,53)-1,sr=rr.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};function ar(t){return null==t}function cr(t){return sr(t)&&t<=or&&t>=ir}var ur=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.queue=t,this.timerId=e,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return t.prototype.reset=function(){this.currentBaseMs=0},t.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},t.prototype.backoffAndRun=function(t){var e=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);this.currentBaseMs>0&&p("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,function(){return e.lastAttemptTime=Date.now(),t()}),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},t.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},t.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},t}(),lr="PersistentStream",hr=function(t){return t[t.Initial=0]="Initial",t[t.Starting=1]="Starting",t[t.Open=2]="Open",t[t.Error=3]="Error",t[t.Backoff=4]="Backoff",t}({}),dr=function(){function t(t,e,n,r,i,o){this.queue=t,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=hr.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new ur(t,e)}return t.prototype.isStarted=function(){return this.state===hr.Starting||this.state===hr.Open||this.state===hr.Backoff},t.prototype.isOpen=function(){return this.state===hr.Open},t.prototype.start=function(){this.state!==hr.Error?(b(this.state===hr.Initial,"Already started"),this.auth()):this.performBackoff()},t.prototype.stop=function(){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){switch(t.label){case 0:return this.isStarted()?[4,this.close(hr.Initial)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.inhibitBackoff=function(){b(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=hr.Initial,this.backoff.reset()},t.prototype.markIdle=function(){var t=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,function(){return t.handleIdleCloseTimer()}))},t.prototype.sendRequest=function(t){this.cancelIdleCheck(),this.stream.send(t)},t.prototype.handleIdleCloseTimer=function(){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){return this.isOpen()?[2,this.close(hr.Initial)]:[2]})})},t.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},t.prototype.close=function(t,e){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(n){switch(n.label){case 0:return b(this.isStarted(),"Only started streams should be closed."),b(t===hr.Error||ar(e),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,t!==hr.Error?this.backoff.reset():e&&e.code===_.RESOURCE_EXHAUSTED?(g(e.toString()),g("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):e&&e.code===_.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.onClose(e)];case 1:return n.sent(),[2]}})})},t.prototype.tearDown=function(){},t.prototype.auth=function(){var t=this;b(this.state===hr.Initial,"Must be in initial state to auth"),this.state=hr.Starting;var e=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then(function(e){t.closeCount===n&&t.startStream(e)},function(n){e(function(){var e=new S(_.UNKNOWN,"Fetching auth token failed: "+n.message);return t.handleStreamClose(e)})})},t.prototype.startStream=function(t){var e=this;b(this.state===hr.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(t),this.stream.onOpen(function(){n(function(){return b(e.state===hr.Starting,"Expected stream to be in state Starting, but was "+e.state),e.state=hr.Open,e.listener.onOpen()})}),this.stream.onClose(function(t){n(function(){return e.handleStreamClose(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.performBackoff=function(){var t=this;b(this.state===hr.Error,"Should only perform backoff when in Error state"),this.state=hr.Backoff,this.backoff.backoffAndRun(function(){return o.__awaiter(t,void 0,void 0,function(){return o.__generator(this,function(t){return b(this.state===hr.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=hr.Initial,this.start(),b(this.isStarted(),"PersistentStream should have started"),[2]})})})},t.prototype.handleStreamClose=function(t){return b(this.isStarted(),"Can't handle server close on non-started stream"),p(lr,"close with error: "+t),this.stream=null,this.close(hr.Error,t)},t.prototype.getCloseGuardedDispatcher=function(t){var e=this;return function(n){e.queue.enqueueAndForget(function(){return e.closeCount===t?n():(p(lr,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),fr=function(t){function e(e,n,r,i,o){var s=t.call(this,e,ft.ListenStreamConnectionBackoff,ft.ListenStreamIdle,n,r,o)||this;return s.serializer=i,s}return o.__extends(e,t),e.prototype.startRpc=function(t){return this.connection.openStream("Listen",t)},e.prototype.onMessage=function(t){this.backoff.reset();var e=this.serializer.fromWatchChange(t),n=this.serializer.versionFromListenResponse(t);return this.listener.onWatchChange(e,n)},e.prototype.watch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.addTarget=this.serializer.toTarget(t);var n=this.serializer.toListenRequestLabels(t);n&&(e.labels=n),this.sendRequest(e)},e.prototype.unwatch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.removeTarget=t,this.sendRequest(e)},e}(dr),pr=function(t){function e(e,n,r,i,o){var s=t.call(this,e,ft.WriteStreamConnectionBackoff,ft.WriteStreamIdle,n,r,o)||this;return s.serializer=i,s.handshakeComplete_=!1,s.lastStreamToken=w(),s}return o.__extends(e,t),Object.defineProperty(e.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.handshakeComplete_=!1,t.prototype.start.call(this)},e.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},e.prototype.startRpc=function(t){return this.connection.openStream("Write",t)},e.prototype.onMessage=function(t){if(b(!!t.streamToken,"Got a write response without a stream token"),this.lastStreamToken=t.streamToken,this.handshakeComplete_){this.backoff.reset();var e=this.serializer.fromWriteResults(t.writeResults,t.commitTime),n=this.serializer.fromVersion(t.commitTime);return this.listener.onMutationResult(n,e)}return b(!t.writeResults||0===t.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},e.prototype.writeHandshake=function(){b(this.isOpen(),"Writing handshake requires an opened stream"),b(!this.handshakeComplete_,"Handshake already completed");var t={};t.database=this.serializer.encodedDatabaseId,this.sendRequest(t)},e.prototype.writeMutations=function(t){var e=this;b(this.isOpen(),"Writing mutations requires an opened stream"),b(this.handshakeComplete_,"Handshake must be complete before writing mutations"),b(this.lastStreamToken.length>0,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:t.map(function(t){return e.serializer.toMutation(t)})};this.sendRequest(n)},e}(dr),gr=function(){function t(t,e,n,r){this.queue=t,this.connection=e,this.credentials=n,this.serializer=r}return t.prototype.newPersistentWriteStream=function(t){return new pr(this.queue,this.connection,this.credentials,this.serializer,t)},t.prototype.newPersistentWatchStream=function(t){return new fr(this.queue,this.connection,this.credentials,this.serializer,t)},t.prototype.commit=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,writes:t.map(function(t){return e.serializer.toMutation(t)})};return this.invokeRPC("Commit",n).then(function(t){return e.serializer.fromWriteResults(t.writeResults,t.commitTime)})},t.prototype.lookup=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,documents:t.map(function(t){return e.serializer.toName(t)})};return this.invokeStreamingRPC("BatchGetDocuments",n).then(function(n){var r=At();n.forEach(function(t){var n=e.serializer.fromMaybeDocument(t);r=r.insert(n.key,n)});var i=[];return t.forEach(function(t){var e=r.get(t);b(!!e,"Missing entity in write response for "+t),i.push(e)}),i})},t.prototype.invokeRPC=function(t,e){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeRPC(t,e,r)}).catch(function(t){throw t.code===_.UNAUTHENTICATED&&n.credentials.invalidateToken(),t})},t.prototype.invokeStreamingRPC=function(t,e){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeStreamingRPC(t,e,r)}).catch(function(t){throw t.code===_.UNAUTHENTICATED&&n.credentials.invalidateToken(),t})},t}(),mr=function(){function t(t){this.datastore=t,this.readVersions=Rt(),this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return o.__awaiter(this,void 0,void 0,function(){var e,n=this;return o.__generator(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new S(_.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.datastore.lookup(t)];case 1:return(e=r.sent()).forEach(function(t){t instanceof Be||t instanceof qe?n.recordVersion(t):y("Document in a transaction was a "+t.constructor.name)}),[2,e]}})})},t.prototype.set=function(t,e){this.write(e.toMutations(t,this.precondition(t))),this.writtenDocs.add(t)},t.prototype.update=function(t,e){try{this.write(e.toMutations(t,this.preconditionForUpdate(t)))}catch(n){this.lastWriteError=n}this.writtenDocs.add(t)},t.prototype.delete=function(t){this.write([new _e(t,this.precondition(t))]),this.writtenDocs.add(t)},t.prototype.commit=function(){return o.__awaiter(this,void 0,void 0,function(){var t;return o.__generator(this,function(e){switch(e.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;if(t=this.readVersions,this.mutations.forEach(function(e){t=t.remove(e.key)}),!t.isEmpty())throw new S(_.INVALID_ARGUMENT,"Every document read in a transaction must also be written.");return[4,this.datastore.commit(this.mutations)];case 1:return e.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t instanceof qe)e=t.version;else{if(!(t instanceof Be))throw y("Document in a transaction was a "+t.constructor.name);e=St.forDeletedDoc()}var n=this.readVersions.get(t.key);if(null!==n){if(!e.isEqual(n))throw new S(_.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(t.key,e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t);return!this.writtenDocs.has(t)&&e?me.updateTime(e):me.NONE},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t);if(!this.writtenDocs.has(t)&&e){if(e.isEqual(St.forDeletedDoc()))throw new S(_.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return me.updateTime(e)}return me.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations=this.mutations.concat(t)},t.prototype.ensureCommitNotCalled=function(){b(!this.committed,"A transaction object cannot be used after its update callback has been invoked.")},t}(),yr=function(t){return t[t.Unknown=0]="Unknown",t[t.Online=1]="Online",t[t.Offline=2]="Offline",t}({}),br=function(t){return t[t.RemoteStore=0]="RemoteStore",t[t.SharedClientState=1]="SharedClientState",t}({}),vr=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state=yr.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return t.prototype.handleWatchStreamStart=function(){var t=this;0===this.watchStreamFailures&&(this.setAndBroadcast(yr.Unknown),b(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(ft.OnlineStateTimeout,1e4,function(){return t.onlineStateTimer=null,b(t.state===yr.Unknown,"Timer should be canceled if we transitioned to a different state."),t.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),t.setAndBroadcast(yr.Offline),Promise.resolve()}))},t.prototype.handleWatchStreamFailure=function(t){this.state===yr.Online?(this.setAndBroadcast(yr.Unknown),b(0===this.watchStreamFailures,"watchStreamFailures must be 0"),b(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,this.watchStreamFailures>=1&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+t.toString()),this.setAndBroadcast(yr.Offline)))},t.prototype.set=function(t){this.clearOnlineStateTimer(),this.watchStreamFailures=0,t===yr.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(t)},t.prototype.setAndBroadcast=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.logClientOfflineWarningIfNecessary=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(g(e),this.shouldWarnClientIsOffline=!1):p("OnlineStateTracker",e)},t.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},t}(),wr=function(t){return t[t.OK=0]="OK",t[t.CANCELLED=1]="CANCELLED",t[t.UNKNOWN=2]="UNKNOWN",t[t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",t[t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",t[t.NOT_FOUND=5]="NOT_FOUND",t[t.ALREADY_EXISTS=6]="ALREADY_EXISTS",t[t.PERMISSION_DENIED=7]="PERMISSION_DENIED",t[t.UNAUTHENTICATED=16]="UNAUTHENTICATED",t[t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",t[t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",t[t.ABORTED=10]="ABORTED",t[t.OUT_OF_RANGE=11]="OUT_OF_RANGE",t[t.UNIMPLEMENTED=12]="UNIMPLEMENTED",t[t.INTERNAL=13]="INTERNAL",t[t.UNAVAILABLE=14]="UNAVAILABLE",t[t.DATA_LOSS=15]="DATA_LOSS",t}({});function _r(t){switch(t){case _.OK:return y("Treated status OK as error");case _.CANCELLED:case _.UNKNOWN:case _.DEADLINE_EXCEEDED:case _.RESOURCE_EXHAUSTED:case _.INTERNAL:case _.UNAVAILABLE:case _.UNAUTHENTICATED:return!1;case _.INVALID_ARGUMENT:case _.NOT_FOUND:case _.ALREADY_EXISTS:case _.PERMISSION_DENIED:case _.FAILED_PRECONDITION:case _.ABORTED:case _.OUT_OF_RANGE:case _.UNIMPLEMENTED:case _.DATA_LOSS:return!0;default:return y("Unknown status code: "+t)}}function Sr(t){if(void 0===t)return g("GRPC error has no .code"),_.UNKNOWN;switch(t){case wr.OK:return _.OK;case wr.CANCELLED:return _.CANCELLED;case wr.UNKNOWN:return _.UNKNOWN;case wr.DEADLINE_EXCEEDED:return _.DEADLINE_EXCEEDED;case wr.RESOURCE_EXHAUSTED:return _.RESOURCE_EXHAUSTED;case wr.INTERNAL:return _.INTERNAL;case wr.UNAVAILABLE:return _.UNAVAILABLE;case wr.UNAUTHENTICATED:return _.UNAUTHENTICATED;case wr.INVALID_ARGUMENT:return _.INVALID_ARGUMENT;case wr.NOT_FOUND:return _.NOT_FOUND;case wr.ALREADY_EXISTS:return _.ALREADY_EXISTS;case wr.PERMISSION_DENIED:return _.PERMISSION_DENIED;case wr.FAILED_PRECONDITION:return _.FAILED_PRECONDITION;case wr.ABORTED:return _.ABORTED;case wr.OUT_OF_RANGE:return _.OUT_OF_RANGE;case wr.UNIMPLEMENTED:return _.UNIMPLEMENTED;case wr.DATA_LOSS:return _.DATA_LOSS;default:return y("Unknown status code: "+t)}}function Cr(t){if(void 0===t)return wr.OK;switch(t){case _.OK:return wr.OK;case _.CANCELLED:return wr.CANCELLED;case _.UNKNOWN:return wr.UNKNOWN;case _.DEADLINE_EXCEEDED:return wr.DEADLINE_EXCEEDED;case _.RESOURCE_EXHAUSTED:return wr.RESOURCE_EXHAUSTED;case _.INTERNAL:return wr.INTERNAL;case _.UNAVAILABLE:return wr.UNAVAILABLE;case _.UNAUTHENTICATED:return wr.UNAUTHENTICATED;case _.INVALID_ARGUMENT:return wr.INVALID_ARGUMENT;case _.NOT_FOUND:return wr.NOT_FOUND;case _.ALREADY_EXISTS:return wr.ALREADY_EXISTS;case _.PERMISSION_DENIED:return wr.PERMISSION_DENIED;case _.FAILED_PRECONDITION:return wr.FAILED_PRECONDITION;case _.ABORTED:return wr.ABORTED;case _.OUT_OF_RANGE:return wr.OUT_OF_RANGE;case _.UNIMPLEMENTED:return wr.UNIMPLEMENTED;case _.DATA_LOSS:return wr.DATA_LOSS;default:return y("Unknown status code: "+t)}}var Ir=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||ht.comparator(e.key,n.key)}:function(t,e){return ht.comparator(t.key,e.key)},this.keyedMap=Dt(),this.sortedSet=new Ct(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Er=function(t){return t[t.Added=0]="Added",t[t.Removed=1]="Removed",t[t.Modified=2]="Modified",t[t.Metadata=3]="Metadata",t}({}),Tr=function(t){return t[t.Local=0]="Local",t[t.Synced=1]="Synced",t}({}),kr=function(){function t(){this.changeMap=new Ct(ht.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.changeMap.get(e);n?t.type!==Er.Added&&n.type===Er.Metadata?this.changeMap=this.changeMap.insert(e,t):t.type===Er.Metadata&&n.type!==Er.Removed?this.changeMap=this.changeMap.insert(e,{type:n.type,doc:t.doc}):t.type===Er.Modified&&n.type===Er.Modified?this.changeMap=this.changeMap.insert(e,{type:Er.Modified,doc:t.doc}):t.type===Er.Modified&&n.type===Er.Added?this.changeMap=this.changeMap.insert(e,{type:Er.Added,doc:t.doc}):t.type===Er.Removed&&n.type===Er.Added?this.changeMap=this.changeMap.remove(e):t.type===Er.Removed&&n.type===Er.Modified?this.changeMap=this.changeMap.insert(e,{type:Er.Removed,doc:n.doc}):t.type===Er.Added&&n.type===Er.Removed?this.changeMap=this.changeMap.insert(e,{type:Er.Modified,doc:t.doc}):y("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(e,t)},t.prototype.getChanges=function(){var t=[];return this.changeMap.inorderTraversal(function(e,n){t.push(n)}),t},t}(),Or=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:Er.Added,doc:t})}),new t(e,n,Ir.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),xr=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r,i=((r={})[e]=Ar.createSynthesizedTargetChangeForCurrentChange(e,n),r);return new t(St.MIN,i,Ut(),At(),Lt())},t}(),Ar=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(w(),n,Lt(),Lt(),Lt())},t}(),Nr=function(){return function(t,e,n,r){this.updatedTargetIds=t,this.removedTargetIds=e,this.key=n,this.newDoc=r}}(),Mr=function(){return function(t,e){this.targetId=t,this.existenceFilter=e}}(),Dr=function(t){return t[t.NoChange=0]="NoChange",t[t.Added=1]="Added",t[t.Removed=2]="Removed",t[t.Current=3]="Current",t[t.Reset=4]="Reset",t}({}),Pr=function(){return function(t,e,n,r){void 0===n&&(n=w()),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}(),Rr=function(){function t(){this.pendingResponses=0,this.documentChanges=Fr(),this._resumeToken=w(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),t.prototype.updateResumeToken=function(t){t.length>0&&(this._hasPendingChanges=!0,this._resumeToken=t)},t.prototype.toTargetChange=function(){var t=Lt(),e=Lt(),n=Lt();return this.documentChanges.forEach(function(r,i){switch(i){case Er.Added:t=t.add(r);break;case Er.Modified:e=e.add(r);break;case Er.Removed:n=n.add(r);break;default:y("Encountered invalid change type: "+i)}}),new Ar(this._resumeToken,this._current,t,e,n)},t.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=Fr()},t.prototype.addDocumentChange=function(t,e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(t,e)},t.prototype.removeDocumentChange=function(t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(t)},t.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},t.prototype.recordTargetResponse=function(){this.pendingResponses-=1},t.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},t}(),jr=function(){function t(t){this.metadataProvider=t,this.targetStates={},this.pendingDocumentUpdates=At(),this.pendingDocumentTargetMapping=Lr(),this.pendingTargetResets=new kt(G)}return t.prototype.handleDocumentChange=function(t){for(var e=0,n=t.updatedTargetIds;e<n.length;e++){var r=n[e];t.newDoc instanceof qe?this.addDocumentToTarget(r,t.newDoc):t.newDoc instanceof Be&&this.removeDocumentFromTarget(r,t.key,t.newDoc)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.removeDocumentFromTarget(r=o[i],t.key,t.newDoc)},t.prototype.handleTargetChange=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.ensureTargetState(n);switch(t.state){case Dr.NoChange:e.isActiveTarget(n)&&r.updateResumeToken(t.resumeToken);break;case Dr.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(t.resumeToken);break;case Dr.Removed:r.recordTargetResponse(),r.isPending||e.removeTarget(n),b(!t.cause,"WatchChangeAggregator does not handle errored targets");break;case Dr.Current:e.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(t.resumeToken));break;case Dr.Reset:e.isActiveTarget(n)&&(e.resetTarget(n),r.updateResumeToken(t.resumeToken));break;default:y("Unknown target watch change state: "+t.state)}})},t.prototype.forEachTarget=function(t,e){t.targetIds.length>0?t.targetIds.forEach(e):T(this.targetStates,e)},t.prototype.handleExistenceFilter=function(t){var e=t.targetId,n=t.existenceFilter.count,r=this.queryDataForActiveTarget(e);if(r){var i=r.query;if(i.isDocumentQuery())if(0===n){var o=new ht(i.path);this.removeDocumentFromTarget(e,o,new Be(o,St.forDeletedDoc()))}else b(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(e)!==n&&(this.resetTarget(e),this.pendingTargetResets=this.pendingTargetResets.add(e))}},t.prototype.createRemoteEvent=function(t){var e=this,n={};T(this.targetStates,function(r,i){var o=e.queryDataForActiveTarget(r);if(o){if(i.current&&o.query.isDocumentQuery()){var s=new ht(o.query.path);null!==e.pendingDocumentUpdates.get(s)||e.targetContainsDocument(r,s)||e.removeDocumentFromTarget(r,s,new Be(s,t))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}});var r=Lt();this.pendingDocumentTargetMapping.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.queryDataForActiveTarget(t);return!n||n.purpose===Sn.LimboResolution||(i=!1,!1)}),i&&(r=r.add(t))});var i=new xr(t,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=At(),this.pendingDocumentTargetMapping=Lr(),this.pendingTargetResets=new kt(G),i},t.prototype.addDocumentToTarget=function(t,e){if(this.isActiveTarget(t)){var n=this.targetContainsDocument(t,e.key)?Er.Modified:Er.Added;this.ensureTargetState(t).addDocumentChange(e.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e.key,e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e.key,this.ensureDocumentTargetMapping(e.key).add(t))}},t.prototype.removeDocumentFromTarget=function(t,e,n){if(this.isActiveTarget(t)){var r=this.ensureTargetState(t);this.targetContainsDocument(t,e)?r.addDocumentChange(e,Er.Removed):r.removeDocumentChange(e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,this.ensureDocumentTargetMapping(e).delete(t)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e,n))}},t.prototype.removeTarget=function(t){delete this.targetStates[t]},t.prototype.getCurrentDocumentCountForTarget=function(t){var e=this.ensureTargetState(t).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.recordPendingTargetRequest=function(t){this.ensureTargetState(t).recordPendingTargetRequest()},t.prototype.ensureTargetState=function(t){return this.targetStates[t]||(this.targetStates[t]=new Rr),this.targetStates[t]},t.prototype.ensureDocumentTargetMapping=function(t){var e=this.pendingDocumentTargetMapping.get(t);return e||(e=new kt(G),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,e)),e},t.prototype.isActiveTarget=function(t){var e=null!==this.queryDataForActiveTarget(t);return e||p("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.queryDataForActiveTarget=function(t){var e=this.targetStates[t];return e&&e.isPending?null:this.metadataProvider.getQueryDataForTarget(t)},t.prototype.resetTarget=function(t){var e=this;b(!this.targetStates[t].isPending,"Should only reset active targets"),this.targetStates[t]=new Rr,this.metadataProvider.getRemoteKeysForTarget(t).forEach(function(n){e.removeDocumentFromTarget(t,n,null)})},t.prototype.targetContainsDocument=function(t,e){return this.metadataProvider.getRemoteKeysForTarget(t).has(e)},t}();function Lr(){return new Ct(ht.comparator)}function Fr(){return new Ct(ht.comparator)}var Ur="RemoteStore",Vr=function(){function t(t,e,n,r,i){var s=this;this.localStore=t,this.datastore=e,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.connectivityMonitor=i,this.connectivityMonitor.addCallback(function(t){n.enqueueAndForget(function(){return o.__awaiter(s,void 0,void 0,function(){return o.__generator(this,function(t){switch(t.label){case 0:return this.canUseNetwork()?(p(Ur,"Restarting streams for network reachability change."),[4,this.restartNetwork()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.onlineStateTracker=new vr(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return o.__awaiter(this,void 0,void 0,function(){var t;return o.__generator(this,function(e){switch(e.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(t=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return t.lastStreamToken=e.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(yr.Unknown),[4,this.fillWritePipeline()];case 2:e.sent(),e.label=3;case 3:return[2]}})})},t.prototype.disableNetwork=function(){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(yr.Offline),[2]}})})},t.prototype.disableNetworkInternal=function(){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){switch(t.label){case 0:return[4,this.writeStream.stop()];case 1:return t.sent(),[4,this.watchStream.stop()];case 2:return t.sent(),this.writePipeline.length>0&&(p(Ur,"Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}})})},t.prototype.shutdown=function(){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){switch(t.label){case 0:return p(Ur,"RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.connectivityMonitor.shutdown(),this.onlineStateTracker.set(yr.Unknown),[2]}})})},t.prototype.listen=function(t){b(!I(this.listenTargets,t.targetId),"listen called with duplicate targetId!"),this.listenTargets[t.targetId]=t,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(t)},t.prototype.unlisten=function(t){b(I(this.listenTargets,t),"unlisten called without assigned target ID!"),delete this.listenTargets[t],this.watchStream.isOpen()&&this.sendUnwatchRequest(t),O(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(yr.Unknown))},t.prototype.getQueryDataForTarget=function(t){return this.listenTargets[t]||null},t.prototype.getRemoteKeysForTarget=function(t){return this.syncEngine.getRemoteKeysForTarget(t)},t.prototype.sendWatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t.targetId),this.watchStream.watch(t)},t.prototype.sendUnwatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t),this.watchStream.unwatch(t)},t.prototype.startWatchStream=function(){b(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new jr(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},t.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!O(this.listenTargets)},t.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},t.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},t.prototype.onWatchStreamOpen=function(){return o.__awaiter(this,void 0,void 0,function(){var t=this;return o.__generator(this,function(e){return T(this.listenTargets,function(e,n){t.sendWatchRequest(n)}),[2]})})},t.prototype.onWatchStreamClose=function(t){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(e){return void 0===t&&b(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(t),this.startWatchStream()):this.onlineStateTracker.set(yr.Unknown),[2]})})},t.prototype.onWatchStreamChange=function(t,e){return o.__awaiter(this,void 0,void 0,function(){var n;return o.__generator(this,function(r){switch(r.label){case 0:return this.onlineStateTracker.set(yr.Online),t instanceof Pr&&t.state===Dr.Removed&&t.cause?[2,this.handleTargetError(t)]:(t instanceof Nr?this.watchChangeAggregator.handleDocumentChange(t):t instanceof Mr?this.watchChangeAggregator.handleExistenceFilter(t):(b(t instanceof Pr,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(t)),e.isEqual(St.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),e.compareTo(n)>=0?[4,this.raiseWatchSnapshot(e)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}})})},t.prototype.raiseWatchSnapshot=function(t){var e=this;b(!t.isEqual(St.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(t);return T(n.targetChanges,function(n,r){if(r.resumeToken.length>0){var i=e.listenTargets[n];i&&(e.listenTargets[n]=i.withResumeToken(r.resumeToken,t))}}),n.targetMismatches.forEach(function(t){var n=e.listenTargets[t];if(n){e.listenTargets[t]=n.withResumeToken(w(),n.snapshotVersion),e.sendUnwatchRequest(t);var r=new Cn(n.query,t,Sn.ExistenceFilterMismatch,n.sequenceNumber);e.sendWatchRequest(r)}}),this.syncEngine.applyRemoteEvent(n)},t.prototype.handleTargetError=function(t){var e=this;b(!!t.cause,"Handling target error without a cause");var n=t.cause,r=Promise.resolve();return t.targetIds.forEach(function(t){r=r.then(function(){return o.__awaiter(e,void 0,void 0,function(){return o.__generator(this,function(e){return I(this.listenTargets,t)?(delete this.listenTargets[t],this.watchChangeAggregator.removeTarget(t),[2,this.syncEngine.rejectListen(t,n)]):[2]})})})}),r},t.prototype.fillWritePipeline=function(){return o.__awaiter(this,void 0,void 0,function(){var t;return o.__generator(this,function(e){switch(e.label){case 0:return this.canAddToWritePipeline()?[4,this.localStore.nextMutationBatch(this.writePipeline.length>0?this.writePipeline[this.writePipeline.length-1].batchId:Vt)]:[3,4];case 1:return null!==(t=e.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(t),[4,this.fillWritePipeline()];case 3:e.sent(),e.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}})})},t.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},t.prototype.outstandingWrites=function(){return this.writePipeline.length},t.prototype.addToWritePipeline=function(t){b(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(t),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(t.mutations)},t.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&this.writePipeline.length>0},t.prototype.startWriteStream=function(){b(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},t.prototype.onWriteStreamOpen=function(){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){return this.writeStream.writeHandshake(),[2]})})},t.prototype.onWriteHandshakeComplete=function(){var t=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then(function(){for(var e=0,n=t.writePipeline;e<n.length;e++)t.writeStream.writeMutations(n[e].mutations)}).catch(Un)},t.prototype.onMutationResult=function(t,e){var n=this;b(this.writePipeline.length>0,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=Bt.from(r,t,e,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then(function(){return n.fillWritePipeline()})},t.prototype.onWriteStreamClose=function(t){return o.__awaiter(this,void 0,void 0,function(){var e=this;return o.__generator(this,function(n){return void 0===t&&b(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),t&&this.writePipeline.length>0?[2,(this.writeStream.handshakeComplete?this.handleWriteError(t):this.handleHandshakeError(t)).then(function(){e.shouldStartWriteStream()&&e.startWriteStream()})]:[2]})})},t.prototype.handleHandshakeError=function(t){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(e){return _r(t.code)?(p(Ur,"RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=w(),[2,this.localStore.setLastStreamToken(w()).catch(Un)]):[2]})})},t.prototype.handleWriteError=function(t){return o.__awaiter(this,void 0,void 0,function(){var e,n=this;return o.__generator(this,function(r){return _r(i=t.code)&&i!==_.ABORTED?(e=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(e.batchId,t).then(function(){return n.fillWritePipeline()})]):[2];var i})})},t.prototype.createTransaction=function(){return new mr(this.datastore)},t.prototype.restartNetwork=function(){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(yr.Unknown),[4,this.enableNetwork()];case 2:return t.sent(),[2]}})})},t.prototype.handleCredentialChange=function(){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){switch(t.label){case 0:return this.canUseNetwork()?(p(Ur,"RemoteStore restarting streams for new credential"),[4,this.restartNetwork()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.applyPrimaryState=function(t){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(e){switch(e.label){case 0:return this.isPrimary=t,t&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return e.sent(),[3,4];case 2:return t?[3,4]:[4,this.disableNetworkInternal()];case 3:e.sent(),this.onlineStateTracker.set(yr.Unknown),e.label=4;case 4:return[2]}})})},t}(),qr=function(){function t(t,e){if(A("GeoPoint",arguments,2),P("GeoPoint","number",1,t),P("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new S(_.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new S(_.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype._compareTo=function(t){return G(this._lat,t._lat)||G(this._long,t._long)},t}(),Br=function(){function t(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.memoizedCanonicalId=null,this.memoizedOrderBy=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return t.atPath=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var t=this.getInequalityFilterField(),e=this.getFirstOrderByField();if(null!==t&&null===e)this.memoizedOrderBy=t.isKeyField()?[ti]:[new Jr(t),ti];else{b(null===t||null!==e&&t.isEqual(e),"First orderBy should match inequality field."),this.memoizedOrderBy=[];for(var n=!1,r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}n||this.memoizedOrderBy.push((this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:Yr.ASCENDING)===Yr.ASCENDING?ti:ei)}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),t.prototype.addFilter=function(e){b(null==this.getInequalityFilterField()||!(e instanceof Hr)||!e.isInequality()||e.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),b(!this.isDocumentQuery(),"No filtering allowed for document query");var n=this.filters.concat([e]);return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),n,this.limit,this.startAt,this.endAt)},t.prototype.addOrderBy=function(e){b(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([e]);return new t(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.startAt,this.endAt)},t.prototype.withLimit=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),e,this.startAt,this.endAt)},t.prototype.withStartAt=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,e,this.endAt)},t.prototype.withEndAt=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,e)},t.prototype.asCollectionQueryAtPath=function(e){return new t(e,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,this.endAt)},t.prototype.matchesAllDocuments=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.explicitOrderBy.length||1===this.explicitOrderBy.length&&this.explicitOrderBy[0].field.isKeyField())},t.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var t=this.path.canonicalString();this.isCollectionGroupQuery()&&(t+="|cg:"+this.collectionGroup),t+="|f:";for(var e=0,n=this.filters;e<n.length;e++)t+=n[e].canonicalId(),t+=",";t+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++)t+=i[r].canonicalId(),t+=",";ar(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.memoizedCanonicalId=t}return this.memoizedCanonicalId},t.prototype.toString=function(){var t="Query("+this.path.canonicalString();return this.isCollectionGroupQuery()&&(t+=" collectionGroup="+this.collectionGroup),this.filters.length>0&&(t+=", filters: ["+this.filters.join(", ")+"]"),ar(this.limit)||(t+=", limit: "+this.limit),this.explicitOrderBy.length>0&&(t+=", orderBy: ["+this.explicitOrderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),t+")"},t.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(e=0;e<this.filters.length;e++)if(!this.filters[e].isEqual(t.filters[e]))return!1;return this.collectionGroup===t.collectionGroup&&!!this.path.isEqual(t.path)&&!!(null!==this.startAt?this.startAt.isEqual(t.startAt):null===t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt)},t.prototype.docComparator=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],s=o.compare(t,e);if(0!==s)return s;n=n||o.field.isKeyField()}return b(n,"orderBy used that doesn't compare on key field"),0},t.prototype.matches=function(t){return this.matchesPathAndCollectionGroup(t)&&this.matchesOrderBy(t)&&this.matchesFilters(t)&&this.matchesBounds(t)},t.prototype.hasLimit=function(){return!ar(this.limit)},t.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},t.prototype.getInequalityFilterField=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof Hr&&n.isInequality())return n.field}return null},t.prototype.findFilterOperator=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(r instanceof Hr&&t.indexOf(r.op)>=0)return r.op}return null},t.prototype.isDocumentQuery=function(){return ht.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},t.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},t.prototype.matchesPathAndCollectionGroup=function(t){var e=t.key.path;return null!==this.collectionGroup?t.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(e):ht.isDocumentKey(this.path)?this.path.isEqual(e):this.path.isImmediateParentOf(e)},t.prototype.matchesOrderBy=function(t){for(var e=0,n=this.explicitOrderBy;e<n.length;e++){var r=n[e];if(!r.field.isKeyField()&&null===t.field(r.field))return!1}return!0},t.prototype.matchesFilters=function(t){for(var e=0,n=this.filters;e<n.length;e++)if(!n[e].matches(t))return!1;return!0},t.prototype.matchesBounds=function(t){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,t)||this.endAt&&this.endAt.sortsBeforeDocument(this.orderBy,t))},t.prototype.assertValidBound=function(t){b(t.position.length<=this.orderBy.length,"Bound is longer than orderBy")},t}(),zr=function(){return function(){}}(),Wr=function(){function t(t){this.name=t}return t.fromString=function(e){switch(e){case"<":return t.LESS_THAN;case"<=":return t.LESS_THAN_OR_EQUAL;case"==":return t.EQUAL;case">=":return t.GREATER_THAN_OR_EQUAL;case">":return t.GREATER_THAN;case"array-contains":return t.ARRAY_CONTAINS;case"in":return t.IN;case"array-contains-any":return t.ARRAY_CONTAINS_ANY;default:return y("Unknown FieldFilter operator: "+e)}},t.prototype.toString=function(){return this.name},t.prototype.isEqual=function(t){return this.name===t.name},t.LESS_THAN=new t("<"),t.LESS_THAN_OR_EQUAL=new t("<="),t.EQUAL=new t("=="),t.GREATER_THAN=new t(">"),t.GREATER_THAN_OR_EQUAL=new t(">="),t.ARRAY_CONTAINS=new t("array-contains"),t.IN=new t("in"),t.ARRAY_CONTAINS_ANY=new t("array-contains-any"),t}(),Hr=function(t){function e(e,n,r){var i=t.call(this)||this;return i.field=e,i.op=n,i.value=r,i}return o.__extends(e,t),e.create=function(t,n,r){if(t.isKeyField())return n===Wr.IN?(b(r instanceof Ue,"Comparing on key with IN, but filter value not an ArrayValue"),b(r.internalValue.every(function(t){return t instanceof je}),"Comparing on key with IN, but an array value was not a RefValue"),new $r(t,r)):(b(r instanceof je,"Comparing on key, but filter value not a RefValue"),b(n!==Wr.ARRAY_CONTAINS&&n!==Wr.ARRAY_CONTAINS_ANY,"'"+n.toString()+"' queries don't make sense on document keys."),new Kr(t,n,r));if(r.isEqual(Te.INSTANCE)){if(n!==Wr.EQUAL)throw new S(_.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new e(t,n,r)}if(r.isEqual(Ne.NAN)){if(n!==Wr.EQUAL)throw new S(_.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new e(t,n,r)}return n===Wr.ARRAY_CONTAINS?new Qr(t,r):n===Wr.IN?(b(r instanceof Ue,"IN filter has invalid value: "+r.toString()),new Gr(t,r)):n===Wr.ARRAY_CONTAINS_ANY?(b(r instanceof Ue,"ARRAY_CONTAINS_ANY filter has invalid value: "+r.toString()),new Xr(t,r)):new e(t,n,r)},e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&this.value.typeOrder===e.typeOrder&&this.matchesComparison(e.compareTo(this.value))},e.prototype.matchesComparison=function(t){switch(this.op){case Wr.LESS_THAN:return t<0;case Wr.LESS_THAN_OR_EQUAL:return t<=0;case Wr.EQUAL:return 0===t;case Wr.GREATER_THAN:return t>0;case Wr.GREATER_THAN_OR_EQUAL:return t>=0;default:return y("Unknown FieldFilter operator: "+this.op)}},e.prototype.isInequality=function(){return[Wr.LESS_THAN,Wr.LESS_THAN_OR_EQUAL,Wr.GREATER_THAN,Wr.GREATER_THAN_OR_EQUAL].indexOf(this.op)>=0},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},e.prototype.isEqual=function(t){return t instanceof e&&this.op.isEqual(t.op)&&this.field.isEqual(t.field)&&this.value.isEqual(t.value)},e.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},e}(zr),Kr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.matches=function(t){var e=ht.comparator(t.key,this.value.key);return this.matchesComparison(e)},e}(Hr),$r=function(t){function e(e,n){var r=t.call(this,e,Wr.IN,n)||this;return r.value=n,r}return o.__extends(e,t),e.prototype.matches=function(t){return this.value.internalValue.some(function(e){return t.key.isEqual(e.key)})},e}(Hr),Qr=function(t){function e(e,n){return t.call(this,e,Wr.ARRAY_CONTAINS,n)||this}return o.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return e instanceof Ue&&e.contains(this.value)},e}(Hr),Gr=function(t){function e(e,n){var r=t.call(this,e,Wr.IN,n)||this;return r.value=n,r}return o.__extends(e,t),e.prototype.matches=function(t){var e=this.value,n=t.field(this.field);return null!==n&&e.contains(n)},e}(Hr),Xr=function(t){function e(e,n){var r=t.call(this,e,Wr.ARRAY_CONTAINS_ANY,n)||this;return r.value=n,r}return o.__extends(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return n instanceof Ue&&n.internalValue.some(function(t){return e.value.contains(t)})},e}(Hr),Yr=function(){function t(t){this.name=t}return t.prototype.toString=function(){return this.name},t.ASCENDING=new t("asc"),t.DESCENDING=new t("desc"),t}(),Zr=function(){function t(t,e){this.position=t,this.before=e}return t.prototype.canonicalId=function(){for(var t=this.before?"b:":"a:",e=0,n=this.position;e<n.length;e++)t+=n[e].toString();return t},t.prototype.sortsBeforeDocument=function(t,e){b(this.position.length<=t.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=t[r],o=this.position[r];if(i.field.isKeyField())b(o instanceof je,"Bound has a non-key value where the key path is being used."),n=ht.comparator(o.key,e.key);else{var s=e.field(i.field);b(null!==s,"Field should exist since document matched the orderBy already."),n=o.compareTo(s)}if(i.dir===Yr.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},t.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++)if(!this.position[e].isEqual(t.position[e]))return!1;return!0},t}(),Jr=function(){function t(t,e){this.field=t,void 0===e&&(e=Yr.ASCENDING),this.dir=e,this.isKeyOrderBy=t.isKeyField()}return t.prototype.compare=function(t,e){var n=this.isKeyOrderBy?qe.compareByKey(t,e):qe.compareByField(this.field,t,e);switch(this.dir){case Yr.ASCENDING:return n;case Yr.DESCENDING:return-1*n;default:return y("Unknown direction: "+this.dir)}},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},t.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},t.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},t}(),ti=new Jr(lt.keyField(),Yr.ASCENDING),ei=new Jr(lt.keyField(),Yr.DESCENDING),ni=function(){function t(){}return t.prototype.applyToLocalView=function(t,e){return new Pe(e,t)},t.prototype.applyToRemoteDocument=function(t,e){return e},t.prototype.computeBaseValue=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t},t.instance=new t,t}(),ri=function(){function t(t){this.elements=t}return t.prototype.applyToLocalView=function(t,e){return this.apply(t)},t.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=si(t),n=function(t){e.find(function(e){return e.isEqual(t)})||e.push(t)},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Ue(e)},t.prototype.computeBaseValue=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&X(e.elements,this.elements)},t}(),ii=function(){function t(t){this.elements=t}return t.prototype.applyToLocalView=function(t,e){return this.apply(t)},t.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=si(t),n=function(t){e=e.filter(function(e){return!e.isEqual(t)})},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Ue(e)},t.prototype.computeBaseValue=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&X(e.elements,this.elements)},t}(),oi=function(){function t(t){this.operand=t}return t.prototype.applyToLocalView=function(t,e){var n=this.computeBaseValue(t);return n instanceof Ae&&this.operand instanceof Ae?new Ae(n.internalValue+this.operand.internalValue):new Ne(n.internalValue+this.operand.internalValue)},t.prototype.applyToRemoteDocument=function(t,e){return b(null!==e,"Didn't receive transformResult for NUMERIC_ADD transform"),e},t.prototype.computeBaseValue=function(t){return t instanceof Oe?t:new Ae(0)},t.prototype.isEqual=function(e){return e instanceof t&&this.operand.isEqual(e.operand)},t}();function si(t){return t instanceof Ue?t.internalValue.slice():[]}var ai,ci,ui=function(){function t(t){this.count=t}return t.prototype.isEqual=function(t){return t&&t.count===this.count},t}(),li=((ai={})[Yr.ASCENDING.name]="ASCENDING",ai[Yr.DESCENDING.name]="DESCENDING",ai),hi=((ci={})[Wr.LESS_THAN.name]="LESS_THAN",ci[Wr.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",ci[Wr.GREATER_THAN.name]="GREATER_THAN",ci[Wr.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",ci[Wr.EQUAL.name]="EQUAL",ci[Wr.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",ci[Wr.IN.name]="IN",ci[Wr.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",ci),di=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fi(t,e){b(!ar(t),e+" is missing")}function pi(t){return"number"==typeof t?t:"string"==typeof t?Number(t):y("can't parse "+t)}var gi=function(){function t(t,e){this.databaseId=t,this.options=e}return t.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},t.prototype.unsafeCastProtoByteString=function(t){return t},t.prototype.fromRpcStatus=function(t){var e=void 0===t.code?_.UNKNOWN:Sr(t.code);return new S(e,t.message||"")},t.prototype.toInt32Value=function(t){return this.options.useProto3Json||ar(t)?t:{value:t}},t.prototype.fromInt32Value=function(t){var e;return ar(e="object"==typeof t?t.value:t)?null:e},t.prototype.toTimestamp=function(t){return this.options.useProto3Json?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}},t.prototype.fromTimestamp=function(t){if("string"==typeof t)return this.fromIso8601String(t);b(!!t,"Cannot deserialize null or undefined timestamp.");var e=pi(t.seconds||"0");return new _t(e,t.nanos||0)},t.prototype.fromIso8601String=function(t){var e=0,n=di.exec(t);if(b(!!n,"invalid timestamp: "+t),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t),o=Math.floor(i.getTime()/1e3);return new _t(o,e)},t.prototype.toBytes=function(t){return this.options.useProto3Json?t.toBase64():this.unsafeCastProtoByteString(t.toUint8Array())},t.prototype.fromBlob=function(t){return"string"==typeof t?(b(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),tt.fromBase64String(t)):(b(!this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),tt.fromUint8Array(t))},t.prototype.toVersion=function(t){return this.toTimestamp(t.toTimestamp())},t.prototype.fromVersion=function(t){return b(!!t,"Trying to deserialize version that isn't set"),St.fromTimestamp(this.fromTimestamp(t))},t.prototype.toResourceName=function(t,e){return this.fullyQualifiedPrefixPath(t).child("documents").child(e).canonicalString()},t.prototype.fromResourceName=function(t){var e=ct.fromString(t);return b(this.isValidResourceName(e),"Tried to deserialize invalid key "+e.toString()),e},t.prototype.toName=function(t){return this.toResourceName(this.databaseId,t.path)},t.prototype.fromName=function(t){var e=this.fromResourceName(t);return b(e.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+e.get(1)+" vs "+this.databaseId.projectId),b(!e.get(3)&&!this.databaseId.database||e.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+e.get(3)+" vs "+this.databaseId.database),new ht(this.extractLocalPathFromResourceName(e))},t.prototype.toQueryPath=function(t){return this.toResourceName(this.databaseId,t)},t.prototype.fromQueryPath=function(t){var e=this.fromResourceName(t);return 4===e.length?ct.EMPTY_PATH:this.extractLocalPathFromResourceName(e)},Object.defineProperty(t.prototype,"encodedDatabaseId",{get:function(){return new ct(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),t.prototype.fullyQualifiedPrefixPath=function(t){return new ct(["projects",t.projectId,"databases",t.database])},t.prototype.extractLocalPathFromResourceName=function(t){return b(t.length>4&&"documents"===t.get(4),"tried to deserialize invalid key "+t.toString()),t.popFirst(5)},t.prototype.isValidResourceName=function(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)},t.prototype.toValue=function(t){if(t instanceof Te)return{nullValue:"NULL_VALUE"};if(t instanceof ke)return{booleanValue:t.value()};if(t instanceof Ae)return{integerValue:""+t.value()};if(t instanceof Ne){var e=t.value();if(this.options.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:t.value()}}return t instanceof Me?{stringValue:t.value()}:t instanceof Fe?{mapValue:this.toMapValue(t)}:t instanceof Ue?{arrayValue:this.toArrayValue(t)}:t instanceof De?{timestampValue:this.toTimestamp(t.internalValue)}:t instanceof Le?{geoPointValue:{latitude:t.value().latitude,longitude:t.value().longitude}}:t instanceof Re?{bytesValue:this.toBytes(t.value())}:t instanceof je?{referenceValue:this.toResourceName(t.databaseId,t.key.path)}:y("Unknown FieldValue "+JSON.stringify(t))},t.prototype.fromValue=function(t){var e=this;if("nullValue"in t)return Te.INSTANCE;if("booleanValue"in t)return ke.of(t.booleanValue);if("integerValue"in t)return new Ae(pi(t.integerValue));if("doubleValue"in t){if(this.options.useProto3Json){if("NaN"===t.doubleValue)return Ne.NAN;if("Infinity"===t.doubleValue)return Ne.POSITIVE_INFINITY;if("-Infinity"===t.doubleValue)return Ne.NEGATIVE_INFINITY}return new Ne(t.doubleValue)}if("stringValue"in t)return new Me(t.stringValue);if("mapValue"in t)return this.fromFields(t.mapValue.fields||{});if("arrayValue"in t)return fi(t.arrayValue,"arrayValue"),new Ue((t.arrayValue.values||[]).map(function(t){return e.fromValue(t)}));if("timestampValue"in t)return fi(t.timestampValue,"timestampValue"),new De(this.fromTimestamp(t.timestampValue));if("geoPointValue"in t)return fi(t.geoPointValue,"geoPointValue"),new Le(new qr(t.geoPointValue.latitude||0,t.geoPointValue.longitude||0));if("bytesValue"in t){fi(t.bytesValue,"bytesValue");var n=this.fromBlob(t.bytesValue);return new Re(n)}if("referenceValue"in t){fi(t.referenceValue,"referenceValue");var r=this.fromResourceName(t.referenceValue),i=new it(r.get(1),r.get(3)),o=new ht(this.extractLocalPathFromResourceName(r));return new je(i,o)}return y("Unknown Value proto "+JSON.stringify(t))},t.prototype.toMutationDocument=function(t,e){return{name:this.toName(t),fields:this.toFields(e)}},t.prototype.toDocument=function(t){return b(!t.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(t.key),fields:this.toFields(t.data()),updateTime:this.toTimestamp(t.version.toTimestamp())}},t.prototype.fromDocument=function(t,e){var n=this,r=this.fromName(t.name),i=this.fromVersion(t.updateTime);return new qe(r,i,{hasCommittedMutations:!!e},void 0,t,function(t){return n.fromValue(t)})},t.prototype.toFields=function(t){var e=this,n={};return t.forEach(function(t,r){n[t]=e.toValue(r)}),n},t.prototype.fromFields=function(t){var e=this,n=Fe.EMPTY;return k(t,function(t,r){n=n.set(new lt([t]),e.fromValue(r))}),n},t.prototype.toMapValue=function(t){return{fields:this.toFields(t)}},t.prototype.toArrayValue=function(t){var e=this,n=[];return t.forEach(function(t){n.push(e.toValue(t))}),{values:n}},t.prototype.fromFound=function(t){var e=this;b(!!t.found,"Tried to deserialize a found document from a missing document."),fi(t.found.name,"doc.found.name"),fi(t.found.updateTime,"doc.found.updateTime");var n=this.fromName(t.found.name),r=this.fromVersion(t.found.updateTime);return new qe(n,r,{},void 0,t.found,function(t){return e.fromValue(t)})},t.prototype.fromMissing=function(t){b(!!t.missing,"Tried to deserialize a missing document from a found document."),b(!!t.readTime,"Tried to deserialize a missing document without a read time.");var e=this.fromName(t.missing),n=this.fromVersion(t.readTime);return new Be(e,n)},t.prototype.fromMaybeDocument=function(t){return"found"in t?this.fromFound(t):"missing"in t?this.fromMissing(t):y("invalid batch get response: "+JSON.stringify(t))},t.prototype.toWatchTargetChangeState=function(t){switch(t){case Dr.Added:return"ADD";case Dr.Current:return"CURRENT";case Dr.NoChange:return"NO_CHANGE";case Dr.Removed:return"REMOVE";case Dr.Reset:return"RESET";default:return y("Unknown WatchTargetChangeState: "+t)}},t.prototype.toTestWatchChange=function(t){if(t instanceof Mr)return{filter:{count:t.existenceFilter.count,targetId:t.targetId}};if(t instanceof Nr){var e;if(t.newDoc instanceof qe)return{documentChange:{document:{name:this.toName((e=t.newDoc).key),fields:this.toFields(e.data()),updateTime:this.toVersion(e.version)},targetIds:t.updatedTargetIds,removedTargetIds:t.removedTargetIds}};if(t.newDoc instanceof Be)return{documentDelete:{document:this.toName((e=t.newDoc).key),readTime:this.toVersion(e.version),removedTargetIds:t.removedTargetIds}};if(null===t.newDoc)return{documentRemove:{document:this.toName(t.key),removedTargetIds:t.removedTargetIds}}}if(t instanceof Pr){var n=void 0;return t.cause&&(n={code:Cr(t.cause.code),message:t.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(t.state),targetIds:t.targetIds,resumeToken:this.unsafeCastProtoByteString(t.resumeToken),cause:n}}}return y("Unrecognized watch change: "+JSON.stringify(t))},t.prototype.fromWatchChange=function(t){var e,n=this;if("targetChange"in t){fi(t.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=t.targetChange.resumeToken||this.emptyByteString(),s=t.targetChange.cause,a=s&&this.fromRpcStatus(s);e=new Pr(r,i,o,a||null)}else if("documentChange"in t){fi(t.documentChange,"documentChange"),fi(t.documentChange.document,"documentChange.name"),fi(t.documentChange.document.name,"documentChange.document.name"),fi(t.documentChange.document.updateTime,"documentChange.document.updateTime");var c=t.documentChange,u=this.fromName(c.document.name),l=this.fromVersion(c.document.updateTime),h=new qe(u,l,{},void 0,c.document,function(t){return n.fromValue(t)});e=new Nr(c.targetIds||[],c.removedTargetIds||[],h.key,h)}else if("documentDelete"in t){fi(t.documentDelete,"documentDelete"),fi(t.documentDelete.document,"documentDelete.document");var d=t.documentDelete;u=this.fromName(d.document),l=d.readTime?this.fromVersion(d.readTime):St.forDeletedDoc(),h=new Be(u,l),e=new Nr([],d.removedTargetIds||[],h.key,h)}else if("documentRemove"in t){fi(t.documentRemove,"documentRemove"),fi(t.documentRemove.document,"documentRemove");var f=t.documentRemove;u=this.fromName(f.document),e=new Nr([],f.removedTargetIds||[],u,null)}else{if(!("filter"in t))return y("Unknown change type "+JSON.stringify(t));fi(t.filter,"filter"),fi(t.filter.targetId,"filter.targetId");var p=t.filter,g=new ui(p.count||0);e=new Mr(p.targetId,g)}return e},t.prototype.fromWatchTargetChangeState=function(t){return"NO_CHANGE"===t?Dr.NoChange:"ADD"===t?Dr.Added:"REMOVE"===t?Dr.Removed:"CURRENT"===t?Dr.Current:"RESET"===t?Dr.Reset:y("Got unexpected TargetChange.state: "+t)},t.prototype.versionFromListenResponse=function(t){if(!("targetChange"in t))return St.MIN;var e=t.targetChange;return e.targetIds&&e.targetIds.length?St.MIN:e.readTime?this.fromVersion(e.readTime):St.MIN},t.prototype.toMutation=function(t){var e,n=this;if(t instanceof be)e={update:this.toMutationDocument(t.key,t.value)};else if(t instanceof _e)e={delete:this.toName(t.key)};else if(t instanceof ve)e={update:this.toMutationDocument(t.key,t.data),updateMask:this.toDocumentMask(t.fieldMask)};else{if(!(t instanceof we))return y("Unknown mutation type "+t.type);e={transform:{document:this.toName(t.key),fieldTransforms:t.fieldTransforms.map(function(t){return n.toFieldTransform(t)})}}}return t.precondition.isNone||(e.currentDocument=this.toPrecondition(t.precondition)),e},t.prototype.fromMutation=function(t){var e=this,n=t.currentDocument?this.fromPrecondition(t.currentDocument):me.NONE;if(t.update){fi(t.update.name,"name");var r=this.fromName(t.update.name),i=this.fromFields(t.update.fields||{});if(t.updateMask){var o=this.fromDocumentMask(t.updateMask);return new ve(r,i,o,n)}return new be(r,i,n)}if(t.delete)return r=this.fromName(t.delete),new _e(r,n);if(t.transform){r=this.fromName(t.transform.document);var s=t.transform.fieldTransforms.map(function(t){return e.fromFieldTransform(t)});return b(!0===n.exists,'Transforms only support precondition "exists == true"'),new we(r,s)}return y("unknown mutation proto: "+JSON.stringify(t))},t.prototype.toPrecondition=function(t){return b(!t.isNone,"Can't serialize an empty precondition"),void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:y("Unknown precondition")},t.prototype.fromPrecondition=function(t){return void 0!==t.updateTime?me.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?me.exists(t.exists):me.NONE},t.prototype.fromWriteResult=function(t,e){var n=this,r=this.fromVersion(t.updateTime?t.updateTime:e);r.isEqual(St.MIN)&&(r=this.fromVersion(e));var i=null;return t.transformResults&&t.transformResults.length>0&&(i=t.transformResults.map(function(t){return n.fromValue(t)})),new pe(r,i)},t.prototype.fromWriteResults=function(t,e){var n=this;return t&&t.length>0?(b(void 0!==e,"Received a write result without a commit time"),t.map(function(t){return n.fromWriteResult(t,e)})):[]},t.prototype.toFieldTransform=function(t){var e=this,n=t.transform;if(n instanceof ni)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ri)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements.map(function(t){return e.toValue(t)})}};if(n instanceof ii)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements.map(function(t){return e.toValue(t)})}};if(n instanceof oi)return{fieldPath:t.field.canonicalString(),increment:this.toValue(n.operand)};throw y("Unknown transform: "+t.transform)},t.prototype.fromFieldTransform=function(t){var e=this,n=null;if("setToServerValue"in t)b("REQUEST_TIME"===t.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(t)),n=ni.instance;else if("appendMissingElements"in t)n=new ri((t.appendMissingElements.values||[]).map(function(t){return e.fromValue(t)}));else if("removeAllFromArray"in t)n=new ii((t.removeAllFromArray.values||[]).map(function(t){return e.fromValue(t)}));else if("increment"in t){var r=this.fromValue(t.increment);b(r instanceof Oe,"NUMERIC_ADD transform requires a NumberValue"),n=new oi(r)}else y("Unknown transform proto: "+JSON.stringify(t));var i=lt.fromServerFormat(t.fieldPath);return new fe(i,n)},t.prototype.toDocumentsTarget=function(t){return{documents:[this.toQueryPath(t.path)]}},t.prototype.fromDocumentsTarget=function(t){var e=t.documents.length;return b(1===e,"DocumentsTarget contained other than 1 document: "+e),Br.atPath(this.fromQueryPath(t.documents[0]))},t.prototype.toQueryTarget=function(t){var e={structuredQuery:{}},n=t.path;null!==t.collectionGroup?(b(n.length%2==0,"Collection Group queries should be within a document path or root."),e.parent=this.toQueryPath(n),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(b(n.length%2!=0,"Document queries with filters are not supported."),e.parent=this.toQueryPath(n.popLast()),e.structuredQuery.from=[{collectionId:n.lastSegment()}]);var r=this.toFilter(t.filters);r&&(e.structuredQuery.where=r);var i=this.toOrder(t.orderBy);i&&(e.structuredQuery.orderBy=i);var o=this.toInt32Value(t.limit);return null!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.toCursor(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.toCursor(t.endAt)),e},t.prototype.fromQueryTarget=function(t){var e=this.fromQueryPath(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){b(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=this.fromFilter(n.where));var a=[];n.orderBy&&(a=this.fromOrder(n.orderBy));var c=null;n.limit&&(c=this.fromInt32Value(n.limit));var u=null;n.startAt&&(u=this.fromCursor(n.startAt));var l=null;return n.endAt&&(l=this.fromCursor(n.endAt)),new Br(e,i,a,s,c,u,l)},t.prototype.toListenRequestLabels=function(t){var e=this.toLabel(t.purpose);return null==e?null:{"goog-listen-tags":e}},t.prototype.toLabel=function(t){switch(t){case Sn.Listen:return null;case Sn.ExistenceFilterMismatch:return"existence-filter-mismatch";case Sn.LimboResolution:return"limbo-document";default:return y("Unrecognized query purpose: "+t)}},t.prototype.toTarget=function(t){var e,n=t.query;return(e=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=t.targetId,t.resumeToken.length>0&&(e.resumeToken=this.unsafeCastProtoByteString(t.resumeToken)),e},t.prototype.toFilter=function(t){var e=this;if(0!==t.length){var n=t.map(function(t){return t instanceof Hr?e.toUnaryOrFieldFilter(t):y("Unrecognized filter: "+JSON.stringify(t))});return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},t.prototype.fromFilter=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.fromUnaryFilter(t)]:void 0!==t.fieldFilter?[this.fromFieldFilter(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e.fromFilter(t)}).reduce(function(t,e){return t.concat(e)}):y("Unknown filter: "+JSON.stringify(t)):[]},t.prototype.toOrder=function(t){var e=this;if(0!==t.length)return t.map(function(t){return e.toPropertyOrder(t)})},t.prototype.fromOrder=function(t){var e=this;return t.map(function(t){return e.fromPropertyOrder(t)})},t.prototype.toCursor=function(t){var e=this;return{before:t.before,values:t.position.map(function(t){return e.toValue(t)})}},t.prototype.fromCursor=function(t){var e=this,n=!!t.before,r=t.values.map(function(t){return e.fromValue(t)});return new Zr(r,n)},t.prototype.toDirection=function(t){return li[t.name]},t.prototype.fromDirection=function(t){switch(t){case"ASCENDING":return Yr.ASCENDING;case"DESCENDING":return Yr.DESCENDING;default:return}},t.prototype.toOperatorName=function(t){return hi[t.name]},t.prototype.fromOperatorName=function(t){switch(t){case"EQUAL":return Wr.EQUAL;case"GREATER_THAN":return Wr.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return Wr.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return Wr.LESS_THAN;case"LESS_THAN_OR_EQUAL":return Wr.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return Wr.ARRAY_CONTAINS;case"IN":return Wr.IN;case"ARRAY_CONTAINS_ANY":return Wr.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return y("Unspecified operator");default:return y("Unknown operator")}},t.prototype.toFieldPathReference=function(t){return{fieldPath:t.canonicalString()}},t.prototype.fromFieldPathReference=function(t){return lt.fromServerFormat(t.fieldPath)},t.prototype.toPropertyOrder=function(t){return{field:this.toFieldPathReference(t.field),direction:this.toDirection(t.dir)}},t.prototype.fromPropertyOrder=function(t){return new Jr(this.fromFieldPathReference(t.field),this.fromDirection(t.direction))},t.prototype.fromFieldFilter=function(t){return Hr.create(this.fromFieldPathReference(t.fieldFilter.field),this.fromOperatorName(t.fieldFilter.op),this.fromValue(t.fieldFilter.value))},t.prototype.toUnaryOrFieldFilter=function(t){if(t.op===Wr.EQUAL){if(t.value.isEqual(Ne.NAN))return{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NAN"}};if(t.value.isEqual(Te.INSTANCE))return{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.toFieldPathReference(t.field),op:this.toOperatorName(t.op),value:this.toValue(t.value)}}},t.prototype.fromUnaryFilter=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.fromFieldPathReference(t.unaryFilter.field);return Hr.create(e,Wr.EQUAL,Ne.NAN);case"IS_NULL":var n=this.fromFieldPathReference(t.unaryFilter.field);return Hr.create(n,Wr.EQUAL,Te.INSTANCE);case"OPERATOR_UNSPECIFIED":return y("Unspecified filter");default:return y("Unknown filter")}},t.prototype.toDocumentMask=function(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}},t.prototype.fromDocumentMask=function(t){var e=(t.fieldPaths||[]).map(function(t){return lt.fromServerFormat(t)});return de.fromArray(e)},t}(),mi=function(){return function(){this.viewSnap=null,this.targetId=0,this.listeners=[]}}(),yi=function(){function t(t){this.syncEngine=t,this.queries=new We(function(t){return t.canonicalId()}),this.onlineState=yr.Unknown,this.snapshotsInSyncListeners=new Set,this.syncEngine.subscribe(this)}return t.prototype.listen=function(t){var e=t.query,n=!1,r=this.queries.get(e);return r||(n=!0,r=new mi,this.queries.set(e,r)),r.listeners.push(t),b(!t.applyOnlineStateChange(this.onlineState),"applyOnlineStateChange() shouldn't raise an event for brand-new listeners."),r.viewSnap&&t.onViewSnapshot(r.viewSnap)&&this.raiseSnapshotsInSyncEvent(),n?this.syncEngine.listen(e).then(function(t){return r.targetId=t,t}):Promise.resolve(r.targetId)},t.prototype.unlisten=function(t){return o.__awaiter(this,void 0,void 0,function(){var e,n,r,i;return o.__generator(this,function(o){return n=!1,(r=this.queries.get(e=t.query))&&(i=r.listeners.indexOf(t))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(e),[2,this.syncEngine.unlisten(e)]):[2]})})},t.prototype.onWatchChange=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var i=r[n],o=this.queries.get(i.query);if(o){for(var s=0,a=o.listeners;s<a.length;s++)a[s].onViewSnapshot(i)&&(e=!0);o.viewSnap=i}}e&&this.raiseSnapshotsInSyncEvent()},t.prototype.onWatchError=function(t,e){var n=this.queries.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(e);this.queries.delete(t)},t.prototype.onOnlineStateChange=function(t){this.onlineState=t;var e=!1;this.queries.forEach(function(n,r){for(var i=0,o=r.listeners;i<o.length;i++)o[i].applyOnlineStateChange(t)&&(e=!0)}),e&&this.raiseSnapshotsInSyncEvent()},t.prototype.addSnapshotsInSyncListener=function(t){this.snapshotsInSyncListeners.add(t),t.next()},t.prototype.removeSnapshotsInSyncListener=function(t){this.snapshotsInSyncListeners.delete(t)},t.prototype.raiseSnapshotsInSyncEvent=function(){this.snapshotsInSyncListeners.forEach(function(t){t.next()})},t}(),bi=function(){function t(t,e,n){this.query=t,this.queryObserver=e,this.raisedInitialEvent=!1,this.snap=null,this.onlineState=yr.Unknown,this.options=n||{}}return t.prototype.onViewSnapshot=function(t){if(b(t.docChanges.length>0||t.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];i.type!==Er.Metadata&&e.push(i)}t=new Or(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(t)&&(this.queryObserver.next(t),o=!0):this.shouldRaiseInitialEvent(t,this.onlineState)&&(this.raiseInitialEvent(t),o=!0),this.snap=t,o},t.prototype.onError=function(t){this.queryObserver.error(t)},t.prototype.applyOnlineStateChange=function(t){this.onlineState=t;var e=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,t)&&(this.raiseInitialEvent(this.snap),e=!0),e},t.prototype.shouldRaiseInitialEvent=function(t,e){return b(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!t.fromCache||(this.options.waitForSyncWhenOnline&&e!==yr.Offline?(b(t.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!t.docs.isEmpty()||e===yr.Offline)},t.prototype.shouldRaiseEvent=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.snap&&this.snap.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.raiseInitialEvent=function(t){b(!this.raisedInitialEvent,"Trying to raise initial events for second time"),t=Or.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(t)},t}(),vi=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.addedKeys=n,this.removedKeys=r}return t.fromSnapshot=function(e,n){for(var r=Lt(),i=Lt(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case Er.Added:r=r.add(a.doc.key);break;case Er.Removed:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),wi=function(){return function(t){this.key=t}}(),_i=function(){return function(t){this.key=t}}(),Si=function(){function t(t,e){this.query=t,this._syncedDocuments=e,this.syncState=null,this.current=!1,this.limboDocuments=Lt(),this.mutatedKeys=Lt(),this.documentSet=new Ir(t.docComparator.bind(t))}return Object.defineProperty(t.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),t.prototype.computeDocChanges=function(t,e){var n=this,r=e?e.changeSet:new kr,i=e?e.documentSet:this.documentSet,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.hasLimit()&&i.size===this.query.limit?i.last():null;if(t.inorderTraversal(function(t,e){var u=i.get(t),l=e instanceof qe?e:null;l&&(b(t.isEqual(l.key),"Mismatching keys found in document changes: "+t+" != "+l.key),l=n.query.matches(l)?l:null);var h=!!u&&n.mutatedKeys.has(u.key),d=!!l&&(l.hasLocalMutations||n.mutatedKeys.has(l.key)&&l.hasCommittedMutations),f=!1;u&&l?u.data().isEqual(l.data())?h!==d&&(r.track({type:Er.Metadata,doc:l}),f=!0):n.shouldWaitForSyncedDocument(u,l)||(r.track({type:Er.Modified,doc:l}),f=!0,c&&n.query.docComparator(l,c)>0&&(a=!0)):!u&&l?(r.track({type:Er.Added,doc:l}),f=!0):u&&!l&&(r.track({type:Er.Removed,doc:u}),f=!0,c&&(a=!0)),f&&(l?(s=s.add(l),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),this.query.hasLimit())for(;s.size>this.query.limit;){var u=s.last();s=s.delete(u.key),o=o.delete(u.key),r.track({type:Er.Removed,doc:u})}return b(!a||!e,"View was refilled using docs that themselves needed refilling."),{documentSet:s,changeSet:r,needsRefill:a,mutatedKeys:o}},t.prototype.shouldWaitForSyncedDocument=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this;b(!t.needsRefill,"Cannot apply changes that need a refill");var i=this.documentSet;this.documentSet=t.documentSet,this.mutatedKeys=t.mutatedKeys;var o=t.changeSet.getChanges();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case Er.Added:return 1;case Er.Modified:case Er.Metadata:return 2;case Er.Removed:return 0;default:return y("Unknown ChangeType: "+t)}};return n(t)-n(e)}(t.type,e.type)||r.query.docComparator(t.doc,e.doc)}),this.applyTargetChange(n);var s=e?this.updateLimboDocuments():[],a=0===this.limboDocuments.size&&this.current?Tr.Synced:Tr.Local,c=a!==this.syncState;return this.syncState=a,0!==o.length||c?{snapshot:new Or(this.query,t.documentSet,i,o,t.mutatedKeys,a===Tr.Local,c,!1),limboChanges:s}:{limboChanges:s}},t.prototype.applyOnlineStateChange=function(t){return this.current&&t===yr.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new kr,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},t.prototype.shouldBeInLimbo=function(t){return!this._syncedDocuments.has(t)&&!!this.documentSet.has(t)&&!this.documentSet.get(t).hasLocalMutations},t.prototype.applyTargetChange=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e._syncedDocuments=e._syncedDocuments.add(t)}),t.modifiedDocuments.forEach(function(t){return b(e._syncedDocuments.has(t),"Modified document "+t+" not found in view.")}),t.removedDocuments.forEach(function(t){return e._syncedDocuments=e._syncedDocuments.delete(t)}),this.current=t.current)},t.prototype.updateLimboDocuments=function(){var t=this;if(!this.current)return[];var e=this.limboDocuments;this.limboDocuments=Lt(),this.documentSet.forEach(function(e){t.shouldBeInLimbo(e.key)&&(t.limboDocuments=t.limboDocuments.add(e.key))});var n=[];return e.forEach(function(e){t.limboDocuments.has(e)||n.push(new _i(e))}),this.limboDocuments.forEach(function(t){e.has(t)||n.push(new wi(t))}),n},t.prototype.synchronizeWithPersistedState=function(t){this._syncedDocuments=t.remoteKeys,this.limboDocuments=Lt();var e=this.computeDocChanges(t.documents);return this.applyChanges(e,!0)},t.prototype.computeInitialSnapshot=function(){return Or.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===Tr.Local)},t}(),Ci=function(){function t(t,e,n,r){this.asyncQueue=t,this.remoteStore=e,this.updateFunction=n,this.deferred=r,this.retries=5,this.backoff=new ur(this.asyncQueue,ft.RetryTransaction)}return t.prototype.run=function(){this.runWithBackOff()},t.prototype.runWithBackOff=function(){var t=this;this.backoff.backoffAndRun(function(){return o.__awaiter(t,void 0,void 0,function(){var t,e,n=this;return o.__generator(this,function(r){return t=this.remoteStore.createTransaction(),(e=this.tryRunUpdateFunction(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.handleTransactionError(t)})})}).catch(function(t){n.handleTransactionError(t)}),[2]})})})},t.prototype.tryRunUpdateFunction=function(t){try{var e=this.updateFunction(t);return!ar(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(g){return this.deferred.reject(g),null}},t.prototype.handleTransactionError=function(t){var e=this;this.retries>0&&this.isRetryableTransactionError(t)?(this.retries-=1,this.asyncQueue.enqueueAndForget(function(){return e.runWithBackOff(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.isRetryableTransactionError=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!_r(e)}return!1},t}(),Ii="SyncEngine",Ei=function(){return function(t,e,n){this.query=t,this.targetId=e,this.view=n}}(),Ti=function(){return function(t){this.key=t,this.receivedDocument=!1}}(),ki=function(){function t(t,e,n,r){this.localStore=t,this.remoteStore=e,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new We(function(t){return t.canonicalId()}),this.queryViewsByTarget={},this.limboTargetsByKey=new Ct(ht.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new Hn,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=se.forSyncEngine(),this.isPrimary=void 0,this.onlineState=yr.Unknown}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(t){b(null!==t,"SyncEngine listener cannot be null"),b(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=t},t.prototype.listen=function(t){return o.__awaiter(this,void 0,void 0,function(){var e,n,r,i,s;return o.__generator(this,function(o){switch(o.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(t))?(this.sharedClientState.addLocalQueryTarget(e=r.targetId),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateQuery(t)];case 2:return i=o.sent(),s=this.sharedClientState.addLocalQueryTarget(i.targetId),e=i.targetId,[4,this.initializeViewAndComputeSnapshot(i,"current"===s)];case 3:n=o.sent(),this.isPrimary&&this.remoteStore.listen(i),o.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,e]}})})},t.prototype.initializeViewAndComputeSnapshot=function(t,e){return o.__awaiter(this,void 0,void 0,function(){var n,r,i,s,a,c,u;return o.__generator(this,function(o){switch(o.label){case 0:return[4,this.localStore.executeQuery(n=t.query,!0)];case 1:return r=o.sent(),i=new Si(n,r.remoteKeys),s=i.computeDocChanges(r.documents),a=Ar.createSynthesizedTargetChangeForCurrentChange(t.targetId,e&&this.onlineState!==yr.Offline),b(0===(c=i.applyChanges(s,!0===this.isPrimary,a)).limboChanges.length,"View returned limbo docs before target ack from the server."),b(!!c.snapshot,"applyChanges for new view should always return a snapshot"),u=new Ei(n,t.targetId,i),this.queryViewsByQuery.set(n,u),this.queryViewsByTarget[t.targetId]=u,[2,c.snapshot]}})})},t.prototype.synchronizeViewAndComputeSnapshot=function(t){return o.__awaiter(this,void 0,void 0,function(){var e,n;return o.__generator(this,function(r){switch(r.label){case 0:return[4,this.localStore.executeQuery(t.query,!0)];case 1:return e=r.sent(),n=t.view.synchronizeWithPersistedState(e),this.isPrimary&&this.updateTrackedLimbos(t.targetId,n.limboChanges),[2,n]}})})},t.prototype.unlisten=function(t){return o.__awaiter(this,void 0,void 0,function(){var e,n=this;return o.__generator(this,function(r){switch(r.label){case 0:return this.assertSubscribed("unlisten()"),b(!!(e=this.queryViewsByQuery.get(t)),"Trying to unlisten on query not found:"+t),this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(e.targetId),this.sharedClientState.isActiveQueryTarget(e.targetId)?[3,2]:[4,this.localStore.releaseQuery(t,!1).then(function(){n.sharedClientState.clearQueryState(e.targetId),n.remoteStore.unlisten(e.targetId),n.removeAndCleanupQuery(e)}).catch(Un)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupQuery(e),[4,this.localStore.releaseQuery(t,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}})})},t.prototype.write=function(t,e){return o.__awaiter(this,void 0,void 0,function(){var n;return o.__generator(this,function(r){switch(r.label){case 0:return this.assertSubscribed("write()"),[4,this.localStore.localWrite(t)];case 1:return n=r.sent(),this.sharedClientState.addPendingMutation(n.batchId),this.addMutationCallback(n.batchId,e),[4,this.emitNewSnapsAndNotifyLocalStore(n.changes)];case 2:return r.sent(),[4,this.remoteStore.fillWritePipeline()];case 3:return r.sent(),[2]}})})},t.prototype.runTransaction=function(t,e,n){new Ci(t,this.remoteStore,e,n).run()},t.prototype.applyRemoteEvent=function(t){return o.__awaiter(this,void 0,void 0,function(){var e,n=this;return o.__generator(this,function(r){switch(r.label){case 0:this.assertSubscribed("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.applyRemoteEvent(t)];case 2:return e=r.sent(),k(t.targetChanges,function(t,e){var r=n.limboResolutionsByTarget[Number(t)];r&&(b(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),e.addedDocuments.size>0?r.receivedDocument=!0:e.modifiedDocuments.size>0?b(r.receivedDocument,"Received change for limbo target document without add."):e.removedDocuments.size>0&&(b(r.receivedDocument,"Received remove for limbo target document without add."),r.receivedDocument=!1))}),[4,this.emitNewSnapsAndNotifyLocalStore(e,t)];case 3:return r.sent(),[3,6];case 4:return[4,Un(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}})})},t.prototype.applyOnlineStateChange=function(t,e){if(this.isPrimary&&e===br.RemoteStore||!this.isPrimary&&e===br.SharedClientState){this.assertSubscribed("applyOnlineStateChange()");var n=[];this.queryViewsByQuery.forEach(function(e,r){var i=r.view.applyOnlineStateChange(t);b(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)}),this.syncEngineListener.onOnlineStateChange(t),this.syncEngineListener.onWatchChange(n),this.onlineState=t,this.isPrimary&&this.sharedClientState.setOnlineState(t)}},t.prototype.rejectListen=function(t,e){return o.__awaiter(this,void 0,void 0,function(){var n,r,i,s,a,c,u=this;return o.__generator(this,function(o){switch(o.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(t,"rejected",e),(r=(n=this.limboResolutionsByTarget[t])&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[t],i=(i=new Ct(ht.comparator)).insert(r,new Be(r,St.forDeletedDoc())),s=Lt().add(r),a=new xr(St.MIN,{},new kt(G),i,s),[2,this.applyRemoteEvent(a)]):[3,1];case 1:return b(!!(c=this.queryViewsByTarget[t]),"Unknown targetId: "+t),[4,this.localStore.releaseQuery(c.query,!1).then(function(){return u.removeAndCleanupQuery(c)}).catch(Un)];case 2:o.sent(),this.syncEngineListener.onWatchError(c.query,e),o.label=3;case 3:return[2]}})})},t.prototype.applyBatchState=function(t,e,n){return o.__awaiter(this,void 0,void 0,function(){var r;return o.__generator(this,function(i){switch(i.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(t)];case 1:return null===(r=i.sent())?(p(Ii,"Cannot apply mutation batch with id: "+t),[2]):"pending"!==e?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(this.processUserCallback(t,n||null),this.localStore.removeCachedMutationBatchMetadata(t)):y("Unknown batchState: "+e),i.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return i.sent(),[2]}})})},t.prototype.applySuccessfulWrite=function(t){return o.__awaiter(this,void 0,void 0,function(){var e,n;return o.__generator(this,function(r){switch(r.label){case 0:this.assertSubscribed("applySuccessfulWrite()"),this.processUserCallback(e=t.batch.batchId,null),this.triggerPendingWritesCallbacks(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.acknowledgeBatch(t)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(e,"acknowledged"),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,Un(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}})})},t.prototype.rejectFailedWrite=function(t,e){return o.__awaiter(this,void 0,void 0,function(){var n;return o.__generator(this,function(r){switch(r.label){case 0:this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(t,e),this.triggerPendingWritesCallbacks(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.rejectBatch(t)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(t,"rejected",e),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,Un(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}})})},t.prototype.registerPendingWritesCallback=function(t){return o.__awaiter(this,void 0,void 0,function(){var e,n;return o.__generator(this,function(r){switch(r.label){case 0:return this.remoteStore.canUseNetwork()||p(Ii,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.localStore.getHighestUnacknowledgedBatchId()];case 1:return(e=r.sent())===Vt?(t.resolve(),[2]):((n=this.pendingWritesCallbacks.get(e)||[]).push(t),this.pendingWritesCallbacks.set(e,n),[2])}})})},t.prototype.triggerPendingWritesCallbacks=function(t){(this.pendingWritesCallbacks.get(t)||[]).forEach(function(t){t.resolve()}),this.pendingWritesCallbacks.delete(t)},t.prototype.rejectOutstandingPendingWritesCallbacks=function(t){this.pendingWritesCallbacks.forEach(function(e){e.forEach(function(e){e.reject(new S(_.CANCELLED,t))})}),this.pendingWritesCallbacks.clear()},t.prototype.addMutationCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new Ct(G)),n=n.insert(t,e),this.mutationUserCallbacks[this.currentUser.toKey()]=n},t.prototype.processUserCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(t);r&&(b(t===n.minKey(),"Mutation callbacks processed out-of-order?"),e?r.reject(e):r.resolve(),n=n.remove(t)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},t.prototype.removeAndCleanupQuery=function(t){var e=this;if(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.queryViewsByQuery.delete(t.query),delete this.queryViewsByTarget[t.targetId],this.isPrimary){var n=this.limboDocumentRefs.referencesForId(t.targetId);this.limboDocumentRefs.removeReferencesForId(t.targetId),n.forEach(function(t){e.limboDocumentRefs.containsKey(t)||e.removeLimboTarget(t)})}},t.prototype.removeLimboTarget=function(t){var e=this.limboTargetsByKey.get(t);null!==e&&(this.remoteStore.unlisten(e),this.limboTargetsByKey=this.limboTargetsByKey.remove(t),delete this.limboResolutionsByTarget[e])},t.prototype.updateTrackedLimbos=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof wi?(this.limboDocumentRefs.addReference(i.key,t),this.trackLimboChange(i)):i instanceof _i?(p(Ii,"Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,t),this.limboDocumentRefs.containsKey(i.key)||this.removeLimboTarget(i.key)):y("Unknown limbo change: "+JSON.stringify(i))}},t.prototype.trackLimboChange=function(t){var e=t.key;if(!this.limboTargetsByKey.get(e)){p(Ii,"New document in limbo: "+e);var n=this.limboTargetIdGenerator.next(),r=Br.atPath(e.path);this.limboResolutionsByTarget[n]=new Ti(e),this.remoteStore.listen(new Cn(r,n,Sn.LimboResolution,ot.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(e,n)}},t.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},t.prototype.emitNewSnapsAndNotifyLocalStore=function(t,e){return o.__awaiter(this,void 0,void 0,function(){var n,r,i,s=this;return o.__generator(this,function(o){switch(o.label){case 0:return n=[],r=[],i=[],this.queryViewsByQuery.forEach(function(o,a){i.push(Promise.resolve().then(function(){var e=a.view.computeDocChanges(t);return e.needsRefill?s.localStore.executeQuery(a.query,!1).then(function(t){return a.view.computeDocChanges(t.documents,e)}):e}).then(function(t){var i=a.view.applyChanges(t,!0===s.isPrimary,e&&e.targetChanges[a.targetId]);if(s.updateTrackedLimbos(a.targetId,i.limboChanges),i.snapshot){s.isPrimary&&s.sharedClientState.updateQueryState(a.targetId,i.snapshot.fromCache?"not-current":"current"),n.push(i.snapshot);var o=vi.fromSnapshot(a.targetId,i.snapshot);r.push(o)}}))}),[4,Promise.all(i)];case 1:return o.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return o.sent(),[2]}})})},t.prototype.assertSubscribed=function(t){b(null!==this.syncEngineListener,"Trying to call "+t+" before calling subscribe().")},t.prototype.handleCredentialChange=function(t){return o.__awaiter(this,void 0,void 0,function(){var e,n;return o.__generator(this,function(r){switch(r.label){case 0:return e=!this.currentUser.isEqual(t),this.currentUser=t,e?(this.rejectOutstandingPendingWritesCallbacks("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.localStore.handleUserChange(t)]):[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}})})},t.prototype.applyPrimaryState=function(t){return o.__awaiter(this,void 0,void 0,function(){var e,n,r,i,s,a,c=this;return o.__generator(this,function(o){switch(o.label){case 0:return!0!==t||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return o.sent(),e=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(e.toArray())];case 2:for(n=o.sent(),r=0,i=n;r<i.length;r++)this.remoteStore.listen(i[r]);return[3,7];case 3:return!1!==t||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,s=[],a=Promise.resolve(),T(this.queryViewsByTarget,function(t,e){c.sharedClientState.isLocalQueryTarget(t)?s.push(t):a=a.then(function(){return c.unlisten(e.query)}),c.remoteStore.unlisten(e.targetId)}),[4,a]);case 4:return o.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(s)];case 5:return o.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:o.sent(),o.label=7;case 7:return[2]}})})},t.prototype.resetLimboDocuments=function(){var t=this;T(this.limboResolutionsByTarget,function(e){t.remoteStore.unlisten(e)}),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new Ct(ht.comparator)},t.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(t){return o.__awaiter(this,void 0,void 0,function(){var e,n,r,i,s,a,c,u,l;return o.__generator(this,function(o){switch(o.label){case 0:e=[],n=[],r=0,i=t,o.label=1;case 1:return r<i.length?(a=void 0,(c=this.queryViewsByTarget[s=i[r]])?[4,this.localStore.releaseQuery(c.query,!0)]:[3,5]):[3,11];case 2:return o.sent(),[4,this.localStore.allocateQuery(c.query)];case 3:return a=o.sent(),[4,this.synchronizeViewAndComputeSnapshot(c)];case 4:return(u=o.sent()).snapshot&&n.push(u.snapshot),[3,9];case 5:return b(!0===this.isPrimary,"A secondary tab should never have an active query without an active view."),[4,this.localStore.getQueryForTarget(s)];case 6:return b(!!(l=o.sent()),"Query data for target "+s+" not found"),[4,this.localStore.allocateQuery(l)];case 7:return a=o.sent(),[4,this.initializeViewAndComputeSnapshot(a,!1)];case 8:o.sent(),o.label=9;case 9:e.push(a),o.label=10;case 10:return r++,[3,1];case 11:return this.syncEngineListener.onWatchChange(n),[2,e]}})})},t.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},t.prototype.applyTargetState=function(t,e,n){return o.__awaiter(this,void 0,void 0,function(){var r,i,s;return o.__generator(this,function(o){switch(o.label){case 0:if(this.isPrimary)return p(Ii,"Ignoring unexpected query state notification."),[2];if(!this.queryViewsByTarget[t])return[3,7];switch(e){case"current":case"not-current":return[3,1];case"rejected":return[3,4]}return[3,6];case 1:return[4,this.localStore.getNewDocumentChanges()];case 2:return r=o.sent(),i=xr.createSynthesizedRemoteEventForCurrentChange(t,"current"===e),[4,this.emitNewSnapsAndNotifyLocalStore(r,i)];case 3:return o.sent(),[3,7];case 4:return this.removeAndCleanupQuery(s=this.queryViewsByTarget[t]),[4,this.localStore.releaseQuery(s.query,!0)];case 5:return o.sent(),this.syncEngineListener.onWatchError(s.query,n),[3,7];case 6:y("Unexpected target state: "+e),o.label=7;case 7:return[2]}})})},t.prototype.applyActiveTargetsChange=function(t,e){return o.__awaiter(this,void 0,void 0,function(){var n,r,i,s,a,c,u,l,h,d=this;return o.__generator(this,function(f){switch(f.label){case 0:if(!this.isPrimary)return[2];n=0,r=t,f.label=1;case 1:return n<r.length?(b(!this.queryViewsByTarget[h=r[n]],"Trying to add an already active target"),[4,this.localStore.getQueryForTarget(h)]):[3,6];case 2:return b(!!(i=f.sent()),"Query data for active target "+h+" not found"),[4,this.localStore.allocateQuery(i)];case 3:return s=f.sent(),[4,this.initializeViewAndComputeSnapshot(s,!1)];case 4:f.sent(),this.remoteStore.listen(s),f.label=5;case 5:return n++,[3,1];case 6:a=function(t){var e;return o.__generator(this,function(n){switch(n.label){case 0:return(e=c.queryViewsByTarget[t])?[4,c.localStore.releaseQuery(e.query,!1).then(function(){d.remoteStore.unlisten(t),d.removeAndCleanupQuery(e)}).catch(Un)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})},c=this,u=0,l=e,f.label=7;case 7:return u<l.length?[5,a(h=l[u])]:[3,10];case 8:f.sent(),f.label=9;case 9:return u++,[3,7];case 10:return[2]}})})},t.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},t.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},t.prototype.getRemoteKeysForTarget=function(t){var e=this.limboResolutionsByTarget[t];return e&&e.receivedDocument?Lt().add(e.key):this.queryViewsByTarget[t]?this.queryViewsByTarget[t].view.syncedDocuments:Lt()},t}(),Oi=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t.UNAUTHENTICATED=new t(null),t.GOOGLE_CREDENTIALS=new t("google-credentials-uid"),t.FIRST_PARTY=new t("first-party-uid"),t}(),xi="SharedClientState",Ai=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r,b(void 0!==r==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return t.fromWebStorageEntry=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new S(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(g(xi,"Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Ni=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n,b(void 0!==n==("rejected"===e),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return t.fromWebStorageEntry=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new S(r.error.code,r.error.message)),i?new t(e,r.state,o):(g(xi,"Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Mi=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.fromWebStorageEntry=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Ut(),s=0;i&&s<r.activeTargetIds.length;++s)i=cr(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(g(xi,"Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Di=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.fromWebStorageEntry=function(e){var n=JSON.parse(e);return"object"==typeof n&&n.onlineState in yr&&"string"==typeof n.clientId?new t(n.clientId,yr[n.onlineState]):(g(xi,"Failed to parse online state: "+e),null)},t}(),Pi=function(){function t(){this.activeTargetIds=Ut()}return t.prototype.addQueryTarget=function(t){b(!this.activeTargetIds.has(t),"Target with ID '"+t+"' already active."),this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.removeQueryTarget=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.toWebStorageJSON=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Ri=function(){function t(e,n,r,i,o){if(this.queue=e,this.platform=n,this.persistenceKey=r,this.localClientId=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!t.isAvailable(this.platform))throw new S(_.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=o,this.localClientStorageKey=this.toWebStorageClientStateKey(this.localClientId),this.sequenceNumberKey="firestore_sequence_number_"+r,this.activeClients[this.localClientId]=new Pi,this.clientStateKeyRe=new RegExp("^firestore_clients_"+s+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^firestore_mutations_"+s+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^firestore_targets_"+s+"_(\\d+)$"),this.onlineStateKey="firestore_online_state_"+r,this.platform.window.addEventListener("storage",this.storageListener)}return t.isAvailable=function(t){return!(!t.window||null==t.window.localStorage)},t.prototype.start=function(){return o.__awaiter(this,void 0,void 0,function(){var t,e,n,r,i,s,a,c,u,l,h=this;return o.__generator(this,function(o){switch(o.label){case 0:return b(!this.started,"WebStorageSharedClientState already started"),b(null!==this.syncEngine,"syncEngine property must be set before calling start()"),b(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(t=o.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.localClientId&&(i=this.getItem(this.toWebStorageClientStateKey(r)))&&(s=Mi.fromWebStorageEntry(r,i))&&(this.activeClients[s.clientId]=s);for(this.persistClientState(),(a=this.storage.getItem(this.onlineStateKey))&&(c=this.fromWebStorageOnlineState(a))&&this.handleOnlineStateEvent(c),u=0,l=this.earlyEvents;u<l.length;u++)this.handleWebStorageEvent(l[u]);return this.earlyEvents=[],this.platform.window.addEventListener("unload",function(){return h.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.sequenceNumberKey,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){var t=Ut();return k(this.activeClients,function(e,n){t=t.unionWith(n.activeTargetIds)}),t},t.prototype.isActiveQueryTarget=function(t){for(var e in this.activeClients)if(this.activeClients.hasOwnProperty(e)&&this.activeClients[e].activeTargetIds.has(t))return!0;return!1},t.prototype.addPendingMutation=function(t){this.persistMutationState(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.persistMutationState(t,e,n),this.removeMutationState(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(this.toWebStorageQueryTargetMetadataKey(t));if(n){var r=Ni.fromWebStorageEntry(t,n);r&&(e=r.state)}}return this.localClientState.addQueryTarget(t),this.persistClientState(),e},t.prototype.removeLocalQueryTarget=function(t){this.localClientState.removeQueryTarget(t),this.persistClientState()},t.prototype.isLocalQueryTarget=function(t){return this.localClientState.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(this.toWebStorageQueryTargetMetadataKey(t))},t.prototype.updateQueryState=function(t,e,n){this.persistQueryTargetState(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.removeMutationState(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.persistOnlineState(t)},t.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return p(xi,"READ",t,e),e},t.prototype.setItem=function(t,e){p(xi,"SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){p(xi,"REMOVE",t),this.storage.removeItem(t)},t.prototype.handleWebStorageEvent=function(t){var e=this;if(t.storageArea===this.storage){if(p(xi,"EVENT",t.key,t.newValue),t.key===this.localClientStorageKey)return void g("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget(function(){return o.__awaiter(e,void 0,void 0,function(){var e,n,r,i,s,a;return o.__generator(this,function(o){if(!this.started)return this.earlyEvents.push(t),[2];if(null===t.key)return[2];if(this.clientStateKeyRe.test(t.key)){if(null==t.newValue)return n=this.fromWebStorageClientStateKey(t.key),[2,this.handleClientStateEvent(n,null)];if(e=this.fromWebStorageClientState(t.key,t.newValue))return[2,this.handleClientStateEvent(e.clientId,e)]}else if(this.mutationBatchKeyRe.test(t.key)){if(null!==t.newValue&&(r=this.fromWebStorageMutationMetadata(t.key,t.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(t.key)){if(null!==t.newValue&&(i=this.fromWebStorageQueryTargetMetadata(t.key,t.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(t.key===this.onlineStateKey){if(null!==t.newValue&&(s=this.fromWebStorageOnlineState(t.newValue)))return[2,this.handleOnlineStateEvent(s)]}else t.key===this.sequenceNumberKey&&(b(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(a=function(t){var e=ot.INVALID;if(null!=t)try{var n=JSON.parse(t);b("number"==typeof n,"Found non-numeric sequence number"),e=n}catch(r){g(xi,"Failed to read sequence number from WebStorage",r)}return e}(t.newValue))!==ot.INVALID&&this.sequenceNumberHandler(a));return[2]})})})}},Object.defineProperty(t.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),t.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},t.prototype.persistMutationState=function(t,e,n){var r=new Ai(this.currentUser,t,e,n),i=this.toWebStorageMutationBatchKey(t);this.setItem(i,r.toWebStorageJSON())},t.prototype.removeMutationState=function(t){var e=this.toWebStorageMutationBatchKey(t);this.removeItem(e)},t.prototype.persistOnlineState=function(t){this.storage.setItem(this.onlineStateKey,JSON.stringify({clientId:this.localClientId,onlineState:yr[t]}))},t.prototype.persistQueryTargetState=function(t,e,n){var r=this.toWebStorageQueryTargetMetadataKey(t),i=new Ni(t,e,n);this.setItem(r,i.toWebStorageJSON())},t.prototype.toWebStorageClientStateKey=function(t){return b(-1===t.indexOf("_"),"Client key cannot contain '_', but was '"+t+"'"),"firestore_clients_"+this.persistenceKey+"_"+t},t.prototype.toWebStorageQueryTargetMetadataKey=function(t){return"firestore_targets_"+this.persistenceKey+"_"+t},t.prototype.toWebStorageMutationBatchKey=function(t){var e="firestore_mutations_"+this.persistenceKey+"_"+t;return this.currentUser.isAuthenticated()&&(e+="_"+this.currentUser.uid),e},t.prototype.fromWebStorageClientStateKey=function(t){var e=this.clientStateKeyRe.exec(t);return e?e[1]:null},t.prototype.fromWebStorageClientState=function(t,e){var n=this.fromWebStorageClientStateKey(t);return b(null!==n,"Cannot parse client state key '"+t+"'"),Mi.fromWebStorageEntry(n,e)},t.prototype.fromWebStorageMutationMetadata=function(t,e){var n=this.mutationBatchKeyRe.exec(t);b(null!==n,"Cannot parse mutation batch key '"+t+"'");var r=Number(n[1]);return Ai.fromWebStorageEntry(new Oi(void 0!==n[2]?n[2]:null),r,e)},t.prototype.fromWebStorageQueryTargetMetadata=function(t,e){var n=this.queryTargetKeyRe.exec(t);b(null!==n,"Cannot parse query target key '"+t+"'");var r=Number(n[1]);return Ni.fromWebStorageEntry(r,e)},t.prototype.fromWebStorageOnlineState=function(t){return Di.fromWebStorageEntry(t)},t.prototype.handleMutationBatchEvent=function(t){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(e){return t.user.uid!==this.currentUser.uid?(p(xi,"Ignoring mutation for non-active user "+t.user.uid),[2]):[2,this.syncEngine.applyBatchState(t.batchId,t.state,t.error)]})})},t.prototype.handleQueryTargetEvent=function(t){return this.syncEngine.applyTargetState(t.targetId,t.state,t.error)},t.prototype.handleClientStateEvent=function(t,e){var n=this,r=this.getAllActiveQueryTargets();e?this.activeClients[t]=e:delete this.activeClients[t];var i=this.getAllActiveQueryTargets(),s=[],a=[];return i.forEach(function(t){return o.__awaiter(n,void 0,void 0,function(){return o.__generator(this,function(e){return r.has(t)||s.push(t),[2]})})}),r.forEach(function(t){return o.__awaiter(n,void 0,void 0,function(){return o.__generator(this,function(e){return i.has(t)||a.push(t),[2]})})}),this.syncEngine.applyActiveTargetsChange(s,a)},t.prototype.handleOnlineStateEvent=function(t){this.activeClients[t.clientId]&&this.onlineStateHandler(t.onlineState)},t}(),ji=function(){function t(){this.localState=new Pi,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.localState.addQueryTarget(t),this.queryState[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.queryState[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.localState.removeQueryTarget(t)},t.prototype.isLocalQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.queryState[t]},t.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},t.prototype.start=function(){return this.localState=new Pi,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t}(),Li="FirestoreClient",Fi=function(){function t(t,e){this.cacheSizeBytes=t,this.synchronizeTabs=e}return t.prototype.lruParams=function(){return On.withCacheSize(this.cacheSizeBytes)},t}(),Ui=function(){return function(){}}(),Vi=function(){function t(t,e,n,r){this.platform=t,this.databaseInfo=e,this.credentials=n,this.asyncQueue=r,this.clientId=Q.newId()}return t.prototype.start=function(t){var e=this;this.verifyNotTerminated();var n=new dt,r=new dt,i=!1;return this.credentials.setChangeListener(function(o){i?e.asyncQueue.enqueueAndForget(function(){return e.handleCredentialChange(o)}):(i=!0,e.initializePersistence(t,r,o).then(function(t){return e.initializeRest(o,t)}).then(n.resolve,n.reject))}),this.asyncQueue.enqueueAndForget(function(){return n.promise}),r.promise},t.prototype.enableNetwork=function(){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return t.syncEngine.enableNetwork()})},t.prototype.initializePersistence=function(t,e,n){var r=this;return t instanceof Fi?this.startIndexedDbPersistence(n,t).then(function(t){return e.resolve(),t}).catch(function(t){if(e.reject(t),!r.canFallback(t))throw t;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+t),r.startMemoryPersistence()}):(e.resolve(),this.startMemoryPersistence())},t.prototype.canFallback=function(t){return t instanceof S?t.code===_.FAILED_PRECONDITION||t.code===_.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new S(_.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.startIndexedDbPersistence=function(t,e){var n=this,r=Fn.buildStoragePrefix(this.databaseInfo),i=new gi(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then(function(){return o.__awaiter(n,void 0,void 0,function(){var n,s;return o.__generator(this,function(o){switch(o.label){case 0:if(e.synchronizeTabs&&!Ri.isAvailable(this.platform))throw new S(_.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return n=e.lruParams(),this.sharedClientState=e.synchronizeTabs?new Ri(this.asyncQueue,this.platform,r,this.clientId,t):new ji,[4,Fn.createIndexedDbPersistence({allowTabSynchronization:e.synchronizeTabs,persistenceKey:r,clientId:this.clientId,platform:this.platform,queue:this.asyncQueue,serializer:i,lruParams:n,sequenceNumberSyncer:this.sharedClientState})];case 1:return s=o.sent(),this.persistence=s,[2,s.referenceDelegate.garbageCollector]}})})})},t.prototype.startMemoryPersistence=function(){return this.persistence=Zn.createEagerPersistence(this.clientId),this.sharedClientState=new ji,Promise.resolve(null)},t.prototype.initializeRest=function(t,e){var n=this;return p(Li,"Initializing. user=",t.uid),this.platform.loadConnection(this.databaseInfo).then(function(r){return o.__awaiter(n,void 0,void 0,function(){var n,i,s,a,c,u=this;return o.__generator(this,function(l){switch(l.label){case 0:return n=new nr,this.localStore=new Qn(this.persistence,n,t),[4,this.localStore.start()];case 1:return l.sent(),e&&(this.lruScheduler=new xn(e,this.asyncQueue,this.localStore)),i=this.platform.newConnectivityMonitor(),s=this.platform.newSerializer(this.databaseInfo.databaseId),a=new gr(this.asyncQueue,r,this.credentials,s),c=function(t){return u.syncEngine.applyOnlineStateChange(t,br.SharedClientState)},this.remoteStore=new Vr(this.localStore,a,this.asyncQueue,function(t){return u.syncEngine.applyOnlineStateChange(t,br.RemoteStore)},i),this.syncEngine=new ki(this.localStore,this.remoteStore,this.sharedClientState,t),this.sharedClientState.onlineStateHandler=c,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new yi(this.syncEngine),[4,this.sharedClientState.start()];case 2:return l.sent(),[4,this.remoteStore.start()];case 3:return l.sent(),[4,this.persistence.setPrimaryStateListener(function(t){return o.__awaiter(u,void 0,void 0,function(){return o.__generator(this,function(e){switch(e.label){case 0:return[4,this.syncEngine.applyPrimaryState(t)];case 1:return e.sent(),this.lruScheduler&&(t&&!this.lruScheduler.started?this.lruScheduler.start():t||this.lruScheduler.stop()),[2]}})})})];case 4:return l.sent(),[4,this.persistence.setDatabaseDeletedListener(function(){return o.__awaiter(u,void 0,void 0,function(){return o.__generator(this,function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}})})})];case 5:return l.sent(),[2]}})})})},t.prototype.handleCredentialChange=function(t){return this.asyncQueue.verifyOperationInProgress(),p(Li,"Credential Changed. Current user: "+t.uid),this.syncEngine.handleCredentialChange(t)},t.prototype.disableNetwork=function(){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return t.syncEngine.disableNetwork()})},t.prototype.terminate=function(){var t=this;return this.asyncQueue.enqueueAndInitiateShutdown(function(){return o.__awaiter(t,void 0,void 0,function(){return o.__generator(this,function(t){switch(t.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return t.sent(),[4,this.sharedClientState.shutdown()];case 2:return t.sent(),[4,this.persistence.shutdown()];case 3:return t.sent(),this.credentials.removeChangeListener(),[2]}})})})},t.prototype.waitForPendingWrites=function(){var t=this;this.verifyNotTerminated();var e=new dt;return this.asyncQueue.enqueueAndForget(function(){return t.syncEngine.registerPendingWritesCallback(e)}),e.promise},t.prototype.listen=function(t,e,n){var r=this;this.verifyNotTerminated();var i=new bi(t,e,n);return this.asyncQueue.enqueueAndForget(function(){return r.eventMgr.listen(i)}),i},t.prototype.unlisten=function(t){var e=this;this.clientTerminated||this.asyncQueue.enqueueAndForget(function(){return e.eventMgr.unlisten(t)})},t.prototype.getDocumentFromLocalCache=function(t){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return e.localStore.readDocument(t)}).then(function(t){if(t instanceof qe)return t;if(t instanceof Be)return null;throw new S(_.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")})},t.prototype.getDocumentsFromLocalCache=function(t){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return o.__awaiter(e,void 0,void 0,function(){var e,n,r;return o.__generator(this,function(i){switch(i.label){case 0:return[4,this.localStore.executeQuery(t,!0)];case 1:return e=i.sent(),n=new Si(t,e.remoteKeys),r=n.computeDocChanges(e.documents),[2,n.applyChanges(r,!1).snapshot]}})})})},t.prototype.write=function(t){var e=this;this.verifyNotTerminated();var n=new dt;return this.asyncQueue.enqueueAndForget(function(){return e.syncEngine.write(t,n)}),n.promise},t.prototype.databaseId=function(){return this.databaseInfo.databaseId},t.prototype.addSnapshotsInSyncListener=function(t){var e=this;this.verifyNotTerminated(),this.asyncQueue.enqueueAndForget(function(){return e.eventMgr.addSnapshotsInSyncListener(t),Promise.resolve()})},t.prototype.removeSnapshotsInSyncListener=function(t){this.clientTerminated||this.eventMgr.removeSnapshotsInSyncListener(t)},Object.defineProperty(t.prototype,"clientTerminated",{get:function(){return this.asyncQueue.isShuttingDown},enumerable:!0,configurable:!0}),t.prototype.transaction=function(t){var e=this;this.verifyNotTerminated();var n=new dt;return this.asyncQueue.enqueueAndForget(function(){return e.syncEngine.runTransaction(e.asyncQueue,t,n),Promise.resolve()}),n.promise},t}(),qi=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.scheduleEvent(this.observer.next,t)},t.prototype.error=function(t){this.scheduleEvent(this.observer.error,t)},t.prototype.mute=function(){this.muted=!0},t.prototype.scheduleEvent=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Bi=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];D("FieldPath",t,"fieldNames",1);for(var n=0;n<t.length;++n)if(P("FieldPath","string",n,t[n]),0===t[n].length)throw new S(_.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lt(t)}return t.documentId=function(){return t._DOCUMENT_ID},t.prototype.isEqual=function(e){if(!(e instanceof t))throw H("isEqual","FieldPath",1,e);return this._internalPath.isEqual(e._internalPath)},t._DOCUMENT_ID=new t(lt.keyField().canonicalString()),t}(),zi=new RegExp("[~\\*/\\[\\]]"),Wi=function(){return function(t,e){this.user=e,this.type="OAuth",this.authHeaders={Authorization:"Bearer "+t}}}(),Hi=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){b(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=t,t(Oi.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){b(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},t}(),Ki=function(){function t(t){var e=this;this.app=t,this.tokenListener=null,this.currentUser=Oi.UNAUTHENTICATED,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){e.tokenCounter++,e.currentUser=e.getUser(),e.changeListener&&e.changeListener(e.currentUser)},this.currentUser=this.getUser(),this.tokenCounter=0,this.app.INTERNAL.addAuthTokenListener(this.tokenListener)}return t.prototype.getToken=function(){var t=this;b(null!=this.tokenListener,"getToken cannot be called after listener removed.");var e=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.app.INTERNAL.getToken(n).then(function(n){if(t.tokenCounter!==e)throw new S(_.ABORTED,"getToken aborted due to token change.");return n?(b("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new Wi(n.accessToken,t.currentUser)):null})},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){b(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=t,t(this.currentUser)},t.prototype.removeChangeListener=function(){b(null!=this.tokenListener,"removeChangeListener() called twice"),b(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},t.prototype.getUser=function(){var t=this.app.INTERNAL.getUid();return b(null===t||"string"==typeof t,"Received invalid UID: "+t),new Oi(t)},t}(),$i=function(){function t(t,e){this.gapi=t,this.sessionIndex=e,this.type="FirstParty",this.user=Oi.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.sessionIndex},e=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!0,configurable:!0}),t}(),Qi=function(){function t(t,e){this.gapi=t,this.sessionIndex=e}return t.prototype.getToken=function(){return Promise.resolve(new $i(this.gapi,this.sessionIndex))},t.prototype.setChangeListener=function(t){t(Oi.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Gi(t){if(!t)return new Hi;switch(t.type){case"gapi":var e=t.client;return b(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new Qi(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new S(_.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}function Xi(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Yi=function(){function t(t){this._methodName=t}return t.delete=function(){return x("FieldValue.delete",arguments),Zi.instance},t.serverTimestamp=function(){return x("FieldValue.serverTimestamp",arguments),Ji.instance},t.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return N("FieldValue.arrayUnion",arguments,1),new to(t)},t.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return N("FieldValue.arrayRemove",arguments,1),new eo(t)},t.increment=function(t){return P("FieldValue.increment","number",1,t),A("FieldValue.increment",arguments,1),new no(t)},t.prototype.isEqual=function(t){return this===t},t}(),Zi=function(t){function e(){return t.call(this,"FieldValue.delete")||this}return o.__extends(e,t),e.instance=new e,e}(Yi),Ji=function(t){function e(){return t.call(this,"FieldValue.serverTimestamp")||this}return o.__extends(e,t),e.instance=new e,e}(Yi),to=function(t){function e(e){var n=t.call(this,"FieldValue.arrayUnion")||this;return n._elements=e,n}return o.__extends(e,t),e}(Yi),eo=function(t){function e(e){var n=t.call(this,"FieldValue.arrayRemove")||this;return n._elements=e,n}return o.__extends(e,t),e}(Yi),no=function(t){function e(e){var n=t.call(this,"FieldValue.increment")||this;return n._operand=e,n}return o.__extends(e,t),e}(Yi),ro=C(Yi,"Use FieldValue.<field>() instead."),io=/^__.*__$/,oo=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[];return n.push(null!==this.fieldMask?new ve(t,this.data,this.fieldMask,e):new be(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new we(t,this.fieldTransforms)),n},t}(),so=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[new ve(t,this.data,this.fieldMask,e)];return this.fieldTransforms.length>0&&n.push(new we(t,this.fieldTransforms)),n},t}(),ao=function(t){return t[t.Set=0]="Set",t[t.Update=1]="Update",t[t.MergeSet=2]="MergeSet",t[t.Argument=3]="Argument",t}({});function co(t){switch(t){case ao.Set:case ao.MergeSet:case ao.Update:return!0;case ao.Argument:return!1;default:throw y("Unexpected case for UserDataSource: "+t)}}var uo=function(){function t(t,e,n,r,i,o){this.dataSource=t,this.methodName=e,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}return t.prototype.childContextForField=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePathSegment(e),r},t.prototype.childContextForFieldPath=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePath(),r},t.prototype.childContextForArray=function(e){return new t(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},t.prototype.createError=function(t){var e=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new S(_.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+t+e)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.validatePath=function(){if(null!==this.path)for(var t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))},t.prototype.validatePathSegment=function(t){if(co(this.dataSource)&&io.test(t))throw this.createError("Document fields cannot begin and end with __")},t}(),lo=function(){return function(t,e){this.databaseId=t,this.key=e}}(),ho=function(){function t(t){this.preConverter=t}return t.prototype.parseSetData=function(t,e){var n=new uo(ao.Set,t,lt.EMPTY_PATH);po("Data must be an object, but it was:",n,e);var r=this.parseData(e,n);return new oo(r,null,n.fieldTransforms)},t.prototype.parseMergeData=function(t,e,n){var r=new uo(ao.MergeSet,t,lt.EMPTY_PATH);po("Data must be an object, but it was:",r,e);var i,o,s=this.parseData(e,r);if(n){for(var a=new kt(lt.comparator),c=0,u=n;c<u.length;c++){var l=u[c],h=void 0;if(l instanceof Bi)h=l._internalPath;else{if("string"!=typeof l)throw y("Expected stringOrFieldPath to be a string or a FieldPath");h=mo(t,l)}if(!r.contains(h))throw new S(_.INVALID_ARGUMENT,"Field '"+h+"' is specified in your field mask but missing from your input data.");a=a.add(h)}i=de.fromSet(a),o=r.fieldTransforms.filter(function(t){return i.covers(t.field)})}else i=de.fromArray(r.fieldMask),o=r.fieldTransforms;return new oo(s,i,o)},t.prototype.parseUpdateData=function(t,e){var n=this,r=new uo(ao.Update,t,lt.EMPTY_PATH);po("Data must be an object, but it was:",r,e);var i=new kt(lt.comparator),o=Fe.EMPTY;k(e,function(e,s){var a=mo(t,e),c=r.childContextForFieldPath(a);if((s=n.runPreConverter(s,c))instanceof Zi)i=i.add(a);else{var u=n.parseData(s,c);null!=u&&(i=i.add(a),o=o.set(a,u))}});var s=de.fromSet(i);return new so(o,s,r.fieldTransforms)},t.prototype.parseUpdateVarargs=function(t,e,n,r){var i=new uo(ao.Update,t,lt.EMPTY_PATH),o=[go(t,e)],s=[n];if(r.length%2!=0)throw new S(_.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var a=0;a<r.length;a+=2)o.push(go(t,r[a])),s.push(r[a+1]);var c=new kt(lt.comparator),u=Fe.EMPTY;for(a=0;a<o.length;++a){var l=o[a],h=i.childContextForFieldPath(l),d=this.runPreConverter(s[a],h);if(d instanceof Zi)c=c.add(l);else{var f=this.parseData(d,h);null!=f&&(c=c.add(l),u=u.set(l,f))}}var p=de.fromSet(c);return new so(u,p,i.fieldTransforms)},t.prototype.parseQueryValue=function(t,e){var n=new uo(ao.Argument,t,lt.EMPTY_PATH),r=this.parseData(e,n);return b(null!=r,"Parsed data should not be null."),b(0===n.fieldTransforms.length,"Field transforms should have been disallowed."),r},t.prototype.runPreConverter=function(t,e){try{return this.preConverter(t)}catch(r){var n=yo(r);throw e.createError(n)}},t.prototype.parseData=function(t,e){if(fo(t=this.runPreConverter(t,e)))return po("Unsupported field value:",e,t),this.parseObject(t,e);if(t instanceof Yi)return this.parseSentinelFieldValue(t,e),null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.arrayElement)throw e.createError("Nested arrays are not supported");return this.parseArray(t,e)}return this.parseScalarValue(t,e)},t.prototype.parseObject=function(t,e){var n=this,r=new Ct(G);return O(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):k(t,function(t,i){var o=n.parseData(i,e.childContextForField(t));null!=o&&(r=r.insert(t,o))}),new Fe(r)},t.prototype.parseArray=function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=this.parseData(o[i],e.childContextForArray(r));null==s&&(s=Te.INSTANCE),n.push(s),r++}return new Ue(n)},t.prototype.parseSentinelFieldValue=function(t,e){if(!co(e.dataSource))throw e.createError(t._methodName+"() can only be used with update() and set()");if(null===e.path)throw e.createError(t._methodName+"() is not currently supported inside arrays");if(t instanceof Zi){if(e.dataSource!==ao.MergeSet)throw e.dataSource===ao.Update?(b(e.path.length>0,"FieldValue.delete() at the top level should have already been handled."),e.createError("FieldValue.delete() can only appear at the top level of your update data")):e.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");e.fieldMask.push(e.path)}else if(t instanceof Ji)e.fieldTransforms.push(new fe(e.path,ni.instance));else if(t instanceof to){var n=this.parseArrayTransformElements(t._methodName,t._elements),r=new ri(n);e.fieldTransforms.push(new fe(e.path,r))}else if(t instanceof eo){n=this.parseArrayTransformElements(t._methodName,t._elements);var i=new ii(n);e.fieldTransforms.push(new fe(e.path,i))}else if(t instanceof no){var o=this.parseQueryValue("FieldValue.increment",t._operand),s=new oi(o);e.fieldTransforms.push(new fe(e.path,s))}else y("Unknown FieldValue type: "+t)},t.prototype.parseScalarValue=function(t,e){if(null===t)return Te.INSTANCE;if("number"==typeof t)return cr(t)?new Ae(t):new Ne(t);if("boolean"==typeof t)return ke.of(t);if("string"==typeof t)return new Me(t);if(t instanceof Date)return new De(_t.fromDate(t));if(t instanceof _t)return new De(new _t(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)));if(t instanceof qr)return new Le(t);if(t instanceof tt)return new Re(t);if(t instanceof lo)return new je(t.databaseId,t.key);throw e.createError("Unsupported field value: "+B(t))},t.prototype.parseArrayTransformElements=function(t,e){var n=this;return e.map(function(e,r){var i=new uo(ao.Argument,t,lt.EMPTY_PATH);return n.parseData(e,i.childContextForArray(r))})},t}();function fo(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof _t||t instanceof qr||t instanceof tt||t instanceof lo||t instanceof Yi)}function po(t,e,n){if(!fo(n)||!q(n)){var r=B(n);throw e.createError("an object"===r?t+" a custom object":t+" "+r)}}function go(t,e){if(e instanceof Bi)return e._internalPath;if("string"==typeof e)return mo(t,e);throw new S(_.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function mo(t,e){try{return function(t){if(t.search(zi)>=0)throw new S(_.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Bi.bind.apply(Bi,o.__spreadArrays([void 0],t.split("."))))}catch(e){throw new S(_.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e)._internalPath}catch(r){var n=yo(r);throw new S(_.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}}function yo(t){return t instanceof Error?t.message:t.toString()}var bo=On.COLLECTION_DISABLED,vo=function(){function t(t){if(void 0===t.host){if(void 0!==t.ssl)throw new S(_.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else j("settings","non-empty string","host",t.host),this.host=t.host,L("settings","boolean","ssl",t.ssl),this.ssl=E(t.ssl,!0);if(W("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),L("settings","object","credentials",t.credentials),this.credentials=t.credentials,L("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),!0===t.timestampsInSnapshots?g("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===t.timestampsInSnapshots&&g("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=E(t.timestampsInSnapshots,!0),L("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=On.DEFAULT_CACHE_SIZE_BYTES;else{if(t.cacheSizeBytes!==bo&&t.cacheSizeBytes<On.MINIMUM_CACHE_SIZE_BYTES)throw new S(_.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+On.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=t.cacheSizeBytes}L("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=void 0!==t.experimentalForceLongPolling&&t.experimentalForceLongPolling}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling},t}(),wo=function(){function t(e){var n=this;if(this._firebaseApp=null,this._queue=new gt,this.INTERNAL={delete:function(){return o.__awaiter(n,void 0,void 0,function(){return o.__generator(this,function(t){switch(t.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.terminate()];case 1:return t.sent(),[2]}})})}},"object"==typeof e.options){var r=e;this._firebaseApp=r,this._databaseId=t.databaseIdFromApp(r),this._persistenceKey=r.name,this._credentials=new Ki(r)}else{var i=e;if(!i.projectId)throw new S(_.INVALID_ARGUMENT,"Must provide projectId");this._databaseId=new it(i.projectId,i.database),this._persistenceKey="[DEFAULT]",this._credentials=new Hi}this._settings=new vo({}),this._dataConverter=this.createDataConverter(this._databaseId)}return t.prototype.settings=function(t){if(A("Firestore.settings",arguments,1),P("Firestore.settings","object",1,t),I(t,"persistence"))throw new S(_.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var e=new vo(t);if(this._firestoreClient&&!this._settings.isEqual(e))throw new S(_.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this._settings=e,void 0!==e.credentials&&(this._credentials=Gi(e.credentials))},t.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},t.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},t.prototype.enablePersistence=function(t){if(this._firestoreClient)throw new S(_.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var e=!1;return t&&(void 0!==t.experimentalTabSynchronization&&g("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),e=E(void 0!==t.synchronizeTabs?t.synchronizeTabs:t.experimentalTabSynchronization,!1)),this.configureClient(new Fi(this._settings.cacheSizeBytes,e))},t.prototype.clearPersistence=function(){var t=this,e=Fn.buildStoragePrefix(this.makeDatabaseInfo()),n=new dt;return this._queue.enqueueAndForgetEvenAfterShutdown(function(){return o.__awaiter(t,void 0,void 0,function(){var t;return o.__generator(this,function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),void 0!==this._firestoreClient&&!this._firestoreClient.clientTerminated)throw new S(_.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,Fn.clearPersistence(e)];case 1:return r.sent(),n.resolve(),[3,3];case 2:return t=r.sent(),n.reject(t),[3,3];case 3:return[2]}})})}),n.promise},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"_isTerminated",{get:function(){return this.ensureClientConfigured(),this._firestoreClient.clientTerminated},enumerable:!0,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.ensureClientConfigured(),this._firestoreClient.waitForPendingWrites()},t.prototype.onSnapshotsInSync=function(t){return this.ensureClientConfigured(),Xi(t)?this.onSnapshotsInSyncInternal(t):(P("Firestore.onSnapshotsInSync","function",1,t),this.onSnapshotsInSyncInternal({next:t}))},t.prototype.onSnapshotsInSyncInternal=function(t){var e=this,n=new qi({next:function(){t.next&&t.next()},error:function(t){throw y("Uncaught Error in onSnapshotsInSync")}});return this._firestoreClient.addSnapshotsInSyncListener(n),function(){n.mute(),e._firestoreClient.removeSnapshotsInSyncListener(n)}},t.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new Ui),this._firestoreClient},t.prototype.makeDatabaseInfo=function(){return new nt(this._databaseId,this._persistenceKey,this._settings.host,this._settings.ssl,this._settings.forceLongPolling)},t.prototype.configureClient=function(t){b(!!this._settings.host,"FirestoreSettings.host is not set"),b(!this._firestoreClient,"configureClient() called multiple times");var e=this.makeDatabaseInfo();return this._firestoreClient=new Vi(v.getPlatform(),e,this._credentials,this._queue),this._firestoreClient.start(t)},t.prototype.createDataConverter=function(t){return new ho(function(e){if(e instanceof Co){var n=t,r=e.firestore._databaseId;if(!r.isEqual(n))throw new S(_.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new lo(t,e._key)}return e})},t.databaseIdFromApp=function(t){var e=t.options;if(!I(e,"projectId"))throw new S(_.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=e.projectId;if(!n||"string"!=typeof n)throw new S(_.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new it(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this._firebaseApp)throw new S(_.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._firebaseApp},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){return A("Firestore.collection",arguments,1),P("Firestore.collection","non-empty string",1,t),this.ensureClientConfigured(),new xo(ct.fromString(t),this)},t.prototype.doc=function(t){return A("Firestore.doc",arguments,1),P("Firestore.doc","non-empty string",1,t),this.ensureClientConfigured(),Co.forPath(ct.fromString(t),this)},t.prototype.collectionGroup=function(t){if(A("Firestore.collectionGroup",arguments,1),P("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new S(_.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new ko(new Br(ct.EMPTY_PATH,t),this)},t.prototype.runTransaction=function(t){var e=this;return A("Firestore.runTransaction",arguments,1),P("Firestore.runTransaction","function",1,t),this.ensureClientConfigured().transaction(function(n){return t(new _o(e,n))})},t.prototype.batch=function(){return this.ensureClientConfigured(),new So(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(d()){case h.DEBUG:return"debug";case h.ERROR:return"error";case h.SILENT:return"silent";default:return y("Unknown log level: "+d())}},enumerable:!0,configurable:!0}),t.setLogLevel=function(t){switch(A("Firestore.setLogLevel",arguments,1),P("Firestore.setLogLevel","non-empty string",1,t),t){case"debug":f(h.DEBUG);break;case"error":f(h.ERROR);break;case"silent":f(h.SILENT);break;default:throw new S(_.INVALID_ARGUMENT,"Invalid log level: "+t)}},t.prototype._areTimestampsInSnapshotsEnabled=function(){return this._settings.timestampsInSnapshots},t}(),_o=function(){function t(t,e){this._firestore=t,this._transaction=e}return t.prototype.get=function(t){var e=this;A("Transaction.get",arguments,1);var n=Do("Transaction.get",t,this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return y("Mismatch in docs returned from document lookup.");var r=t[0];if(r instanceof Be)return new Eo(e._firestore,n._key,null,!1,!1);if(r instanceof qe)return new Eo(e._firestore,n._key,r,!1,!1);throw y("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)})},t.prototype.set=function(t,e,n){M("Transaction.set",arguments,2,3);var r=Do("Transaction.set",t,this._firestore),i=(n=Ao("Transaction.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("Transaction.set",e,n.mergeFields):this._firestore._dataConverter.parseSetData("Transaction.set",e);return this._transaction.set(r._key,i),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return"string"==typeof e||e instanceof Bi?(N("Transaction.update",arguments,3),r=Do("Transaction.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",e,n,o)):(A("Transaction.update",arguments,2),r=Do("Transaction.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateData("Transaction.update",e)),this._transaction.update(r._key,i),this},t.prototype.delete=function(t){A("Transaction.delete",arguments,1);var e=Do("Transaction.delete",t,this._firestore);return this._transaction.delete(e._key),this},t}(),So=function(){function t(t){this._firestore=t,this._mutations=[],this._committed=!1}return t.prototype.set=function(t,e,n){M("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=Do("WriteBatch.set",t,this._firestore),i=(n=Ao("WriteBatch.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("WriteBatch.set",e,n.mergeFields):this._firestore._dataConverter.parseSetData("WriteBatch.set",e);return this._mutations=this._mutations.concat(i.toMutations(r._key,me.NONE)),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.verifyNotCommitted(),"string"==typeof e||e instanceof Bi?(N("WriteBatch.update",arguments,3),r=Do("WriteBatch.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",e,n,o)):(A("WriteBatch.update",arguments,2),r=Do("WriteBatch.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateData("WriteBatch.update",e)),this._mutations=this._mutations.concat(i.toMutations(r._key,me.exists(!0))),this},t.prototype.delete=function(t){A("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var e=Do("WriteBatch.delete",t,this._firestore);return this._mutations=this._mutations.concat(new _e(e._key,me.NONE)),this},t.prototype.commit=function(){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]})})},t.prototype.verifyNotCommitted=function(){if(this._committed)throw new S(_.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),Co=function(){function t(t,e){this._key=t,this.firestore=e,this._firestoreClient=this.firestore.ensureClientConfigured()}return t.forPath=function(e,n){if(e.length%2!=0)throw new S(_.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(new ht(e),n)},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new xo(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){if(A("DocumentReference.collection",arguments,1),P("DocumentReference.collection","non-empty string",1,t),!t)throw new S(_.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=ct.fromString(t);return new xo(this._key.path.child(e),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw H("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this._key.isEqual(e._key)},t.prototype.set=function(t,e){M("DocumentReference.set",arguments,1,2);var n=(e=Ao("DocumentReference.set",e)).merge||e.mergeFields?this.firestore._dataConverter.parseMergeData("DocumentReference.set",t,e.mergeFields):this.firestore._dataConverter.parseSetData("DocumentReference.set",t);return this._firestoreClient.write(n.toMutations(this._key,me.NONE))},t.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof t||t instanceof Bi?(N("DocumentReference.update",arguments,2),n=this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",t,e,r)):(A("DocumentReference.update",arguments,1),n=this.firestore._dataConverter.parseUpdateData("DocumentReference.update",t)),this._firestoreClient.write(n.toMutations(this._key,me.exists(!0)))},t.prototype.delete=function(){return A("DocumentReference.delete",arguments,0),this._firestoreClient.write([new _e(this._key,me.NONE)])},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];M("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||Xi(t[i])||(W("DocumentReference.onSnapshot",r=t[i],["includeMetadataChanges"]),L("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return Xi(t[i])?n=t[i]:(P("DocumentReference.onSnapshot","function",i,t[i]),R("DocumentReference.onSnapshot","function",i+1,t[i+1]),R("DocumentReference.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(o,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new qi({next:function(t){if(e.next){b(t.docs.size<=1,"Too many documents returned on a document query");var r=t.docs.get(n._key);e.next(new Eo(n.firestore,n._key,r,t.fromCache,t.hasPendingWrites))}},error:r}),o=this._firestoreClient.listen(Br.atPath(this._key.path),i,t);return function(){i.mute(),n._firestoreClient.unlisten(o)}},t.prototype.get=function(t){var e=this;return M("DocumentReference.get",arguments,0,1),Mo("DocumentReference.get",t),new Promise(function(n,r){t&&"cache"===t.source?e.firestore.ensureClientConfigured().getDocumentFromLocalCache(e._key).then(function(t){n(new Eo(e.firestore,e._key,t,!0,t instanceof qe&&t.hasLocalMutations))},r):e.getViaSnapshotListener(n,r,t)})},t.prototype.getViaSnapshotListener=function(t,e,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?e(new S(_.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?e(new S(_.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):t(i)},error:e})},t}(),Io=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Eo=function(){function t(t,e,n,r,i){this._firestore=t,this._key=e,this._document=n,this._fromCache=r,this._hasPendingWrites=i}return t.prototype.data=function(t){return M("DocumentSnapshot.data",arguments,0,1),t=No("DocumentSnapshot.data",t),this._document?this.convertObject(this._document.data(),Ie.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled())):void 0},t.prototype.get=function(t,e){if(M("DocumentSnapshot.get",arguments,1,2),e=No("DocumentSnapshot.get",e),this._document){var n=this._document.data().field(go("DocumentSnapshot.get",t));if(null!==n)return this.convertValue(n,Ie.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Co(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new Io(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw H("isEqual","DocumentSnapshot",1,e);return this._firestore===e._firestore&&this._fromCache===e._fromCache&&this._key.isEqual(e._key)&&(null===this._document?null===e._document:this._document.isEqual(e._document))},t.prototype.convertObject=function(t,e){var n=this,r={};return t.forEach(function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertValue=function(t,e){if(t instanceof Fe)return this.convertObject(t,e);if(t instanceof Ue)return this.convertArray(t,e);if(t instanceof je){var n=t.value(e),r=this._firestore.ensureClientConfigured().databaseId();return t.databaseId.isEqual(r)||g("Document "+this._key.path+" contains a document reference within a different database ("+t.databaseId.projectId+"/"+t.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new Co(n,this._firestore)}return t.value(e)},t.prototype.convertArray=function(t,e){var n=this;return t.internalValue.map(function(t){return n.convertValue(t,e)})},t}(),To=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.data=function(e){var n=t.prototype.data.call(this,e);return b("object"==typeof n,"Document in a QueryDocumentSnapshot should exist"),n},e}(Eo),ko=function(){function t(t,e){this._query=t,this.firestore=e}return t.prototype.where=function(e,n,r){if(A("Query.where",arguments,3),z("Query.where",3,r),"in"!==n&&"array-contains-any"!==n){var i=["<","<=","==",">=",">","array-contains"];U("Query.where",i,2,n)}var o,s=go("Query.where",e),a=Wr.fromString(n);if(s.isKeyField()){if(a===Wr.ARRAY_CONTAINS||a===Wr.ARRAY_CONTAINS_ANY)throw new S(_.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+a.toString()+"' queries on FieldPath.documentId().");if(a===Wr.IN){this.validateDisjunctiveFilterElements(r,a);for(var c=[],u=0,l=r;u<l.length;u++){var h=l[u];c.push(this.parseDocumentIdValue(h))}o=new Ue(c)}else o=this.parseDocumentIdValue(r)}else a!==Wr.IN&&a!==Wr.ARRAY_CONTAINS_ANY||this.validateDisjunctiveFilterElements(r,a),o=this.firestore._dataConverter.parseQueryValue("Query.where",r);var d=Hr.create(s,a,o);return this.validateNewFilter(d),new t(this._query.addFilter(d),this.firestore)},t.prototype.orderBy=function(e,n){var r;if(M("Query.orderBy",arguments,1,2),R("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r=Yr.ASCENDING;else{if("desc"!==n)throw new S(_.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=Yr.DESCENDING}if(null!==this._query.startAt)throw new S(_.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new S(_.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=go("Query.orderBy",e),o=new Jr(i,r);return this.validateNewOrderBy(o),new t(this._query.addOrderBy(o),this.firestore)},t.prototype.limit=function(e){if(A("Query.limit",arguments,1),P("Query.limit","number",1,e),e<=0)throw new S(_.INVALID_ARGUMENT,"Invalid Query. Query limit ("+e+") is invalid. Limit must be positive.");return new t(this._query.withLimit(e),this.firestore)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];N("Query.startAt",arguments,1);var i=this.boundFromDocOrFields("Query.startAt",e,n,!0);return new t(this._query.withStartAt(i),this.firestore)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];N("Query.startAfter",arguments,1);var i=this.boundFromDocOrFields("Query.startAfter",e,n,!1);return new t(this._query.withStartAt(i),this.firestore)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];N("Query.endBefore",arguments,1);var i=this.boundFromDocOrFields("Query.endBefore",e,n,!0);return new t(this._query.withEndAt(i),this.firestore)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];N("Query.endAt",arguments,1);var i=this.boundFromDocOrFields("Query.endAt",e,n,!1);return new t(this._query.withEndAt(i),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw H("isEqual","Query",1,e);return this.firestore===e.firestore&&this._query.isEqual(e._query)},t.prototype.boundFromDocOrFields=function(t,e,n,r){if(z(t,1,e),e instanceof Eo){if(n.length>0)throw new S(_.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");var i=e;if(!i.exists)throw new S(_.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");return this.boundFromDocument(t,i._document,r)}var o=[e].concat(n);return this.boundFromFields(t,o,r)},t.prototype.boundFromDocument=function(t,e,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var s=o[i];if(s.field.isKeyField())r.push(new je(this.firestore._databaseId,e.key));else{var a=e.field(s.field);if(a instanceof Pe)throw new S(_.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===a){var c=s.field.canonicalString();throw new S(_.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+c+"' (used as the orderBy) does not exist.")}r.push(a)}}return new Zr(r,n)},t.prototype.boundFromFields=function(t,e,n){var r=this._query.explicitOrderBy;if(e.length>r.length)throw new S(_.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var s=e[o];if(r[o].field.isKeyField()){if("string"!=typeof s)throw new S(_.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof s);if(!this._query.isCollectionGroupQuery()&&-1!==s.indexOf("/"))throw new S(_.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+s+"' contains a slash.");var a=this._query.path.child(ct.fromString(s));if(!ht.isDocumentKey(a))throw new S(_.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+a+"' is not because it contains an odd number of segments.");var c=new ht(a);i.push(new je(this.firestore._databaseId,c))}else{var u=this.firestore._dataConverter.parseQueryValue(t,s);i.push(u)}}return new Zr(i,n)},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];M("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof t[i]||Xi(t[i])||(W("Query.onSnapshot",r=t[i],["includeMetadataChanges"]),L("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),Xi(t[i])?n=t[i]:(P("Query.onSnapshot","function",i,t[i]),R("Query.onSnapshot","function",i+1,t[i+1]),R("Query.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(r,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new qi({next:function(t){e.next&&e.next(new Oo(n.firestore,n._query,t))},error:r}),o=this.firestore.ensureClientConfigured(),s=o.listen(this._query,i,t);return function(){i.mute(),o.unlisten(s)}},t.prototype.get=function(t){var e=this;return M("Query.get",arguments,0,1),Mo("Query.get",t),new Promise(function(n,r){t&&"cache"===t.source?e.firestore.ensureClientConfigured().getDocumentsFromLocalCache(e._query).then(function(t){n(new Oo(e.firestore,e._query,t))},r):e.getViaSnapshotListener(n,r,t)})},t.prototype.getViaSnapshotListener=function(t,e,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?e(new S(_.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):t(i)},error:e})},t.prototype.parseDocumentIdValue=function(t){if("string"==typeof t){if(""===t)throw new S(_.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==t.indexOf("/"))throw new S(_.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var e=this._query.path.child(ct.fromString(t));if(!ht.isDocumentKey(e))throw new S(_.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return new je(this.firestore._databaseId,new ht(e))}if(t instanceof Co)return new je(this.firestore._databaseId,t._key);throw new S(_.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+B(t)+".")},t.prototype.validateDisjunctiveFilterElements=function(t,e){if(!Array.isArray(t)||0===t.length)throw new S(_.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new S(_.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(t.indexOf(null)>=0)throw new S(_.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(t.filter(function(t){return Number.isNaN(t)}).length>0)throw new S(_.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},t.prototype.validateNewFilter=function(t){if(t instanceof Hr){var e=[Wr.ARRAY_CONTAINS,Wr.ARRAY_CONTAINS_ANY],n=[Wr.IN,Wr.ARRAY_CONTAINS_ANY],r=e.indexOf(t.op)>=0,i=n.indexOf(t.op)>=0;if(t.isInequality()){var o=this._query.getInequalityFilterField();if(null!==o&&!o.isEqual(t.field))throw new S(_.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+t.field.toString()+"'");var s=this._query.getFirstOrderByField();null!==s&&this.validateOrderByAndInequalityMatch(t.field,s)}else if(i||r){var a=null;if(i&&(a=this._query.findFilterOperator(n)),null===a&&r&&(a=this._query.findFilterOperator(e)),null!=a)throw new S(_.INVALID_ARGUMENT,a===t.op?"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter.":"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+a.toString()+"' filters.")}}},t.prototype.validateNewOrderBy=function(t){if(null===this._query.getFirstOrderByField()){var e=this._query.getInequalityFilterField();null!==e&&this.validateOrderByAndInequalityMatch(e,t.field)}},t.prototype.validateOrderByAndInequalityMatch=function(t,e){if(!e.isEqual(t))throw new S(_.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},t}(),Oo=function(){function t(t,e,n){this._firestore=t,this._originalQuery=e,this._snapshot=n,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new Io(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;M("QuerySnapshot.forEach",arguments,1,2),P("QuerySnapshot.forEach","function",1,t),this._snapshot.docs.forEach(function(r){t.call(e,n.convertToDocumentImpl(r))})},Object.defineProperty(t.prototype,"query",{get:function(){return new ko(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),t.prototype.docChanges=function(t){t&&(W("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),L("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this._snapshot.excludesMetadataChanges)throw new S(_.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e,n){if(n.oldDocs.isEmpty()){var r,i=0;return n.docChanges.map(function(e){var o=new To(t,e.doc.key,e.doc,n.fromCache,n.mutatedKeys.has(e.doc.key));return b(e.type===Er.Added,"Invalid event type for first snapshot"),b(!r||n.query.docComparator(r,e.doc)<0,"Got added events in wrong order"),r=e.doc,{type:"added",doc:o,oldIndex:-1,newIndex:i++}})}var o=n.oldDocs;return n.docChanges.filter(function(t){return e||t.type!==Er.Metadata}).map(function(e){var r=new To(t,e.doc.key,e.doc,n.fromCache,n.mutatedKeys.has(e.doc.key)),i=-1,s=-1;return e.type!==Er.Added&&(b((i=o.indexOf(e.doc.key))>=0,"Index for document not found"),o=o.delete(e.doc.key)),e.type!==Er.Removed&&(s=(o=o.add(e.doc)).indexOf(e.doc.key)),{type:Po(e.type),doc:r,oldIndex:i,newIndex:s}})}(this._firestore,e,this._snapshot),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t.prototype.isEqual=function(e){if(!(e instanceof t))throw H("isEqual","QuerySnapshot",1,e);return this._firestore===e._firestore&&this._originalQuery.isEqual(e._originalQuery)&&this._snapshot.isEqual(e._snapshot)},t.prototype.convertToDocumentImpl=function(t){return new To(this._firestore,t.key,t,this.metadata.fromCache,this._snapshot.mutatedKeys.has(t.key))},t}();o.__spreadArrays(["length","forEach","map"],"undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach(function(t){try{Object.defineProperty(Oo.prototype.docChanges,t,{get:function(){return function(){throw new S(_.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(e){}});var xo=function(t){function e(e,n){var r=t.call(this,Br.atPath(e),n)||this;if(e.length%2!=1)throw new S(_.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.canonicalString()+" has "+e.length);return r}return o.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._query.path.popLast();return t.isEmpty()?null:new Co(new ht(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.doc=function(t){if(M("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=Q.newId()),P("CollectionReference.doc","non-empty string",1,t),""===t)throw new S(_.INVALID_ARGUMENT,"Document path must be a non-empty string");var e=ct.fromString(t);return Co.forPath(this._query.path.child(e),this.firestore)},e.prototype.add=function(t){A("CollectionReference.add",arguments,1),P("CollectionReference.add","object",1,t);var e=this.doc();return e.set(t).then(function(){return e})},e}(ko);function Ao(t,e){if(void 0===e)return{merge:!1};if(W(t,e,["merge","mergeFields"]),L(t,"boolean","merge",e.merge),"mergeFields","a string or a FieldPath",void 0!==(n=e.mergeFields)&&function(t,e,n,r,i){if(!(r instanceof Array))throw new S(_.INVALID_ARGUMENT,"Function "+t+"() requires its "+"mergeFields option to be an array, but it was: "+B(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new S(_.INVALID_ARGUMENT,"Function "+t+"() requires all "+"mergeFields elements to be a string or a FieldPath, but the value at index "+o+" was: "+B(r[o]))}(t,0,0,n,function(t){return"string"==typeof t||t instanceof Bi}),void 0!==e.mergeFields&&void 0!==e.merge)throw new S(_.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');var n;return e}function No(t,e){return void 0===e?{}:(W(t,e,["serverTimestamps"]),F(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function Mo(t,e){R(t,"object",1,e),e&&(W(t,e,["source"]),F(t,0,"source",e.source,["default","server","cache"]))}function Do(t,e,n){if(e instanceof Co){if(e.firestore!==n)throw new S(_.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw H(t,"DocumentReference",1,e)}function Po(t){switch(t){case Er.Added:return"added";case Er.Modified:case Er.Metadata:return"modified";case Er.Removed:return"removed";default:return y("Unknown change type: "+t)}}var Ro=C(wo,"Use firebase.firestore() instead."),jo=C(_o,"Use firebase.firestore().runTransaction() instead."),Lo=C(So,"Use firebase.firestore().batch() instead."),Fo=C(Co,"Use firebase.firestore().doc() instead."),Uo=C(Eo),Vo=C(To),qo=C(ko),Bo=C(Oo),zo=C(xo,"Use firebase.firestore().collection() instead."),Wo={Firestore:Ro,GeoPoint:qr,Timestamp:_t,Blob:et,Transaction:jo,WriteBatch:Lo,DocumentReference:Fo,DocumentSnapshot:Uo,Query:qo,QueryDocumentSnapshot:Vo,QuerySnapshot:Bo,CollectionReference:zo,FieldPath:Bi,FieldValue:ro,setLogLevel:wo.setLogLevel,CACHE_SIZE_UNLIMITED:bo},Ho=function(){function t(){}return t.prototype.addCallback=function(t){},t.prototype.shutdown=function(){},t}(),Ko="ConnectivityMonitor",$o=function(){function t(){var t=this;this.networkAvailableListener=function(){return t.onNetworkAvailable()},this.networkUnavailableListener=function(){return t.onNetworkUnavailable()},this.callbacks=[],this.configureNetworkMonitoring()}return t.prototype.addCallback=function(t){this.callbacks.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.networkAvailableListener),window.removeEventListener("offline",this.networkUnavailableListener)},t.prototype.configureNetworkMonitoring=function(){window.addEventListener("online",this.networkAvailableListener),window.addEventListener("offline",this.networkUnavailableListener)},t.prototype.onNetworkAvailable=function(){p(Ko,"Network connectivity changed: AVAILABLE");for(var t=0,e=this.callbacks;t<e.length;t++)(0,e[t])(0)},t.prototype.onNetworkUnavailable=function(){p(Ko,"Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.callbacks;t<e.length;t++)(0,e[t])(1)},t.isAvailable=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Qo=function(){function t(t){this.sendFn=t.sendFn,this.closeFn=t.closeFn}return t.prototype.onOpen=function(t){b(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=t},t.prototype.onClose=function(t){b(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=t},t.prototype.onMessage=function(t){b(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=t},t.prototype.close=function(){this.closeFn()},t.prototype.send=function(t){this.sendFn(t)},t.prototype.callOnOpen=function(){b(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},t.prototype.callOnClose=function(t){b(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(t)},t.prototype.callOnMessage=function(t){b(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(t)},t}(),Go="Connection",Xo={BatchGetDocuments:"batchGet",Commit:"commit"},Yo="gl-js/ fire/"+u,Zo=function(){function t(t){this.databaseId=t.databaseId,this.baseUrl=(t.ssl?"https":"http")+"://"+t.host,this.forceLongPolling=t.forceLongPolling}return t.prototype.modifyHeadersForRequest=function(t,e){if(e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n]);t["X-Goog-Api-Client"]=Yo},t.prototype.invokeRPC=function(t,e,n){var r=this,i=this.makeUrl(t);return new Promise(function(s,a){var u=new c.XhrIo;u.listenOnce(c.EventType.COMPLETE,function(){try{switch(u.getLastErrorCode()){case c.ErrorCode.NO_ERROR:var e=u.getResponseJson();p(Go,"XHR received:",JSON.stringify(e)),s(e);break;case c.ErrorCode.TIMEOUT:p(Go,'RPC "'+t+'" timed out'),a(new S(_.DEADLINE_EXCEEDED,"Request time out"));break;case c.ErrorCode.HTTP_ERROR:var n=u.getStatus();if(p(Go,'RPC "'+t+'" failed with status:',n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson().error;if(r&&r.status&&r.message){var i=(o=r.status.toLowerCase().replace("_","-"),Object.values(_).indexOf(o)>=0?o:_.UNKNOWN);a(new S(i,r.message))}else a(new S(_.UNKNOWN,"Server responded with status "+u.getStatus()))}else p(Go,'RPC "'+t+'" failed'),a(new S(_.UNAVAILABLE,"Connection failed."));break;default:y('RPC "'+t+'" failed with unanticipated webchannel error '+u.getLastErrorCode()+": "+u.getLastError()+", giving up.")}}finally{p(Go,'RPC "'+t+'" completed.')}var o});var l=o.__assign({},e);delete l.database;var h=JSON.stringify(l);p(Go,"XHR sending: ",i+" "+h);var d={"Content-Type":"text/plain"};r.modifyHeadersForRequest(d,n),u.send(i,"POST",h,d,15)})},t.prototype.invokeStreamingRPC=function(t,e,n){return this.invokeRPC(t,e,n)},t.prototype.openStream=function(t,e){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=c.createWebChannelTransport(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(i.initMessageHeaders,e),a.isReactNative()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");p(Go,"Creating WebChannel: "+o+" "+i);var s=r.createWebChannel(o,i),u=!1,l=!1,h=new Qo({sendFn:function(t){l?p(Go,"Not sending because WebChannel is closed:",t):(u||(p(Go,"Opening WebChannel transport."),s.open(),u=!0),p(Go,"WebChannel sending:",t),s.send(t))},closeFn:function(){return s.close()}}),d=function(t,e){s.listen(t,function(t){try{e(t)}catch(n){setTimeout(function(){throw n},0)}})};return d(c.WebChannel.EventType.OPEN,function(){l||p(Go,"WebChannel transport opened.")}),d(c.WebChannel.EventType.CLOSE,function(){l||(l=!0,p(Go,"WebChannel transport closed"),h.callOnClose())}),d(c.WebChannel.EventType.ERROR,function(t){l||(l=!0,p(Go,"WebChannel transport errored:",t),h.callOnClose(new S(_.UNAVAILABLE,"The operation could not be completed")))}),d(c.WebChannel.EventType.MESSAGE,function(t){if(!l){var e=t.data[0];b(!!e,"Got a webchannel message without data.");var n=e.error||e[0]&&e[0].error;if(n){p(Go,"WebChannel received error:",n);var r=n.status,i=function(t){var e=wr[t];if(void 0!==e)return Sr(e)}(r),o=n.message;void 0===i&&(i=_.INTERNAL,o="Unknown error status: "+r+" with message "+n.message),l=!0,h.callOnClose(new S(i,o)),s.close()}else p(Go,"WebChannel received:",e),h.callOnMessage(e)}}),setTimeout(function(){h.callOnOpen()},0),h},t.prototype.makeUrl=function(t){var e=Xo[t];b(void 0!==e,"Unknown REST mapping for: "+t);var n=[this.baseUrl,"/","v1"];return n.push("/projects/"),n.push(this.databaseId.projectId),n.push("/databases/"),n.push(this.databaseId.database),n.push("/documents"),n.push(":"),n.push(e),n.join("")},t}();function Jo(t){!function(t){t.INTERNAL.registerService("firestore",function(t){return new wo(t)},function(t){b(t&&"object"==typeof t,"shallowCopy() expects object parameter.");var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}(Wo))}(t)}v.setPlatform(new(function(){function t(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}return Object.defineProperty(t.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),t.prototype.loadConnection=function(t){return Promise.resolve(new Zo(t))},t.prototype.newConnectivityMonitor=function(){return $o.isAvailable()?new $o:new Ho},t.prototype.newSerializer=function(t){return new gi(t,{useProto3Json:!0})},t.prototype.formatJSON=function(t){return JSON.stringify(t)},t.prototype.atob=function(t){return atob(t)},t.prototype.btoa=function(t){return btoa(t)},t}())),Jo(i),e.registerFirestore=Jo},"7dP1":function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("JX91"),i=n("vkgz"),o=n("lJxs"),s=n("Wcq6"),a=n("fXoL"),c=n("aECQ"),u=n("S/Aq");let l=(()=>{class t{constructor(t,e){this.afAuth=t,this.afs=e,this.authState$=this.afAuth.authState,this.user$=this.authState$.pipe(Object(r.a)(JSON.parse(localStorage.getItem("profile"))),Object(i.a)(t=>{this.user=t})),this.authenticated$=this.user$.pipe(Object(o.a)(Boolean))}signInWithGithub(){return this.signIn(new s.auth.GithubAuthProvider)}signOut(){this.afAuth.auth.signOut(),localStorage.removeItem("profile")}signIn(t){return this.afAuth.auth.signInWithPopup(t).then(t=>this.updateUserData(t.user)).catch(t=>console.log("ERROR @ AuthService#signIn() :",t))}updateUserData({uid:t,displayName:e,photoURL:n,email:r,phoneNumber:i,providerId:o}){const s=this.afs.doc("users/"+t),a=Object.assign(Object.assign(Object.assign(Object.assign({uid:t,displayName:e||r},n&&{photoURL:n}),r&&{email:r}),o&&{providerId:o}),i&&{phoneNumber:i});return localStorage.setItem("profile",JSON.stringify(a)),s.set(a)}}return t.\u0275fac=function(e){return new(e||t)(a.Qb(c.a),a.Qb(u.a))},t.\u0275prov=a.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),c=n("NJ4a");class u extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof u?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new u(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends u{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(c.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(c.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(c.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(c.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},"9uVP":function(t,e,n){"use strict";n.d(e,"g",function(){return i}),n.d(e,"e",function(){return o}),n.d(e,"d",function(){return s}),n.d(e,"f",function(){return a}),n.d(e,"b",function(){return c}),n.d(e,"c",function(){return l}),n.d(e,"a",function(){return d});var r=n("mrSG");function i(t,e){const n=window.location.href,r=new RegExp("([?&])"+t+"=.*?(&|$)","i"),i=-1!==n.indexOf("?")?"&":"?";return(n.match(r)?n.replace(r,"$1"+t+"="+e+"$2"):n+i+t+"="+e).replace(window.location.origin,"")}function o(t){const e=window.location.href;let n=e.split("?"),r=e;if(n.length>=2){let e=encodeURIComponent(t)+"=",i=n[1].split(/[&;]/g);for(let t=i.length;t-- >0;)-1!==i[t].lastIndexOf(e,0)&&i.splice(t,1);r=n[0]+(i.length>0?"?"+i.join("&"):"")}return r.replace(window.location.origin,"")}function s(t,e){e||(e=window.location.href),t=t.replace(/[\[\]]/g,"\\$&");const n=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}function a(t){t.toDate&&(t=t.toDate()),"object"!=typeof t&&(t=new Date(t));const e=Math.floor((new Date-t)/1e3);let n,r=Math.floor(e/31536e3);return r>=1?n="year":(r=Math.floor(e/2592e3),r>=1?n="month":(r=Math.floor(e/86400),r>=1?n="day":(r=Math.floor(e/3600),r>=1?n="hour":(r=Math.floor(e/60),r>=1?n="minute":(r=e,n="second"))))),(r>1||0===r)&&(n+="s"),r<0&&(r=0),r+" "+n+" ago"}function c(t=300){return(e,n,r)=>{let i=null;const o=r.value;function s(...e){clearTimeout(i),i=setTimeout(()=>o.apply(this,e),t)}return s.cancel=()=>{clearTimeout(i)},r.value=s,r}}function u(t){return("0"+t.toString(16)).slice(-2)}function l(){return Object(r.a)(this,void 0,void 0,function*(){const t=new Uint8Array(10);return window.crypto.getRandomValues(t),Array.from(t,u).join("")})}n("NXyV"),n("vkgz"),n("nYR2");let h=1;class d{constructor(t){this.instance=t,this.messageHandlers={},this.onMessage=({data:t})=>{const[e,n]=t.type?[t.type,t]:t;e.toString().startsWith("worker_")&&this.messageHandlers[t[1].type](t[1].payload).then(e=>{this.instance.postMessage([t[0],e])});const r=this.messageHandlers[e];r&&(r(n),Array.isArray(t)&&delete this.messageHandlers[e])},t.addEventListener("message",this.onMessage)}on(t,e){return this.messageHandlers[t]=e,this}postMessage(t){const e=h++,n=[e,t];return new Promise(t=>{this.messageHandlers[e]=t,this.instance.postMessage(n)})}}},Atfz:function(t,e,n){"use strict";n.r(e),n.d(e,"plugIn",function(){return l});const r={format:{tabSize:4,insertSpaces:!1,wrapLineLength:120,unformatted:'default": "a, abbr, acronym, b, bdo, big, br, button, cite, code, dfn, em, i, img, input, kbd, label, map, object, q, samp, select, small, span, strong, sub, sup, textarea, tt, var',contentUnformatted:"pre",indentInnerHtml:!1,preserveNewLines:!0,maxPreserveNewLines:null,indentHandlebars:!1,endWithNewline:!1,extraLiners:"head, body, /html",wrapAttributes:"auto"},suggest:{html5:!0,angular1:!0,ionic:!0}};let i,o;class s{constructor(){this.matched=!1,require(["vs/language/html/htmlWorker"],()=>{require(["vscode-html-languageservice"],t=>{i=t,this._languageService=i.getLanguageService(),require(["vscode-languageserver-types"],t=>{o=t})})})}get triggerCharacters(){return[".",":","<",'"',"=","/"]}provideCompletionItems(t,e,n,r){this.matched=!1;const i=/(template\s*:\s*`)([^`]*)`/g,o=t.getValue(),s=t.getOffsetAt(e);let l,h=null;for(;null!==(h=i.exec(o));)if(s>h.index+h[1].length&&s<h.index+h[0].length)return this.matched=!0,l=t.getPositionAt(h.index+h[1].length),this.doComplete("d"+Date.now(),h[2],a(h[2],s-h[1].length-h.index)).then(n=>{if(!n)return;const r=n.items.map(n=>{const r=t.getWordUntilPosition(e),i=new monaco.Range(e.lineNumber,r.startColumn,e.lineNumber,r.endColumn),o={label:n.label,insertText:n.insertText,sortText:n.sortText,filterText:n.filterText,documentation:n.documentation,detail:n.detail,range:i,kind:c(n.kind)};return n.textEdit&&(o.range=u(n.textEdit.range,l),o.insertText=n.textEdit.newText),o});return{incomplete:n.isIncomplete,suggestions:r}});return Promise.resolve({incomplete:!1,suggestions:[]})}doComplete(t,e,n){const i=this._getTextDocument(t,e),o=this._languageService.parseHTMLDocument(i);return Promise.resolve(this._languageService.doComplete(i,n,o,r&&r.suggest))}format(t){const e=this._getTextDocument("",t);return this._languageService.format(e,"",r.format)[0].newText}_getTextDocument(t,e){return o.TextDocument.create("","html","",e)}}function a(t,e){const n=t.substring(0,e),r=n.lastIndexOf("\n");return{line:n.split("\n").length-1,character:e-r-1}}function c(t){const e=monaco.languages.CompletionItemKind;switch(t){case o.CompletionItemKind.Text:return e.Text;case o.CompletionItemKind.Method:return e.Method;case o.CompletionItemKind.Function:return e.Function;case o.CompletionItemKind.Constructor:return e.Constructor;case o.CompletionItemKind.Field:return e.Field;case o.CompletionItemKind.Variable:return e.Variable;case o.CompletionItemKind.Class:return e.Class;case o.CompletionItemKind.Interface:return e.Interface;case o.CompletionItemKind.Module:return e.Module;case o.CompletionItemKind.Property:return e.Property;case o.CompletionItemKind.Unit:return e.Unit;case o.CompletionItemKind.Value:return e.Value;case o.CompletionItemKind.Enum:return e.Enum;case o.CompletionItemKind.Keyword:return e.Keyword;case o.CompletionItemKind.Snippet:return e.Snippet;case o.CompletionItemKind.Color:return e.Color;case o.CompletionItemKind.File:return e.File;case o.CompletionItemKind.Reference:return e.Reference}return e.Property}function u(t,e){if(t)return new monaco.Range(e.lineNumber+t.start.line,0===t.start.line?e.column+t.start.character:t.start.character+1,e.lineNumber+t.end.line,0===t.end.line?e.column+t.end.character:t.end.character+1)}function l(t,e){const n=new s;monaco.languages.registerCompletionItemProvider("typescript",n),monaco.editor.registerCommand("resolveImport",(n,r)=>{r.toFile=e.projectStore.state.files[e.openedFile],h(t,e,r)});const r=[{label:"ngc",kind:monaco.languages.CompletionItemKind.Snippet,insertText:["@Component({","\tselector: '$1',","\ttemplate: `$3`","})","export class $2Component {","\t$4","}"].join("\n"),insertTextRules:4,documentation:"Angular component"},{label:"ngd",kind:monaco.languages.CompletionItemKind.Snippet,insertText:["@Directive({","\tselector: '$1',","})","export class $2Directive {","\t$3","}"].join("\n"),insertTextRules:4,documentation:"Angular directive"}];monaco.languages.registerCompletionItemProvider("typescript",{provideCompletionItems:(t,i)=>{if(n.matched)return{suggestions:[]};const o=t.uri,s=t.getOffsetAt(i),a=e.editorWorker.worker.postMessage({type:"IS_IN_STRING",payload:{contents:t.getValue(),offset:s}}),c=monaco.languages.typescript.getTypeScriptWorker().then(t=>t("").then(t=>t.getCompletionsAtPosition(o.toString(),s)));return Promise.all([a,c]).then(([n,o])=>{if(n.isInString||o&&o.isMemberCompletion)return Promise.resolve({suggestions:[]});const s=t.getWordUntilPosition(i).word.toLowerCase();return{suggestions:Object.keys(e.monacoStore.exports).reduce((t,n)=>(n!==e.openedFile&&t.push(...e.monacoStore.exports[n].set.map(t=>({name:t,type:e.monacoStore.exports[n].type,fromFile:n}))),t),[]).filter(t=>t.name.toLowerCase().indexOf(s)>-1&&-1===e.monacoStore.imports[e.openedFile].indexOf(t.name)).map(t=>({label:t.name,kind:monaco.languages.CompletionItemKind.Reference,detail:`[Auto-Import] ${t.name} [${t.fromFile}]`,insertText:t.name,documentation:`[AI]  Import ${t.name} from ${t.fromFile}`,command:{title:"AI: Autocomplete",id:"resolveImport",arguments:[t]}})).concat(r)}})}}),function(t,e){const n=()=>{const n=t.getModel(),r=t.getPosition(),i=n.getWordAtPosition(r);if(!i)return{clause:null};const o=i.word.toLowerCase(),s=Object.keys(e.monacoStore.exports).reduce((t,n)=>(n!==e.openedFile&&t.push(...e.monacoStore.exports[n].set.map(t=>({name:t,type:e.monacoStore.exports[n].type,fromFile:n}))),t),[]);return{range:new monaco.Range(r.lineNumber,i.startColumn,r.lineNumber,i.endColumn),clause:s.find(t=>t.name.toLowerCase()===o&&-1===e.monacoStore.imports[e.openedFile].indexOf(t.name))}};let r=null;t.onKeyDown(e=>{if(e.altKey&&e.preventDefault(),!e.altKey||r)return;const i=n();i.clause&&(r=t.deltaDecorations([],[{range:i.range,options:{inlineClassName:"myInlineDecoration"}}]))}),t.onKeyUp(e=>{e.altKey&&r&&(t.deltaDecorations(r,[]),r=null)}),t.addCommand(monaco.KeyMod.Alt|monaco.KeyCode.Enter,()=>{const r=n().clause;r&&(r.toFile=e.projectStore.state.files[e.openedFile],h(t,e,r))})}(t,e)}function h(t,e,n){e.editorWorker.worker.postMessage({type:"ADD_IMPORT",payload:n}).then(e=>function(t,e){const n=t.getModel().getPositionAt(e.position),r=new monaco.Range(n.lineNumber,n.column,n.lineNumber,n.column);t.executeEdits("",[{identifier:{major:1,minor:1},range:r,text:e.toInsert,forceMoveMarkers:!0}])}(t,e))}},AytR:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r={production:!0,previewUrl:"https://ng-run-preview.firebaseapp.com/",hash:"75081b433cd5da06a5e5130d404e1c09",API_URL:"https://api.ng-run.com/v1/",socketUrl:"wss://api.ng-run.com"}},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),c=n("Lhse"),u=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(u.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[c.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[c.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},Czum:function(t,e,n){"use strict";n.d(e,"c",function(){return a}),n.d(e,"b",function(){return c}),n.d(e,"d",function(){return u}),n.d(e,"a",function(){return h});var r,i=n("fXoL"),o=n("Wcq6"),s=n.n(o);const a=new i.q("angularfire2.app.options"),c=new i.q("angularfire2.app.nameOrConfig");function u(t,e,n){const r="object"==typeof n&&n||{};return r.name=r.name||"string"==typeof n&&n||"[DEFAULT]",s.a.apps.filter(t=>t&&t.name===r.name)[0]||e.runOutsideAngular(()=>s.a.initializeApp(t,r))}const l={provide:class{},useFactory:u,deps:[a,i.z,[new i.A,c]]};let h=(()=>{let t=r=class{static initializeApp(t,e){return{ngModule:r,providers:[{provide:a,useValue:t},{provide:c,useValue:e}]}}};return t.\u0275mod=i.Gb({type:t}),t.\u0275inj=i.Fb({factory:function(e){return new(e||t)},providers:[l]}),t})()},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),c=n("2fFW");let u=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||c.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),c.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){c.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=c.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IzEk:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q"),i=n("4I5i"),o=n("EY2u");function s(t){return e=>0===t?Object(o.b)():e.lift(new a(t))}class a{constructor(t){if(this.total=t,this.total<0)throw new i.a}call(t,e){return e.subscribe(new c(t,this.total))}}class c extends r.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}},JX91:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("LRne"),i=n("0EUg");function o(...t){return Object(i.a)()(Object(r.a)(...t))}var s=n("z+Ro");function a(...t){const e=t[t.length-1];return Object(s.a)(e)?(t.pop(),n=>o(t,n,e)):e=>o(t,e)}},Kqap:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new o(t,e,n))}}class o{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new s(t,this.accumulator,this.seed,this.hasSeed))}}class s extends r.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},M0ag:function(t,e,n){"use strict";n.d(e,"c",function(){return a}),n.d(e,"b",function(){return c}),n.d(e,"a",function(){return u.a});var r=n("ofXK"),i=(n("+eVz"),n("0njA"),n("5roe"),n("Xv3O"),n("hVnv"),n("qrOX"),n("fqV1"),n("fXoL"));let o=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Cb({type:t,selectors:[["ng-run-notification"]],hostVars:2,hostBindings:function(t,e){2&t&&i.yb(e.type)},decls:1,vars:1,consts:[[3,"outerHTML"]],template:function(t,e){1&t&&i.Jb(0,"div",0),2&t&&i.dc("outerHTML",e.message,i.mc)},styles:[".notification-container{position:fixed;right:20px;bottom:20px;z-index:1}[_nghost-%COMP%]{transform:translateX(100%);opacity:0;display:block;margin-top:10px;padding:22px 16px;color:#333;border-radius:3px;border-left:3px solid;box-shadow:0 15px 30px 0 rgba(0,0,0,.11),0 5px 15px 0 rgba(0,0,0,.08);animation:show .4s forwards;background:#fff}.success[_nghost-%COMP%]{border-color:#539a42}.error[_nghost-%COMP%]{border-color:#e01600}.info[_nghost-%COMP%]{position:fixed;bottom:70px;left:50%;font-size:1.2rem;padding:6px 26px;margin-top:0;border:none;background:none;color:#fff;transform:translate(-50%,80%);animation:fade .4s forwards;box-shadow:none}@keyframes show{to{opacity:1;transform:translateX(0)}}@keyframes fade{to{opacity:1;transform:translate(-50%)}}"]}),t})();n("3c/+"),n("++hd"),n("0IqT");const s=[r.c];let a=(()=>{class t{}return t.\u0275mod=i.Gb({type:t}),t.\u0275inj=i.Fb({factory:function(e){return new(e||t)},imports:[[s],r.c]}),t})(),c=(()=>{class t{constructor(t,e){this.resolver=t,this.injector=e}notify(t,e=2e3){const n=this.resolver.resolveComponentFactory(o).create(this.injector);n.instance.message=t.message,n.instance.type=t.type,n.changeDetectorRef.detectChanges();const r=n.location.nativeElement;this.getContainer().appendChild(r),setTimeout(()=>{n.destroy(),r.parentNode.removeChild(r)},e)}getContainer(){if(this.container)return this.container;const t=document.createElement("div");return t.className="notification-container",document.body.appendChild(t),this.container=t,t}}return t.\u0275fac=function(e){return new(e||t)(i.Qb(i.j),i.Qb(i.r))},t.\u0275prov=i.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var u=n("/X4X")},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},NXyV:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("Cfvw"),o=n("EY2u");function s(t){return new r.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(i.a)(n):Object(o.b)()).subscribe(e)})}},"S/Aq":function(t,e,n){"use strict";n.d(e,"b",function(){return T}),n.d(e,"c",function(){return k}),n.d(e,"d",function(){return M}),n.d(e,"a",function(){return D});var r=n("fXoL"),i=n("Cfvw"),o=n("LRne"),s=n("HDdC"),a=n("w1tV"),c=n("lJxs");function u(t){return function(t){return new s.a(e=>({unsubscribe:t.onSnapshot(e)}))}(t).pipe(Object(a.a)())}function l(t){return u(t).pipe(Object(c.a)(t=>({payload:t,type:"query"})))}var h=n("pLZG"),d=n("Kqap");function f(t){return l(t).pipe(Object(c.a)(t=>t.payload.docChanges().map(t=>({type:t.type,payload:t}))))}function p(t,e){return l(t).pipe(Object(c.a)(t=>t.payload.docChanges()),Object(d.a)((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)||t.splice(e.newIndex,0,e);break;case"modified":(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))&&(e.oldIndex!==e.newIndex?(t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e)):t.splice(e.newIndex,1,e));break;case"removed":t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref)&&t.splice(e.oldIndex,1)}return t}(t,e))}),t}(t,n,e),[]),Object(c.a)(t=>t.map(t=>({type:t.type,payload:t}))))}var g=n("XU1U");function m(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}class y{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){return t&&0!==t.length?this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(f(this.query))).pipe(Object(c.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Object(h.a)(t=>t.length>0)):this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(f(this.query)))}auditTrail(t){return this.stateChanges(t).pipe(Object(d.a)((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=m(t),n=p(this.query,e),r=this.afs.scheduler.runOutsideAngular(n);return this.afs.scheduler.keepUnstableUntilFirst(r)}valueChanges(t={}){const e=l(this.query),n=this.afs.scheduler.runOutsideAngular(e);return this.afs.scheduler.keepUnstableUntilFirst(n).pipe(Object(c.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({},e.data(),{[t.idField]:e.id}):e.data())))}get(t){return Object(i.a)(this.query.get(t)).pipe(Object(g.b)(this.afs.scheduler.zone))}add(t){return this.ref.add(t)}doc(t){return new b(this.ref.doc(t),this.afs)}}class b{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=M(n,e);return new y(r,i,this.afs)}snapshotChanges(){const t=u(this.ref).pipe(Object(c.a)(t=>({payload:t,type:"value"}))),e=this.afs.scheduler.runOutsideAngular(t);return this.afs.scheduler.keepUnstableUntilFirst(e)}valueChanges(){return this.snapshotChanges().pipe(Object(c.a)(t=>t.payload.data()))}get(t){return Object(i.a)(this.ref.get(t)).pipe(Object(g.b)(this.afs.scheduler.zone))}}class v{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(f(this.query))).pipe(Object(c.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Object(h.a)(t=>t.length>0)):this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(f(this.query)))}auditTrail(t){return this.stateChanges(t).pipe(Object(d.a)((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=m(t),n=p(this.query,e),r=this.afs.scheduler.runOutsideAngular(n);return this.afs.scheduler.keepUnstableUntilFirst(r)}valueChanges(){const t=l(this.query),e=this.afs.scheduler.runOutsideAngular(t);return this.afs.scheduler.keepUnstableUntilFirst(e).pipe(Object(c.a)(t=>t.payload.docs.map(t=>t.data())))}get(t){return Object(i.a)(this.query.get(t)).pipe(Object(g.b)(this.afs.scheduler.zone))}}var w=n("Czum"),_=n("ofXK"),S=n("Wcq6"),C=n.n(S),I=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},E=function(t,e){return function(n,r){e(n,r,t)}};const T=new r.q("angularfire2.enableFirestorePersistence"),k=new r.q("angularfire2.firestore.persistenceSettings"),O=new r.q("angularfire2.firestore.settings"),x=parseInt(C.a.SDK_VERSION.split(".")[0]),A=parseInt(C.a.SDK_VERSION.split(".")[1]),N=x<5||5==x&&A<8?{timestampsInSnapshots:!0}:{};function M(t,e=(t=>t)){return{query:e(t),ref:t}}let D=(()=>{let t=class{constructor(t,e,n,r,s,a,c){this.scheduler=new g.a(a,s),this.firestore=a.runOutsideAngular(()=>{const n=Object(w.d)(t,a,e).firestore();return n.settings(r||N),n}),this.persistenceEnabled$=n&&!Object(_.q)(s)?a.runOutsideAngular(()=>{try{return Object(i.a)(this.firestore.enablePersistence(c||void 0).then(()=>!0,()=>!1))}catch(t){return Object(o.a)(!1)}}):Object(o.a)(!1)}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=M(n,e);return new y(r,i,this)}collectionGroup(t,e){if(x<6)throw"collection group queries require Firebase JS SDK >= 6.0";const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new v(n(r),this)}doc(t){let e;return e="string"==typeof t?this.firestore.doc(t):t,new b(e,this)}createId(){return this.firestore.collection("_").doc().id}};return t.\u0275fac=function(e){return new(e||t)(r.Qb(w.c),r.Qb(w.b,8),r.Qb(T,8),r.Qb(O,8),r.Qb(r.B),r.Qb(r.z),r.Qb(k,8))},t.\u0275prov=r.Eb({token:t,factory:function(e){return t.\u0275fac(e)}}),t=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}([E(0,Object(r.p)(w.c)),E(1,Object(r.A)()),E(1,Object(r.p)(w.b)),E(2,Object(r.A)()),E(2,Object(r.p)(T)),E(3,Object(r.A)()),E(3,Object(r.p)(O)),E(4,Object(r.p)(r.B)),E(6,Object(r.A)()),E(6,Object(r.p)(k)),I("design:paramtypes",[Object,Object,Object,Object,Object,r.z,Object])],t),t})()},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),c=n("c2HN"),u=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(c.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(u.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},SxV6:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n("sVev"),i=n("pLZG"),o=n("IzEk"),s=n("xbPD"),a=n("XDbj"),c=n("SpAZ");function u(t,e){const n=arguments.length>=2;return u=>u.pipe(t?Object(i.a)((e,n)=>t(e,n,u)):c.a,Object(o.a)(1),n?Object(s.a)(e):Object(a.a)(()=>new r.a))}},V9Ei:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("Wcq6"),i=n("IzEk"),o=(n("WI49"),n("fXoL")),s=n("S/Aq"),a=n("7dP1");let c=(()=>{class t{constructor(t,e){this.afs=t,this.auth=e}save(t){const e=r.firestore.FieldValue.serverTimestamp();return t.updatedAt=e,t.id||(t.createdAt=e),(t.id?this.afs.doc("/lessons/"+t.id).update(t).then(()=>t.id):this.afs.collection("lessons").add(t).then(t=>t.id)).then(e=>({id:e,authorId:t.authorId,author:t.author}))}getAllLessons(){return this.afs.collection("lessons",t=>t.where("authorId","==",this.auth.user?this.auth.user.uid:"").orderBy("createdAt","desc"))}loadFromFirestore(t){return this.afs.doc("/lessons/"+t).valueChanges().pipe(Object(i.a)(1)).toPromise()}deleteLesson(t){const e=Object(r.storage)().ref();return Promise.all([this.afs.doc("/lessons/"+t.id).delete(),e.child(`lessons/${this.auth.user.uid}/${t.recordingFileName}.stream`).delete(),e.child(`lessons/${this.auth.user.uid}/${t.recordingFileName}.webm`).delete()])}}return t.\u0275fac=function(e){return new(e||t)(o.Qb(s.a),o.Qb(a.a))},t.\u0275prov=o.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},WI49:function(t,e,n){"use strict";var r=n("wj3C"),i=n.n(r),o=n("30Go"),s="firebasestorage.googleapis.com",a=function(){function t(t,e){this.code_=u(t),this.message_="Firebase Storage: "+e,this.serverResponse_=null,this.name_="FirebaseError"}return t.prototype.codeProp=function(){return this.code},t.prototype.codeEquals=function(t){return u(t)===this.codeProp()},t.prototype.serverResponseProp=function(){return this.serverResponse_},t.prototype.setServerResponseProp=function(t){this.serverResponse_=t},Object.defineProperty(t.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),t}(),c="canceled";function u(t){return"storage/"+t}function l(){return new a("unknown","An unknown error occurred, please check the error payload for server response.")}function h(){return new a(c,"User canceled the upload/download.")}function d(){return new a("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function f(){return new a("no-download-url","The given file does not have any download URLs.")}function p(t,e,n){return new a("invalid-argument","Invalid argument in `"+e+"` at index "+t+": "+n)}function g(){return new a("app-deleted","The Firebase app was deleted.")}function m(t,e){return new a("invalid-format","String does not match format '"+t+"': "+e)}function y(t){throw new a("internal-error","Internal error: "+t)}var b={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function v(t){switch(t){case b.RAW:case b.BASE64:case b.BASE64URL:case b.DATA_URL:return;default:throw"Expected one of the event types: ["+b.RAW+", "+b.BASE64+", "+b.BASE64URL+", "+b.DATA_URL+"]."}}var w=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function _(t,e){switch(t){case b.RAW:return new w(S(e));case b.BASE64:case b.BASE64URL:return new w(C(t,e));case b.DATA_URL:return new w((n=new I(e)).base64?C(b.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(n){throw m(b.DATA_URL,"Malformed data URL.")}return S(e)}(n.rest),new I(e).contentType)}var n;throw l()}function S(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function C(t,e){switch(t){case b.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw m(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case b.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw m(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(u){throw m(t,"Invalid character found")}for(var a=new Uint8Array(s.length),c=0;c<s.length;c++)a[c]=s.charCodeAt(c);return a}var I=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw m(b.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(n=i).length>=(r=";base64").length&&n.substring(n.length-r.length)===r,this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)}}(),E={STATE_CHANGED:"state_changed"},T="running",k="pausing",O="paused",x="success",A="canceling",N="canceled",M="error",D={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function P(t){switch(t){case T:case k:case A:return D.RUNNING;case O:return D.PAUSED;case x:return D.SUCCESS;case N:return D.CANCELED;case M:default:return D.ERROR}}function R(t){return null!=t}function j(t){return void 0!==t}function L(t){return"function"==typeof t}function F(t){return"object"==typeof t}function U(t){return F(t)&&null!==t}function V(t){return"string"==typeof t||t instanceof String}function q(t){return B(t)&&Number.isInteger(t)}function B(t){return"number"==typeof t||t instanceof Number}function z(t){return W()&&t instanceof Blob}function W(){return"undefined"!=typeof Blob}var H=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),K=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=H.NO_ERROR,this.sendPromise_=new Promise(function(e){t.xhr_.addEventListener("abort",function(){t.errorCode_=H.ABORT,e(t)}),t.xhr_.addEventListener("error",function(){t.errorCode_=H.NETWORK_ERROR,e(t)}),t.xhr_.addEventListener("load",function(){e(t)})})}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw y("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),R(r))for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return R(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw y("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw y("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw y("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){R(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){R(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",t)},t}(),$=function(){function t(){}return t.prototype.createXhrIo=function(){return new K},t}();function Q(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function G(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Q();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(W())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}var X=function(){function t(t,e){var n=0,r="";z(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(z(this.data_)){var r=(o=e,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(W()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t(G.apply(null,r))}var i=e.map(function(t){return V(t)?_(b.RAW,t).data:t.data_}),o=0;i.forEach(function(t){o+=t.byteLength});var s=new Uint8Array(o),a=0;return i.forEach(function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]}),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}(),Y=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!0,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(r){return new t(e,"")}if(""===n.path)return n;throw new a("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){for(var n=null,r="([A-Za-z0-9.\\-_]+)",i=new RegExp("^gs://"+r+"(/(.*))?$","i"),o=s.replace(/[.]/g,"\\."),c=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+o+"/v[A-Za-z0-9_]+/b/"+r+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:function(t){t.path_=decodeURIComponent(t.path)}}],u=0;u<c.length;u++){var l=c[u],h=l.regex.exec(e);if(h){var d=h[l.indices.path];d||(d=""),n=new t(h[l.indices.bucket],d),l.postModify(n);break}}if(null==n)throw function(t){return new a("invalid-url","Invalid URL '"+t+"'.")}(e);return n},t}();function Z(t){var e,n;try{e=JSON.parse(t)}catch(r){return null}return F(n=e)&&!Array.isArray(n)?e:null}function J(t,e){var n=e.split("/").filter(function(t){return t.length>0}).join("/");return 0===t.length?n:t+"/"+n}function tt(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function et(t){return"https://"+s+"/v0"+t}function nt(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}function rt(t,e){return e}var it=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||rt}}(),ot=null;function st(t,e,n){var r=Z(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new Y(t.bucket,t.fullPath);return e.makeStorageReference(n)}})}(r,t),r}(t,r,n)}function at(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function ct(t){if(!F(t)||!t)throw"Expected Metadata object.";for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];if("customMetadata"===e){if(!F(n))throw"Expected object for 'customMetadata' mapping."}else if(U(n))throw"Mapping for '"+e+"' cannot be an object."}}function ut(t){if(!F(t)||!t)throw"Expected ListOptions object.";for(var e in t)if("maxResults"===e){if(!q(t.maxResults)||t.maxResults<=0)throw"Expected maxResults to be a positive number.";if(t.maxResults>1e3)throw"Expected maxResults to be less than or equal to 1000."}else{if("pageToken"!==e)throw"Unknown option: "+e;if(t.pageToken&&!V(t.pageToken))throw"Expected pageToken to be string."}}var lt=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function ht(t){if(!t)throw l()}function dt(t,e){return function(n,r){var i=st(t,r,e);return ht(null!==i),i}}function ft(t){return function(e,n){var r;return(r=401===e.getStatus()?new a("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new a("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new a("unauthorized","User does not have permission to access '"+t.path+"'."):n).setServerResponseProp(n.serverResponseProp()),r}}function pt(t){var e=ft(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new a("object-not-found","Object '"+t.path+"' does not exist.")),i.setServerResponseProp(r.serverResponseProp()),i}}function gt(t,e,n){var r=et(e.fullServerUrl()),i=t.maxOperationRetryTime(),o=new lt(r,"GET",dt(t,n),i);return o.errorHandler=pt(e),o}function mt(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=et(e.bucketOnlyServerUrl()),c=t.maxOperationRetryTime(),u=new lt(s,"GET",function(t){return function(e,n){var r=function(t,e){var n=Z(e);return null===n?null:function(t,e){var n={prefixes:[],items:[],nextPageToken:e.nextPageToken},r=t.bucket();if(null===r)throw new a("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");if(e.prefixes)for(var i=0,o=e.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),c=t.makeStorageReference(new Y(r,s));n.prefixes.push(c)}if(e.items)for(var u=0,l=e.items;u<l.length;u++)c=t.makeStorageReference(new Y(r,l[u].name)),n.items.push(c);return n}(t,n)}(t,n);return ht(null!==r),r}}(t),c);return u.urlParams=o,u.errorHandler=ft(e),u}function yt(t,e,n){var r=et(e.fullServerUrl()),i=t.maxOperationRetryTime(),o=new lt(r,"GET",function(t,e){return function(n,r){var i=st(t,r,e);return ht(null!==i),function(t,e){var n=Z(e);if(null===n)return null;if(!V(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map(function(e){var n=t.fullPath;return et("/b/"+i(t.bucket)+"/o/"+i(n))+nt({alt:"media",token:e})})[0]}(i,r)}}(t,n),i);return o.errorHandler=pt(e),o}function bt(t,e,n,r){var i=et(e.fullServerUrl()),o=at(n,r),s=t.maxOperationRetryTime(),a=new lt(i,"PATCH",dt(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=pt(e),a}function vt(t,e){var n=et(e.fullServerUrl()),r=t.maxOperationRetryTime(),i=new lt(n,"DELETE",function(t,e){},r);return i.successCodes=[200,204],i.errorHandler=pt(e),i}function wt(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var _t=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function St(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(r){ht(!1)}return ht(!!n&&-1!==(e||["active"]).indexOf(n)),n}var Ct=262144,It=function(){return function(t,e,n){if(L(t)||R(e)||R(n))this.next=t,this.error=e||null,this.complete=n||null;else{var r=t;this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}}}(),Et=function(){return function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o}}();function Tt(t,e,n){for(var r=e.length,i=e.length,o=0;o<e.length;o++)if(e[o].optional){r=o;break}var s,c,u,l;if(!(r<=n.length&&n.length<=i))throw(s=r)===(c=i)?(u=s,l=1===s?"argument":"arguments"):(u="between "+s+" and "+c,l="arguments"),new a("invalid-argument-count","Invalid argument count in `"+t+"`: Expected "+u+" "+l+", received "+n.length+".");for(o=0;o<n.length;o++)try{e[o].validator(n[o])}catch(h){throw h instanceof Error?p(o,t,h.message):p(o,t,h)}}var kt=function(){return function(t,e){var n=this;this.validator=function(e){n.optional&&!j(e)||t(e)},this.optional=!!e}}();function Ot(t,e){function n(t){if(!V(t))throw"Expected string."}var r,i,o;return t?(i=n,o=t,r=function(t){i(t),o(t)}):r=n,new kt(r,e)}function xt(){return new kt(function(t){if(!(t instanceof Uint8Array||t instanceof ArrayBuffer||W()&&t instanceof Blob))throw"Expected Blob or File."})}function At(t){return new kt(ct,t)}function Nt(t){return new kt(ut,t)}function Mt(){return new kt(function(t){if(!(B(t)&&t>=0))throw"Expected a number 0 or greater."})}function Dt(t,e){return new kt(function(e){if(!(null===e||R(e)&&e instanceof Object))throw"Expected an Object.";null!=t&&t(e)},e)}function Pt(t){return new kt(function(t){if(null!==t&&!L(t))throw"Expected a Function."},t)}function Rt(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then(function(){return t.apply(void 0,e)})}}var jt=function(){function t(t,e,n,r,i,o){var s=this;void 0===o&&(o=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=t,this.authWrapper_=e,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=T,this.errorHandler_=function(t){s.request_=null,s.chunkMultiplier_=1,t.codeEquals(c)?(s.needToFetchStatus_=!0,s.completeTransitions_()):(s.error_=t,s.transition_(M))},this.metadataErrorHandler_=function(t){s.request_=null,t.codeEquals(c)?s.completeTransitions_():(s.error_=t,s.transition_(M))},this.promise_=new Promise(function(t,e){s.resolve_=t,s.reject_=e,s.start_()}),this.promise_.then(null,function(){})}return t.prototype.makeProgressCallback_=function(){var t=this,e=this.transferred_;return function(n){return t.updateProgress_(e+n)}},t.prototype.shouldDoResumable_=function(t){return t.size()>262144},t.prototype.start_=function(){this.state_===T&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},t.prototype.resolveToken_=function(t){var e=this;this.authWrapper_.getAuthToken().then(function(n){switch(e.state_){case T:t(n);break;case A:e.transition_(N);break;case k:e.transition_(O)}})},t.prototype.createResumable_=function(){var t=this;this.resolveToken_(function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=wt(e,r,i),a={name:s.fullPath},c=et(o),u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=at(s,n),h=t.maxUploadRetryTime(),d=new lt(c,"POST",function(t){var e;St(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(n){ht(!1)}return ht(V(e)),e},h);return d.urlParams=a,d.headers=u,d.body=l,d.errorHandler=ft(e),d}(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then(function(e){t.request_=null,t.uploadUrl_=e,t.needToFetchStatus_=!1,t.completeTransitions_()},t.errorHandler_)})},t.prototype.fetchStatus_=function(){var t=this,e=this.uploadUrl_;this.resolveToken_(function(n){var r=function(t,e,n,r){var i=t.maxUploadRetryTime(),o=new lt(n,"POST",function(t){var e=St(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(o){ht(!1)}n||ht(!1);var i=Number(n);return ht(!isNaN(i)),new _t(i,r.size(),"final"===e)},i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=ft(e),o}(t.authWrapper_,t.location_,e,t.blob_),i=t.authWrapper_.makeRequest(r,n);t.request_=i,i.getPromise().then(function(e){e=e,t.request_=null,t.updateProgress_(e.current),t.needToFetchStatus_=!1,e.finalized&&(t.needToFetchMetadata_=!0),t.completeTransitions_()},t.errorHandler_)})},t.prototype.continueUpload_=function(){var t=this,e=Ct*this.chunkMultiplier_,n=new _t(this.transferred_,this.blob_.size()),r=this.uploadUrl_;this.resolveToken_(function(i){var o;try{o=function(t,e,n,r,i,o,s,c){var u=new _t(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new a("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var l=u.total-u.current,h=l;i>0&&(h=Math.min(h,i));var f=u.current,p={"X-Goog-Upload-Command":h===l?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},g=r.slice(f,f+h);if(null===g)throw d();var m=e.maxUploadRetryTime(),y=new lt(n,"POST",function(t,n){var i,s=St(t,["active","final"]),a=u.current+h,c=r.size();return i="final"===s?dt(e,o)(t,n):null,new _t(a,c,"final"===s,i)},m);return y.headers=p,y.body=g.uploadData(),y.progressCallback=c||null,y.errorHandler=ft(t),y}(t.location_,t.authWrapper_,r,t.blob_,e,t.mappings_,n,t.makeProgressCallback_())}catch(c){return t.error_=c,void t.transition_(M)}var s=t.authWrapper_.makeRequest(o,i);t.request_=s,s.getPromise().then(function(e){t.increaseMultiplier_(),t.request_=null,t.updateProgress_(e.current),e.finalized?(t.metadata_=e.metadata,t.transition_(x)):t.completeTransitions_()},t.errorHandler_)})},t.prototype.increaseMultiplier_=function(){Ct*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},t.prototype.fetchMetadata_=function(){var t=this;this.resolveToken_(function(e){var n=gt(t.authWrapper_,t.location_,t.mappings_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then(function(e){t.request_=null,t.metadata_=e,t.transition_(x)},t.metadataErrorHandler_)})},t.prototype.oneShotUpload_=function(){var t=this;this.resolveToken_(function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var c=wt(e,r,i),u=at(c,n),l=X.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+u+"\r\n--"+a+"\r\nContent-Type: "+c.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw d();var h={name:c.fullPath},f=et(o),p=t.maxUploadRetryTime(),g=new lt(f,"POST",dt(t,n),p);return g.urlParams=h,g.headers=s,g.body=l.uploadData(),g.errorHandler=ft(e),g}(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then(function(e){t.request_=null,t.metadata_=e,t.updateProgress_(t.blob_.size()),t.transition_(x)},t.errorHandler_)})},t.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},t.prototype.transition_=function(t){if(this.state_!==t)switch(t){case A:case k:this.state_=t,null!==this.request_&&this.request_.cancel();break;case T:var e=this.state_===O;this.state_=t,e&&(this.notifyObservers_(),this.start_());break;case O:this.state_=t,this.notifyObservers_();break;case N:this.error_=h(),this.state_=t,this.notifyObservers_();break;case M:case x:this.state_=t,this.notifyObservers_()}},t.prototype.completeTransitions_=function(){switch(this.state_){case k:this.transition_(O);break;case A:this.transition_(N);break;case T:this.start_()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=P(this.state_);return new Et(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),t.prototype.on=function(t,e,n,r){function i(){if(t!==E.STATE_CHANGED)throw"Expected one of the event types: ["+E.STATE_CHANGED+"]."}var o="Expected a function or an Object with one of `next`, `error`, `complete` properties.",s=Pt(!0).validator,a=Dt(null,!0).validator;function c(t){try{return void s(t)}catch(e){}try{if(a(t),!(j(t.next)||j(t.error)||j(t.complete)))throw"";return}catch(e){throw o}}var u=[Ot(i),Dt(c,!0),Pt(!0),Pt(!0)];Tt("on",u,arguments);var l=this;function h(t){return function(e,n,i){null!==t&&Tt("on",t,arguments);var o=new It(e,n,r);return l.addObserver_(o),function(){l.removeObserver_(o)}}}function d(t){if(null===t)throw o;c(t)}var f=[Dt(d),Pt(!0),Pt(!0)],p=!(j(e)||j(n)||j(r));return p?h(f):h(null)(e,n,r)},t.prototype.then=function(t,e){return this.promise_.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},t.prototype.removeObserver_=function(t){var e=this.observers_.indexOf(t);-1!==e&&this.observers_.splice(e,1)},t.prototype.notifyObservers_=function(){var t=this;this.finishPromise_(),this.observers_.slice().forEach(function(e){t.notifyObserver_(e)})},t.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(P(this.state_)){case D.SUCCESS:Rt(this.resolve_.bind(null,this.snapshot))();break;case D.CANCELED:case D.ERROR:Rt(this.reject_.bind(null,this.error_))();break;default:t=!1}t&&(this.resolve_=null,this.reject_=null)}},t.prototype.notifyObserver_=function(t){switch(P(this.state_)){case D.RUNNING:case D.PAUSED:t.next&&Rt(t.next.bind(t,this.snapshot))();break;case D.SUCCESS:t.complete&&Rt(t.complete.bind(t))();break;case D.CANCELED:case D.ERROR:t.error&&Rt(t.error.bind(t,this.error_))();break;default:t.error&&Rt(t.error.bind(t,this.error_))()}},t.prototype.resume=function(){Tt("resume",[],arguments);var t=this.state_===O||this.state_===k;return t&&this.transition_(T),t},t.prototype.pause=function(){Tt("pause",[],arguments);var t=this.state_===T;return t&&this.transition_(k),t},t.prototype.cancel=function(){Tt("cancel",[],arguments);var t=this.state_===T||this.state_===k;return t&&this.transition_(A),t},t}(),Lt=function(){function t(t,e){this.authWrapper=t,this.location=e instanceof Y?e:Y.makeFromUrl(e)}return t.prototype.toString=function(){return Tt("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},t.prototype.newRef=function(e,n){return new t(e,n)},t.prototype.mappings=function(){return function(){if(ot)return ot;var t=[];t.push(new it("bucket")),t.push(new it("generation")),t.push(new it("metageneration")),t.push(new it("name","fullPath",!0));var e=new it("name");e.xform=function(t,e){return function(t){return!V(t)||t.length<2?t:tt(t)}(e)},t.push(e);var n=new it("size");return n.xform=function(t,e){return R(e)?Number(e):e},t.push(n),t.push(new it("timeCreated")),t.push(new it("updated")),t.push(new it("md5Hash",null,!0)),t.push(new it("cacheControl",null,!0)),t.push(new it("contentDisposition",null,!0)),t.push(new it("contentEncoding",null,!0)),t.push(new it("contentLanguage",null,!0)),t.push(new it("contentType",null,!0)),t.push(new it("metadata","customMetadata",!0)),ot=t}()},t.prototype.child=function(t){Tt("child",[Ot()],arguments);var e=J(this.location.path,t),n=new Y(this.location.bucket,e);return this.newRef(this.authWrapper,n)},Object.defineProperty(t.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this.location.path);if(null===t)return null;var e=new Y(this.location.bucket,t);return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){var t=new Y(this.location.bucket,"");return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return tt(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),t.prototype.put=function(t,e){return void 0===e&&(e=null),Tt("put",[xt(),At(!0)],arguments),this.throwIfRoot_("put"),new jt(this,this.authWrapper,this.location,this.mappings(),new X(t),e)},t.prototype.putString=function(t,e,n){void 0===e&&(e=b.RAW),Tt("putString",[Ot(),Ot(v,!0),At(!0)],arguments),this.throwIfRoot_("putString");var r=_(e,t),i=Object.assign({},n);return!R(i.contentType)&&R(r.contentType)&&(i.contentType=r.contentType),new jt(this,this.authWrapper,this.location,this.mappings(),new X(r.data,!0),i)},t.prototype.delete=function(){var t=this;return Tt("delete",[],arguments),this.throwIfRoot_("delete"),this.authWrapper.getAuthToken().then(function(e){var n=vt(t.authWrapper,t.location);return t.authWrapper.makeRequest(n,e).getPromise()})},t.prototype.listAll=function(){Tt("listAll",[],arguments);var t={prefixes:[],items:[]};return this.listAllHelper(t).then(function(){return t})},t.prototype.listAllHelper=function(t,e){return Object(o.__awaiter)(this,void 0,void 0,function(){var n,r,i;return Object(o.__generator)(this,function(o){switch(o.label){case 0:return[4,this.list({pageToken:e})];case 1:return n=o.sent(),(r=t.prefixes).push.apply(r,n.prefixes),(i=t.items).push.apply(i,n.items),null==n.nextPageToken?[3,3]:[4,this.listAllHelper(t,n.nextPageToken)];case 2:o.sent(),o.label=3;case 3:return[2]}})})},t.prototype.list=function(t){Tt("list",[Nt(!0)],arguments);var e=this;return this.authWrapper.getAuthToken().then(function(n){var r=t||{},i=mt(e.authWrapper,e.location,"/",r.pageToken,r.maxResults);return e.authWrapper.makeRequest(i,n).getPromise()})},t.prototype.getMetadata=function(){var t=this;return Tt("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.authWrapper.getAuthToken().then(function(e){var n=gt(t.authWrapper,t.location,t.mappings());return t.authWrapper.makeRequest(n,e).getPromise()})},t.prototype.updateMetadata=function(t){var e=this;return Tt("updateMetadata",[At()],arguments),this.throwIfRoot_("updateMetadata"),this.authWrapper.getAuthToken().then(function(n){var r=bt(e.authWrapper,e.location,t,e.mappings());return e.authWrapper.makeRequest(r,n).getPromise()})},t.prototype.getDownloadURL=function(){var t=this;return Tt("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.authWrapper.getAuthToken().then(function(e){var n=yt(t.authWrapper,t.location,t.mappings());return t.authWrapper.makeRequest(n,e).getPromise().then(function(t){if(null===t)throw f();return t})})},t.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw function(t){return new a("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(t)},t}(),Ft=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}(),Ut=function(){function t(){this.map=new Map,this.id=-9007199254740991}return t.prototype.addRequest=function(t){var e=this,n=this.id;this.id++,this.map.set(n,t),t.getPromise().then(function(){return e.map.delete(n)},function(){return e.map.delete(n)})},t.prototype.clear=function(){this.map.forEach(function(t){t&&t.cancel(!0)}),this.map.clear()},t}(),Vt=function(){function t(e,n,r,i,o){if(this.bucket_=null,this.deleted_=!1,this.app_=e,null!==this.app_){var s=this.app_.options;R(s)&&(this.bucket_=t.extractBucket_(s))}this.storageRefMaker_=n,this.requestMaker_=r,this.pool_=o,this.service_=i,this.maxOperationRetryTime_=12e4,this.maxUploadRetryTime_=6e5,this.requestMap_=new Ut}return t.extractBucket_=function(t){var e=t.storageBucket||null;return null==e?null:Y.makeFromBucketSpec(e).bucket},t.prototype.getAuthToken=function(){return null!==this.app_&&R(this.app_.INTERNAL)&&R(this.app_.INTERNAL.getToken)?this.app_.INTERNAL.getToken().then(function(t){return null!==t?t.accessToken:null},function(){return null}):Promise.resolve(null)},t.prototype.bucket=function(){if(this.deleted_)throw g();return this.bucket_},t.prototype.service=function(){return this.service_},t.prototype.makeStorageReference=function(t){return this.storageRefMaker_(this,t)},t.prototype.makeRequest=function(t,e){if(this.deleted_)return new Ft(g());var n=this.requestMaker_(t,e,this.pool_);return this.requestMap_.addRequest(n),n},t.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},t.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},t.prototype.setMaxUploadRetryTime=function(t){this.maxUploadRetryTime_=t},t.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},t.prototype.setMaxOperationRetryTime=function(t){this.maxOperationRetryTime_=t},t}(),qt=function(){function t(t,e,n,r,i,o,s,a,c,u,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=u,this.timeout_=c,this.pool_=l,this.promise_=new Promise(function(t,e){h.resolve_=t,h.reject_=e,h.start_()})}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var c=t.callback_(s,s.getResponseText());j(c)?i(c):i()}catch(u){o(u)}else null!==s?((r=l()).setServerResponseProp(s.getResponseText()),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?g():h():new a("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new Bt(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,s=null,a=!1,c=0;function u(){return 2===c}var l=!1;function h(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];l||(l=!0,n.apply(null,t))}function d(e){s=setTimeout(function(){s=null,function(e,n){if(n)e(!1,new Bt(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then(function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===H.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new Bt(s,n))}else{var a=n.getErrorCode()===H.ABORT;e(!1,new Bt(!1,null,a))}})}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(f,u())},e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!l)if(t)h.call.apply(h,Object(o.__spreadArrays)([null,t],e));else{var r;u()||a?h.call.apply(h,Object(o.__spreadArrays)([null,t],e)):(i<64&&(i*=2),1===c?(c=2,r=0):r=1e3*(i+Math.random()),d(r))}}var p=!1;function g(t){p||(p=!0,l||(null!==s?(t||(c=2),clearTimeout(s),d(0)):t||(c=1)))}return d(0),setTimeout(function(){a=!0,g(!0)},r),g}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),Bt=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}();function zt(t,e,n){var r=nt(t.urlParams),o=t.url+r,s=Object.assign({},t.headers);return function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(s,e),function(t){t["X-Firebase-Storage-Version"]="webjs/"+(void 0!==i.a?i.a.SDK_VERSION:"AppManager")}(s),new qt(o,t.method,s,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,n)}var Wt=function(){function t(t,e,n){if(this.bucket_=null,this.authWrapper_=new Vt(t,function(t,e){return new Lt(t,e)},zt,this,e),this.app_=t,null!=n)this.bucket_=Y.makeFromBucketSpec(n);else{var r=this.authWrapper_.bucket();null!=r&&(this.bucket_=new Y(r,""))}this.internals_=new Ht(this)}return t.prototype.ref=function(t){function e(t){if("string"!=typeof t)throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(t))throw"Expected child path but got a URL, use refFromURL instead."}if(Tt("ref",[Ot(e,!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var n=new Lt(this.authWrapper_,this.bucket_);return null!=t?n.child(t):n},t.prototype.refFromURL=function(t){function e(t){if("string"!=typeof t)throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(t))throw"Expected full URL but got a child path, use ref instead.";try{Y.makeFromUrl(t)}catch(e){throw"Expected valid full URL but got an invalid one."}}return Tt("refFromURL",[Ot(e,!1)],arguments),new Lt(this.authWrapper_,t)},Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),t.prototype.setMaxUploadRetryTime=function(t){Tt("setMaxUploadRetryTime",[Mt()],arguments),this.authWrapper_.setMaxUploadRetryTime(t)},t.prototype.setMaxOperationRetryTime=function(t){Tt("setMaxOperationRetryTime",[Mt()],arguments),this.authWrapper_.setMaxOperationRetryTime(t)},Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),t}(),Ht=function(){function t(t){this.service_=t}return t.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),Promise.resolve()},t}();i.a.INTERNAL.registerService("storage",function(t,e,n){return new Wt(t,new $,n)},{TaskState:D,TaskEvent:E,StringFormat:b,Storage:Wt,Reference:Lt},void 0,!0)},Wcq6:function(t,e,n){"use strict";var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r;t.exports=i},XDbj:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("sVev"),i=n("7o/Q");function o(t=c){return e=>e.lift(new s(t))}class s{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new a(t,this.errorFactory))}}class a extends i.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function c(){return new r.a}},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp");class a extends o.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}var c=n("2QA8");class u extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[c.a](){return new u(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XU1U:function(t,e,n){"use strict";n.d(e,"a",function(){return p}),n.d(e,"b",function(){return g});var r=n("fXoL"),i=n("ofXK"),o=n("quSY");class s extends o.a{constructor(t,e){super()}schedule(t,e=0){return this}}class a extends s{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}class c extends a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}let u=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class l extends u{constructor(t,e=u.now){super(t,()=>l.delegate&&l.delegate!==this?l.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return l.delegate&&l.delegate!==this?l.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}class h extends l{}const d=new h(c);var f=n("HDdC");new r.q("angularfire2.realtimeDatabaseURL");class p{constructor(t,e){this.zone=t,this.platformId=e}schedule(...t){return this.zone.runGuarded(function(){return d.schedule.apply(d,t)})}keepUnstableUntilFirst(t){return Object(i.q)(this.platformId)?new f.a(e=>{const n=()=>{},r=Zone.current.scheduleMacroTask("firebaseZoneBlock",n,{},n,n);t.subscribe(t=>{"scheduled"===r.state&&r.invoke(),e.next(t)},t=>{"scheduled"===r.state&&r.invoke(),e.error(t)},()=>{"scheduled"===r.state&&r.invoke(),e.complete()})}):t}runOutsideAngular(t){return new f.a(e=>this.zone.runOutsideAngular(()=>t.subscribe(t=>this.zone.run(()=>e.next(t)),t=>this.zone.run(()=>e.error(t)),()=>this.zone.run(()=>e.complete()))))}}const g=t=>e=>new f.a(n=>e.subscribe(e=>t.run(()=>n.next(e)),e=>t.run(()=>n.error(e)),()=>t.run(()=>n.complete())))},XnF7:function(t,e,n){var r,i,o;!function(n,s){"use strict";i=[],void 0===(o="function"==typeof(r=function(){var t,e=function(){if("undefined"!=typeof __dirname)return __dirname;if("undefined"==typeof document||!document.getElementsByTagName)return null;var t,e=document.currentScript||(t=document.getElementsByTagName("script"))[t.length-1],n=e&&e.src;return n?"/sass.js"===n.slice(-8)?n.slice(0,-8):"/sass.sync.js"===n.slice(-13)?n.slice(0,-13):null:null}()||".",n=function(){},r=[].slice;function i(e){if(!e&&!t)throw new Error("Sass needs to be initialized with the URL of sass.worker.js - either via Sass.setWorkerUrl(url) or by new Sass(url)");for(var n in t||(t=e),this)"function"==typeof this[n]&&(this[n]=this[n].bind(this));this._callbacks={},this._worker=new Worker(e||t),this._worker.addEventListener("message",this._handleWorkerMessage,!1)}return i.setWorkerUrl=function(e){t=e},i.prototype={style:i.style={nested:0,expanded:1,compact:2,compressed:3},comments:i.comments={none:0,default:1},destroy:function(){this._worker&&this._worker.terminate(),this._worker=null,this._callbacks={},this._importer=null},_handleWorkerMessage:function(t){t.data.command&&this[t.data.command](t.data.args),this._callbacks[t.data.id]&&this._callbacks[t.data.id](t.data.result),delete this._callbacks[t.data.id]},_dispatch:function(t,e){if(!this._worker)throw new Error("Sass worker has been terminated");t.id="cb"+Date.now()+Math.random(),this._callbacks[t.id]=e,this._worker.postMessage(t)},_importerInit:function(t){var e=(function(t){this._worker.postMessage({command:"_importerFinish",args:[t]})}).bind(this);try{this._importer(t[0],e)}catch(n){throw e({error:n.message}),n}},importer:function(t,e){if("function"!=typeof t&&null!==t)throw new Error("importer callback must either be a function or null");this._importer=t,this._worker.postMessage({command:"importer",args:[Boolean(t)]}),e&&e()}},"writeFile readFile listFiles removeFile clearFiles lazyFiles preloadFiles options compile compileFile".split(" ").forEach(function(t){i.prototype[t]=function(){var e=r.call(arguments,-1)[0],i=r.call(arguments,0,-1);"function"!=typeof e&&(i.push(e),e=n),this._dispatch({command:t,args:i},e)}}),i.setWorkerUrl(e+"/sass.worker.js"),i})?r.apply(e,i):r)||(t.exports=o)}()},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Xv3O:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("fXoL");let i=(()=>{class t{constructor(t){this.elRef=t,this.size=0,this._hidden=!1}set hidden(t){this._hidden=t,this.elRef.nativeElement.classList.toggle("d-none",t)}get hidden(){return this._hidden}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.l))},t.\u0275dir=r.Db({type:t,selectors:[["","split-area",""]],hostAttrs:[1,"split-area"],inputs:{size:["split-area","size"]},exportAs:["splitArea"]}),t})()},"YU+1":function(t,e,n){"use strict";n.d(e,"b",function(){return d}),n.d(e,"a",function(){return f}),n.d(e,"c",function(){return C}),n.d(e,"d",function(){return I});var r=n("2Vo4"),i=n("pLZG"),o=n("lJxs"),s=n("/uUt");class a{constructor(t=null){this.initialState=t,this.state$=new r.a(this.initialState)}get state(){return this.state$.value}select(t){return this.state$.asObservable().pipe(Object(i.a)(Boolean),Object(o.a)(t),Object(s.a)())}setState(t){const e=Object.assign(Object.assign({},this.state),t);this.state$.next(e)}}var c=n("9uVP"),u=n("fXoL"),l=n("ofXK");const h={useTabs:!1,printWidth:120,tabWidth:2,singleQuote:!0,trailingComma:"es5",semi:!0};let d=(()=>{class t extends a{constructor(t){super({layout:Object(c.d)("layout")||localStorage.getItem("layout")||"1",testMode:Object(c.d)("test")||"false",prettierConfig:JSON.parse(localStorage.getItem("prettier"))||h,previewUrl:"",reloadMode:localStorage.getItem("reloadMode")||"edit"}),this.location=t,this.testEnabled$=this.select(t=>"true"===t.testMode),this.activeTheme$=this.select(t=>t.theme),this.screenShotMode$=this.select(t=>t.screenShotMode),this.reloadMode$=this.select(t=>t.reloadMode),this.schematicOptions$=this.select(t=>t.schematicOptions),this.prettierConfig$=this.select(t=>t.prettierConfig),this.layout$=this.select(t=>t.layout),this.previewUrl$=this.select(t=>t.previewUrl),this.applyTheme(localStorage.getItem("monaco-theme")||"material")}toggleLayout(){const t="1"===this.state.layout?"2":"1";this.location.replaceState(Object(c.g)("layout",t)),localStorage.setItem("layout",t),this.setState({layout:t})}toggleTestMode(){const t="true"===this.state.testMode?"false":"true";this.location.replaceState(Object(c.g)("test",t)),this.setState({testMode:t})}applyTheme(t){document.body.classList.remove(this.state.theme),document.body.classList.add(t),window.monaco&&monaco.editor&&monaco.editor.setTheme(["light","vstudio"].includes(t)?"vs-light":"vs-dark"),localStorage.setItem("monaco-theme",t),this.setState({theme:t})}toggleScreenShotMode(t){this.setState({screenShotMode:this.state.screenShotMode===t?void 0:t})}useSchematic(t){this.setState({schematicOptions:t})}updatePrettierConfig(t){try{const e=JSON.parse(t);localStorage.setItem("prettier",JSON.stringify(e)),this.setState({prettierConfig:e})}catch(e){}}changePreviewUrl(t){this.setState({previewUrl:t})}setReloadMode(t){localStorage.setItem("reloadMode",t),this.setState({reloadMode:t})}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(l.i))},t.\u0275prov=u.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var f=function(t){return t.Folder="folder",t.File="file",t}({}),p=n("itXk"),g=n("IzEk");const m={"index.html":{name:"index.html",type:f.File,contents:'<my-app id="app">Loading...</my-app>'},app:{name:"app",type:f.Folder,contents:""},"main.ts":{name:"main.ts",type:f.File,contents:"import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\n\nplatformBrowserDynamic().bootstrapModule(AppModule);"},"app/app.module.ts":{name:"app.module.ts",type:f.File,contents:"import { NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\n\nimport { AppComponent } from './app.component';\n\n@NgModule({\n  imports: [\n    BrowserModule\n  ],\n  declarations: [\n    AppComponent\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }"},"app/app.component.ts":{name:"app.component.ts",type:f.File,contents:"import { Component, VERSION } from '@angular/core';\n\n@Component({\n  selector: 'my-app',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n  name = 'Angular ' + VERSION.full;\n}\n"},"app/app.component.html":{name:"app.component.html",type:f.File,contents:'<h2 class="title">Hello {{name}}</h2>'},"app/app.component.css":{name:"app.component.css",type:f.File,contents:".title {\n  font-family: sans-serif;\n}"},"styles.css":{name:"styles.css",type:f.File,contents:"/* Write your global styles here */"}},y={rxjs:{main:"./index.js",typings:"./index.d.ts",version:"6.6.0"},tslib:{main:"./tslib.js",typings:"./index.d.ts",version:"1.9.3",fake:!0},typescript:{loaded:!0,fake:!0},"zone.js":{main:"./dist/zone.js",version:"0.10.2",loaded:!0,fake:!0},"core-js":{main:"./client/shim.min.js",version:"2.4.1",loaded:!0,fake:!0},"whatwg-fetch":{main:"fetch.js",version:"2.0.4",fake:!0}};["platform-browser","platform-browser-dynamic","core","compiler","common","forms","router"].forEach(t=>{y["@angular/"+t]={main:`./bundles/${t}.umd.js`,module:`./esm5/${t}.js`,typings:`./${t}.d.ts`,version:"11.0.2"}});const b={title:"Base Project",selectedFile:"app/app.component.ts",manifest:{indexHtml:"index.html",entry:"main.ts",styles:"styles.css"},files:m,dependencies:y,aot:!0},v={ts:{title:"Base TypeScript Project",selectedFile:"index.ts",manifest:{indexHtml:"index.html",entry:"index.ts",styles:"styles.css"},dependencies:{rxjs:{main:"./index.js",typings:"./index.d.ts",version:"6.6.0"}},files:{"index.html":{name:"index.html",type:f.File,contents:'<div id="app"></div>'},"index.ts":{name:"index.ts",type:f.File,contents:"const app = document.getElementById('app');\napp.textContent = 'Hello World!';"},"styles.css":{name:"styles.css",type:f.File,contents:"/* Write your global styles here */"}},nonNg:!0}};var w=n("7dP1"),_=n("dJ3e"),S=n("V9Ei");let C=(()=>{class t extends a{constructor(t,e,n,r){super(),this.authService=t,this.projectService=e,this.location=n,this.lessonService=r,this.isProjectDirty$=this.select(t=>t.dirty),this.projectLoaded$=this.select(t=>t).pipe(Object(g.a)(1)),this.target$=this.select(t=>t.target),this.author$=this.select(t=>t.author),this.nonNg$=this.select(t=>!!t.nonNg),this.isLesson$=this.select(t=>!!t.recordingFileName),this.isLessonRecording$=this.select(t=>""===t.recordingFileName),this.dependencies$=this.select(t=>t.dependencies).pipe(Object(o.a)(t=>Object.keys(t).map(e=>Object.assign(Object.assign({},t[e]),{name:e})).filter(t=>!t.fake).sort((t,e)=>t.name<e.name?-1:t.name>e.name?1:0))),this.externalResources$=this.select(t=>t.externalResources),this.canEdit$=Object(p.b)([this.authService.user$,this.select(t=>t.authorId)]).pipe(Object(o.a)(([t,e])=>e&&t&&e===t.uid)),this.isTestsSupported$=this.select(t=>t&&t.files&&!!t.files["src/test.ts"]),this.ngVersion$=this.select(t=>t.dependencies).pipe(Object(o.a)(t=>t["@angular/compiler"]?parseInt(t["@angular/compiler"].version,10):9)),this.aotEnabled$=this.select(t=>void 0!==t.aot&&!!t.aot),this.vimEnabled$=this.select(t=>!!t.vimMode),this.recording$=this.select(t=>!!t.record),this.selectedFile$=this.select(t=>t.selectedFile),this.selectedFiles=[],this.wasRecorded=!1}get isSaveEnabled(){return this.wasRecorded||!!this.state.recordingFileName&&this.state.authorId===this.authService.user.uid}getAotVersion(){return this.state.dependencies["@angular/compiler"].version}save(t){const{uid:e,displayName:n,photoURL:r}=this.authService.user;if(!e)return Promise.resolve(!1);const{id:i,title:o,files:s,dependencies:a,selectedFile:c,manifest:u,externalResources:l,aot:h,compilerOptions:d,target:f,nonNg:p,recordingFileName:g}=this.state,m=Object.assign(Object.assign(Object.assign({},!t&&i&&{id:i}),{title:o,authorId:e,author:{displayName:n,photoURL:r},files:JSON.stringify(s,(t,e)=>["dirty","fullPath"].includes(t)?void 0:e),dependencies:a,selectedFile:c||"",manifest:u||"",externalResources:JSON.stringify(l),aot:h,nonNg:p||!1,compilerOptions:d||null,target:f||"es5"}),g?{recordingFileName:g}:{});return(g?this.lessonService:this.projectService).save(m).then(t=>(this.setState(Object.assign(Object.assign({},t),{dirty:!1})),t.id))}loadProject(t,e,n){let r=Promise.resolve(e&&v[e]||b);const i=document.location.pathname;if(n)r=this.lessonService.loadFromFirestore(n).then(t=>t?(t.id=n,t):(this.location.go("/"),location.reload(),null));else if(i.startsWith("/edit/")){const e=i.split("/edit/").join("");e?r=this.projectService.loadFromFirestore(e).then(n=>{if(n.manifest){const e={true:"src/test.ts",false:"src/main.ts"};JSON.parse(n.files)[e[t]]&&(n.manifest.entry=e[t])}return n.id=e,n}):this.location.go("/")}else i.startsWith("/github/")?r=this.projectService.loadFromGithub(document.location.pathname.replace("/github/","")).then(e=>("true"===t&&(e.manifest.entry=e.selectedFile="src/test.ts"),e.selectedFile=e.manifest.entry||"src/main.ts",e)):i.startsWith("/s")&&(r=this.projectService.loadFromStore(document.location.search).then(t=>Object.assign(Object.assign(Object.assign({},b),t),{selectedFile:t.manifest.entry})));return r.then(t=>{t||(this.location.go("/"),t=b),"string"==typeof t.files&&(t.files=JSON.parse(t.files)),t.externalResources=JSON.parse(t.externalResources||"[]"),t.selectedFile=t.selectedFile||b.selectedFile;const e=Object(c.d)("open");if(e){const n=decodeURIComponent(e);t.files[n]&&(t.selectedFile=n)}t.dependencies=t.dependencies||b.dependencies,t.manifest=t.manifest||b.manifest;const n=!!t.aot&&parseInt(t.dependencies["@angular/compiler"].version,10)>=9;if(!t.nonNg){const{key:e,contents:r}=I(n,t);t.files[e]=Object.assign(Object.assign({},t.files[e]),{contents:r})}return this.selectedFiles=[t.selectedFile],this.setState(Object.assign(Object.assign({},t),{dirty:!1,aot:n,target:t.target||"es5",vimMode:"true"===localStorage.getItem("vim"),record:"true"===localStorage.getItem("record")})),t})}selectFile(t){this.state.selectedFile!==t&&(this.setState({selectedFile:t}),this.selectedFiles=this.selectedFiles.filter(e=>e!==t),this.selectedFiles.unshift(t),this.location.replaceState(Object(c.g)("open",encodeURIComponent(t))))}addItem(t){this.setState({dirty:!0,files:Object.assign(Object.assign({},this.state.files),{[t.key]:t.value})})}deleteItem(t){const e=this.state.files;this.setState({dirty:!0,files:Object.keys(e).reduce((n,r)=>((t.name?r.startsWith(t.fullPath):r===t.fullPath)||(n[r]=e[r]),n),{})})}merge(t){const e=this.state.files;this.setState({dirty:!0,files:Object.assign(Object.keys(e).reduce((n,r)=>(t.remove.indexOf(r)>-1||(n[r]=e[r]),n),{}),t.add)})}setDirtyOnFiles(t,e){let{files:n}=this.state;n=Object.keys(n).reduce((r,i)=>(e&&!e.includes(i)||n[i].dirty===t||(n[i]=Object.assign(Object.assign({},n[i]),{dirty:t})),r[i]=n[i],r),{}),this.setState({dirty:!0,files:n})}updateDeps(t){this.setState({dependencies:t,dirty:!0})}updateDep(t){const e=this.state.dependencies;this.setState({dependencies:Object.assign(Object.assign({},e),{[t.name]:Object.assign(Object.assign({},e[t.name]),{version:t.version})}),dirty:!0})}deleteProject(t){return this.projectService.deleteProject(t)}setDirty(){this.state.dirty||this.setState({dirty:!0})}setTitle(t){this.setState({title:t,dirty:!0})}addExternalResource(t){const e=this.state.externalResources;e.includes(t)||(this.setState({externalResources:[...e,t],dirty:!0}),preview.postMessage({type:"ADD_RESOURCE",payload:t},"*"))}removeExternalResource(t){this.setState({externalResources:this.state.externalResources.filter(e=>e!==t),dirty:!0}),preview.postMessage({type:"REMOVE_RESOURCE",payload:t},"*")}toggleAotStatus(){this.setState({aot:!this.state.aot})}toggleVimMode(){localStorage.setItem("vim",(!this.state.vimMode).toString()),location.reload()}toggleRecording(){localStorage.setItem("record",(!this.state.record).toString()),location.reload()}updateCompilerOptions(t){this.setState({dirty:!0,compilerOptions:t})}setTarget(t){this.setState({target:t})}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(w.a),u.Qb(_.b),u.Qb(l.i),u.Qb(S.a))},t.\u0275prov=u.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function I(t,e){const n="import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';",r="import { platformBrowser } from '@angular/platform-browser';",i=Object.keys(e.files).find(t=>t.endsWith("main.ts"));if(!i)return;const o=e.files[i];let s;return s=t&&parseInt(e.dependencies["@angular/compiler"].version,10)>=9?o.contents.replace(n,r).replace(/platformBrowserDynamic\(\)/g,"platformBrowser()").replace(/platform-browser-dynamic'/g,"platform-browser'"):o.contents.replace(r,n).replace(/platformBrowser\(\)/g,"platformBrowserDynamic()").replace(/platform-browser'/g,"platform-browser-dynamic'"),{key:i,contents:s}}},aECQ:function(t,e,n){"use strict";n.d(e,"a",function(){return d});var r=n("fXoL"),i=n("HDdC"),o=n("Cfvw"),s=n("LRne"),a=n("eIep"),c=n("XU1U"),u=n("Czum"),l=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},h=function(t,e){return function(n,r){e(n,r,t)}};let d=(()=>{let t=class{constructor(t,e,n,r){this.zone=r;const l=new c.a(r,n);this.auth=r.runOutsideAngular(()=>Object(u.d)(t,r,e).auth()),this.authState=l.keepUnstableUntilFirst(l.runOutsideAngular(new i.a(t=>({unsubscribe:this.auth.onAuthStateChanged(t)})))),this.user=l.keepUnstableUntilFirst(l.runOutsideAngular(new i.a(t=>({unsubscribe:this.auth.onIdTokenChanged(t)})))),this.idToken=this.user.pipe(Object(a.a)(t=>t?Object(o.a)(t.getIdToken()):Object(s.a)(null))),this.idTokenResult=this.user.pipe(Object(a.a)(t=>t?Object(o.a)(t.getIdTokenResult()):Object(s.a)(null)))}};return t.\u0275fac=function(e){return new(e||t)(r.Qb(u.c),r.Qb(u.b,8),r.Qb(r.B),r.Qb(r.z))},t.\u0275prov=r.Eb({token:t,factory:function(e){return t.\u0275fac(e)}}),t=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}([h(0,Object(r.p)(u.c)),h(1,Object(r.A)()),h(1,Object(r.p)(u.b)),h(2,Object(r.p)(r.B)),l("design:paramtypes",[Object,Object,Object,r.z])],t),t})()},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},bOdf:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("5+tZ");function i(t,e){return Object(r.a)(t,e,1)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},dJ3e:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return p});var r=n("7dP1"),i=n("Wcq6"),o=n("IzEk"),s=n("AytR"),a=n("fXoL"),c=n("S/Aq");let u=(()=>{class t{constructor(t,e){this.afs=t,this.auth=e}save(t){const e=i.firestore.FieldValue.serverTimestamp();return t.updatedAt=e,t.id||(t.createdAt=e),(t.id?this.afs.doc("/projects/"+t.id).update(t).then(()=>t.id):this.afs.collection("projects").add(t).then(t=>t.id)).then(e=>({id:e,authorId:t.authorId,author:t.author}))}loadFromFirestore(t){return this.afs.doc("/projects/"+t).valueChanges().pipe(Object(o.a)(1)).toPromise()}loadFromGithub(t){return fetch(`${s.a.API_URL}github?path=${t}`).then(t=>t.json()).catch(t=>{alert("Sorry, something went wrong!")})}loadFromStore(t){return fetch(`${s.a.API_URL}store${t}`).then(t=>t.json()).catch(t=>{alert("Sorry, something went wrong!")})}getLastProjects(){return this.afs.collection("projects",t=>t.where("authorId","==",this.auth.user?this.auth.user.uid:"").orderBy("createdAt","desc").limit(5))}getVersions(t){return fetch(`${s.a.API_URL}versions/${t}`).then(t=>t.json())}deleteProject(t){return this.afs.doc("/projects/"+t).delete()}}return t.\u0275fac=function(e){return new(e||t)(a.Qb(c.a),a.Qb(r.a))},t.\u0275prov=a.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var l=n("2Vo4"),h=n("Kqap"),d=n("vkgz"),f=n("9uVP");let p=(()=>{class t{constructor(t,e){this.afs=t,this.auth=e,this._done=new l.a(!1),this._loading=new l.a(!1),this._data=new l.a([]),this.done=this._done.asObservable(),this.loading=this._loading.asObservable()}init(t,e,n){this.query=Object.assign({path:t,field:e,limit:20,reverse:!1,prepend:!1},n);const r=this.afs.collection(this.query.path,t=>t.where("authorId","==",this.auth.user?this.auth.user.uid:"").orderBy(this.query.field,this.query.reverse?"desc":"asc").limit(this.query.limit));this.mapAndUpdate(r),this.data=this._data.asObservable().pipe(Object(h.a)((t,e)=>this.query.prepend?e.concat(t):t.concat(e)))}more(){const t=this.getCursor(),e=this.afs.collection(this.query.path,e=>e.where("authorId","==",this.auth.user?this.auth.user.uid:"").orderBy(this.query.field,this.query.reverse?"desc":"asc").limit(this.query.limit).startAfter(t));this.mapAndUpdate(e)}reset(){this._data.next([]),this._done.next(!1)}getCursor(){const t=this._data.value;return t.length?this.query.prepend?t[0].doc:t[t.length-1].doc:null}mapAndUpdate(t){if(!this._done.value&&!this._loading.value)return this._loading.next(!0),t.snapshotChanges().pipe(Object(d.a)(t=>{let e=t.map(t=>{const e=t.payload.doc,n=t.payload.doc.data();return{id:t.payload.doc.id,title:n.title,timeAgo:Object(f.f)(n.createdAt),doc:e}});e=this.query.prepend?e.reverse():e,this._data.next(e),this._loading.next(!1),e.length||this._done.next(!0)}),Object(o.a)(1)).subscribe()}}return t.\u0275fac=function(e){return new(e||t)(a.Qb(c.a),a.Qb(r.a))},t.\u0275prov=a.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},eIep:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e){return"function"==typeof e?n=>n.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))))):e=>e.lift(new a(t))}class a{constructor(t){this.project=t}call(t,e){return e.subscribe(new c(t,this.project))}}class c extends o.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new o.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(o.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}},ejEf:function(t,e,n){"use strict";function r(t,e){t.addCommand(monaco.KeyMod.CtrlCmd|monaco.KeyMod.Alt|monaco.KeyMod.Shift|monaco.KeyCode.KEY_P,()=>function(t,e){const n="https://unpkg.com/prettier@1.18.2/";window.require([n+"standalone.js",n+"parser-typescript.js",n+"parser-postcss.js",n+"parser-html.js"],(n,{parsers:r},{parsers:i},{parsers:o})=>{const s=t.getModel(),a=s.getOffsetAt(t.getPosition()),c=Object.assign(Object.assign(Object.assign({},r),i),o),u=s.getModeId(),l=n.formatWithCursor(s.getValue(),Object.assign({parser:u,plugins:[{parsers:c}],cursorOffset:a},e.playgroundStore.state.prettierConfig));s.setValue(l.formatted);const h=s.getPositionAt(l.cursorOffset);t.setPosition(h),e.refreshDecorators()})}(t,e))}n.r(e),n.d(e,"plugIn",function(){return r})},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return O}),n.d(e,"b",function(){return Vc}),n.d(e,"c",function(){return Rc}),n.d(e,"d",function(){return Dc}),n.d(e,"e",function(){return Pc}),n.d(e,"f",function(){return Au}),n.d(e,"g",function(){return wu}),n.d(e,"h",function(){return Ta}),n.d(e,"i",function(){return Yc}),n.d(e,"j",function(){return Js}),n.d(e,"k",function(){return zc}),n.d(e,"l",function(){return ra}),n.d(e,"m",function(){return Ir}),n.d(e,"n",function(){return lc}),n.d(e,"o",function(){return mo}),n.d(e,"p",function(){return h}),n.d(e,"q",function(){return k}),n.d(e,"r",function(){return No}),n.d(e,"s",function(){return wa}),n.d(e,"t",function(){return _a}),n.d(e,"u",function(){return Bc}),n.d(e,"v",function(){return La}),n.d(e,"w",function(){return Su}),n.d(e,"x",function(){return ja}),n.d(e,"y",function(){return gu}),n.d(e,"z",function(){return tu}),n.d(e,"A",function(){return d}),n.d(e,"B",function(){return Uc}),n.d(e,"C",function(){return Fc}),n.d(e,"D",function(){return oa}),n.d(e,"E",function(){return ia}),n.d(e,"F",function(){return Ar}),n.d(e,"G",function(){return aa}),n.d(e,"H",function(){return Tn}),n.d(e,"I",function(){return p}),n.d(e,"J",function(){return Eu}),n.d(e,"K",function(){return Ma}),n.d(e,"L",function(){return cu}),n.d(e,"M",function(){return F}),n.d(e,"N",function(){return ca}),n.d(e,"O",function(){return Ua}),n.d(e,"P",function(){return $}),n.d(e,"Q",function(){return mu}),n.d(e,"R",function(){return en}),n.d(e,"S",function(){return tn}),n.d(e,"T",function(){return Ou}),n.d(e,"U",function(){return hu}),n.d(e,"V",function(){return qc}),n.d(e,"W",function(){return bo}),n.d(e,"X",function(){return $s}),n.d(e,"Y",function(){return In}),n.d(e,"Z",function(){return an}),n.d(e,"ab",function(){return He}),n.d(e,"bb",function(){return $e}),n.d(e,"cb",function(){return Ye}),n.d(e,"db",function(){return Ge}),n.d(e,"eb",function(){return Qe}),n.d(e,"fb",function(){return Xe}),n.d(e,"gb",function(){return po}),n.d(e,"hb",function(){return zs}),n.d(e,"ib",function(){return ku}),n.d(e,"jb",function(){return Ws}),n.d(e,"kb",function(){return Hs}),n.d(e,"lb",function(){return Ke}),n.d(e,"mb",function(){return P}),n.d(e,"nb",function(){return jo}),n.d(e,"ob",function(){return rs}),n.d(e,"pb",function(){return ns}),n.d(e,"qb",function(){return go}),n.d(e,"rb",function(){return Bs}),n.d(e,"sb",function(){return Nt}),n.d(e,"tb",function(){return g}),n.d(e,"ub",function(){return We}),n.d(e,"vb",function(){return Rn}),n.d(e,"wb",function(){return mi}),n.d(e,"xb",function(){return Bo}),n.d(e,"yb",function(){return _s}),n.d(e,"zb",function(){return Ls}),n.d(e,"Ab",function(){return ws}),n.d(e,"Bb",function(){return Tc}),n.d(e,"Cb",function(){return it}),n.d(e,"Db",function(){return ht}),n.d(e,"Eb",function(){return b}),n.d(e,"Fb",function(){return v}),n.d(e,"Gb",function(){return ct}),n.d(e,"Hb",function(){return dt}),n.d(e,"Ib",function(){return Ko}),n.d(e,"Jb",function(){return Zo}),n.d(e,"Kb",function(){return ts}),n.d(e,"Lb",function(){return Jo}),n.d(e,"Mb",function(){return Yo}),n.d(e,"Nb",function(){return Xo}),n.d(e,"Ob",function(){return es}),n.d(e,"Pb",function(){return Fs}),n.d(e,"Qb",function(){return Ot}),n.d(e,"Rb",function(){return $o}),n.d(e,"Sb",function(){return Mc}),n.d(e,"Tb",function(){return is}),n.d(e,"Ub",function(){return kc}),n.d(e,"Vb",function(){return Re}),n.d(e,"Wb",function(){return Pe}),n.d(e,"Xb",function(){return as}),n.d(e,"Yb",function(){return oc}),n.d(e,"Zb",function(){return sc}),n.d(e,"ac",function(){return ac}),n.d(e,"bc",function(){return ls}),n.d(e,"cc",function(){return us}),n.d(e,"dc",function(){return Qo}),n.d(e,"ec",function(){return hs}),n.d(e,"fc",function(){return tc}),n.d(e,"gc",function(){return ec}),n.d(e,"hc",function(){return nc}),n.d(e,"ic",function(){return Sc}),n.d(e,"jc",function(){return Ho}),n.d(e,"kc",function(){return Or}),n.d(e,"lc",function(){return ae}),n.d(e,"mc",function(){return kn}),n.d(e,"nc",function(){return xn}),n.d(e,"oc",function(){return On}),n.d(e,"pc",function(){return ut}),n.d(e,"qc",function(){return Cc}),n.d(e,"rc",function(){return vs}),n.d(e,"sc",function(){return Wo}),n.d(e,"tc",function(){return Nc}),n.d(e,"uc",function(){return Ds}),n.d(e,"vc",function(){return Ps}),n.d(e,"wc",function(){return Rs}),n.d(e,"xc",function(){return js}),n.d(e,"yc",function(){return Ic});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");function c(t){return{toString:t}.toString()}const u="__parameters__";function l(t,e,n){return c(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(u)?t[u]:Object.defineProperty(t,u,{value:[]})[u];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}const h=l("Inject",t=>({token:t})),d=l("Optional"),f=l("Self"),p=l("SkipSelf");function g(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(g).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function m(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}function y(t){for(let e in t)if(t[e]===y)return e;throw Error("Could not find renamed property on target object.")}function b(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function v(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function w(t){return _(t,C)||_(t,E)}function _(t,e){return t.hasOwnProperty(e)?t[e]:null}function S(t){return t&&(t.hasOwnProperty(I)||t.hasOwnProperty(T))?t[I]:null}const C=y({"\u0275prov":y}),I=y({"\u0275inj":y}),E=y({ngInjectableDef:y}),T=y({ngInjectorDef:y});class k{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=b({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return"InjectionToken "+this._desc}}const O=new k("AnalyzeForEntryComponents");var x=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({});const A="undefined"!=typeof globalThis&&globalThis,N="undefined"!=typeof window&&window,M="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,D="undefined"!=typeof global&&global,P=A||D||N||M,R=y({__forward_ref__:y});function j(t){return t.__forward_ref__=j,t.toString=function(){return g(this())},t}function L(t){return"function"==typeof(e=t)&&e.hasOwnProperty(R)&&e.__forward_ref__===j?t():t;var e}const F=Function;function U(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),U(r,e)):e!==t&&e.push(r)}return e}function V(t,e){t.forEach(t=>Array.isArray(t)?V(t,e):e(t))}function q(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function B(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function z(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function W(t,e,n){let r=K(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function H(t,e){const n=K(t,e);if(n>=0)return t[1|n]}function K(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}var $=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const Q={},G=[],X=y({"\u0275cmp":y}),Y=y({"\u0275dir":y}),Z=y({"\u0275pipe":y}),J=y({"\u0275mod":y}),tt=y({"\u0275loc":y}),et=y({"\u0275fac":y}),nt=y({__NG_ELEMENT_ID__:y});let rt=0;function it(t){return c(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===x.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||G,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||$.Emulated,id:"c",styles:t.styles||G,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=rt++,n.inputs=lt(t.inputs,e),n.outputs=lt(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(ot):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(st):null,n})}function ot(t){return ft(t)||function(t){return t[Y]||null}(t)}function st(t){return function(t){return t[Z]||null}(t)}const at={};function ct(t){const e={type:t.type,bootstrap:t.bootstrap||G,declarations:t.declarations||G,imports:t.imports||G,exports:t.exports||G,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&c(()=>{at[t.id]=t.type}),e}function ut(t,e){return c(()=>{const n=pt(t,!0);n.declarations=e.declarations||G,n.imports=e.imports||G,n.exports=e.exports||G})}function lt(t,e){if(null==t)return Q;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const ht=it;function dt(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function ft(t){return t[X]||null}function pt(t,e){const n=t[J]||null;if(!n&&!0===e)throw new Error(`Type ${g(t)} does not have '\u0275mod' property.`);return n}function gt(t){return"string"==typeof t?t:null==t?"":""+t}function mt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():gt(t)}var yt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let bt;function vt(t){const e=bt;return bt=t,e}function wt(t,e,n){const r=w(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&yt.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${g(t)}]`)}const _t={},St=/\n/gm,Ct="__source",It=y({provide:String,useValue:y});let Et=void 0;function Tt(t){const e=Et;return Et=t,e}function kt(t,e=yt.Default){if(void 0===Et)throw new Error("inject() must be called from an injection context");return null===Et?wt(t,void 0,e):Et.get(t,e&yt.Optional?null:void 0,e)}function Ot(t,e=yt.Default){return(bt||kt)(L(t),e)}function xt(t){const e=[];for(let n=0;n<t.length;n++){const r=L(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t=void 0,n=yt.Default;for(let e=0;e<r.length;e++){const i=r[e];i instanceof d||"Optional"===i.ngMetadataName||i===d?n|=yt.Optional:i instanceof p||"SkipSelf"===i.ngMetadataName||i===p?n|=yt.SkipSelf:i instanceof f||"Self"===i.ngMetadataName||i===f?n|=yt.Self:t=i instanceof h||i===h?i.token:i}e.push(Ot(t,n))}else e.push(Ot(r))}return e}let At=void 0;function Nt(t){At=t}function Mt(){return void 0!==At?At:"undefined"!=typeof document?document:void 0}const Dt=20,Pt=10;function Rt(t){return Array.isArray(t)&&"object"==typeof t[1]}function jt(t){return Array.isArray(t)&&!0===t[1]}function Lt(t){return 0!=(8&t.flags)}function Ft(t){return 2==(2&t.flags)}function Ut(t){return 1==(1&t.flags)}function Vt(t){return null!==t.template}const qt="http://www.w3.org/2000/svg";function Bt(t){return!!t.listen}const zt={createRenderer:(t,e)=>Mt()};function Wt(t){for(;Array.isArray(t);)t=t[0];return t}function Ht(t,e){return Wt(e[t])}function Kt(t,e){return Wt(e[t.index])}function $t(t,e){return t.data[e]}function Qt(t,e){return t[e]}function Gt(t,e){const n=e[t];return Rt(n)?n:n[0]}function Xt(t){return t.__ngContext__||null}function Yt(t){const e=Xt(t);return e?Array.isArray(e)?e:e.lView:null}function Zt(t){return 4==(4&t[2])}function Jt(t){return 128==(128&t[2])}function te(t,e){return null==e?null:t[e]}function ee(t){t[18]=0}function ne(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const re={lFrame:ke(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function ie(){return re.bindingsEnabled}function oe(){return re.lFrame.lView}function se(){return re.lFrame.tView}function ae(t){re.lFrame.contextLView=t}function ce(){let t=ue();for(;null!==t&&64===t.type;)t=t.parent;return t}function ue(){return re.lFrame.currentTNode}function le(t,e){const n=re.lFrame;n.currentTNode=t,n.isParent=e}function he(){return re.lFrame.isParent}function de(){re.lFrame.isParent=!1}function fe(){return re.isInCheckNoChangesMode}function pe(t){re.isInCheckNoChangesMode=t}function ge(){const t=re.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function me(){return re.lFrame.bindingIndex}function ye(){return re.lFrame.bindingIndex++}function be(t){const e=re.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function ve(t,e){const n=re.lFrame;n.bindingIndex=n.bindingRootIndex=t,we(e)}function we(t){re.lFrame.currentDirectiveIndex=t}function _e(){return re.lFrame.currentQueryIndex}function Se(t){re.lFrame.currentQueryIndex=t}function Ce(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function Ie(t,e,n){if(n&yt.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&yt.Host||(r=Ce(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=re.lFrame=Te();return r.currentTNode=e,r.lView=t,!0}function Ee(t){const e=Te(),n=t[1];re.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Te(){const t=re.lFrame,e=null===t?null:t.child;return null===e?ke(t):e}function ke(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function Oe(){const t=re.lFrame;return re.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const xe=Oe;function Ae(){const t=Oe();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Ne(){return re.lFrame.selectedIndex}function Me(t){re.lFrame.selectedIndex=t}function De(){const t=re.lFrame;return $t(t.tView,t.selectedIndex)}function Pe(){re.lFrame.currentNamespace=qt}function Re(){re.lFrame.currentNamespace=null}let je;function Le(t){var e;return(null===(e=function(){if(void 0===je&&(je=null,P.trustedTypes))try{je=P.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return je}())||void 0===e?void 0:e.createHTML(t))||t}class Fe{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}class Ue extends Fe{getTypeName(){return"HTML"}}class Ve extends Fe{getTypeName(){return"Style"}}class qe extends Fe{getTypeName(){return"Script"}}class Be extends Fe{getTypeName(){return"URL"}}class ze extends Fe{getTypeName(){return"ResourceURL"}}function We(t){return t instanceof Fe?t.changingThisBreaksApplicationSecurity:t}function He(t,e){const n=Ke(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see http://g.co/ng/security#xss)`)}return n===e}function Ke(t){return t instanceof Fe&&t.getTypeName()||null}function $e(t){return new Ue(t)}function Qe(t){return new Ve(t)}function Ge(t){return new qe(t)}function Xe(t){return new Be(t)}function Ye(t){return new ze(t)}let Ze=!0,Je=!1;function tn(){return Je=!0,Ze}function en(){if(Je)throw new Error("Cannot enable prod mode after platform setup.");Ze=!1}class nn{getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Le(t),"text/html").body;return e.removeChild(e.firstChild),e}catch(e){return null}}}class rn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Le(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=Le(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const on=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,sn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function an(t){return(t=String(t)).match(on)||t.match(sn)?t:(tn()&&console.warn(`WARNING: sanitizing unsafe URL value ${t} (see http://g.co/ng/security#xss)`),"unsafe:"+t)}function cn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function un(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const ln=cn("area,br,col,hr,img,wbr"),hn=cn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),dn=cn("rp,rt"),fn=un(dn,hn),pn=un(ln,un(hn,cn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),un(dn,cn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),fn),gn=cn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),mn=cn("srcset"),yn=un(gn,mn,cn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),cn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),bn=cn("script,style,template");class vn{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!pn.hasOwnProperty(e))return this.sanitizedSomething=!0,!bn.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!yn.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;gn[o]&&(s=an(s)),mn[o]&&(r=s,s=(r=String(r)).split(",").map(t=>an(t.trim())).join(", ")),this.buf.push(" ",e,'="',Sn(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();pn.hasOwnProperty(e)&&!ln.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(Sn(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e}}const wn=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_n=/([^\#-~ |!])/g;function Sn(t){return t.replace(/&/g,"&amp;").replace(wn,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(_n,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Cn;function In(t,e){let n=null;try{Cn=Cn||function(t){return function(){try{return!!(new window.DOMParser).parseFromString(Le(""),"text/html")}catch(t){return!1}}()?new nn:new rn(t)}(t);let r=e?String(e):"";n=Cn.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Cn.getInertBodyElement(r)}while(r!==o);const s=new vn,a=s.sanitizeChildren(En(n)||n);return tn()&&s.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),a}finally{if(n){const t=En(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function En(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Tn=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function kn(t){const e=An();return e?e.sanitize(Tn.HTML,t)||"":He(t,"HTML")?We(t):In(Mt(),gt(t))}function On(t){const e=An();return e?e.sanitize(Tn.URL,t)||"":He(t,"URL")?We(t):an(gt(t))}function xn(t){const e=An();if(e)return e.sanitize(Tn.RESOURCE_URL,t)||"";if(He(t,"ResourceURL"))return We(t);throw new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)")}function An(){const t=oe();return t&&t[12]}function Nn(t,e){return t.hasOwnProperty(et)?t[et]:null}class Mn extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function Dn(t,e){const n=e?" in "+e:"";throw new Mn("201",`No provider for ${mt(t)} found${n}`)}class Pn{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function Rn(){return jn}function jn(t){return t.type.prototype.ngOnChanges&&(t.setInput=Fn),Ln}function Ln(){const t=Un(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===Q)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function Fn(t,e,n,r){const i=Un(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:Q,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],c=s[a];o[a]=new Pn(c&&c.currentValue,e,s===Q),t[r]=e}function Un(t){return t.__ngSimpleChanges__||null}function Vn(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function qn(t,e,n){Wn(t,e,3,n)}function Bn(t,e,n,r){(3&t[2])===n&&Wn(t,e,n,r)}function zn(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Wn(t,e,n,r){const i=null!=r?r:-1;let o=0;for(let s=void 0!==r?65535&t[18]:0;s<e.length;s++)if("number"==typeof e[s+1]){if(o=e[s],null!=r&&o>=r)break}else e[s]<0&&(t[18]+=65536),(o<i||-1==i)&&(Hn(t,n,e,s),t[18]=(4294901760&t[18])+s+2),s++}function Hn(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}Rn.ngInherit=!0;const Kn=-1;class $n{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Qn(t,e,n){const r=Bt(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],c=n[i++];r?t.setAttribute(e,a,c,s):e.setAttributeNS(s,a,c)}else{const s=o,a=n[++i];Xn(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Gn(t){return 3===t||4===t||6===t}function Xn(t){return 64===t.charCodeAt(0)}function Yn(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Zn(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Zn(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Jn(t){return t!==Kn}function tr(t){return 32767&t}function er(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let nr=!0;function rr(t){const e=nr;return nr=t,e}let ir=0;function or(t,e){const n=ar(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,sr(r.data,t),sr(e,null),sr(r.blueprint,null));const i=cr(t,e),o=t.injectorIndex;if(Jn(i)){const t=tr(i),n=er(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function sr(t,e){t.push(0,0,0,0,0,0,0,0,e)}function ar(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function cr(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return Kn;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Kn}function ur(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(nt)&&(r=n[nt]),null==r&&(r=n[nt]=ir++);const i=255&r,o=1<<i,s=64&i,a=32&i,c=e.data;128&i?s?a?c[t+7]|=o:c[t+6]|=o:a?c[t+5]|=o:c[t+4]|=o:s?a?c[t+3]|=o:c[t+2]|=o:a?c[t+1]|=o:c[t]|=o}(t,e,n)}function lr(t,e,n){if(n&yt.Optional)return t;Dn(e,"NodeInjector")}function hr(t,e,n,r){if(n&yt.Optional&&void 0===r&&(r=null),0==(n&(yt.Self|yt.Host))){const i=t[9],o=vt(void 0);try{return i?i.get(e,r,n&yt.Optional):wt(e,r,n&yt.Optional)}finally{vt(o)}}return lr(r,e,n)}function dr(t,e,n,r=yt.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(nt)?t[nt]:void 0;return"number"==typeof e?e>=0?255&e:pr:e}(n);if("function"==typeof o){if(!Ie(e,t,r))return r&yt.Host?lr(i,n,r):hr(e,n,r,i);try{const t=o();if(null!=t||r&yt.Optional)return t;Dn(n)}finally{xe()}}else if("number"==typeof o){let i=null,s=ar(t,e),a=Kn,c=r&yt.Host?e[16][6]:null;for((-1===s||r&yt.SkipSelf)&&(a=-1===s?cr(t,e):e[s+8],a!==Kn&&vr(r,!1)?(i=e[1],s=tr(a),e=er(a,e)):s=-1);-1!==s;){const t=e[1];if(br(o,s,t.data)){const t=gr(s,e,n,i,r,c);if(t!==fr)return t}a=e[s+8],a!==Kn&&vr(r,e[1].data[s+8]===c)&&br(o,s,e)?(i=t,s=tr(a),e=er(a,e)):s=-1}}}return hr(e,n,r,i)}const fr={};function pr(){return new wr(ce(),oe())}function gr(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],c=mr(a,s,n,null==r?Ft(a)&&nr:r!=s&&0!=(3&a.type),i&yt.Host&&o===a);return null!==c?yr(e,s,c,a):fr}function mr(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,c=t.directiveStart,u=o>>20,l=i?a+u:t.directiveEnd;for(let h=r?a:a+u;h<l;h++){const t=s[h];if(h<c&&n===t||h>=c&&t.type===n)return h}if(i){const t=s[c];if(t&&Vt(t)&&t.type===n)return c}return null}function yr(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof $n){const s=i;s.resolving&&function(t,e){throw new Mn("200","Circular dependency in DI detected for "+t)}(mt(o[n]));const a=rr(s.canSeeViewProviders);s.resolving=!0;const c=s.injectImpl?vt(s.injectImpl):null;Ie(t,r,yt.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=jn(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==c&&vt(c),rr(a),s.resolving=!1,xe()}}return i}function br(t,e,n){const r=64&t,i=32&t;let o;return o=128&t?r?i?n[e+7]:n[e+6]:i?n[e+5]:n[e+4]:r?i?n[e+3]:n[e+2]:i?n[e+1]:n[e],!!(o&1<<t)}function vr(t,e){return!(t&yt.Self||t&yt.Host&&e)}class wr{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return dr(this._tNode,this._lView,t,void 0,e)}}function _r(t){return t.ngDebugContext}function Sr(t){return t.ngOriginalError}function Cr(t,...e){t.error(...e)}class Ir{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||Cr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?_r(t)?_r(t):this._findContext(Sr(t)):null}_findOriginalError(t){let e=Sr(t);for(;e&&Sr(e);)e=Sr(e);return e}}function Er(t){let e,n=Xt(t);if(Array.isArray(n)){const r=function(t,e){const n=t[1].components;if(n)for(let r=0;r<n.length;r++){const i=n[r];if(Gt(i,t)[8]===e)return i}else if(Gt(Dt,t)[8]===e)return Dt;return-1}(n,t);e=Gt(r,n);const i=function(t,e,n){return{lView:t,nodeIndex:e,native:n,component:void 0,directives:void 0,localRefs:void 0}}(n,r,e[0]);i.component=t,Tr(t,i),Tr(i.native,i)}else e=Gt(n.nodeIndex,n.lView);return e}function Tr(t,e){t.__ngContext__=e}const kr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(P))();function Or(t){return{name:"window",target:t.ownerDocument.defaultView}}function xr(t){return t instanceof Function?t():t}var Ar=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function Nr(t,e){return(void 0)(t,e)}function Mr(t){const e=t[3];return jt(e)?e[3]:e}function Dr(t){return Rr(t[13])}function Pr(t){return Rr(t[4])}function Rr(t){for(;null!==t&&!jt(t);)t=t[4];return t}function jr(t,e,n,r,i){if(null!=r){let o,s=!1;jt(r)?o=r:Rt(r)&&(s=!0,r=r[0]);const a=Wt(r);0===t&&null!==n?null==i?Wr(e,n,a):zr(e,n,a,i||null,!0):1===t&&null!==n?zr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Kr(t,e);r&&function(t,e,n,r){Bt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==Wt(n)&&jr(e,t,r,o,i);for(let s=Pt;s<n.length;s++){const i=n[s];Jr(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Lr(t,e,n){return Bt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Fr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,ne(i,-1)),n.splice(r,1)}function Ur(t,e){if(t.length<=Pt)return;const n=Pt+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Fr(o,r),e>0&&(t[n-1][4]=r[4]);const s=B(t,Pt+e);Jr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Vr(t,e){if(!(256&e[2])){const n=e[11];Bt(n)&&n.destroyNode&&Jr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return qr(t[1],t);for(;e;){let n=null;if(Rt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)Rt(e)&&qr(e[1],e),e=e[3];null===e&&(e=t),Rt(e)&&qr(e[1],e),n=e&&e[4]}e=n}}(e)}}function qr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof $n)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup;if(null!==n){const t=e[7];for(let r=0;r<n.length-1;r+=2)if("string"==typeof n[r]){const i=n[r+1],o="function"==typeof i?i(e):Wt(e[i]),s=t[n[r+2]],a=n[r+3];"boolean"==typeof a?o.removeEventListener(n[r],s,a):a>=0?t[a]():t[-a].unsubscribe(),r+=2}else n[r].call(t[n[r+1]]);e[7]=null}}(t,e),1===e[1].type&&Bt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&jt(e[3])){n!==e[3]&&Fr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Br(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===$.None||e===$.Emulated)return null}return Kt(r,n)}(t,e.parent,n)}function zr(t,e,n,r,i){Bt(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Wr(t,e,n){Bt(t)?t.appendChild(e,n):e.appendChild(n)}function Hr(t,e,n,r,i){null!==r?zr(t,e,n,r,i):Wr(t,e,n)}function Kr(t,e){return Bt(t)?t.parentNode(e):e.parentNode}function $r(t,e,n){return Qr(t,e,n)}let Qr=function(t,e,n){return 40&t.type?Kt(t,n):null};function Gr(t,e,n,r){const i=Br(t,r,e),o=e[11],s=$r(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Hr(o,i,n[a],s,!1);else Hr(o,i,n,s,!1)}function Xr(t,e){if(null!==e){const n=e.type;if(3&n)return Kt(e,t);if(4&n)return Yr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Xr(t,n);{const n=t[e.index];return jt(n)?Yr(-1,n):Wt(n)}}if(32&n)return Nr(e,t)()||Wt(t[e.index]);{const n=t[16],r=n[6],i=Mr(n),o=r.projection[e.projection];return null!=o?Xr(i,o):Xr(t,e.next)}}return null}function Yr(t,e){const n=Pt+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Xr(t,r)}return e[7]}function Zr(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],c=n.type;if(s&&0===e&&(a&&Tr(Wt(a),r),n.flags|=4),64!=(64&n.flags))if(8&c)Zr(t,e,n.child,r,i,o,!1),jr(e,t,i,a,o);else if(32&c){const s=Nr(n,r);let c;for(;c=s();)jr(e,t,i,c,o);jr(e,t,i,a,o)}else 16&c?ti(t,e,r,n,i,o):jr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Jr(t,e,n,r,i,o){Zr(n,r,t.firstChild,e,i,o,!1)}function ti(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let c=0;c<a.length;c++)jr(e,t,i,a[c],o);else Zr(t,e,a,s[3],i,o,!0)}function ei(t,e,n){Bt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function ni(t,e,n){Bt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function ri(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const ii="ng-template";function oi(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==ri(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function si(t){return 4===t.type&&t.value!==ii}function ai(t,e,n){return e===(4!==t.type||n?t.value:ii)}function ci(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Gn(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!s)if(4&r){if(r=2|1&r,""!==c&&!ai(t,c,n)||""===c&&1===e.length){if(ui(r))return!1;s=!0}}else{const u=8&r?c:e[++a];if(8&r&&null!==t.attrs){if(!oi(t.attrs,u,n)){if(ui(r))return!1;s=!0}continue}const l=li(8&r?"class":c,i,si(t),n);if(-1===l){if(ui(r))return!1;s=!0;continue}if(""!==u){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==ri(e,u,0)||2&r&&u!==t){if(ui(r))return!1;s=!0}}}}else{if(!s&&!ui(r)&&!ui(c))return!1;if(s&&ui(c))continue;s=!1,r=c|1&r}}return ui(r)||s}function ui(t){return 0==(1&t)}function li(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function hi(t,e,n=!1){for(let r=0;r<e.length;r++)if(ci(t,e[r],n))return!0;return!1}function di(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function fi(t,e){return t?":not("+e.trim()+")":e}function pi(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||ui(s)||(e+=fi(o,i),i=""),r=s,o=o||!ui(r);n++}return""!==i&&(e+=fi(o,i)),e}const gi={};function mi(t){yi(se(),oe(),Ne()+t,fe())}function yi(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&qn(e,r,n)}else{const r=t.preOrderHooks;null!==r&&Bn(e,r,0,n)}Me(n)}function bi(t,e){return t<<17|e<<2}function vi(t){return t>>17&32767}function wi(t){return 2|t}function _i(t){return(131068&t)>>2}function Si(t,e){return-131069&t|e<<2}function Ci(t){return 1|t}const Ii=(()=>Promise.resolve(null))();function Ei(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];Se(i),n.contentQueries(2,e[o],o)}}}function Ti(t,e,n,r,i,o,s,a,c,u){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,ee(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=c||t&&t[12]||null,l[9]=u||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function ki(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=ue(),s=he(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),re.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=re.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return le(o,!0),o}function Oi(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function xi(t,e,n){Ee(e);try{const r=t.viewQuery;null!==r&&so(1,r,n);const i=t.template;null!==i&&Mi(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Ei(t,e),t.staticViewQueries&&so(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)to(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,Ae()}}function Ai(t,e,n,r){const i=e[2];if(256==(256&i))return;Ee(e);const o=fe();try{ee(e),re.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Mi(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&qn(e,n,null)}else{const n=t.preOrderHooks;null!==n&&Bn(e,n,0,null),zn(e,0)}if(function(t){for(let e=Dr(t);null!==e;e=Pr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&ne(r,1),n[2]|=1024}}}(e),function(t){for(let e=Dr(t);null!==e;e=Pr(e))for(let t=Pt;t<e.length;t++){const n=e[t],r=n[1];Jt(n)&&Ai(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&Ei(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&qn(e,n)}else{const n=t.contentHooks;null!==n&&Bn(e,n,1),zn(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)Me(~r);else{const i=r,o=n[++t],s=n[++t];ve(o,i),s(2,e[i])}}}finally{Me(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Zi(t,e[n])}(e,a);const c=t.viewQuery;if(null!==c&&so(2,c,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&qn(e,n)}else{const n=t.viewHooks;null!==n&&Bn(e,n,2),zn(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,ne(e[3],-1))}finally{Ae()}}function Ni(t,e,n,r){const i=e[10],o=!fe(),s=Zt(e);try{o&&!s&&i.begin&&i.begin(),s&&xi(t,e,r),Ai(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function Mi(t,e,n,r,i){const o=Ne();try{Me(-1),2&r&&e.length>Dt&&yi(t,e,Dt,fe()),n(r,i)}finally{Me(o)}}function Di(t,e,n){if(Lt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function Pi(t,e,n){ie()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||or(n,e),Tr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=Vt(r);o&&Qi(e,n,r);const c=yr(e,t,a,n);Tr(c,e),null!==s&&Gi(0,a-i,c,r,0,s),o&&(Gt(n.index,e)[8]=c)}}(t,e,n,Kt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=re.lFrame.currentDirectiveIndex;try{Me(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];we(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||zi(r,i)}}finally{Me(-1),we(s)}}(t,e,n))}function Ri(t,e,n=Kt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function ji(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Li(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Li(t,e,n,r,i,o,s,a,c,u){const l=Dt+r,h=l+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:gi);return n}(l,h),f="function"==typeof u?u():u;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:f,incompleteFirstPass:!1}}function Fi(t,e,n,r){const i=co(e);i.push(n),t.firstCreatePass&&function(t){return t.cleanup||(t.cleanup=[])}(t).push(r,i.length-1)}function Ui(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Vi(t,e,n,r,i,o,s,a){const c=Kt(e,n);let u,l=e.inputs;var h;!a&&null!=l&&(u=l[r])?(lo(t,n,u,r,i),Ft(e)&&function(t,e){const n=Gt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,Bt(o)?o.setProperty(c,r,i):Xn(r)||(c.setProperty?c.setProperty(r,i):c[r]=i))}function qi(t,e,n,r){let i=!1;if(ie()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];hi(n,s.selectors,!1)&&(i||(i=[]),ur(or(n,e),t,s.type),Vt(s)?(Wi(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,Ki(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,c=Oi(t,e,o.length,null);for(let i=0;i<o.length;i++){const u=o[i];n.mergedAttrs=Yn(n.mergedAttrs,u.hostAttrs),$i(t,n,e,c,u),Hi(c,u,s),null!==u.contentQueries&&(n.flags|=8),null===u.hostBindings&&null===u.hostAttrs&&0===u.hostVars||(n.flags|=128);const l=u.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),c++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let c=e.directiveStart;c<n;c++){const t=r[c],n=t.inputs,u=null===i||si(e)?null:Xi(n,i);o.push(u),s=Ui(n,c,s),a=Ui(t.outputs,c,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new Mn("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Yn(n.mergedAttrs,n.attrs),i}function Bi(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function zi(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Wi(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Hi(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Vt(e)&&(n[""]=t)}}function Ki(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function $i(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=Nn(i.type)),s=new $n(o,Vt(i),null);t.blueprint[r]=s,n[r]=s,Bi(t,e,0,r,Oi(t,n,i.hostVars,gi),i)}function Qi(t,e,n){const r=Kt(e,t),i=ji(n),o=t[10],s=eo(t,Ti(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Gi(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function Xi(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Yi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Zi(t,e){const n=Gt(e,t);if(Jt(n)){const t=n[1];80&n[2]?Ai(t,n,t.template,n[8]):n[5]>0&&Ji(n)}}function Ji(t){for(let n=Dr(t);null!==n;n=Pr(n))for(let t=Pt;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];Ai(t,e,t.template,e[8])}else e[5]>0&&Ji(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Gt(e[n],t);Jt(r)&&r[5]>0&&Ji(r)}}function to(t,e){const n=Gt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),xi(r,n,n[8])}function eo(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function no(t){for(;t;){t[2]|=64;const e=Mr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function ro(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Yt(n),i=r[1];Ni(i,r,i.template,n)}}function io(t,e,n){const r=e[10];r.begin&&r.begin();try{Ai(t,e,t.template,n)}catch(i){throw uo(e,i),i}finally{r.end&&r.end()}}function oo(t){ro(t[8])}function so(t,e,n){Se(0),e(t,n)}const ao=Ii;function co(t){return t[7]||(t[7]=[])}function uo(t,e){const n=t[9],r=n?n.get(Ir,null):null;r&&r.handleError(e)}function lo(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],c=e[s],u=t.data[s];null!==u.setInput?u.setInput(c,i,r,a):c[a]=i}}function ho(t,e,n){const r=Ht(e,t);!function(t,e,n){Bt(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}function fo(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=m(i,t):2==o&&(r=m(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function po(t){const e=Er(t);io(e[1],e,t)}function go(t){!function(t,e){if(0===t.flags&&t.clean==Ii){let e;t.flags|=1,t.clean=new Promise(t=>e=t),t.scheduler(()=>{if(1&t.flags&&(t.flags&=-2,ro(t)),2&t.flags){t.flags&=-3;const e=t.playerHandler;e&&e.flushPlayers()}t.clean=Ii,e(null)})}}(no(Er(t))[8])}const mo=new k("INJECTOR",-1);class yo{get(t,e=_t){if(e===_t){const e=new Error(`NullInjectorError: No provider for ${g(t)}!`);throw e.name="NullInjectorError",e}return e}}const bo=new k("Set Injector scope."),vo={},wo={},_o=[];let So=void 0;function Co(){return void 0===So&&(So=new yo),So}function Io(t,e=null,n=null,r){return new Eo(t,n,e||Co(),r)}class Eo{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&V(e,n=>this.processProvider(n,t,e)),V([t],t=>this.processInjectorType(t,[],i)),this.records.set(mo,ko(void 0,this));const o=this.records.get(bo);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:g(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=_t,n=yt.Default){this.assertNotDestroyed();const r=Tt(this);try{if(!(n&yt.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof k)&&w(t);e=n&&this.injectableDefInScope(n)?ko(To(t),vo):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&yt.Self?Co():this.parent).get(t,e=n&yt.Optional&&e===_t?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(g(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[Ct]&&i.unshift(e[Ct]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=g(e);if(Array.isArray(e))i=e.map(g).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):g(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(St,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{Tt(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(g(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=L(t)))return!1;let r=S(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=S(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{V(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];V(r,t=>this.processProvider(t,n,r||_o))}}this.injectorDefTypes.add(o),this.records.set(o,ko(r.factory,vo));const a=r.providers;if(null!=a&&!s){const e=t;V(a,t=>this.processProvider(t,e,a))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=xo(t=L(t))?t:L(t&&t.provide);const i=function(t,e,n){return Oo(t)?ko(void 0,t.useValue):ko(function(t,e,n){let r=void 0;if(xo(t)){const e=L(t);return Nn(e)||To(e)}if(Oo(t))r=()=>L(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...xt(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>Ot(L(t.useExisting));else{const e=L(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return Nn(e)||To(e);r=()=>new e(...xt(t.deps))}var i;return r}(t),vo)}(t);if(xo(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=ko(void 0,vo,!0),e.factory=()=>xt(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===vo&&(e.value=wo,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function To(t){const e=w(t),n=null!==e?e.factory:Nn(t);if(null!==n)return n;const r=S(t);if(null!==r)return r.factory;if(t instanceof k)throw new Error(`Token ${g(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=z(e,"?");throw new Error(`Can't resolve all parameters for ${g(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[C]||t[E]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function ko(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Oo(t){return null!==t&&"object"==typeof t&&It in t}function xo(t){return"function"==typeof t}const Ao=function(t,e,n){return function(t,e=null,n=null,r){const i=Io(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let No=(()=>{class t{static create(t,e){return Array.isArray(t)?Ao(t,e,""):Ao(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=_t,t.NULL=new yo,t.\u0275prov=b({token:t,providedIn:"any",factory:()=>Ot(mo)}),t.__NG_ELEMENT_ID__=-1,t})();function Mo(t,e){Vn(Yt(t)[1],ce())}let Do=null;function Po(){if(!Do){const t=P.Symbol;if(t&&t.iterator)Do=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Do=n)}}}return Do}class Ro{constructor(t){this.wrapped=t}static wrap(t){return new Ro(t)}static unwrap(t){return Ro.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Ro}}function jo(t){return!!Lo(t)&&(Array.isArray(t)||!(t instanceof Map)&&Po()in t)}function Lo(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Fo(t,e,n){return t[e]=n}function Uo(t,e){return t[e]}function Vo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function qo(t,e,n,r){const i=Vo(t,e,n);return Vo(t,e+1,r)||i}function Bo(t,e,n,r){const i=oe();return Vo(i,ye(),e)&&(se(),function(t,e,n,r,i,o){const s=Kt(t,e);!function(t,e,n,r,i,o,s){if(null==o)Bt(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?gt(o):s(o,r||"",i);Bt(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(De(),i,t,e,n,r)),Bo}function zo(t,e,n,r){return Vo(t,ye(),n)?e+gt(n)+r:gi}function Wo(t,e,n,r,i,o,s,a){const c=oe(),u=se(),l=t+Dt,h=u.firstCreatePass?function(t,e,n,r,i,o,s,a,c){const u=e.consts,l=ki(e,t,4,s||null,te(u,a));qi(e,n,l,te(u,c)),Vn(e,l);const h=l.tViews=Li(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,u,c,e,n,r,i,o,s):u.data[l];le(h,!1);const d=c[11].createComment("");Gr(u,c,d,h),Tr(d,c),eo(c,c[l]=Yi(d,c,d,h)),Ut(h)&&Pi(u,c,h),null!=s&&Ri(c,h,a)}function Ho(t){return Qt(re.lFrame.contextLView,Dt+t)}function Ko(t,e=yt.Default){const n=oe();return null===n?Ot(t,e):dr(ce(),n,L(t),e)}function $o(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Gn(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(ce(),t)}function Qo(t,e,n){const r=oe();return Vo(r,ye(),e)&&Vi(se(),De(),r,t,e,r[11],n,!1),Qo}function Go(t,e,n,r,i){const o=i?"class":"style";lo(t,n,e.inputs[o],o,r)}function Xo(t,e,n,r){const i=oe(),o=se(),s=Dt+t,a=i[11],c=i[s]=Lr(a,e,re.lFrame.currentNamespace),u=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,c=ki(e,t,2,i,te(a,o));return qi(e,n,c,te(a,s)),null!==c.attrs&&fo(c,c.attrs,!1),null!==c.mergedAttrs&&fo(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(s,o,i,0,e,n,r):o.data[s];le(u,!0);const l=u.mergedAttrs;null!==l&&Qn(a,c,l);const h=u.classes;null!==h&&ni(a,c,h);const d=u.styles;null!==d&&ei(a,c,d),64!=(64&u.flags)&&Gr(o,i,c,u),0===re.lFrame.elementDepthCount&&Tr(c,i),re.lFrame.elementDepthCount++,Ut(u)&&(Pi(o,i,u),Di(o,u,i)),null!==r&&Ri(i,u)}function Yo(){let t=ce();he()?de():(t=t.parent,le(t,!1));const e=t;re.lFrame.elementDepthCount--;const n=se();n.firstCreatePass&&(Vn(n,t),Lt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Go(n,e,oe(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Go(n,e,oe(),e.stylesWithoutHost,!1)}function Zo(t,e,n,r){Xo(t,e,n,r),Yo()}function Jo(t,e,n){const r=oe(),i=se(),o=t+Dt,s=i.firstCreatePass?function(t,e,n,r,i){const o=e.consts,s=te(o,r),a=ki(e,t,8,"ng-container",s);return null!==s&&fo(a,s,!0),qi(e,n,a,te(o,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(o,i,r,e,n):i.data[o];le(s,!0);const a=r[o]=r[11].createComment("");Gr(i,r,a,s),Tr(a,r),Ut(s)&&(Pi(i,r,s),Di(i,s,r)),null!=n&&Ri(r,s)}function ts(){let t=ce();const e=se();he()?de():(t=t.parent,le(t,!1)),e.firstCreatePass&&(Vn(e,t),Lt(t)&&e.queries.elementEnd(t))}function es(){return oe()}function ns(t){return!!t&&"function"==typeof t.then}function rs(t){return!!t&&"function"==typeof t.subscribe}function is(t,e,n=!1,r){const i=oe(),o=se(),s=ce();return function(t,e,n,r,i,o,s=!1,a){const c=Ut(r),u=t.firstCreatePass&&(t.cleanup||(t.cleanup=[])),l=co(e);let h=!0;if(3&r.type){const d=Kt(r,e),f=a?a(d):Q,p=f.target||d,g=l.length,m=a?t=>a(Wt(t[r.index])).target:r.index;if(Bt(n)){let s=null;if(!a&&c&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=ss(r,e,o,!1);const t=n.listen(f.name||p,i,o);l.push(o,t),u&&u.push(i,m,g,g+1)}}else o=ss(r,e,o,!0),p.addEventListener(i,o,s),l.push(o),u&&u.push(i,m,g,s)}const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(o),s=l.length;l.push(o,t),u&&u.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),is}function os(t,e,n){try{return!1!==e(n)}catch(r){return uo(t,r),!1}}function ss(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?Gt(t.index,e):e;0==(32&e[2])&&no(s);let a=os(e,n,o),c=i.__ngNextListenerFn__;for(;c;)a=os(e,c,o)&&a,c=c.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function as(t=1){return function(t){return(re.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,re.lFrame.contextLView))[8]}(t)}function cs(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?hi(t,o,!0):di(r,o))return i}else n=i}return n}function us(t){const e=oe()[16][6];if(!e.projection){const n=e.projection=z(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?cs(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function ls(t,e=0,n){const r=oe(),i=se(),o=ki(i,Dt+t,16,null,n||null);null===o.projection&&(o.projection=e),de(),64!=(64&o.flags)&&function(t,e,n){ti(e[11],0,e,n,Br(t,n,e),$r(n.parent||e[6],n,e))}(i,r,o)}function hs(t,e,n,r,i){const o=oe(),s=zo(o,e,n,r);return s!==gi&&Vi(se(),De(),o,t,s,o[11],i,!1),hs}const ds=[];function fs(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?vi(o):_i(o),c=!1;for(;0!==a&&(!1===c||s);){const n=t[a+1];ps(t[a],e)&&(c=!0,t[a+1]=r?Ci(n):wi(n)),a=r?vi(n):_i(n)}c&&(t[n+1]=r?wi(o):Ci(o))}function ps(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&K(t,e)>=0}const gs={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ms(t){return t.substring(gs.key,gs.keyEnd)}function ys(t,e){const n=gs.textEnd;return n===e?-1:(e=gs.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,gs.key=e,n),bs(t,e,n))}function bs(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function vs(t,e,n){return Cs(t,e,n,!1),vs}function ws(t,e){return Cs(t,e,null,!0),ws}function _s(t){Is(W,Ss,t,!0)}function Ss(t,e){for(let n=function(t){return function(t){gs.key=0,gs.keyEnd=0,gs.value=0,gs.valueEnd=0,gs.textEnd=t.length}(t),ys(t,bs(t,0,gs.textEnd))}(e);n>=0;n=ys(e,n))W(t,ms(e),!0)}function Cs(t,e,n,r){const i=oe(),o=se(),s=be(2);o.firstUpdatePass&&Ts(o,t,s,r),e!==gi&&Vo(i,s,e)&&xs(o,o.data[Ne()],i,i[11],t,i[s+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=g(We(t)))),t}(e,n),r,s)}function Is(t,e,n,r){const i=se(),o=be(2);i.firstUpdatePass&&Ts(i,null,o,r);const s=oe();if(n!==gi&&Vo(s,o,n)){const a=i.data[Ne()];if(Ms(a,r)&&!Es(i,o)){let t=r?a.classesWithoutHost:a.stylesWithoutHost;null!==t&&(n=m(t,n||"")),Go(i,a,s,n,r)}else!function(t,e,n,r,i,o,s,a){i===gi&&(i=ds);let c=0,u=0,l=0<i.length?i[0]:null,h=0<o.length?o[0]:null;for(;null!==l||null!==h;){const d=c<i.length?i[c+1]:void 0,f=u<o.length?o[u+1]:void 0;let p=null,g=void 0;l===h?(c+=2,u+=2,d!==f&&(p=h,g=f)):null===h||null!==l&&l<h?(c+=2,p=l):(u+=2,p=h,g=f),null!==p&&xs(t,e,n,r,p,g,s,a),l=c<i.length?i[c]:null,h=u<o.length?o[u]:null}}(i,a,s,s[11],s[o+1],s[o+1]=function(t,e,n){if(null==n||""===n)return ds;const r=[],i=We(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(t,e,n),r,o)}}function Es(t,e){return e>=t.expandoStartIndex}function Ts(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[Ne()],s=Es(t,n);Ms(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=re.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Os(n=ks(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=ks(i,t,e,n,r),null===o){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==_i(r))return t[vi(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=ks(null,t,e,n[1],r),n=Os(n,e.attrs,r),function(t,e,n,r){t[vi(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else o=function(t,e,n){let r=void 0;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Os(r,t[o].hostAttrs,n);return Os(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=vi(s),c=_i(s);t[r]=n;let u,l=!1;if(Array.isArray(n)){const t=n;u=t[1],(null===u||K(t,u)>0)&&(l=!0)}else u=n;if(i)if(0!==c){const e=vi(t[a+1]);t[r+1]=bi(e,a),0!==e&&(t[e+1]=Si(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=bi(a,0),0!==a&&(t[a+1]=Si(t[a+1],r)),a=r;else t[r+1]=bi(c,0),0===a?a=r:t[c+1]=Si(t[c+1],r),c=r;l&&(t[r+1]=wi(t[r+1])),fs(t,u,r,!0),fs(t,u,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&K(o,e)>=0&&(n[r+1]=Ci(n[r+1]))}(e,u,t,r,o),s=bi(a,c),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}function ks(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Os(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Os(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),W(t,s,!!n||e[++o]))}return void 0===t?null:t}function xs(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const c=t.data,u=c[a+1];Ns(1==(1&u)?As(c,e,n,i,_i(u),s):void 0)||(Ns(o)||2==(2&u)&&(o=As(c,null,n,i,a,s)),function(t,e,n,r,i){const o=Bt(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:Ar.DashCase;if(null==i)o?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const s="string"==typeof i&&i.endsWith("!important");s&&(i=i.slice(0,-10),e|=Ar.Important),o?t.setStyle(n,r,i,e):n.style.setProperty(r,i,s?"important":"")}}}(r,s,Ht(Ne(),n),i,o))}function As(t,e,n,r,i,o){const s=null===e;let a=void 0;for(;i>0;){const e=t[i],o=Array.isArray(e),c=o?e[1]:e,u=null===c;let l=n[i+1];l===gi&&(l=u?ds:void 0);let h=u?H(l,r):c===r?l:void 0;if(o&&!Ns(h)&&(h=H(e,r)),Ns(h)&&(a=h,s))return a;const d=t[i+1];i=s?vi(d):_i(d)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=H(t,r))}return a}function Ns(t){return void 0!==t}function Ms(t,e){return 0!=(t.flags&(e?16:32))}function Ds(t,e=""){const n=oe(),r=se(),i=t+Dt,o=r.firstCreatePass?ki(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return Bt(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Gr(r,n,s,o),le(o,!1)}function Ps(t){return Rs("",t,""),Ps}function Rs(t,e,n){const r=oe(),i=zo(r,t,e,n);return i!==gi&&ho(r,Ne(),i),Rs}function js(t,e,n,r,i){const o=oe(),s=function(t,e,n,r,i,o){const s=qo(t,me(),n,i);return be(2),s?e+gt(n)+r+gt(i)+o:gi}(o,t,e,n,r,i);return s!==gi&&ho(o,Ne(),s),js}function Ls(t,e,n){Is(W,Ss,zo(oe(),t,e,n),!0)}function Fs(t,e,n){const r=oe();return Vo(r,ye(),e)&&Vi(se(),De(),r,t,e,r[11],n,!0),Fs}const Us=void 0;var Vs=["en",[["a","p"],["AM","PM"],Us],[["AM","PM"],Us,Us],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Us,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Us,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Us,"{1} 'at' {0}",Us],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let qs={};function Bs(t,e,n){"string"!=typeof e&&(n=e,e=t[$s.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),qs[e]=t,n&&(qs[e][$s.ExtraData]=n)}function zs(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Ks(e);if(n)return n;const r=e.split("-")[0];if(n=Ks(r),n)return n;if("en"===r)return Vs;throw new Error(`Missing locale data for the locale "${t}".`)}function Ws(t){return zs(t)[$s.CurrencyCode]||null}function Hs(t){return zs(t)[$s.PluralCase]}function Ks(t){return t in qs||(qs[t]=P.ng&&P.ng.common&&P.ng.common.locales&&P.ng.common.locales[t]),qs[t]}var $s=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const Qs="en-US";let Gs=Qs;function Xs(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error("ASSERTION ERROR: "+t+` [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Gs=t.toLowerCase().replace(/_/g,"-"))}class Ys{}class Zs{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${g(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Js=(()=>{class t{}return t.NULL=new Zs,t})();function ta(...t){}function ea(t,e){return new ra(Kt(t,e))}const na=function(){return ea(ce(),oe())};let ra=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=na,t})();class ia{}let oa=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>sa(),t})();const sa=function(){const t=oe(),e=Gt(ce().index,t);return function(t){return t[11]}(Rt(e)?e:t)};let aa=(()=>{class t{}return t.\u0275prov=b({token:t,providedIn:"root",factory:()=>null}),t})();class ca{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const ua=new ca("11.0.2");class la{constructor(){}supports(t){return jo(t)}create(t){return new da(t)}}const ha=(t,e)=>e;class da{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||ha}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<ma(n,r,i)?e:n,s=ma(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!jo(t))throw new Error(`Error trying to diff '${g(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Po()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new fa(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new ga),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ga),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class fa{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class pa{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class ga{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new pa,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ma(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class ya{constructor(){}supports(t){return t instanceof Map||Lo(t)}create(){return new ba}}class ba{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Lo(t)))throw new Error(`Error trying to diff '${g(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new va(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class va{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let wa=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new p,new d]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=b({token:t,providedIn:"root",factory:()=>new t([new la])}),t})(),_a=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new p,new d]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=b({token:t,providedIn:"root",factory:()=>new t([new ya])}),t})();function Sa(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(Wt(o)),jt(o))for(let t=Pt;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&Sa(e[1],e,n,r)}const s=n.type;if(8&s)Sa(t,e,n.child,r);else if(32&s){const t=Nr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=e[16],i=t[6].projection[n.projection];if(Array.isArray(i))r.push(...i);else{const e=Mr(t);Sa(e[1],e,i,r,!0)}}n=i?n.projectionNext:n.next}return r}class Ca{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._viewContainerRef=null}get rootNodes(){const t=this._lView,e=t[1];return Sa(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const t=this._viewContainerRef.indexOf(this);t>-1&&this._viewContainerRef.detach(t),this._viewContainerRef=null}Vr(this._lView[1],this._lView)}onDestroy(t){Fi(this._lView[1],this._lView,null,t)}markForCheck(){no(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){io(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){pe(!0);try{io(t,e,n)}finally{pe(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}detachFromAppRef(){var t;this._appRef=null,Jr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Ia extends Ca{constructor(t){super(t),this._view=t}detectChanges(){oo(this._view)}checkNoChanges(){!function(t){pe(!0);try{oo(t)}finally{pe(!1)}}(this._view)}get context(){return null}}const Ea=ka;let Ta=(()=>{class t{}return t.__NG_ELEMENT_ID__=Ea,t.__ChangeDetectorRef__=!0,t})();function ka(t=!1){return function(t,e,n){if(!n&&Ft(t)){const n=Gt(t.index,e);return new Ca(n,n)}return 47&t.type?new Ca(e[16],e):null}(ce(),oe(),t)}const Oa=[new ya],xa=new wa([new la]),Aa=new _a(Oa),Na=function(){return Ra(ce(),oe())};let Ma=(()=>{class t{}return t.__NG_ELEMENT_ID__=Na,t})();const Da=Ma,Pa=class extends Da{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Ti(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),xi(e,n,t),new Ca(n)}};function Ra(t,e){return 4&t.type?new Pa(e,t,ea(t,e)):null}class ja{}class La{}const Fa=function(){return Wa(ce(),oe())};let Ua=(()=>{class t{}return t.__NG_ELEMENT_ID__=Fa,t})();const Va=Ua,qa=class extends Va{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return ea(this._hostTNode,this._hostLView)}get injector(){return new wr(this._hostTNode,this._hostLView)}get parentInjector(){const t=cr(this._hostTNode,this._hostLView);if(Jn(t)){const e=er(t,this._hostLView),n=tr(t);return new wr(e[1].data[n+8],e)}return new wr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=Ba(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-Pt}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(ja,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(jt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new qa(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=Pt+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-Pt?(e[4]=n[i],q(n,Pt+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=Yr(i,o),a=n[11],c=Kr(a,o[7]);return null!==c&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Jr(t,r,n,1,i,o)}(r,o[6],a,n,c,s),t.attachToViewContainerRef(this),q(za(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=Ba(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Ur(this._lContainer,e);n&&(B(za(this._lContainer),e),Vr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Ur(this._lContainer,e);return n&&null!=B(za(this._lContainer),e)?new Ca(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function Ba(t){return t[8]}function za(t){return t[8]||(t[8]=[])}function Wa(t,e){let n;const r=e[t.index];if(jt(r))n=r;else{let i;if(8&t.type)i=Wt(r);else{const n=e[11];i=n.createComment("");const r=Kt(t,e);zr(n,Kr(n,r),i,function(t,e){return Bt(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Yi(r,e,i,t),eo(e,n)}return new qa(n,t,e)}const Ha={};class Ka extends Js{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=ft(t);return new Ga(e,this.ngModule)}}function $a(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const Qa=new k("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>kr});class Ga extends Ys{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(pi).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return $a(this.componentDef.inputs)}get outputs(){return $a(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,Ha,i);return o!==Ha||r===Ha?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(ia,zt),s=i.get(aa,null),a=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=n?function(t,e,n){if(Bt(t))return t.selectRootElement(e,n===$.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Lr(o.createRenderer(null,this.componentDef),c,function(t){const e=t.toLowerCase();return"svg"===e?qt:"math"===e?"http://www.w3.org/1998/MathML/":null}(c)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:kr,clean:ao,playerHandler:null,flags:0},d=Li(0,null,null,1,0,null,null,null,null,null),f=Ti(null,d,h,l,null,null,o,a,s,i);let p,g;Ee(f);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=ki(s,20,2,"#host",null),c=a.mergedAttrs=e.hostAttrs;null!==c&&(fo(a,c,!0),null!==t&&(Qn(i,t,c),null!==a.classes&&ni(i,t,a.classes),null!==a.styles&&ei(i,t,a.styles)));const u=r.createRenderer(t,e),l=Ti(n,ji(e),null,e.onPush?64:16,n[20],a,r,u,null,null);return s.firstCreatePass&&(ur(or(a,n),s,e.type),Wi(s,a),Ki(a,n.length,1)),eo(n,l),n[20]=l}(u,this.componentDef,f,o,a);if(u)if(n)Qn(a,u,["ng-version",ua.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!ui(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Qn(a,u,t),e&&e.length>0&&ni(a,u,e.join(" "))}if(g=$t(d,Dt),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=ce();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),$i(t,r,e,Oi(t,e,1,null),n));const i=yr(e,t,r.directiveStart,r);Tr(i,e);const o=Kt(r,e);return o&&Tr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=ce();e.contentQueries(1,s,t.directiveStart)}const a=ce();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(Me(a.index),Bi(n[1],a,0,a.directiveStart,a.directiveEnd,e),zi(e,s)),s}(t,this.componentDef,f,h,[Mo]),xi(d,f,null)}finally{Ae()}return new Xa(this.componentType,p,ea(g,f),f,g)}}class Xa extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.destroyCbs=[],this.instance=e,this.hostView=this.changeDetectorRef=new Ia(r),this.componentType=t}get injector(){return new wr(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(t=>t()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(t){this.destroyCbs&&this.destroyCbs.push(t)}}const Ya=new Map;class Za extends ja{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ka(this);const n=pt(t),r=t[tt]||null;r&&Xs(r),this._bootstrapComponents=xr(n.bootstrap),this._r3Injector=Io(t,e,[{provide:ja,useValue:this},{provide:Js,useValue:this.componentFactoryResolver}],g(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=No.THROW_IF_NOT_FOUND,n=yt.Default){return t===No||t===ja||t===mo?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Ja extends La{constructor(t){super(),this.moduleType=t,null!==pt(t)&&function(t){const e=new Set;!function t(n){const r=pt(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${g(e)} vs ${g(e.name)}`)}(i,Ya.get(i),n),Ya.set(i,n));const o=xr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new Za(this.moduleType,t)}}function tc(t,e,n){const r=ge()+t,i=oe();return i[r]===gi?Fo(i,r,n?e.call(n):e()):Uo(i,r)}function ec(t,e,n,r){return ic(oe(),ge(),t,e,n,r)}function nc(t,e,n,r,i,o,s,a,c,u){const l=ge()+t,h=oe();let d=function(t,e,n,r,i,o){const s=qo(t,e,n,r);return qo(t,e+2,i,o)||s}(h,l,n,r,i,o);return function(t,e,n,r,i){const o=qo(t,e,n,r);return Vo(t,e+2,i)||o}(h,l+4,s,a,c)||d?Fo(h,l+7,u?e.call(u,n,r,i,o,s,a,c):e(n,r,i,o,s,a,c)):Uo(h,l+7)}function rc(t,e){const n=t[e];return n===gi?void 0:n}function ic(t,e,n,r,i,o){const s=e+n;return Vo(t,s,i)?Fo(t,s+1,o?r.call(o,i):r(i)):rc(t,s+1)}function oc(t,e){const n=se();let r;const i=t+Dt;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new Mn("302",`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=Nn(r.type)),s=vt(Ko);try{const t=rr(!1),e=o();return rr(t),function(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,oe(),i,e),e}finally{vt(s)}}function sc(t,e,n){const r=t+Dt,i=oe(),o=Qt(i,r);return uc(i,cc(i,r)?ic(i,ge(),e,o.transform,n,o):o.transform(n))}function ac(t,e,n,r){const i=t+Dt,o=oe(),s=Qt(o,i);return uc(o,cc(o,i)?function(t,e,n,r,i,o,s){const a=e+n;return qo(t,a,i,o)?Fo(t,a+2,s?r.call(s,i,o):r(i,o)):rc(t,a+2)}(o,ge(),e,s.transform,n,r,s):s.transform(n,r))}function cc(t,e){return t[1].data[e].pure}function uc(t,e){return Ro.isWrapped(e)&&(e=Ro.unwrap(e),t[me()]=gi),e}const lc=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}};function hc(){return this._results[Po()]()}class dc{constructor(){this.dirty=!0,this._results=[],this.changes=new lc,this.length=0;const t=Po(),e=dc.prototype;e[t]||(e[t]=hc)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=U(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class fc{constructor(t){this.queryList=t,this.matches=null}clone(){return new fc(this.queryList)}setDirty(){this.queryList.setDirty()}}class pc{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new pc(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Ac(t,e).matches&&this.queries[e].setDirty()}}class gc{constructor(t,e,n,r=null){this.predicate=t,this.descendants=e,this.isStatic=n,this.read=r}}class mc{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new mc(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class yc{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new yc(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&!1===this.metadata.descendants){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,bc(e,i)),this.matchTNodeWithReadOption(t,e,mr(e,t,i,!1,!1))}else n===Ma?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,mr(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===ra||r===Ua||r===Ma&&4&e.type)this.addMatch(e.index,-2);else{const n=mr(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function bc(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function vc(t,e,n,r){return-1===n?function(t,e){return 11&t.type?ea(t,e):4&t.type?Ra(t,e):null}(e,t):-2===n?function(t,e,n){return n===ra?ea(e,t):n===Ma?Ra(e,t):n===Ua?Wa(e,t):void 0}(t,e,r):yr(t,t[1],n,e)}function wc(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:vc(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function _c(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=wc(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=Pt;t<s.length;t++){const e=s[t];e[17]===e[3]&&_c(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];_c(n[1],n,i,r)}}}}}return r}function Sc(t){const e=oe(),n=se(),r=_e();Se(r+1);const i=Ac(n,r);if(t.dirty&&Zt(e)===i.metadata.isStatic){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?_c(n,e,r,[]):wc(n,e,i,r);t.reset(o),t.notifyOnChanges()}return!0}return!1}function Cc(t,e,n){Ec(se(),oe(),t,e,n,!0)}function Ic(t,e,n){Ec(se(),oe(),t,e,n,!1)}function Ec(t,e,n,r,i,o){t.firstCreatePass&&(xc(t,new gc(n,r,o,i),-1),o&&(t.staticViewQueries=!0)),Oc(t,e)}function Tc(t,e,n,r){!function(t,e,n,r,i,o,s,a){t.firstCreatePass&&(xc(t,new gc(n,r,false,i),s.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(t,a)),Oc(t,e)}(se(),oe(),e,n,r,0,ce(),t)}function kc(){return t=oe(),e=_e(),t[19].queries[e].queryList;var t,e}function Oc(t,e){const n=new dc;Fi(t,e,n,n.destroy),null===e[19]&&(e[19]=new pc),e[19].queries.push(new fc(n))}function xc(t,e,n){null===t.queries&&(t.queries=new mc),t.queries.track(new yc(e,n))}function Ac(t,e){return t.queries.getByIndex(e)}function Nc(t,e){return Ra(t,e)}function Mc(t=yt.Default){const e=ka(!0);if(null!=e||t&yt.Optional)return e;Dn("ChangeDetectorRef")}const Dc=new k("Application Initializer");let Pc=(()=>{class t{constructor(t){this.appInits=t,this.resolve=ta,this.reject=ta,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();ns(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Ot(Dc,8))},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();const Rc=new k("AppId"),jc={provide:Rc,useFactory:function(){return`${Lc()}${Lc()}${Lc()}`},deps:[]};function Lc(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Fc=new k("Platform Initializer"),Uc=new k("Platform ID"),Vc=new k("appBootstrapListener");let qc=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();const Bc=new k("LocaleId"),zc=new k("DefaultCurrencyCode");class Wc{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Hc=function(t){return new Ja(t)},Kc=Hc,$c=function(t){return Promise.resolve(Hc(t))},Qc=function(t){const e=Hc(t),n=xr(pt(t).declarations).reduce((t,e)=>{const n=ft(e);return n&&t.push(new Ga(n)),t},[]);return new Wc(e,n)},Gc=Qc,Xc=function(t){return Promise.resolve(Qc(t))};let Yc=(()=>{class t{constructor(){this.compileModuleSync=Kc,this.compileModuleAsync=$c,this.compileModuleAndAllComponentsSync=Gc,this.compileModuleAndAllComponentsAsync=Xc}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();const Zc=(()=>Promise.resolve(0))();function Jc(t){"undefined"==typeof Zone?Zc.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class tu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new lc(!1),this.onMicrotaskEmpty=new lc(!1),this.onStable=new lc(!1),this.onError=new lc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const n=this;n._nesting=0,n._outer=n._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(n._inner=n._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(n._inner=n._inner.fork(Zone.longStackTraceZoneSpec)),n.shouldCoalesceEventChangeDetection=e,n.lastRequestAnimationFrameId=-1,n.nativeRequestAnimationFrame=function(){let t=P.requestAnimationFrame,e=P.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=!!t.shouldCoalesceEventChangeDetection&&t.nativeRequestAnimationFrame&&(()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(P,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,iu(t),ru(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),iu(t))}(t)});t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:e},onInvokeTask:(n,r,i,o,s,a)=>{try{return ou(t),n.invokeTask(i,o,s,a)}finally{e&&"eventTask"===o.type&&e(),su(t)}},onInvoke:(e,n,r,i,o,s,a)=>{try{return ou(t),e.invoke(r,i,o,s,a)}finally{su(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,iu(t),ru(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(n)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!tu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(tu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,nu,eu,eu);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}function eu(){}const nu={};function ru(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function iu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function ou(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function su(t){t._nesting--,ru(t)}class au{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new lc,this.onMicrotaskEmpty=new lc,this.onStable=new lc,this.onError=new lc}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let cu=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{tu.assertNotInAngularZone(),Jc(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Jc(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(Ot(tu))},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})(),uu=(()=>{class t{constructor(){this._applications=new Map,fu.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return fu.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();class lu{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function hu(t){fu=t}let du,fu=new lu;const pu=new k("AllowMultipleToken");class gu{constructor(t,e){this.name=t,this.token=e}}function mu(t,e,n=[]){const r="Platform: "+e,i=new k(r);return(e=[])=>{let o=yu();if(!o||o.injector.get(pu,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:bo,useValue:"platform"});!function(t){if(du&&!du.destroyed&&!du.injector.get(pu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");du=t.get(bu);const e=t.get(Fc,null);e&&e.forEach(t=>t())}(No.create({providers:t,name:r}))}return function(t){const e=yu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function yu(){return du&&!du.destroyed?du:null}let bu=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new au:("zone.js"===t?void 0:t)||new tu({enableLongStackTrace:tn(),shouldCoalesceEventChangeDetection:e}),n}(e?e.ngZone:void 0,e&&e.ngZoneEventCoalescing||!1),r=[{provide:tu,useValue:n}];return n.run(()=>{const e=No.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(Ir,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return i.onDestroy(()=>_u(this._modules,i)),n.runOutsideAngular(()=>n.onError.subscribe({next:t=>{o.handleError(t)}})),function(t,e,n){try{const r=n();return ns(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Pc);return t.runInitializers(),t.donePromise.then(()=>(Xs(i.injector.get(Bc,Qs)||Qs),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=vu({},e);return function(t,e,n){const r=new Ja(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(wu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${g(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Ot(No))},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();function vu(t,e){return Array.isArray(e)?e.reduce(vu,t):Object.assign(Object.assign({},t),e)}let wu=(()=>{class t{constructor(t,e,n,r,i,c){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=c,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=tn(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const u=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),l=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{tu.assertNotInAngularZone(),Jc(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{tu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(u,l.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Ys?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(ja),i=n.create(No.NULL,[],e||n.selector,r);i.onDestroy(()=>{this._unloadComponent(i)});const o=i.injector.get(cu,null);return o&&i.injector.get(uu).registerApplication(i.location.nativeElement,o),this._loadComponent(i),tn()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;_u(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Vc,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),_u(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Ot(tu),Ot(qc),Ot(No),Ot(Ir),Ot(Js),Ot(Pc))},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();function _u(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Su{}class Cu{}const Iu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Eu=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Iu}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Tu(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Tu(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(Ot(Yc),Ot(Cu,8))},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();function Tu(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const ku=function(t){return null},Ou=mu(null,"core",[{provide:Uc,useValue:"unknown"},{provide:bu,deps:[No]},{provide:uu,deps:[]},{provide:qc,deps:[]}]),xu=[{provide:wu,useClass:wu,deps:[tu,qc,No,Ir,Js,Pc]},{provide:Qa,deps:[tu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Pc,useClass:Pc,deps:[[new d,Dc]]},{provide:Yc,useClass:Yc,deps:[]},jc,{provide:wa,useFactory:function(){return xa},deps:[]},{provide:_a,useFactory:function(){return Aa},deps:[]},{provide:Bc,useFactory:function(t){return Xs(t=t||"undefined"!=typeof $localize&&$localize.locale||Qs),t},deps:[[new h(Bc),new d,new p]]},{provide:zc,useValue:"USD"}];let Au=(()=>{class t{constructor(t){}}return t.\u0275mod=ct({type:t}),t.\u0275inj=v({factory:function(e){return new(e||t)(Ot(wu))},providers:xu}),t})()},fqV1:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("fXoL");const i=["*"];let o=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Cb({type:t,selectors:[["ng-run-loading"]],ngContentSelectors:i,decls:19,vars:0,consts:[[1,"gear-container"],[1,"gear","one"],[1,"gear-inner"],[1,"bar"],[1,"gear","two"],[1,"loading-text"]],template:function(t,e){1&t&&(r.cc(),r.Nb(0,"div",0),r.Nb(1,"div",1),r.Nb(2,"div",2),r.Jb(3,"div",3),r.Jb(4,"div",3),r.Jb(5,"div",3),r.Jb(6,"div",3),r.Jb(7,"div",3),r.Jb(8,"div",3),r.Mb(),r.Mb(),r.Nb(9,"div",4),r.Nb(10,"div",2),r.Jb(11,"div",3),r.Jb(12,"div",3),r.Jb(13,"div",3),r.Jb(14,"div",3),r.Jb(15,"div",3),r.Jb(16,"div",3),r.Mb(),r.Mb(),r.Mb(),r.Nb(17,"div",5),r.bc(18),r.Mb())},styles:['[_nghost-%COMP%]{position:absolute;top:0;left:0;background:#1a2327;text-align:center;right:0;bottom:0;padding-top:50px;z-index:1;color:#c7c7c7;font-size:14px}[_nghost-%COMP%]   .loading-text[_ngcontent-%COMP%]{margin-top:20px}@keyframes clockwise{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes counter-clockwise{0%{transform:rotate(0deg)}to{transform:rotate(-1turn)}}.gear-container[_ngcontent-%COMP%]{margin-top:70px;margin-left:50%;width:78px;height:66px;max-width:100%;transform:translateX(-50%)}.gear[_ngcontent-%COMP%]{position:absolute;height:40px;width:40px;border-radius:22px}.gear.one[_ngcontent-%COMP%]{top:0;left:0}.gear.two[_ngcontent-%COMP%]{top:30px;left:38px}.gear[_ngcontent-%COMP%]:after{content:"";height:24px;width:24px;border-radius:12px;margin-left:-12px;margin-top:-12px}.gear-inner[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%], .gear[_ngcontent-%COMP%]:after{position:absolute;top:50%;left:50%}.gear-inner[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{background:#c7c7c7;height:6px;width:50px;margin-left:-25px;margin-top:-3px;border-radius:2px}.gear-inner[_ngcontent-%COMP%]{position:relative;height:100%;width:100%;background:#c7c7c7;animation-iteration-count:infinite;border-radius:50px}.gear.one[_ngcontent-%COMP%]   .gear-inner[_ngcontent-%COMP%]{animation:counter-clockwise 2.5s linear infinite}.gear.two[_ngcontent-%COMP%]   .gear-inner[_ngcontent-%COMP%]{animation:clockwise 2.5s linear infinite}.broken[_nghost-%COMP%]   .gear.one[_ngcontent-%COMP%]   .gear-inner[_ngcontent-%COMP%], .broken   [_nghost-%COMP%]   .gear.one[_ngcontent-%COMP%]   .gear-inner[_ngcontent-%COMP%], .broken[_nghost-%COMP%]   .gear.two[_ngcontent-%COMP%]   .gear-inner[_ngcontent-%COMP%], .broken   [_nghost-%COMP%]   .gear.two[_ngcontent-%COMP%]   .gear-inner[_ngcontent-%COMP%]{animation:none}.broken[_nghost-%COMP%]   .gear.two[_ngcontent-%COMP%]:before, .broken   [_nghost-%COMP%]   .gear.two[_ngcontent-%COMP%]:before{content:"";position:absolute;width:6px;background:#212121;height:50px;z-index:1;transform:rotate(75deg);left:17px;top:-5px}.gear-inner[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:nth-child(2){transform:rotate(60deg)}.gear-inner[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:nth-child(3){transform:rotate(120deg)}.gear-inner[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:nth-child(4){transform:rotate(90deg)}.gear-inner[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:nth-child(5){transform:rotate(30deg)}.gear-inner[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:nth-child(6){transform:rotate(150deg)}.gear[_ngcontent-%COMP%]:after{background:var(--bg)}']}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},hVnv:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("fXoL");let i=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Cb({type:t,selectors:[["ng-run-checkbox"]],inputs:{label:"label",checked:"checked"},decls:3,vars:1,consts:[["type","checkbox",3,"checked"]],template:function(t,e){1&t&&(r.Nb(0,"label"),r.Jb(1,"input",0),r.Jb(2,"i"),r.Mb()),2&t&&(r.wb(1),r.dc("checked",e.checked))},styles:['[_nghost-%COMP%]{display:inline-block;height:1em;width:2em;position:relative;font-size:16px}label[_ngcontent-%COMP%]{cursor:pointer}input[_ngcontent-%COMP%]{opacity:0}i[_ngcontent-%COMP%]:before, input[_ngcontent-%COMP%]{position:absolute}i[_ngcontent-%COMP%]:before{content:"";top:0;left:0;right:0;bottom:0;background:#c7c7c7;border-radius:1em}i[_ngcontent-%COMP%]:after{position:relative;content:"";display:block;height:1.1em;width:1.1em;border-radius:1.1em;background:#fff;box-shadow:0 .1em .3em rgba(0,0,0,.3);transition:all .3s;z-index:1;margin:-.05em}input[_ngcontent-%COMP%]:checked + i[_ngcontent-%COMP%]:after{transform:translate3d(100%,0,0)}input[_ngcontent-%COMP%]:checked + i[_ngcontent-%COMP%]:before{background:#69b956}']}),t})()},itXk:function(t,e,n){"use strict";n.d(e,"b",function(){return f}),n.d(e,"a",function(){return p});var r=n("z+Ro"),i=n("DH7j"),o=n("7o/Q");class s extends o.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class a extends o.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var c=n("SeVD"),u=n("HDdC");function l(t,e,n,r,i=new a(t,n,r)){if(!i.closed)return e instanceof u.a?e.subscribe(i):Object(c.a)(e)(i)}var h=n("yCtX");const d={};function f(...t){let e=void 0,n=void 0;return Object(r.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(i.a)(t[0])&&(t=t[0]),Object(h.a)(t,n).lift(new p(e))}class p{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new g(t,this.resultSelector))}}class g extends s{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(d),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(l(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===d?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},"j0t/":function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"c",function(){return s}),n.d(e,"a",function(){return a});var r=n("mrSG");let i=null;function o(){return Object(r.a)(this,void 0,void 0,function*(){return i||(i=function(){return Object(r.a)(this,void 0,void 0,function*(){return yield a(["vs/editor/editor.main"]),yield n.e(6).then(n.bind(null,"RgQ/")),s(),function(){return Object(r.a)(this,void 0,void 0,function*(){const t=yield a(["vs/editor/common/services/editorWorkerServiceImpl"]),e=t.EditorWorkerClient.prototype._getOrCreateModelManager;t.EditorWorkerClient.prototype._getOrCreateModelManager=function(t){const n=e.apply(this,arguments);return n._checkStopModelSync=c,n}})}()})}())})}function s(t={}){monaco.languages.typescript.typescriptDefaults.setCompilerOptions(Object.assign({target:monaco.languages.typescript.ScriptTarget.ES2015,allowNonTsExtensions:!0,experimentalDecorators:!0,moduleResolution:monaco.languages.typescript.ModuleResolutionKind.NodeJs,module:monaco.languages.typescript.ModuleKind.CommonJS,allowJs:!0,noEmit:!0},t))}function a(t){return new Promise(e=>{require(t,(...t)=>{e(...t)})})}function c(){}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},jhN1:function(t,e,n){"use strict";n.d(e,"a",function(){return L}),n.d(e,"b",function(){return N}),n.d(e,"c",function(){return R});var r=n("ofXK"),i=n("fXoL");class o extends r.r{constructor(){super()}supportsDOMEvents(){return!0}}class s extends o{static makeCurrent(){Object(r.v)(new s)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=c||(c=document.querySelector("base"),c)?c.getAttribute("href"):null;return null==e?null:(n=e,a||(a=document.createElement("a")),a.setAttribute("href",n),"/"===a.pathname.charAt(0)?a.pathname:"/"+a.pathname);var n}resetBaseElement(){c=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return Object(r.u)(document.cookie,t)}}let a,c=null;const u=new i.q("TRANSITION_ID"),l=[{provide:i.d,useFactory:function(t,e,n){return()=>{n.get(i.e).donePromise.then(()=>{const n=Object(r.t)();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[u,r.d,i.r],multi:!0}];class h{static init(){Object(i.U)(new h)}addToWindow(t){i.mb.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},i.mb.getAllAngularTestabilities=()=>t.getAllTestabilities(),i.mb.getAllAngularRootElements=()=>t.getAllRootElements(),i.mb.frameworkStabilizers||(i.mb.frameworkStabilizers=[]),i.mb.frameworkStabilizers.push(t=>{const e=i.mb.getAllAngularTestabilities();let n=e.length,r=!1;const o=function(e){r=r||e,n--,0==n&&t(r)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const i=t.getTestability(e);return null!=i?i:n?Object(r.t)().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const d=new i.q("EventManagerPlugins");let f=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error("No event manager plugin found for event "+t)}}return t.\u0275fac=function(e){return new(e||t)(i.Qb(d),i.Qb(i.z))},t.\u0275prov=i.Eb({token:t,factory:t.\u0275fac}),t})();class p{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const i=Object(r.t)().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${e}`);return this.addEventListener(i,e,n)}}let g=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Eb({token:t,factory:t.\u0275fac}),t})(),m=(()=>{class t extends g{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>Object(r.t)().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(i.Qb(r.d))},t.\u0275prov=i.Eb({token:t,factory:t.\u0275fac}),t})();const y={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},b=/%COMP%/g;function v(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?v(t,i,n):(i=i.replace(b,t),n.push(i))}return n}function w(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let _=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new S(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case i.P.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new C(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case i.P.ShadowDom:return new I(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=v(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(i.Qb(f),i.Qb(m),i.Qb(i.c))},t.\u0275prov=i.Eb({token:t,factory:t.\u0275fac}),t})();class S{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(y[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=y[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=y[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&(i.F.DashCase|i.F.Important)?t.style.setProperty(e,n,r&i.F.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&i.F.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,w(n)):this.eventManager.addEventListener(t,e,w(n))}}class C extends S{constructor(t,e,n,r){super(t),this.component=n;const i=v(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(b,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(b,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class I extends S{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=v(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let E=(()=>{class t extends p{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(i.Qb(r.d))},t.\u0275prov=i.Eb({token:t,factory:t.\u0275fac}),t})();const T=["alt","control","meta","shift"],k={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},O={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},x={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let A=(()=>{class t extends p{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,i){const o=t.parseEventName(n),s=t.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Object(r.t)().onAndCancel(e,o.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(T.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&O.hasOwnProperty(e)&&(e=O[e]))}return k[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),T.forEach(r=>{r!=n&&(0,x[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(i.Qb(r.d))},t.\u0275prov=i.Eb({token:t,factory:t.\u0275fac}),t})(),N=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(i.Eb)({factory:function(){return Object(i.Qb)(D)},token:t,providedIn:"root"}),t})();function M(t){return new D(t.get(r.d))}let D=(()=>{class t extends N{constructor(t){super(),this._doc=t}sanitize(t,e){if(null==e)return null;switch(t){case i.H.NONE:return e;case i.H.HTML:return Object(i.ab)(e,"HTML")?Object(i.ub)(e):Object(i.Y)(this._doc,String(e));case i.H.STYLE:return Object(i.ab)(e,"Style")?Object(i.ub)(e):e;case i.H.SCRIPT:if(Object(i.ab)(e,"Script"))return Object(i.ub)(e);throw new Error("unsafe value used in a script context");case i.H.URL:return Object(i.lb)(e),Object(i.ab)(e,"URL")?Object(i.ub)(e):Object(i.Z)(String(e));case i.H.RESOURCE_URL:if(Object(i.ab)(e,"ResourceURL"))return Object(i.ub)(e);throw new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see http://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return Object(i.bb)(t)}bypassSecurityTrustStyle(t){return Object(i.eb)(t)}bypassSecurityTrustScript(t){return Object(i.db)(t)}bypassSecurityTrustUrl(t){return Object(i.fb)(t)}bypassSecurityTrustResourceUrl(t){return Object(i.cb)(t)}}return t.\u0275fac=function(e){return new(e||t)(i.Qb(r.d))},t.\u0275prov=Object(i.Eb)({factory:function(){return M(Object(i.Qb)(i.o))},token:t,providedIn:"root"}),t})();const P=[{provide:i.B,useValue:r.s},{provide:i.C,useValue:function(){s.makeCurrent(),h.init()},multi:!0},{provide:r.d,useFactory:function(){return Object(i.sb)(document),document},deps:[]}],R=Object(i.Q)(i.T,"browser",P),j=[[],{provide:i.W,useValue:"root"},{provide:i.m,useFactory:function(){return new i.m},deps:[]},{provide:d,useClass:E,multi:!0,deps:[r.d,i.z,i.B]},{provide:d,useClass:A,multi:!0,deps:[r.d]},[],{provide:_,useClass:_,deps:[f,m,i.c]},{provide:i.E,useExisting:_},{provide:g,useExisting:m},{provide:m,useClass:m,deps:[r.d]},{provide:i.L,useClass:i.L,deps:[i.z]},{provide:f,useClass:f,deps:[d,i.z]},[]];let L=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:i.c,useValue:e.appId},{provide:u,useExisting:i.c},l]}}}return t.\u0275mod=i.Gb({type:t}),t.\u0275inj=i.Fb({factory:function(e){return new(e||t)(i.Qb(t,12))},providers:j,imports:[r.c,i.f]}),t})();"undefined"!=typeof window&&window},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mrSG:function(t,e,n){"use strict";function r(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function i(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}c((r=r.apply(t,e||[])).next())})}n.d(e,"b",function(){return r}),n.d(e,"a",function(){return i})},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},nYR2:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("7o/Q"),i=n("quSY");function o(t){return e=>e.lift(new s(t))}class s{constructor(t){this.callback=t}call(t,e){return e.subscribe(new a(t,this.callback))}}class a extends r.a{constructor(t,e){super(t),this.add(new i.a(e))}}},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},ofXK:function(t,e,n){"use strict";n.d(e,"a",function(){return w}),n.d(e,"b",function(){return vt}),n.d(e,"c",function(){return St}),n.d(e,"d",function(){return c}),n.d(e,"e",function(){return wt}),n.d(e,"f",function(){return S}),n.d(e,"g",function(){return _t}),n.d(e,"h",function(){return h}),n.d(e,"i",function(){return C}),n.d(e,"j",function(){return b}),n.d(e,"k",function(){return at}),n.d(e,"l",function(){return ut}),n.d(e,"m",function(){return ht}),n.d(e,"n",function(){return _}),n.d(e,"o",function(){return u}),n.d(e,"p",function(){return Et}),n.d(e,"q",function(){return It}),n.d(e,"r",function(){return a}),n.d(e,"s",function(){return Ct}),n.d(e,"t",function(){return o}),n.d(e,"u",function(){return st}),n.d(e,"v",function(){return s});var r=n("fXoL");let i=null;function o(){return i}function s(t){i||(i=t)}class a{}const c=new r.q("DocumentToken");let u=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Eb)({factory:l,token:t,providedIn:"platform"}),t})();function l(){return Object(r.Qb)(d)}const h=new r.q("Location Initialized");let d=(()=>{class t extends u{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=o().getLocation(),this._history=o().getHistory()}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){f()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){f()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(c))},t.\u0275prov=Object(r.Eb)({factory:p,token:t,providedIn:"platform"}),t})();function f(){return!!window.history.pushState}function p(){return new d(Object(r.Qb)(c))}function g(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function m(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function y(t){return t&&"?"!==t[0]?"?"+t:t}let b=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Eb)({factory:v,token:t,providedIn:"root"}),t})();function v(t){const e=Object(r.Qb)(c).location;return new _(Object(r.Qb)(u),e&&e.origin||"")}const w=new r.q("appBaseHref");let _=(()=>{class t extends b{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return g(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+y(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+y(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+y(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(u),r.Qb(w,8))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})(),S=(()=>{class t extends b{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=g(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+y(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+y(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(u),r.Qb(w,8))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})(),C=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=m(E(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+y(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,E(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+y(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+y(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(b),r.Qb(u))},t.normalizeQueryParams=y,t.joinWithSlash=g,t.stripTrailingSlash=m,t.\u0275prov=Object(r.Eb)({factory:I,token:t,providedIn:"root"}),t})();function I(){return new C(Object(r.Qb)(b),Object(r.Qb)(u))}function E(t){return t.replace(/\/index.html$/,"")}var T=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),k=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}({}),O=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}({}),x=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}({}),A=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t[1/0]=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}({});function N(t,e){return L(Object(r.hb)(t)[r.X.DateFormat],e)}function M(t,e){return L(Object(r.hb)(t)[r.X.TimeFormat],e)}function D(t,e){return L(Object(r.hb)(t)[r.X.DateTimeFormat],e)}function P(t,e){const n=Object(r.hb)(t),i=n[r.X.NumberSymbols][e];if(void 0===i){if(e===A.CurrencyDecimal)return n[r.X.NumberSymbols][A.Decimal];if(e===A.CurrencyGroup)return n[r.X.NumberSymbols][A.Group]}return i}const R=r.kb;function j(t){if(!t[r.X.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[r.X.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function L(t,e){for(let n=e;n>-1;n--)if(void 0!==t[n])return t[n];throw new Error("Locale data API: locale data undefined")}function F(t){const[e,n]=t.split(":");return{hours:+e,minutes:+n}}const U=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,V={},q=/((?:[^GyYMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var B=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}({}),z=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}({}),W=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}({});function H(t,e,n,r){let i=function(t){if(rt(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){t=t.trim();const e=parseFloat(t);if(!isNaN(t-e))return new Date(e);if(/^(\d{4}-\d{1,2}-\d{1,2})$/.test(t)){const[e,n,r]=t.split("-").map(t=>+t);return new Date(e,n-1,r)}let n;if(n=t.match(U))return function(t){const e=new Date(0);let n=0,r=0;const i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));const s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,c=Number(t[6]||0),u=Math.floor(1e3*parseFloat("0."+(t[7]||0)));return o.call(e,s,a,c,u),e}(n)}const e=new Date(t);if(!rt(e))throw new Error(`Unable to convert "${t}" into a date`);return e}(t);e=K(n,e)||e;let o,s=[];for(;e;){if(o=q.exec(e),!o){s.push(e);break}{s=s.concat(o.slice(1));const t=s.pop();if(!t)break;e=t}}let a=i.getTimezoneOffset();r&&(a=nt(r,a),i=function(t,e,n){const r=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,-1*(nt(e,r)-r))}(i,r));let c="";return s.forEach(t=>{const e=function(t){if(et[t])return et[t];let e;switch(t){case"G":case"GG":case"GGG":e=X(W.Eras,O.Abbreviated);break;case"GGGG":e=X(W.Eras,O.Wide);break;case"GGGGG":e=X(W.Eras,O.Narrow);break;case"y":e=G(z.FullYear,1,0,!1,!0);break;case"yy":e=G(z.FullYear,2,0,!0,!0);break;case"yyy":e=G(z.FullYear,3,0,!1,!0);break;case"yyyy":e=G(z.FullYear,4,0,!1,!0);break;case"Y":e=tt(1);break;case"YY":e=tt(2,!0);break;case"YYY":e=tt(3);break;case"YYYY":e=tt(4);break;case"M":case"L":e=G(z.Month,1,1);break;case"MM":case"LL":e=G(z.Month,2,1);break;case"MMM":e=X(W.Months,O.Abbreviated);break;case"MMMM":e=X(W.Months,O.Wide);break;case"MMMMM":e=X(W.Months,O.Narrow);break;case"LLL":e=X(W.Months,O.Abbreviated,k.Standalone);break;case"LLLL":e=X(W.Months,O.Wide,k.Standalone);break;case"LLLLL":e=X(W.Months,O.Narrow,k.Standalone);break;case"w":e=J(1);break;case"ww":e=J(2);break;case"W":e=J(1,!0);break;case"d":e=G(z.Date,1);break;case"dd":e=G(z.Date,2);break;case"E":case"EE":case"EEE":e=X(W.Days,O.Abbreviated);break;case"EEEE":e=X(W.Days,O.Wide);break;case"EEEEE":e=X(W.Days,O.Narrow);break;case"EEEEEE":e=X(W.Days,O.Short);break;case"a":case"aa":case"aaa":e=X(W.DayPeriods,O.Abbreviated);break;case"aaaa":e=X(W.DayPeriods,O.Wide);break;case"aaaaa":e=X(W.DayPeriods,O.Narrow);break;case"b":case"bb":case"bbb":e=X(W.DayPeriods,O.Abbreviated,k.Standalone,!0);break;case"bbbb":e=X(W.DayPeriods,O.Wide,k.Standalone,!0);break;case"bbbbb":e=X(W.DayPeriods,O.Narrow,k.Standalone,!0);break;case"B":case"BB":case"BBB":e=X(W.DayPeriods,O.Abbreviated,k.Format,!0);break;case"BBBB":e=X(W.DayPeriods,O.Wide,k.Format,!0);break;case"BBBBB":e=X(W.DayPeriods,O.Narrow,k.Format,!0);break;case"h":e=G(z.Hours,1,-12);break;case"hh":e=G(z.Hours,2,-12);break;case"H":e=G(z.Hours,1);break;case"HH":e=G(z.Hours,2);break;case"m":e=G(z.Minutes,1);break;case"mm":e=G(z.Minutes,2);break;case"s":e=G(z.Seconds,1);break;case"ss":e=G(z.Seconds,2);break;case"S":e=G(z.FractionalSeconds,1);break;case"SS":e=G(z.FractionalSeconds,2);break;case"SSS":e=G(z.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Y(B.Short);break;case"ZZZZZ":e=Y(B.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Y(B.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Y(B.Long);break;default:return null}return et[t]=e,e}(t);c+=e?e(i,n,a):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function K(t,e){const n=function(t){return Object(r.hb)(t)[r.X.LocaleId]}(t);if(V[n]=V[n]||{},V[n][e])return V[n][e];let i="";switch(e){case"shortDate":i=N(t,x.Short);break;case"mediumDate":i=N(t,x.Medium);break;case"longDate":i=N(t,x.Long);break;case"fullDate":i=N(t,x.Full);break;case"shortTime":i=M(t,x.Short);break;case"mediumTime":i=M(t,x.Medium);break;case"longTime":i=M(t,x.Long);break;case"fullTime":i=M(t,x.Full);break;case"short":const e=K(t,"shortTime"),n=K(t,"shortDate");i=$(D(t,x.Short),[e,n]);break;case"medium":const r=K(t,"mediumTime"),o=K(t,"mediumDate");i=$(D(t,x.Medium),[r,o]);break;case"long":const s=K(t,"longTime"),a=K(t,"longDate");i=$(D(t,x.Long),[s,a]);break;case"full":const c=K(t,"fullTime"),u=K(t,"fullDate");i=$(D(t,x.Full),[c,u])}return i&&(V[n][e]=i),i}function $(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(t,n){return null!=e&&n in e?e[n]:t})),t}function Q(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=1-t:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.substr(s.length-e)),o+s}function G(t,e,n=0,r=!1,i=!1){return function(o,s){let a=function(t,e){switch(t){case z.FullYear:return e.getFullYear();case z.Month:return e.getMonth();case z.Date:return e.getDate();case z.Hours:return e.getHours();case z.Minutes:return e.getMinutes();case z.Seconds:return e.getSeconds();case z.FractionalSeconds:return e.getMilliseconds();case z.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,o);if((n>0||a>-n)&&(a+=n),t===z.Hours)0===a&&-12===n&&(a=12);else if(t===z.FractionalSeconds)return c=e,Q(a,3).substr(0,c);var c;const u=P(s,A.MinusSign);return Q(a,e,u,r,i)}}function X(t,e,n=k.Format,i=!1){return function(o,s){return function(t,e,n,i,o,s){switch(n){case W.Months:return function(t,e,n){const i=Object(r.hb)(t),o=L([i[r.X.MonthsFormat],i[r.X.MonthsStandalone]],e);return L(o,n)}(e,o,i)[t.getMonth()];case W.Days:return function(t,e,n){const i=Object(r.hb)(t),o=L([i[r.X.DaysFormat],i[r.X.DaysStandalone]],e);return L(o,n)}(e,o,i)[t.getDay()];case W.DayPeriods:const a=t.getHours(),c=t.getMinutes();if(s){const t=function(t){const e=Object(r.hb)(t);return j(e),(e[r.X.ExtraData][2]||[]).map(t=>"string"==typeof t?F(t):[F(t[0]),F(t[1])])}(e),n=function(t,e,n){const i=Object(r.hb)(t);j(i);const o=L([i[r.X.ExtraData][0],i[r.X.ExtraData][1]],e)||[];return L(o,n)||[]}(e,o,i),s=t.findIndex(t=>{if(Array.isArray(t)){const[e,n]=t,r=a>=e.hours&&c>=e.minutes,i=a<n.hours||a===n.hours&&c<n.minutes;if(e.hours<n.hours){if(r&&i)return!0}else if(r||i)return!0}else if(t.hours===a&&t.minutes===c)return!0;return!1});if(-1!==s)return n[s]}return function(t,e,n){const i=Object(r.hb)(t),o=L([i[r.X.DayPeriodsFormat],i[r.X.DayPeriodsStandalone]],e);return L(o,n)}(e,o,i)[a<12?0:1];case W.Eras:return function(t,e){return L(Object(r.hb)(t)[r.X.Eras],e)}(e,i)[t.getFullYear()<=0?0:1];default:throw new Error("unexpected translation type "+n)}}(o,s,t,e,n,i)}}function Y(t){return function(e,n,r){const i=-1*r,o=P(n,A.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case B.Short:return(i>=0?"+":"")+Q(s,2,o)+Q(Math.abs(i%60),2,o);case B.ShortGMT:return"GMT"+(i>=0?"+":"")+Q(s,1,o);case B.Long:return"GMT"+(i>=0?"+":"")+Q(s,2,o)+":"+Q(Math.abs(i%60),2,o);case B.Extended:return 0===r?"Z":(i>=0?"+":"")+Q(s,2,o)+":"+Q(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${t}"`)}}}function Z(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate()+(4-t.getDay()))}function J(t,e=!1){return function(n,r){let i;if(e){const t=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,e=n.getDate();i=1+Math.floor((e+t)/7)}else{const t=Z(n),e=function(t){const e=new Date(t,0,1).getDay();return new Date(t,0,1+(e<=4?4:11)-e)}(t.getFullYear()),r=t.getTime()-e.getTime();i=1+Math.round(r/6048e5)}return Q(i,t,P(r,A.MinusSign))}}function tt(t,e=!1){return function(n,r){return Q(Z(n).getFullYear(),t,P(r,A.MinusSign),e)}}const et={};function nt(t,e){t=t.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function rt(t){return t instanceof Date&&!isNaN(t.valueOf())}class it{}let ot=(()=>{class t extends it{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(R(e||this.locale)(t)){case T.Zero:return"zero";case T.One:return"one";case T.Two:return"two";case T.Few:return"few";case T.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(r.u))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})();function st(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}let at=(()=>{class t{constructor(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Object(r.nb)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+Object(r.tb)(t.item));this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.s),r.Ib(r.t),r.Ib(r.l),r.Ib(r.D))},t.\u0275dir=r.Db({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class ct{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ut=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){Object(r.S)()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(t)}. See https://angular.io/api/common/NgForOf#change-propagation for more information.`),this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new ct(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new lt(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new lt(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.O),r.Ib(r.K),r.Ib(r.s))},t.\u0275dir=r.Db({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class lt{constructor(t,e){this.record=t,this.view=e}}let ht=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new dt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ft("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ft("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.O),r.Ib(r.K))},t.\u0275dir=r.Db({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class dt{constructor(){this.$implicit=null,this.ngIf=null}}function ft(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.tb)(e)}'.`)}function pt(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${Object(r.tb)(t)}'`)}class gt{createSubscription(t,e){return t.subscribe({next:e,error:t=>{throw t}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class mt{createSubscription(t,e){return t.then(e,t=>{throw t})}dispose(t){}onDestroy(t){}}const yt=new mt,bt=new gt;let vt=(()=>{class t{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,e=>this._updateLatestValue(t,e))}_selectStrategy(e){if(Object(r.pb)(e))return yt;if(Object(r.ob)(e))return bt;throw pt(t,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())}}return t.\u0275fac=function(e){return new(e||t)(r.Sb())},t.\u0275pipe=r.Hb({name:"async",type:t,pure:!1}),t})(),wt=(()=>{class t{constructor(t){this.locale=t}transform(e,n="mediumDate",r,i){if(null==e||""===e||e!=e)return null;try{return H(e,n,i||this.locale,r)}catch(o){throw pt(t,o.message)}}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.u))},t.\u0275pipe=r.Hb({name:"date",type:t,pure:!0}),t})(),_t=(()=>{class t{transform(t){return JSON.stringify(t,null,2)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=r.Hb({name:"json",type:t,pure:!1}),t})(),St=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},providers:[{provide:it,useClass:ot}]}),t})();const Ct="browser";function It(t){return"server"===t}let Et=(()=>{class t{}return t.\u0275prov=Object(r.Eb)({token:t,providedIn:"root",factory:()=>new Tt(Object(r.Qb)(c),window,Object(r.Qb)(r.m))}),t})();class Tt{constructor(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(this.supportsScrolling()){const e=this.document.getElementById(t)||this.document.getElementsByName(t)[0];e&&this.scrollToElement(e)}}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}supportScrollRestoration(){try{if(!this.window||!this.window.scrollTo)return!1;const t=kt(this.window.history)||kt(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window.scrollTo}catch(t){return!1}}}function kt(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}},ox97:function(t,e,n){"use strict";n.r(e),n.d(e,"plugIn",function(){return i});class r{constructor(t,e){this.worker=t,this.projectStore=e,this.triggerCharacters=[".","/","@"]}provideCompletionItems(t,e,n,r){const i=t.getOffsetAt(e),o=t.getValue();return this.worker.postMessage({type:"GET_TOKEN_AT_POSITION",payload:{contents:o,offset:i}}).then(({node:n,isInImport:r,text:s})=>{if(!r)return;const a=s.match(/^\s+['|"]/g),c=s.match(/['|"]$/g),u=a?n.pos+a[0].length:n.pos;if(u<=i&&i<=(c?n.end-c[0].length:n.end)){const n=this.projectStore.state.files,r=this.projectStore.state.dependencies,s=Object.keys(n).filter(e=>"file"===n[e].type&&e.endsWith(".ts")&&e!==t.uri.path).map(e=>{const n=function(t,e){const n="/",r=e.split(n),i=t.split(n);i.pop();const o=r.pop(),s=r.join(n);let a="";if(i.join(n)===s)return"./"+o;for(;-1===s.indexOf(i.join(n));)i.pop(),a+="../";const c=r.slice(i.length);return c.length&&(a+=c.join(n)+n),(0===a.indexOf("..")?"":"./")+a+o}(t.uri.path.slice(4),e);return{label:n,insertText:n.slice(0,-3)}}),a=Object.keys(r).filter(t=>!["whatwg-fetch","zone.js","tslib","typescript"].includes(t)).map(t=>({label:t,insertText:t})),c=o.substring(u,i);return{suggestions:[...s,...a].map(t=>({label:t.label,insertText:t.insertText,kind:monaco.languages.CompletionItemKind.File,range:{startLineNumber:e.lineNumber,startColumn:e.column-c.length,endLineNumber:e.lineNumber,endColumn:e.column}}))}}return{suggestions:[]}})}}function i(t,e){monaco.languages.registerCompletionItemProvider("typescript",new r(e.editorWorker.worker,e.projectStore))}},pLZG:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){return n.lift(new o(t,e))}}class o{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.predicate,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}n.r(e),n.d(e,"LogLevel",function(){return o}),n.d(e,"Logger",function(){return c}),n.d(e,"setLogLevel",function(){return u});var i=[],o=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),s=o.INFO,a=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var s=(new Date).toISOString();switch(e){case o.DEBUG:case o.VERBOSE:console.log.apply(console,r(["["+s+"]  "+t.name+":"],n));break;case o.INFO:console.info.apply(console,r(["["+s+"]  "+t.name+":"],n));break;case o.WARN:console.warn.apply(console,r(["["+s+"]  "+t.name+":"],n));break;case o.ERROR:console.error.apply(console,r(["["+s+"]  "+t.name+":"],n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}},c=function(){function t(t){this.name=t,this._logLevel=s,this._logHandler=a,i.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function u(t){i.forEach(function(e){e.logLevel=t})}},qN0M:function(t,e,n){"use strict";n.r(e),n.d(e,"plugIn",function(){return i});var r=n("j0t/");function i(t,e){if("typescript"===e.mode&&Object(r.a)(["vs/editor/standalone/browser/standaloneServices"]).then(n=>{n.StaticServices.codeEditorService.get().openCodeEditor=({options:n,resource:r})=>{const i=r.path.startsWith("src/")?r.path.slice(4):r.path;return i!==e.openedFile&&e.projectStore.selectFile(i),setTimeout(()=>{const e=n.selection;if(e)if("number"==typeof e.endLineNumber&&"number"==typeof e.endColumn)t.setSelection(e),t.revealRangeInCenter(e,1);else{const n={lineNumber:e.startLineNumber,column:e.startColumn};t.setPosition(n),t.revealPositionInCenter(n,1)}}),Promise.resolve()}}),"html"===e.mode){let n;t.onMouseUp(r=>{r.event.ctrlKey&&(clearTimeout(n),n=setTimeout(()=>{const n=t.getModel(),i=n.getOffsetAt(r.target.position);monaco.languages.typescript.getTypeScriptWorker().then(t=>t("")).then(t=>t.getTemplateDefinitionAt(n.uri.toString(),i)).then(t=>{if(t&&t.length){const{fileName:n,span:r}=t[0],i=n.slice(7);e.projectStore.state.files[i]&&e.editorWorker.inspect$.next({filePath:i,offset:r.start})}})},400))})}}},qrOX:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("2Vo4"),i=n("fXoL"),o=n("ofXK"),s=n("0njA");function a(t,e){if(1&t){const t=i.Ob();i.Lb(0),i.Nb(1,"h3",1),i.Tb("click",function(){i.lc(t);const e=i.Xb();return e.opened$.next(!e.opened$.value)}),i.Jb(2,"ng-run-icon",2),i.Nb(3,"span",3),i.uc(4),i.Mb(),i.bc(5),i.Mb(),i.Nb(6,"div"),i.bc(7,1),i.Mb(),i.Kb()}if(2&t){const t=e.ngIf,n=i.Xb();i.wb(2),i.dc("name","arrow-"+(t.opened?"down":"right")),i.wb(2),i.vc(n.title),i.wb(2),i.Ab("d-none",!t.opened)}}const c=[[["",8,"icon"]],"*"],u=function(t){return{opened:t}},l=[".icon","*"];let h=(()=>{class t{constructor(){this.opened$=new r.a(!0)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Cb({type:t,selectors:[["ng-run-toggler"]],inputs:{title:"title"},ngContentSelectors:l,decls:2,vars:5,consts:[[4,"ngIf"],[1,"toggler",3,"click"],[1,"icon-arrow",3,"name"],[1,"toggler-title"]],template:function(t,e){1&t&&(i.cc(c),i.sc(0,a,8,4,"ng-container",0),i.Yb(1,"async")),2&t&&i.dc("ngIf",i.gc(3,u,i.Zb(1,1,e.opened$)))},directives:[o.m,s.a],pipes:[o.b],styles:["[_nghost-%COMP%]{display:block;margin-bottom:5px}.toggler[_ngcontent-%COMP%]{margin:0;font-size:13px;font-weight:400;padding:0 10px;line-height:25px;color:#f6f6f6;display:flex;align-items:center;cursor:pointer}.toggler-title[_ngcontent-%COMP%]{flex-shrink:0}.toggler[_ngcontent-%COMP%]   .icon-arrow[_ngcontent-%COMP%]{width:14px;height:14px;margin-right:2px;flex-shrink:0}"],changeDetection:0}),t})()},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:u,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(u)){a&&(this._unsubscribe=void 0);try{u.call(this)}catch(h){e=h instanceof s?c(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(c(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function c(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},sVev:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})()},tyNb:function(t,e,n){"use strict";n.d(e,"a",function(){return Ht}),n.d(e,"b",function(){return Sn}),n.d(e,"c",function(){return dn});var r=n("ofXK"),i=n("fXoL"),o=n("LRne"),s=n("Cfvw"),a=n("2Vo4"),c=n("itXk"),u=n("HDdC"),l=n("sVev"),h=n("NXyV"),d=n("EY2u"),f=n("XNiG"),p=n("lJxs"),g=n("0EUg"),m=n("pLZG"),y=n("7o/Q"),b=n("4I5i");function v(t){return function(e){return 0===t?Object(d.b)():e.lift(new w(t))}}class w{constructor(t){if(this.total=t,this.total<0)throw new b.a}call(t,e){return e.subscribe(new _(t,this.total))}}class _ extends y.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}var S=n("XDbj"),C=n("xbPD"),I=n("SpAZ"),E=n("eIep"),T=n("IzEk"),k=n("JX91"),O=n("Kqap"),x=n("zx2A");function A(t){return function(e){const n=new N(t),r=e.lift(n);return n.caught=r}}class N{constructor(t){this.selector=t}call(t,e){return e.subscribe(new M(t,this.selector,this.caught))}}class M extends x.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new x.a(this);this.add(r);const i=Object(x.c)(n,r);i!==r&&this.add(i)}}}var D=n("bOdf"),P=n("SxV6"),R=n("5+tZ"),j=n("vkgz"),L=n("nYR2"),F=n("bHdf");class U{constructor(t,e){this.id=t,this.url=e}}class V extends U{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class q extends U{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class B extends U{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class z extends U{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class W extends U{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class H extends U{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class K extends U{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class $ extends U{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Q extends U{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class G{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class X{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Y{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Z{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class J{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tt{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class et{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const nt="primary";class rt{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function it(t){return new rt(t)}function ot(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function st(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function at(t,e){const n=Object.keys(t),r=Object.keys(e);if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!ct(t[i],e[i]))return!1;return!0}function ct(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function ut(t){return Array.prototype.concat.apply([],t)}function lt(t){return t.length>0?t[t.length-1]:null}function ht(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function dt(t){return Object(i.ob)(t)?t:Object(i.pb)(t)?Object(s.a)(Promise.resolve(t)):Object(o.a)(t)}function ft(t,e,n){return n?function(t,e){return at(t,e)}(t.queryParams,e.queryParams)&&pt(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>ct(t[n],e[n]))}(t.queryParams,e.queryParams)&&gt(t.root,e.root)}function pt(t,e){if(!wt(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!pt(t.children[n],e.children[n]))return!1}return!0}function gt(t,e){return mt(t,e,e.segments)}function mt(t,e,n){if(t.segments.length>n.length)return!!wt(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!wt(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!gt(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!wt(t.segments,r)&&!!t.children.primary&&mt(t.children.primary,e,i)}}class yt{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=it(this.queryParams)),this._queryParamMap}toString(){return It.serialize(this)}}class bt{constructor(t,e){this.segments=t,this.children=e,this.parent=null,ht(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Et(this)}}class vt{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=it(this.parameters)),this._parameterMap}toString(){return Mt(this)}}function wt(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}function _t(t,e){let n=[];return ht(t.children,(t,r)=>{r===nt&&(n=n.concat(e(t,r)))}),ht(t.children,(t,r)=>{r!==nt&&(n=n.concat(e(t,r)))}),n}class St{}class Ct{parse(t){const e=new Lt(t);return new yt(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){return`${"/"+Tt(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Ot(e)}=${Ot(t)}`).join("&"):`${Ot(e)}=${Ot(n)}`});return e.length?"?"+e.join("&"):""}(t.queryParams)}${"string"==typeof t.fragment?"#"+encodeURI(t.fragment):""}`}}const It=new Ct;function Et(t){return t.segments.map(t=>Mt(t)).join("/")}function Tt(t,e){if(!t.hasChildren())return Et(t);if(e){const e=t.children.primary?Tt(t.children.primary,!1):"",n=[];return ht(t.children,(t,e)=>{e!==nt&&n.push(`${e}:${Tt(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=_t(t,(e,n)=>n===nt?[Tt(t.children.primary,!1)]:[`${n}:${Tt(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${Et(t)}/${e[0]}`:`${Et(t)}/(${e.join("//")})`}}function kt(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ot(t){return kt(t).replace(/%3B/gi,";")}function xt(t){return kt(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function At(t){return decodeURIComponent(t)}function Nt(t){return At(t.replace(/\+/g,"%20"))}function Mt(t){return`${xt(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${xt(t)}=${xt(e[t])}`).join("")}`;var e}const Dt=/^[^\/()?;=#]+/;function Pt(t){const e=t.match(Dt);return e?e[0]:""}const Rt=/^[^=?&#]+/,jt=/^[^?&#]+/;class Lt{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new bt([],{}):new bt([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new bt(t,e)),n}parseSegment(){const t=Pt(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new vt(At(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Pt(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Pt(this.remaining);t&&(n=t,this.capture(n))}t[At(e)]=At(n)}parseQueryParam(t){const e=function(t){const e=t.match(Rt);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(jt);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=Nt(e),i=Nt(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Pt(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=nt);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new bt([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Ft{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Ut(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Ut(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Vt(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Vt(t,this._root).map(t=>t.value)}}function Ut(t,e){if(t===e.value)return e;for(const n of e.children){const e=Ut(t,n);if(e)return e}return null}function Vt(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Vt(t,n);if(r.length)return r.unshift(e),r}return[]}class qt{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Bt(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class zt extends Ft{constructor(t,e){super(t),this.snapshot=e,Gt(this,t)}toString(){return this.snapshot.toString()}}function Wt(t,e){const n=function(t,e){const n=new $t([],{},{},"",{},nt,e,null,t.root,-1,{});return new Qt("",new qt(n,[]))}(t,e),r=new a.a([new vt("",{})]),i=new a.a({}),o=new a.a({}),s=new a.a({}),c=new a.a(""),u=new Ht(r,i,s,c,o,nt,e,n.root);return u.snapshot=n.root,new zt(new qt(u,[]),n)}class Ht{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(p.a)(t=>it(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(p.a)(t=>it(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Kt(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class $t{constructor(t,e,n,r,i,o,s,a,c,u,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=c,this._lastPathIndex=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=it(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=it(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Qt extends Ft{constructor(t,e){super(e),this.url=t,Gt(this,e)}toString(){return Xt(this._root)}}function Gt(t,e){e.value._routerState=t,e.children.forEach(e=>Gt(t,e))}function Xt(t){const e=t.children.length>0?` { ${t.children.map(Xt).join(", ")} } `:"";return`${t.value}${e}`}function Yt(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,at(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),at(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!at(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),at(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Zt(t,e){var n,r;return at(t.params,e.params)&&wt(n=t.url,r=e.url)&&n.every((t,e)=>at(t.parameters,r[e].parameters))&&!(!t.parent!=!e.parent)&&(!t.parent||Zt(t.parent,e.parent))}function Jt(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Jt(t,e,r);return Jt(t,e)})}(t,e,n);return new qt(r,i)}{const n=t.retrieve(e.value);if(n){const t=n.route;return te(e,t),t}{const n=new Ht(new a.a((r=e.value).url),new a.a(r.params),new a.a(r.queryParams),new a.a(r.fragment),new a.a(r.data),r.outlet,r.component,r),i=e.children.map(e=>Jt(t,e));return new qt(n,i)}}var r}function te(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)te(t.children[n],e.children[n])}function ee(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function ne(t){return"object"==typeof t&&null!=t&&t.outlets}function re(t,e,n,r,i){let o={};return r&&ht(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>""+t):""+t}),new yt(n.root===t?e:ie(n.root,t,e),o,i)}function ie(t,e,n){const r={};return ht(t.children,(t,i)=>{r[i]=t===e?n:ie(t,e,n)}),new bt(t.segments,r)}class oe{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&ee(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(ne);if(r&&r!==lt(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class se{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function ae(t,e,n){if(t||(t=new bt([],{})),0===t.segments.length&&t.hasChildren())return ce(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(ne(s))break;const a=""+s,c=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&c&&"object"==typeof c&&void 0===c.outlets){if(!de(a,c,e))return o;r+=2}else{if(!de(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new bt(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new bt(t.segments.slice(r.pathIndex),t.children),ce(e,0,i)}return r.match&&0===i.length?new bt(t.segments,{}):r.match&&!t.hasChildren()?ue(t,e,n):r.match?ce(t,0,i):ue(t,e,n)}function ce(t,e,n){if(0===n.length)return new bt(t.segments,{});{const r=function(t){return ne(t[0])?t[0].outlets:{[nt]:t}}(n),i={};return ht(r,(n,r)=>{null!==n&&(i[r]=ae(t.children[r],e,n))}),ht(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new bt(t.segments,i)}}function ue(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(ne(o)){const t=le(o.outlets);return new bt(r,t)}if(0===i&&ee(n[0])){r.push(new vt(t.segments[e].path,n[0])),i++;continue}const s=ne(o)?o.outlets.primary:""+o,a=i<n.length-1?n[i+1]:null;s&&a&&ee(a)?(r.push(new vt(s,he(a))),i+=2):(r.push(new vt(s,{})),i++)}return new bt(r,{})}function le(t){const e={};return ht(t,(t,n)=>{null!==t&&(e[n]=ue(new bt([],{}),0,t))}),e}function he(t){const e={};return ht(t,(t,n)=>e[n]=""+t),e}function de(t,e,n){return t==n.path&&at(e,n.parameters)}class fe{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Yt(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Bt(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),ht(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet);if(n){const r=Bt(t),i=t.value.component?n.children:e;ht(r,(t,e)=>this.deactivateRouteAndItsChildren(t,i)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(t,e,n){const r=Bt(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new tt(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Z(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Yt(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),pe(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function pe(t){Yt(t.value),t.children.forEach(pe)}class ge{constructor(t,e){this.routes=t,this.module=e}}function me(t){return"function"==typeof t}function ye(t){return t instanceof yt}const be=Symbol("INITIAL_VALUE");function ve(){return Object(E.a)(t=>Object(c.b)(...t.map(t=>t.pipe(Object(T.a)(1),Object(k.a)(be)))).pipe(Object(O.a)((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==be)return t;if(r===be&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||ye(r))return r}return t},t)},be),Object(m.a)(t=>t!==be),Object(p.a)(t=>ye(t)?t:!0===t),Object(T.a)(1)))}let we=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Cb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&i.Jb(0,"router-outlet")},directives:function(){return[dn]},encapsulation:2}),t})();function _e(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];Se(r,Ce(e,r))}}function Se(t,e){t.children&&_e(t.children,e)}function Ce(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Ie(t){const e=t.children&&t.children.map(Ie),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==nt&&(n.component=we),n}function Ee(t){return t.outlet||nt}class Te{constructor(t){this.segmentGroup=t||null}}class ke{constructor(t){this.urlTree=t}}function Oe(t){return new u.a(e=>e.error(new Te(t)))}function xe(t){return new u.a(e=>e.error(new ke(t)))}function Ae(t){return new u.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Ne{constructor(t,e,n,r,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(i.x)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,nt).pipe(Object(p.a)(t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment))).pipe(A(t=>{if(t instanceof ke)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof Te)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,nt).pipe(Object(p.a)(e=>this.createUrlTree(e,t.queryParams,t.fragment))).pipe(A(t=>{if(t instanceof Te)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new bt([],{[nt]:t}):t;return new yt(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(p.a)(t=>new bt([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){return function(t,e){if(0===Object.keys(t).length)return Object(o.a)({});const n=[],r=[],i={};return ht(t,(t,o)=>{const s=e(o,t).pipe(Object(p.a)(t=>i[o]=t));o===nt?n.push(s):r.push(s)}),o.a.apply(null,n.concat(r)).pipe(Object(g.a)(),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Object(m.a)((e,n)=>t(e,n,r)):I.a,v(1),n?Object(C.a)(e):Object(S.a)(()=>new l.a))}(),Object(p.a)(()=>i))}(n.children,(n,r)=>this.expandSegmentGroup(t,e,r,n))}expandSegment(t,e,n,r,i,a){const u=function(t){return t.reduce((t,e)=>{const n=Ee(e);return t.has(n)?t.get(n).push(e):t.set(n,[e]),t},new Map)}(n);u.has(i)||u.set(i,[]);const h=n=>Object(s.a)(n).pipe(Object(D.a)(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,a).pipe(A(t=>{if(t instanceof Te)return Object(o.a)(null);throw t}))),Object(P.a)(t=>null!==t),A(t=>{if(t instanceof l.a||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,r,i))return Object(o.a)(new bt([],{}));throw new Te(e)}throw t})),d=Array.from(u.entries()).map(([t,e])=>{const n=h(e);return t===i?n:n.pipe(Object(p.a)(()=>null),A(()=>Object(o.a)(null)))});return Object(s.a)(d).pipe(t=>t.lift(new c.a(void 0)),Object(P.a)(),Object(p.a)(t=>t.find(t=>null!==t)))}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return Ee(r)!==o&&""!==r.path?Oe(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):Oe(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?xe(i):this.lineralizeSegments(n,i).pipe(Object(R.a)(n=>{const i=new bt(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:c,positionalParamSegments:u}=Me(e,r,i);if(!s)return Oe(e);const l=this.applyRedirectCommands(a,r.redirectTo,u);return r.redirectTo.startsWith("/")?xe(l):this.lineralizeSegments(r,l).pipe(Object(R.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(c)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(Object(p.a)(t=>(n._loadedConfig=t,new bt(r,{})))):Object(o.a)(new bt(r,{}));const{matched:i,consumedSegments:s,lastChild:a}=Me(e,n,r);if(!i)return Oe(e);const c=r.slice(a);return this.getChildConfig(t,n,r).pipe(Object(R.a)(t=>{const n=t.module,r=t.routes,{segmentGroup:i,slicedSegments:a}=function(t,e,n,r){return n.length>0&&function(t,e,n){return n.some(n=>Pe(t,e,n)&&Ee(n)!==nt)}(t,n,r)?{segmentGroup:De(new bt(e,function(t,e){const n={};n.primary=e;for(const r of t)""===r.path&&Ee(r)!==nt&&(n[Ee(r)]=new bt([],{}));return n}(r,new bt(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some(n=>Pe(t,e,n))}(t,n,r)?{segmentGroup:De(new bt(t.segments,function(t,e,n,r){const i={};for(const o of n)Pe(t,e,o)&&!r[Ee(o)]&&(i[Ee(o)]=new bt([],{}));return Object.assign(Object.assign({},r),i)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,s,c,r);return 0===a.length&&i.hasChildren()?this.expandChildren(n,r,i).pipe(Object(p.a)(t=>new bt(s,t))):0===r.length&&0===a.length?Object(o.a)(new bt(s,{})):this.expandSegment(n,i,r,a,nt,!0).pipe(Object(p.a)(t=>new bt(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(o.a)(new ge(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(o.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(R.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(p.a)(t=>(e._loadedConfig=t,t))):function(t){return new u.a(e=>e.error(ot(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(o.a)(new ge([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(o.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&me(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!me(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return dt(o)});return Object(o.a)(i).pipe(ve(),Object(j.a)(t=>{if(!ye(t))return;const e=ot(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(p.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(o.a)(n);if(r.numberOfChildren>1||!r.children.primary)return Ae(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new yt(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return ht(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return ht(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new bt(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Me(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(e.matcher||st)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function De(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new bt(t.segments.concat(e.segments),e.children)}return t}function Pe(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}class Re{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class je{constructor(t,e){this.component=t,this.route=e}}function Le(t,e,n){const r=t._root;return Ue(r,e?e._root:null,n,[r.value])}function Fe(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Ue(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Bt(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const c=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!wt(t.url,e.url);case"pathParamsOrQueryParamsChange":return!wt(t.url,e.url)||!at(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Zt(t,e)||!at(t.queryParams,e.queryParams);case"paramsChange":default:return!Zt(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Re(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Ue(t,e,o.component?a?a.children:null:n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new je(a.outlet.component,s))}else s&&Ve(e,a,i),i.canActivateChecks.push(new Re(r)),Ue(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),ht(o,(t,e)=>Ve(t,n.getContext(e),i)),i}function Ve(t,e,n){const r=Bt(t),i=t.value;ht(r,(t,r)=>{Ve(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new je(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function qe(t,e){return null!==t&&e&&e(new J(t)),Object(o.a)(!0)}function Be(t,e){return null!==t&&e&&e(new Y(t)),Object(o.a)(!0)}function ze(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(o.a)(!0);const i=r.map(r=>Object(h.a)(()=>{const i=Fe(r,e,n);let o;if(function(t){return t&&me(t.canActivate)}(i))o=dt(i.canActivate(e,t));else{if(!me(i))throw new Error("Invalid CanActivate guard");o=dt(i(e,t))}return o.pipe(Object(P.a)())}));return Object(o.a)(i).pipe(ve())}function We(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Object(h.a)(()=>{const i=e.guards.map(i=>{const o=Fe(i,e.node,n);let s;if(function(t){return t&&me(t.canActivateChild)}(o))s=dt(o.canActivateChild(r,t));else{if(!me(o))throw new Error("Invalid CanActivateChild guard");s=dt(o(r,t))}return s.pipe(Object(P.a)())});return Object(o.a)(i).pipe(ve())}));return Object(o.a)(i).pipe(ve())}class He{}class Ke{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){try{const t=Ge(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,nt),n=new $t([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},nt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new qt(n,e),i=new Qt(this.url,r);return this.inheritParamsAndData(i._root),Object(o.a)(i)}catch(t){return new u.a(e=>e.error(t))}}inheritParamsAndData(t){const e=t.value,n=Kt(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=_t(e,(e,n)=>this.processSegmentGroup(t,e,n));return function(t){const e={};t.forEach(t=>{const n=e[t.value.outlet];if(n){const e=n.url.map(t=>t.toString()).join("/"),r=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${r}'.`)}e[t.value.outlet]=t.value})}(n),n.sort((t,e)=>t.value.outlet===nt?-1:e.value.outlet===nt?1:t.value.outlet.localeCompare(e.value.outlet)),n}processSegment(t,e,n,r){for(const o of t)try{return this.processSegmentAgainstRoute(o,e,n,r)}catch(i){if(!(i instanceof He))throw i}if(this.noLeftoversInUrl(e,n,r))return[];throw new He}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo)throw new He;if((t.outlet||nt)!==r)throw new He;let i,o=[],s=[];if("**"===t.path){const o=n.length>0?lt(n).parameters:{};i=new $t(n,o,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ze(t),r,t.component,t,$e(e),Qe(e)+n.length,Je(t))}else{const a=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new He;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(e.matcher||st)(n,t,e);if(!r)throw new He;const i={};ht(r.posParams,(t,e)=>{i[e]=t.path});const o=r.consumed.length>0?Object.assign(Object.assign({},i),r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o}}(e,t,n);o=a.consumedSegments,s=n.slice(a.lastChild),i=new $t(o,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ze(t),r,t.component,t,$e(e),Qe(e)+o.length,Je(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:c,slicedSegments:u}=Ge(e,o,s,a,this.relativeLinkResolution);if(0===u.length&&c.hasChildren()){const t=this.processChildren(a,c);return[new qt(i,t)]}if(0===a.length&&0===u.length)return[new qt(i,[])];const l=this.processSegment(a,c,u,nt);return[new qt(i,l)]}}function $e(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Qe(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Ge(t,e,n,r,i){if(n.length>0&&function(t,e,n){return n.some(n=>Xe(t,e,n)&&Ye(n)!==nt)}(t,n,r)){const i=new bt(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&Ye(o)!==nt){const n=new bt([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[Ye(o)]=n}return i}(t,e,r,new bt(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Xe(t,e,n))}(t,n,r)){const o=new bt(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(Xe(t,n,a)&&!i[Ye(a)]){const n=new bt([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[Ye(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new bt(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function Xe(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function Ye(t){return t.outlet||nt}function Ze(t){return t.data||{}}function Je(t){return t.resolve||{}}function tn(t){return function(e){return e.pipe(Object(E.a)(e=>{const n=t(e);return n?Object(s.a)(n).pipe(Object(p.a)(()=>e)):Object(s.a)([e])}))}}class en extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const nn=new i.q("ROUTES");class rn{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(Object(p.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new ge(ut(r.injector.get(nn)).map(Ie),r)}))}loadModuleFactory(t){return"string"==typeof t?Object(s.a)(this.loader.load(t)):dt(t()).pipe(Object(R.a)(t=>t instanceof i.v?Object(o.a)(t):Object(s.a)(this.compiler.compileModuleAsync(t))))}}class on{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new sn,this.attachRef=null}}class sn{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new on,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class an{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function cn(t){throw t}function un(t,e,n){return e.parse("/")}function ln(t,e){return Object(o.a)(null)}let hn=(()=>{class t{constructor(t,e,n,r,o,s,c,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new f.a,this.errorHandler=cn,this.malformedUriErrorHandler=un,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ln,afterPreactivation:ln},this.urlHandlingStrategy=new an,this.routeReuseStrategy=new en,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(i.x),this.console=o.get(i.V);const l=o.get(i.z);this.isNgZoneEnabled=l instanceof i.z,this.resetConfig(u),this.currentUrlTree=new yt(new bt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new rn(s,c,t=>this.triggerEvent(new G(t)),t=>this.triggerEvent(new X(t))),this.routerState=Wt(this.currentUrlTree,this.rootComponentType),this.transitions=new a.a({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Object(m.a)(t=>0!==t.id),Object(p.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Object(E.a)(t=>{let n=!1,r=!1;return Object(o.a)(t).pipe(Object(j.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Object(E.a)(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(o.a)(t).pipe(Object(E.a)(t=>{const n=this.transitions.getValue();return e.next(new V(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?d.a:[t]}),Object(E.a)(t=>Promise.resolve(t)),(r=this.ngModule.injector,i=this.configLoader,s=this.urlSerializer,a=this.config,function(t){return t.pipe(Object(E.a)(t=>function(t,e,n,r,i){return new Ne(t,e,n,r,i).apply()}(r,i,s,t.extractedUrl,a).pipe(Object(p.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e})))))}),Object(j.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return function(o){return o.pipe(Object(R.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){return new Ke(t,e,n,r,i,o).recognize()}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(p.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t})))))}}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(j.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),Object(j.a)(t=>{const n=new W(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,s,a;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:s,extras:a}=t,c=new V(n,this.serializeUrl(r),i,s);e.next(c);const u=Wt(r,this.rootComponentType).snapshot;return Object(o.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},a),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),d.a}),tn(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(j.a)(t=>{const e=new H(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(p.a)(t=>Object.assign(Object.assign({},t),{guards:Le(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return function(n){return n.pipe(Object(R.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:c}}=n;return 0===c.length&&0===a.length?Object(o.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(s.a)(t).pipe(Object(R.a)(t=>function(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||0===s.length)return Object(o.a)(!0);const a=s.map(o=>{const s=Fe(o,e,i);let a;if(function(t){return t&&me(t.canDeactivate)}(s))a=dt(s.canDeactivate(t,e,n,r));else{if(!me(s))throw new Error("Invalid CanDeactivate guard");a=dt(s(t,e,n,r))}return a.pipe(Object(P.a)())});return Object(o.a)(a).pipe(ve())}(t.component,t.route,n,e,r)),Object(P.a)(t=>!0!==t,!0))}(c,r,i,t).pipe(Object(R.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(s.a)(e).pipe(Object(D.a)(e=>Object(s.a)([Be(e.route.parent,r),qe(e.route,r),We(t,e.path,n),ze(t,e.route,n)]).pipe(Object(g.a)(),Object(P.a)(t=>!0!==t,!0))),Object(P.a)(t=>!0!==t,!0))}(r,a,t,e):Object(o.a)(n)),Object(p.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))}))}}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(j.a)(t=>{if(ye(t.guardsResult)){const e=ot(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}}),Object(j.a)(t=>{const e=new K(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Object(m.a)(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new B(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),tn(t=>{if(t.guards.canActivateChecks.length)return Object(o.a)(t).pipe(Object(j.a)(t=>{const e=new $(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(E.a)(t=>{let n=!1;return Object(o.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,function(t){return t.pipe(Object(R.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(o.a)(t);let a=0;return Object(s.a)(n).pipe(Object(D.a)(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(o.a)({});const a={};return Object(s.a)(i).pipe(Object(R.a)(i=>function(t,e,n,r){const i=Fe(t,e,r);return dt(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(j.a)(t=>{a[i]=t}))),v(1),Object(R.a)(()=>Object.keys(a).length===i.length?Object(o.a)(a):d.a))}(t._resolve,t,e,r).pipe(Object(p.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Kt(t,n).resolve),null)))}(t.route,e,r,i)),Object(j.a)(()=>a++),v(1),Object(R.a)(e=>a===n.length?Object(o.a)(t):d.a))}))}),Object(j.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new B(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(j.a)(t=>{const e=new Q(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),tn(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(p.a)(t=>{const e=function(t,e,n){const r=Jt(t,e._root,n?n._root:void 0);return new zt(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(j.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(i=this.rootContexts,a=this.routeReuseStrategy,c=t=>this.triggerEvent(t),Object(p.a)(t=>(new fe(a,t.targetRouterState,t.currentRouterState,c).activate(i),t))),Object(j.a)({next(){n=!0},complete(){n=!0}}),Object(L.a)(()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new B(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null}),A(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=ye(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new B(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);return this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new z(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(o){t.reject(o)}}var i;return d.a}));var i,a,c}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){_e(t),this.config=t.map(Ie),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,c=s?this.currentUrlTree.fragment:i;let u=null;switch(o){case"merge":u=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=r||null}return null!==u&&(u=this.removeEmptyProps(u)),function(t,e,n,r,i){if(0===n.length)return re(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new oe(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return ht(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new oe(n,e,r)}(n);if(o.toRoot())return re(e.root,new bt([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new se(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new se(t,t===e.root,0)}const r=ee(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new se(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?ce(s.segmentGroup,s.index,o.commands):ae(s.segmentGroup,s.index,o.commands);return re(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,u,c)}navigateByUrl(t,e={skipLocationChange:!1}){const n=ye(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}isActive(t,e){if(ye(t))return ft(this.currentUrlTree,t,e);const n=this.parseUrl(t);return ft(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new q(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let c,u,l;i?(c=i.resolve,u=i.reject,l=i.promise):l=new Promise((t,e)=>{c=t,u=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(i.Qb(i.M),i.Qb(St),i.Qb(sn),i.Qb(r.i),i.Qb(i.r),i.Qb(i.w),i.Qb(i.i),i.Qb(void 0))},t.\u0275prov=i.Eb({token:t,factory:t.\u0275fac}),t})(),dn=(()=>{class t{constructor(t,e,n,r,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new i.n,this.deactivateEvents=new i.n,this.name=r||nt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new fn(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(i.Ib(sn),i.Ib(i.O),i.Ib(i.j),i.Rb("name"),i.Ib(i.h))},t.\u0275dir=i.Db({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class fn{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Ht?this.route:t===sn?this.childContexts:this.parent.get(t,e)}}class pn{}class gn{preload(t,e){return Object(o.a)(null)}}let mn=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new rn(e,n,e=>t.triggerEvent(new G(e)),e=>t.triggerEvent(new X(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Object(m.a)(t=>t instanceof q),Object(D.a)(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(i.x);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(s.a)(n).pipe(Object(F.a)(),Object(p.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(Object(R.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(i.Qb(hn),i.Qb(i.w),i.Qb(i.i),i.Qb(i.r),i.Qb(pn))},t.\u0275prov=i.Eb({token:t,factory:t.\u0275fac}),t})(),yn=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof V?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof q&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof et&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new et(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(i.Qb(hn),i.Qb(r.p),i.Qb(void 0))},t.\u0275prov=i.Eb({token:t,factory:t.\u0275fac}),t})();const bn=new i.q("ROUTER_CONFIGURATION"),vn=new i.q("ROUTER_FORROOT_GUARD"),wn=[r.i,{provide:St,useClass:Ct},{provide:hn,useFactory:function(t,e,n,i,o,s,a,c={},u,l){const h=new hn(null,t,e,n,i,o,s,ut(a));if(u&&(h.urlHandlingStrategy=u),l&&(h.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(c,h),c.enableTracing){const t=Object(r.t)();h.events.subscribe(e=>{t.logGroup("Router Event: "+e.constructor.name),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return h},deps:[St,sn,r.i,i.r,i.w,i.i,nn,bn,[class{},new i.A],[class{},new i.A]]},sn,{provide:Ht,useFactory:function(t){return t.routerState.root},deps:[hn]},{provide:i.w,useClass:i.J},mn,gn,class{preload(t,e){return e().pipe(A(()=>Object(o.a)(null)))}},{provide:bn,useValue:{enableTracing:!1}}];function _n(){return new i.y("Router",hn)}let Sn=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[wn,Tn(e),{provide:vn,useFactory:En,deps:[[hn,new i.A,new i.I]]},{provide:bn,useValue:n||{}},{provide:r.j,useFactory:In,deps:[r.o,[new i.p(r.a),new i.A],bn]},{provide:yn,useFactory:Cn,deps:[hn,r.p,bn]},{provide:pn,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:gn},{provide:i.y,multi:!0,useFactory:_n},[kn,{provide:i.d,multi:!0,useFactory:On,deps:[kn]},{provide:An,useFactory:xn,deps:[kn]},{provide:i.b,multi:!0,useExisting:An}]]}}static forChild(e){return{ngModule:t,providers:[Tn(e)]}}}return t.\u0275mod=i.Gb({type:t}),t.\u0275inj=i.Fb({factory:function(e){return new(e||t)(i.Qb(vn,8),i.Qb(hn,8))}}),t})();function Cn(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new yn(t,e,n)}function In(t,e,n={}){return n.useHash?new r.f(t,e):new r.n(t,e)}function En(t){return"guarded"}function Tn(t){return[{provide:i.a,multi:!0,useValue:t},{provide:nn,multi:!0,useValue:t}]}let kn=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new f.a}appInitializer(){return this.injector.get(r.h,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(hn),r=this.injector.get(bn);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Object(o.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(bn),n=this.injector.get(mn),r=this.injector.get(yn),o=this.injector.get(hn),s=this.injector.get(i.g);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),r.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(i.Qb(i.r))},t.\u0275prov=i.Eb({token:t,factory:t.\u0275fac}),t})();function On(t){return t.appInitializer.bind(t)}function xn(t){return t.bootstrapListener.bind(t)}const An=new i.q("Router Initializer")},u4H8:function(t,e,n){"use strict";function r(t){!function(t){t.addAction({id:"console-autocomplete",label:"console.log($0)",keybindings:[monaco.KeyMod.CtrlCmd|monaco.KeyMod.Alt|monaco.KeyCode.KEY_C],precondition:null,keybindingContext:null,contextMenuGroupId:"navigation",contextMenuOrder:1.5,run:e=>{let n=t.getPosition();const r=e.getModel().getLineContent(n.lineNumber),i=r.search(/\S|$/),o=r.substring(i),s=new monaco.Range(n.lineNumber,i+1,n.lineNumber,n.column);t.executeEdits("",[{range:s,text:"",forceMoveMarkers:!0}]),n=t.getPosition();const a=new monaco.Range(n.lineNumber,i+1,n.lineNumber,i+1);t.executeEdits("",[{range:a,text:`console.log(${o});`,forceMoveMarkers:!0}])}})}(t)}n.r(e),n.d(e,"plugIn",function(){return r})},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new c(t,this.nextOrObserver,this.error,this.complete))}}class c extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},vt3g:function(t,e,n){var r={"./auto-import/auto-import.plugin":"Atfz","./go-to-definition/go-to-definition.plugin":"qN0M","./go-to-error/go-to-error.plugin":"1oDK","./macros/macros.plugin":"u4H8","./path-completion/path-completion.plugin":"ox97","./prettier/prettier.plugin":"ejEf"};function i(t){var e=o(t);return n(e)}function o(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}i.keys=function(){return Object.keys(r)},i.resolve=o,t.exports=i,i.id="vt3g"},w1tV:function(t,e,n){"use strict";n.d(e,"a",function(){return p});var r=n("XNiG"),i=n("HDdC"),o=n("7o/Q"),s=n("quSY");function a(){return function(t){return t.lift(new c(t))}}class c{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new u(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class u extends o.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class l extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new s.a,t.add(this.source.subscribe(new d(this.getSubject(),this))),t.closed&&(this._connection=null,t=s.a.EMPTY)),t}refCount(){return a()(this)}}const h=(()=>{const t=l.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class d extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function f(){return new r.a}function p(){return t=>{return a()((e=f,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,h);return r.source=t,r.subjectFactory=n,r})(t));var e}}},wj3C:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n("30Go"),o=n("zVF4"),s=n("q/0M"),a=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r),c=new o.ErrorFactory("app","Firebase",a),u="[DEFAULT]",l=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.services_={},this.tokenListeners_=[],this.analyticsEventRequests_=[],this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=o.deepCopy(t);var i=this;this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(t){r.tokenListeners_.push(t),setTimeout(function(){return t(null)},0)},removeAuthTokenListener:function(t){r.tokenListeners_=r.tokenListeners_.filter(function(e){return e!==t})},analytics:{logEvent:function(){i.analyticsEventRequests_.push(arguments)}}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){t.firebase_.INTERNAL.removeApp(t.name_);for(var e=[],n=0,r=Object.keys(t.services_);n<r.length;n++)for(var i=r[n],o=0,s=Object.keys(t.services_[i]);o<s.length;o++)e.push(t.services_[i][s[o]]);return Promise.all(e.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))}).then(function(){t.isDeleted_=!0,t.services_={}})},t.prototype._getService=function(t,e){if(void 0===e&&(e=u),this.checkDestroyed_(),this.services_[t]||(this.services_[t]={}),!this.services_[t][e]){var n=e!==u?e:void 0,r=this.firebase_.INTERNAL.factories[t](this,this.extendApp.bind(this),n);this.services_[t][e]=r}return this.services_[t][e]},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=u),this.services_[t]&&this.services_[t][e]&&delete this.services_[t][e]},t.prototype.extendApp=function(t){if(o.deepExtend(this,t),t.INTERNAL){if(t.INTERNAL.addAuthTokenListener){for(var e=0,n=this.tokenListeners_;e<n.length;e++)this.INTERNAL.addAuthTokenListener(n[e]);this.tokenListeners_=[]}if(t.INTERNAL.analytics){for(var r=0,i=this.analyticsEventRequests_;r<i.length;r++)this.INTERNAL.analytics.logEvent.apply(void 0,i[r]);this.analyticsEventRequests_=[]}}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw c.create("app-deleted",{appName:this.name_})},t}();l.prototype.name&&l.prototype.options||l.prototype.delete||console.log("dc");var h=new s.Logger("@firebase/app");if(o.isBrowser()&&void 0!==self.firebase){h.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var d=self.firebase.SDK_VERSION;d&&d.indexOf("LITE")>=0&&h.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var f=function t(){var e=function(t){var e={},n={},r={},i={__esModule:!0,initializeApp:function(n,r){void 0===r&&(r={}),"object"==typeof r&&null!==r||(r={name:r});var s=r;void 0===s.name&&(s.name=u);var a=s.name;if("string"!=typeof a||!a)throw c.create("bad-app-name",{appName:String(a)});if(o.contains(e,a))throw c.create("duplicate-app",{appName:a});var h=new t(n,s,i);return e[a]=h,l(h,"create"),h},app:s,apps:null,SDK_VERSION:"7.2.3",INTERNAL:{registerService:function(e,u,l,d,f){if(void 0===f&&(f=!1),n[e])return h.debug("There were multiple attempts to register service "+e+"."),i[e];function p(t){if(void 0===t&&(t=s()),"function"!=typeof t[e])throw c.create("invalid-app-argument",{appName:e});return t[e]()}return n[e]=u,d&&(r[e]=d,a().forEach(function(t){d("create",t)})),void 0!==l&&o.deepExtend(p,l),i[e]=p,t.prototype[e]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this._getService.bind(this,e).apply(this,f?t:[])},p},removeApp:function(t){l(e[t],"delete"),delete e[t]},factories:n,useAsService:d}};function s(t){if(!o.contains(e,t=t||u))throw c.create("no-app",{appName:t});return e[t]}function a(){return Object.keys(e).map(function(t){return e[t]})}function l(t,e){for(var i=0,o=Object.keys(n);i<o.length;i++){var s=d(0,o[i]);if(null===s)return;r[s]&&r[s](e,t)}}function d(t,e){return"serverAuth"===e?null:e}return i.default=i,Object.defineProperty(i,"apps",{get:a}),s.App=t,i}(l);return e.INTERNAL=i.__assign(i.__assign({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){o.deepExtend(e,t)},createSubscribe:o.createSubscribe,ErrorFactory:o.ErrorFactory,deepExtend:o.deepExtend}),e}(),p=f.initializeApp;f.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.isNode()&&h.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),p.apply(void 0,t)};var g=f;e.default=g,e.firebase=g},x7I3:function(t,e,n){"use strict";n.r(e),n.d(e,"ErrorCode",function(){return ur}),n.d(e,"EventType",function(){return lr}),n.d(e,"WebChannel",function(){return hr}),n.d(e,"XhrIo",function(){return dr}),n.d(e,"createWebChannelTransport",function(){return cr});var r,i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},o=o||{},s=i;function a(t){return"string"==typeof t}function c(t){return"number"==typeof t}function u(t,e){t=t.split("."),e=e||s;for(var n=0;n<t.length;n++)if(null==(e=e[t[n]]))return null;return e}function l(){}function h(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function d(t){return"array"==h(t)}function f(t){var e=h(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var g="closure_uid_"+(1e9*Math.random()>>>0),m=0;function y(t,e,n){return t.call.apply(t.bind,arguments)}function b(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function v(t,e,n){return(v=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:b).apply(null,arguments)}function w(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var _=Date.now||function(){return+new Date};function S(t,e){function n(){}n.prototype=e.prototype,t.N=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.yb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function C(){this.j=this.j,this.i=this.i}C.prototype.j=!1,C.prototype.la=function(){!this.j&&(this.j=!0,this.G(),0)&&(this[g]||(this[g]=++m))},C.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var I=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(a(t))return a(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},E=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=a(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function T(t){return Array.prototype.concat.apply([],arguments)}function k(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function O(t){return/^[\s\xa0]*$/.test(t)}var x,A=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function N(t,e){return-1!=t.indexOf(e)}function M(t,e){return t<e?-1:t>e?1:0}t:{var D=s.navigator;if(D){var P=D.userAgent;if(P){x=P;break t}}x=""}function R(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function j(t){var e,n={};for(e in t)n[e]=t[e];return n}var L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<L.length;o++)n=L[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function U(t){return U[" "](t),t}U[" "]=l;var V,q,B=N(x,"Opera"),z=N(x,"Trident")||N(x,"MSIE"),W=N(x,"Edge"),H=W||z,K=N(x,"Gecko")&&!(N(x.toLowerCase(),"webkit")&&!N(x,"Edge"))&&!(N(x,"Trident")||N(x,"MSIE"))&&!N(x,"Edge"),$=N(x.toLowerCase(),"webkit")&&!N(x,"Edge");function Q(){var t=s.document;return t?t.documentMode:void 0}t:{var G="",X=(q=x,K?/rv:([^\);]+)(\)|;)/.exec(q):W?/Edge\/([\d\.]+)/.exec(q):z?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(q):$?/WebKit\/(\S+)/.exec(q):B?/(?:Version)[ \/]?(\S+)/.exec(q):void 0);if(X&&(G=X?X[1]:""),z){var Y=Q();if(null!=Y&&Y>parseFloat(G)){V=String(Y);break t}}V=G}var Z,J={};function tt(t){return function(t,e){var n=J;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=A(String(V)).split("."),r=A(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=M(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||M(0==s[2].length,0==a[2].length)||M(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var et=s.document;Z=et&&z?Q()||("CSS1Compat"==et.compatMode?parseInt(V,10):5):void 0;var nt=!z||9<=Number(Z),rt=z&&!tt("9"),it=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",l,e),s.removeEventListener("test",l,e)}catch(n){}return t}();function ot(t,e){this.type=t,this.a=this.target=e,this.Ja=!0}function st(t,e){if(ot.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(K){t:{try{U(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=a(t.pointerType)?t.pointerType:at[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}ot.prototype.b=function(){this.Ja=!1},S(st,ot);var at={2:"touch",3:"pen",4:"mouse"};st.prototype.b=function(){st.N.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,rt)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var ct="closure_listenable_"+(1e6*Math.random()|0),ut=0;function lt(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.da=i,this.key=++ut,this.X=this.Z=!1}function ht(t){t.X=!0,t.listener=null,t.proxy=null,t.src=null,t.da=null}function dt(t){this.src=t,this.a={},this.b=0}function ft(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=I(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ht(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function pt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.X&&o.listener==e&&o.capture==!!n&&o.da==r)return i}return-1}dt.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=pt(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new lt(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var gt="closure_lm_"+(1e6*Math.random()|0),mt={};function yt(t,e,n,r,i){if(r&&r.once)return vt(t,e,n,r,i);if(d(e)){for(var o=0;o<e.length;o++)yt(t,e[o],n,r,i);return null}return n=Tt(n),t&&t[ct]?t.Aa(e,n,p(r)?!!r.capture:!!r,i):bt(t,e,n,!1,r,i)}function bt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=p(i)?!!i.capture:!!i;if(s&&!nt)return null;var a=It(t);if(a||(t[gt]=a=new dt(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Ct,e=nt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)it||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(St(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function vt(t,e,n,r,i){if(d(e)){for(var o=0;o<e.length;o++)vt(t,e[o],n,r,i);return null}return n=Tt(n),t&&t[ct]?t.Ba(e,n,p(r)?!!r.capture:!!r,i):bt(t,e,n,!0,r,i)}function wt(t,e,n,r,i){if(d(e))for(var o=0;o<e.length;o++)wt(t,e[o],n,r,i);else r=p(r)?!!r.capture:!!r,n=Tt(n),t&&t[ct]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=pt(o=t.a[e],n,r,i))&&(ht(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=It(t))&&(e=t.a[e.toString()],t=-1,e&&(t=pt(e,n,r,i)),(n=-1<t?e[t]:null)&&_t(n))}function _t(t){if(!c(t)&&t&&!t.X){var e=t.src;if(e&&e[ct])ft(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(St(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=It(e))?(ft(n,t),0==n.b&&(n.src=null,e[gt]=null)):ht(t)}}}function St(t){return t in mt?mt[t]:mt[t]="on"+t}function Ct(t,e){return!!t.X||function(t,e){var n=t.listener,r=t.da||t.src;return t.Z&&_t(t),n.call(r,e)}(t,nt?new st(e,this):e=new st(e||u("window.event"),this))}function It(t){return(t=t[gt])instanceof dt?t:null}var Et="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tt(t){return"function"==h(t)?t:(t[Et]||(t[Et]=function(e){return t.handleEvent(e)}),t[Et])}function kt(){C.call(this),this.c=new dt(this),this.J=this,this.B=null}function Ot(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.X&&s.capture==n){var a=s.listener,c=s.da||s.src;s.Z&&ft(t.c,s),i=!1!==a.call(c,r)&&i}}return i&&0!=r.Ja}S(kt,C),kt.prototype[ct]=!0,(r=kt.prototype).addEventListener=function(t,e,n,r){yt(this,t,e,n,r)},r.removeEventListener=function(t,e,n,r){wt(this,t,e,n,r)},r.dispatchEvent=function(t){var e,n=this.B;if(n)for(e=[];n;n=n.B)e.push(n);n=this.J;var r=t.type||t;if(a(t))t=new ot(t,n);else if(t instanceof ot)t.target=t.target||n;else{var i=t;F(t=new ot(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.a=e[o];i=Ot(s,r,!0,t)&&i}if(i=Ot(s=t.a=n,r,!0,t)&&i,i=Ot(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Ot(s=t.a=e[o],r,!1,t)&&i;return i},r.G=function(){if(kt.N.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ht(n[r]);delete e.a[t],e.b--}}this.B=null},r.Aa=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},r.Ba=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var xt=s.JSON.stringify;function At(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function Nt(){this.b=this.a=null}At.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var Mt,Dt=new At(function(){return new Rt},function(t){t.reset()});function Pt(){var t=Ut,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Rt(){this.next=this.b=this.a=null}function jt(t){s.setTimeout(function(){throw t},0)}function Lt(t,e){Mt||function(){var t=s.Promise.resolve(void 0);Mt=function(){t.then(Vt)}}(),Ft||(Mt(),Ft=!0),Ut.add(t,e)}Nt.prototype.add=function(t,e){var n=Dt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Rt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Rt.prototype.reset=function(){this.next=this.b=this.a=null};var Ft=!1,Ut=new Nt;function Vt(){for(var t;t=Pt();){try{t.a.call(t.b)}catch(n){jt(n)}var e=Dt;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Ft=!1}function qt(t,e){kt.call(this),this.b=t||1,this.a=e||s,this.f=v(this.gb,this),this.g=_()}function Bt(t){t.ba=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function zt(t,e,n){if("function"==h(t))n&&(t=v(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=v(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function Wt(t,e,n){C.call(this),this.f=null!=n?v(t,n):t,this.c=e,this.b=v(this.ab,this),this.a=[]}function Ht(t){t.U=zt(t.b,t.c),t.f.apply(null,t.a)}function Kt(t){C.call(this),this.b=t,this.a={}}S(qt,kt),(r=qt.prototype).ba=!1,r.L=null,r.gb=function(){if(this.ba){var t=_()-this.g;0<t&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(Bt(this),this.start()))}},r.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=_())},r.G=function(){qt.N.G.call(this),Bt(this),delete this.a},S(Wt,C),(r=Wt.prototype).ea=!1,r.U=null,r.Ua=function(t){this.a=arguments,this.U?this.ea=!0:Ht(this)},r.G=function(){Wt.N.G.call(this),this.U&&(s.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},r.ab=function(){this.U=null,this.ea&&(this.ea=!1,Ht(this))},S(Kt,C);var $t=[];function Qt(t,e,n,r){d(n)||(n&&($t[0]=n.toString()),n=$t);for(var i=0;i<n.length;i++){var o=yt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Gt(t){R(t.a,function(t,e){this.a.hasOwnProperty(e)&&_t(t)},t),t.a={}}function Xt(){}Kt.prototype.G=function(){Kt.N.G.call(this),Gt(this)},Kt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yt=new kt;function Zt(t){ot.call(this,"serverreachability",t)}function Jt(t){Yt.dispatchEvent(new Zt(Yt,t))}function te(t){ot.call(this,"statevent",t)}function ee(t){Yt.dispatchEvent(new te(Yt,t))}function ne(t){ot.call(this,"timingevent",t)}function re(t,e){if("function"!=h(t))throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){t()},e)}S(Zt,ot),S(te,ot),S(ne,ot);var ie={NO_ERROR:0,hb:1,ob:2,nb:3,kb:4,mb:5,pb:6,Ma:7,TIMEOUT:8,sb:9},oe={jb:"complete",wb:"success",Na:"error",Ma:"abort",ub:"ready",vb:"readystatechange",TIMEOUT:"timeout",qb:"incrementaldata",tb:"progress",lb:"downloadprogress",xb:"uploadprogress"};function se(){}function ae(){}se.prototype.a=null;var ce,ue={OPEN:"a",ib:"b",Na:"c",rb:"d"};function le(){ot.call(this,"d")}function he(){ot.call(this,"c")}function de(){}function fe(t,e,n){this.g=t,this.W=e,this.V=n||1,this.I=new Kt(this),this.O=pe,this.P=new qt(t=H?125:void 0),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}S(le,ot),S(he,ot),S(de,se),ce=new de;var pe=45e3,ge={},me={};function ye(t,e,n){t.F=1,t.f=Be(Re(e)),t.l=n,t.H=!0,ve(t,null)}function be(t,e,n,r){t.F=1,t.f=Be(Re(e)),t.l=null,t.H=n,ve(t,r)}function ve(t,e){t.v=_(),Se(t),t.D=Re(t.f),qe(t.D,"t",t.V),t.A=0,t.a=t.g.$(t.g.Y()?e:null),0<t.J&&(t.B=new Wt(v(t.Ka,t,t.a),t.J)),Qt(t.I,t.a,"readystatechange",t.eb),e=t.h?j(t.h):{},t.l?(t.w||(t.w="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ca(t.D,t.w,t.l,e)):(t.w="GET",t.a.ca(t.D,t.w,null,e)),Jt(1)}function we(t,e,n){for(var r=!0;!t.m&&t.A<n.length;){var i=_e(t,n);if(i==me){4==e&&(t.c=4,ee(14),r=!1);break}if(i==ge){t.c=4,ee(15),r=!1;break}ke(t,i)}4==e&&0==n.length&&(t.c=1,ee(16),r=!1),t.b=t.b&&r,r||(Te(t),Ee(t))}function _e(t,e){var n=t.A,r=e.indexOf("\n",n);return-1==r?me:(n=Number(e.substring(n,r)),isNaN(n)?ge:(r+=1)+n>e.length?me:(e=e.substr(r,n),t.A=r+n,e))}function Se(t){t.R=_()+t.O,Ce(t,t.O)}function Ce(t,e){if(null!=t.i)throw Error("WatchDog timer not null");t.i=re(v(t.bb,t),e)}function Ie(t){t.i&&(s.clearTimeout(t.i),t.i=null)}function Ee(t){t.g.Da()||t.m||t.g.na(t)}function Te(t){Ie(t);var e=t.B;e&&"function"==typeof e.la&&e.la(),t.B=null,Bt(t.P),Gt(t.I),t.a&&(e=t.a,t.a=null,e.abort(),e.la())}function ke(t,e){try{t.g.Ga(t,e),Jt(4)}catch(n){}}function Oe(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||a(t))E(t,e,void 0);else{if(t.K&&"function"==typeof t.K)var n=t.K();else if(t.C&&"function"==typeof t.C)n=void 0;else if(f(t)||a(t)){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.C&&"function"==typeof t.C)return t.C();if(a(t))return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function xe(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof xe)for(n=t.K(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ae(t,e){Me(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ne(t))}function Ne(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Me(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Me(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Me(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(r=fe.prototype).setTimeout=function(t){this.O=t},r.eb=function(t){t=t.target;var e=this.B;e&&3==Rn(t)?e.Ua():this.Ka(t)},r.Ka=function(t){try{if(t==this.a)t:{var e=Rn(this.a),n=this.a.ya(),r=this.a.T();if(!(3>e||3==e&&!H&&!this.a.aa())){this.m||4!=e||7==n||Jt(8==n||0>=r?3:2),Ie(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=200==i){if(this.S&&!this.s){e:{if(this.a){var s=jn(this.a,"X-HTTP-Initial-Response");if(s&&!O(s)){var a=s;break e}}a=null}if(!a){this.b=!1,this.c=3,ee(12),Te(this),Ee(this);break t}this.s=!0,ke(this,a)}this.H?(we(this,e,o),H&&this.b&&3==e&&(Qt(this.I,this.P,"tick",this.cb),this.P.start())):ke(this,o),4==e&&Te(this),this.b&&!this.m&&(4==e?this.g.na(this):(this.b=!1,Se(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,ee(12)):(this.c=0,ee(13)),Te(this),Ee(this)}}}catch(c){}},r.cb=function(){if(this.a){var t=Rn(this.a),e=this.a.aa();this.A<e.length&&(Ie(this),we(this,t,e),this.b&&4!=t&&Se(this))}},r.cancel=function(){this.m=!0,Te(this)},r.bb=function(){this.i=null;var t=_();0<=t-this.R?(2!=this.F&&(Jt(3),ee(17)),Te(this),this.c=2,Ee(this)):Ce(this,this.R-t)},(r=xe.prototype).C=function(){Ne(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},r.K=function(){return Ne(this),this.a.concat()},r.get=function(t,e){return Me(this.b,t)?this.b[t]:e},r.set=function(t,e){Me(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},r.forEach=function(t,e){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var De=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Pe(t,e){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,t instanceof Pe?(this.h=void 0!==e?e:t.h,je(this,t.f),this.j=t.j,Le(this,t.b),Fe(this,t.i),this.a=t.a,Ue(this,nn(t.c)),this.g=t.g):t&&(n=String(t).match(De))?(this.h=!!e,je(this,n[1]||"",!0),this.j=ze(n[2]||""),Le(this,n[3]||"",!0),Fe(this,n[4]),this.a=ze(n[5]||"",!0),Ue(this,n[6]||"",!0),this.g=ze(n[7]||"")):(this.h=!!e,this.c=new Ye(null,this.h))}function Re(t){return new Pe(t)}function je(t,e,n){t.f=n?ze(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Le(t,e,n){t.b=n?ze(e,!0):e}function Fe(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.i=e}else t.i=null}function Ue(t,e,n){e instanceof Ye?(t.c=e,function(t,e){e&&!t.f&&(Ze(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Je(this,e),en(this,n,t))},t)),t.f=e}(t.c,t.h)):(n||(e=We(e,Ge)),t.c=new Ye(e,t.h))}function Ve(t,e,n){t.c.set(e,n)}function qe(t,e,n){d(n)||(n=[String(n)]),en(t.c,e,n)}function Be(t){return Ve(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^_()).toString(36)),t}function ze(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function We(t,e,n){return a(t)?(t=encodeURI(t).replace(e,He),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function He(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Pe.prototype.toString=function(){var t=[],e=this.f;e&&t.push(We(e,Ke,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(We(e,Ke,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&t.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(We(n,"/"==n.charAt(0)?Qe:$e,!0))),(n=this.c.toString())&&t.push("?",n),(n=this.g)&&t.push("#",We(n,Xe)),t.join("")},Pe.prototype.resolve=function(t){var e=Re(this),n=!!t.f;n?je(e,t.f):n=!!t.j,n?e.j=t.j:n=!!t.b,n?Le(e,t.b):n=null!=t.i;var r=t.a;if(n)Fe(e,t.i);else if(n=!!t.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=e.a.lastIndexOf("/");-1!=i&&(r=e.a.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(N(i,"./")||N(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.a=r:n=""!==t.c.toString(),n?Ue(e,nn(t.c)):n=!!t.g,n&&(e.g=t.g),e};var Ke=/[#\/\?@]/g,$e=/[#\?:]/g,Qe=/[#\?]/g,Ge=/[#\?@]/g,Xe=/#/g;function Ye(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ze(t){t.a||(t.a=new xe,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Je(t,e){Ze(t),e=rn(t,e),Me(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ae(t.a,e))}function tn(t,e){return Ze(t),e=rn(t,e),Me(t.a.b,e)}function en(t,e,n){Je(t,e),0<n.length&&(t.c=null,t.a.set(rn(t,e),k(n)),t.b+=n.length)}function nn(t){var e=new Ye;return e.c=t.c,t.a&&(e.a=new xe(t.a),e.b=t.b),e}function rn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function on(t){this.a=t,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function sn(t){var e=t.a.F.a;if(null!=e)ee(4),e?(ee(10),Qn(t.a,t,!1)):(ee(11),Qn(t.a,t,!0));else{t.b=new fe(t,void 0,void 0),t.b.h=t.h,e=Jn(e=t.a,e.Y()?t.f:null,t.i),ee(4),qe(e,"TYPE","xmlhttp");var n=t.a.j,r=t.a.I;n&&r&&Ve(e,n,r),be(t.b,e,!1,t.f)}}function an(){this.a=this.b=null}function cn(){this.a=new xe}function un(t){var e=typeof t;return"object"==e&&t||"function"==e?"o"+(t[g]||(t[g]=++m)):e.charAt(0)+t}function ln(t,e){this.b=t,this.a=e}function hn(t){this.g=t||dn,t=s.PerformanceNavigationTiming?0<(t=s.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(s.ka&&s.ka.Ea&&s.ka.Ea()&&s.ka.Ea().zb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new cn),this.b=null,this.c=[]}(r=Ye.prototype).add=function(t,e){Ze(this),this.c=null,t=rn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},r.forEach=function(t,e){Ze(this),this.a.forEach(function(n,r){E(n,function(n){t.call(e,n,r,this)},this)},this)},r.K=function(){Ze(this);for(var t=this.a.C(),e=this.a.K(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},r.C=function(t){Ze(this);var e=[];if(a(t))tn(this,t)&&(e=T(e,this.a.get(rn(this,t))));else{t=this.a.C();for(var n=0;n<t.length;n++)e=T(e,t[n])}return e},r.set=function(t,e){return Ze(this),this.c=null,tn(this,t=rn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},r.get=function(t,e){return t&&0<(t=this.C(t)).length?String(t[0]):e},r.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")},S(function(){},function(){}),(r=on.prototype).M=null,r.$=function(t){return this.a.$(t)},r.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},r.Da=function(){return!1},r.Ga=function(t,e){if(this.c=t.o,0==this.M){if(!this.a.o&&(t=t.a)){var n=jn(t,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(t=jn(t,"X-HTTP-Session-Id"))&&(this.a.I=t)}if(e){try{var r=this.a.ja.a.parse(e)}catch(i){return(e=this.a).m=this.c,void Yn(e,2)}this.f=r[0]}else(e=this.a).m=this.c,Yn(e,2)}else 1==this.M&&(this.g?ee(6):"11111"==e?(ee(5),this.g=!0,(!z||10<=Number(Z))&&(this.c=200,this.b.cancel(),ee(11),Qn(this.a,this,!0))):(ee(7),this.g=!1))},r.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,sn(this)):1==this.M&&(this.g?(ee(11),Qn(this.a,this,!0)):(ee(10),Qn(this.a,this,!1)));else{0==this.M?ee(8):1==this.M&&ee(9);var t=this.a;t.m=this.c,Yn(t,2)}},r.Y=function(){return this.a.Y()},r.ma=function(){return this.a.ma()},cn.prototype.add=function(t){this.a.set(un(t),t)},cn.prototype.C=function(){return this.a.C()};var dn=10;function fn(t,e){!t.a&&(N(e,"spdy")||N(e,"quic")||N(e,"h2"))&&(t.f=t.g,t.a=new cn,t.b&&(yn(t,t.b),t.b=null))}function pn(t){return!!t.b||!!t.a&&t.a.a.c>=t.f}function gn(t){return t.b?1:t.a?t.a.a.c:0}function mn(t,e){return t.b?t=t.b==e:t.a?(e=un(e),t=Me(t.a.a.b,e)):t=!1,t}function yn(t,e){t.a?t.a.add(e):t.b=e}function bn(t,e){var n;t.b&&t.b==e?t.b=null:((n=t.a)&&(n=un(e),n=Me(t.a.a.b,n)),n&&Ae(t.a.a,un(e)))}function vn(t){if(null!=t.b)return t.c.concat(t.b.j);if(null!=t.a&&0!=t.a.a.c){var e=t.c;return E(t.a.C(),function(t){e=e.concat(t.j)}),e}return k(t.c)}function wn(){}function _n(){this.a=new wn}function Sn(t,e,n){var r=n||"";try{Oe(t,function(t,n){var i=t;p(t)&&(i=xt(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Cn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}hn.prototype.cancel=function(){this.c=vn(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(E(this.a.C(),function(t){t.cancel()}),function(t){t.b={},t.a.length=0,t.c=0}(this.a.a))},wn.prototype.stringify=function(t){return s.JSON.stringify(t,void 0)},wn.prototype.parse=function(t){return s.JSON.parse(t,void 0)};var In=s.JSON.parse;function En(t){kt.call(this),this.headers=new xe,this.H=t||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=Tn,this.D=this.F=!1}S(En,kt);var Tn="",kn=/^https?$/i,On=["POST","PUT"];function xn(t){return"content-type"==t.toLowerCase()}function An(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Nn(t),Dn(t)}function Nn(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Mn(t){if(t.b&&void 0!==o&&(!t.s[1]||4!=Rn(t)||2!=t.T()))if(t.l&&4==Rn(t))zt(t.Fa,0,t);else if(t.dispatchEvent("readystatechange"),4==Rn(t)){t.b=!1;try{var e,n=t.T();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var a=String(t.A).match(De)[1]||null;if(!a&&s.self&&s.self.location){var c=s.self.location.protocol;a=c.substr(0,c.length-1)}i=!kn.test(a?a.toLowerCase():"")}e=i}e?(t.dispatchEvent("complete"),t.dispatchEvent("success")):(t.h=6,t.f=t.za()+" ["+t.T()+"]",Nn(t))}finally{Dn(t)}}}function Dn(t,e){if(t.a){Pn(t);var n=t.a,r=t.s[0]?l:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){}}}function Pn(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(s.clearTimeout(t.m),t.m=null)}function Rn(t){return t.a?t.a.readyState:0}function jn(t,e){return t.a?t.a.getResponseHeader(e):null}function Ln(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}if(r)return t;if(n=function(t){var e="";return R(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),a(t)){if(e=encodeURIComponent(String(e)),e+=n=null!=n?"="+encodeURIComponent(String(n)):""){if(0>(n=t.indexOf("#"))&&(n=t.length),0>(r=t.indexOf("?"))||r>n){r=n;var i=""}else i=t.substring(r+1,n);n=(t=[t.substr(0,r),i,t.substr(n)])[1],t[1]=e?n?n+"&"+e:e:n,t=t[0]+(t[1]?"?"+t[1]:"")+t[2]}return t}return Ve(t,e,n),t}function Fn(t){this.f=[],this.F=new an,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Ra=this.P=0,this.Pa=!!u("internalChannelParams.failFast",t),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Oa=u("internalChannelParams.baseRetryDelayMs",t)||5e3,this.Sa=u("internalChannelParams.retryDelaySeedMs",t)||1e4,this.Qa=u("internalChannelParams.forwardChannelMaxRetries",t)||2,this.qa=u("internalChannelParams.forwardChannelRequestTimeoutMs",t)||2e4,this.La=t&&t.Ab||void 0,this.D=void 0,this.R=t&&t.supportsCrossDomainXhr||!1,this.H="",this.b=new hn(t&&t.concurrentRequestLimit),this.ja=new _n,this.o=!t||void 0===t.backgroundChannelTest||t.backgroundChannelTest,(this.W=t&&t.fastHandshake||!1)&&!this.o&&(this.o=!0),t&&t.forceLongPolling&&(this.oa=!1),this.fa=void 0}function Un(t){if(Vn(t),3==t.u){var e=t.P++,n=Re(t.B);Ve(n,"SID",t.H),Ve(n,"RID",e),Ve(n,"TYPE","terminate"),Wn(t,n),(e=new fe(t,e,void 0)).F=2,e.f=Be(Re(n)),n=!1,s.navigator&&s.navigator.sendBeacon&&(n=s.navigator.sendBeacon(e.f.toString(),"")),!n&&s.Image&&((new Image).src=e.f,n=!0),n||(e.a=e.g.$(null),e.a.ca(e.f)),e.v=_(),Se(e)}Zn(t)}function Vn(t){t.w&&(t.w.abort(),t.w=null),t.a&&(t.a.cancel(),t.a=null),t.l&&(s.clearTimeout(t.l),t.l=null),Gn(t),t.b.cancel(),t.h&&(c(t.h)&&s.clearTimeout(t.h),t.h=null)}function qn(t,e){t.f.push(new ln(t.Ra++,e)),3==t.u&&Bn(t)}function Bn(t){pn(t.b)||t.h||(t.h=!0,Lt(t.Ia,t),t.A=0)}function zn(t,e){var n;n=e?e.W:t.P++;var r=Re(t.B);Ve(r,"SID",t.H),Ve(r,"RID",n),Ve(r,"AID",t.O),Wn(t,r),t.g&&t.i&&Ln(r,t.g,t.i),n=new fe(t,n,t.A+1),null===t.g&&(n.h=t.i),e&&(t.f=e.j.concat(t.f)),e=Hn(t,n,1e3),n.setTimeout(Math.round(.5*t.qa)+Math.round(.5*t.qa*Math.random())),yn(t.b,n),ye(n,r,e)}function Wn(t,e){t.c&&Oe({},function(t,n){Ve(e,n,t)})}function Hn(t,e,n){n=Math.min(t.f.length,n);var r=t.c?v(t.c.Ta,t.c,t):null;t:for(var i=t.f,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,c=0;c<n;c++){var u=i[c].b,l=i[c].a;if(0>(u-=o))o=Math.max(0,i[c].b-100),a=!1;else try{Sn(l,s,"req"+u+"_")}catch(h){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.f.splice(0,n),e.j=t,r}function Kn(t){t.a||t.l||(t.S=1,Lt(t.Ha,t),t.v=0)}function $n(t){return!(t.a||t.l||3<=t.v||(t.S++,t.l=re(v(t.Ha,t),Xn(t,t.v)),t.v++,0))}function Qn(t,e,n){var r=e.l;r&&fn(t.b,r),t.ia=t.oa&&n,t.m=e.c,t.B=Jn(t,null,t.ha),Bn(t)}function Gn(t){null!=t.s&&(s.clearTimeout(t.s),t.s=null)}function Xn(t,e){var n=t.Oa+Math.floor(Math.random()*t.Sa);return t.ma()||(n*=2),n*e}function Yn(t,e){if(2==e){var n=null;t.c&&(n=null);var r=v(t.fb,t);n||(n=new Pe("//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||je(n,"https"),Be(n)),function(t,e){var n=new Xt;if(s.Image){var r=new Image;r.onload=w(Cn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=w(Cn,n,r,"TestLoadImage: error",!1,e),r.onabort=w(Cn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=w(Cn,n,r,"TestLoadImage: timeout",!1,e),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else ee(2);t.u=0,t.c&&t.c.ta(e),Zn(t),Vn(t)}function Zn(t){t.u=0,t.m=-1,t.c&&(0==vn(t.b).length&&0==t.f.length||(t.b.c.length=0,k(t.f),t.f.length=0),t.c.sa())}function Jn(t,e,n){var r=function(t){return t instanceof Pe?Re(t):new Pe(t,void 0)}(n);if(""!=r.b)e&&Le(r,e+"."+r.b),Fe(r,r.i);else{var i=s.location;r=function(t,e,n,r){var i=new Pe(null,void 0);return t&&je(i,t),e&&Le(i,e),n&&Fe(i,n),r&&(i.a=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&R(t.V,function(t,e){Ve(r,e,t)}),n=t.I,(e=t.j)&&n&&Ve(r,e,n),Ve(r,"VER",t.wa),Wn(t,r),r}function tr(){}function er(){if(z&&!(10<=Number(Z)))throw Error("Environmental error: no available transport.")}function nr(t,e){kt.call(this),this.a=new Fn(e),this.g=t,this.m=e&&e.testUrl?e.testUrl:function(t){for(var e=arguments[0],n=1;n<arguments.length;n++){var r,i=arguments[n];0==i.lastIndexOf("/",0)?e=i:((r=""==e)||(r=0<=(r=e.length-1)&&e.indexOf("/",r)==r),e+=r?i:"/"+i)}return e}(this.g,"test"),this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.i=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.xa&&(t?t["X-WebChannel-Client-Profile"]=e.xa:t={"X-WebChannel-Client-Profile":e.xa}),this.a.J=t,(t=e&&e.httpHeadersOverwriteParam)&&!O(t)&&(this.a.g=t),this.l=e&&e.supportsCrossDomainXhr||!1,this.h=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!O(e)&&(this.a.j=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new or(this)}function rr(t){le.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function ir(){he.call(this),this.status=1}function or(t){this.a=t}(r=En.prototype).ca=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+t);e=e?e.toUpperCase():"GET",this.A=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:ce),this.a.onreadystatechange=v(this.Fa,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(o){return void An(this,o)}t=n||"";var i=new xe(this.headers);r&&Oe(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=xn,n=t.length,r=a(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:a(t)?t.charAt(e):t[e]}(i.K()),n=s.FormData&&t instanceof s.FormData,!(0<=I(On,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Pn(this),0<this.o&&((this.D=function(t){return z&&tt(9)&&c(t.timeout)&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=v(this.Ca,this)):this.m=zt(this.Ca,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){An(this,o)}},r.Ca=function(){void 0!==o&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},r.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Dn(this))},r.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Dn(this,!0)),En.N.G.call(this)},r.Fa=function(){this.j||(this.w||this.l||this.g?Mn(this):this.$a())},r.$a=function(){Mn(this)},r.T=function(){try{return 2<Rn(this)?this.a.status:-1}catch(q){return-1}},r.za=function(){try{return 2<Rn(this)?this.a.statusText:""}catch(q){return""}},r.aa=function(){try{return this.a?this.a.responseText:""}catch(q){return""}},r.Va=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),In(e)}},r.ya=function(){return this.h},r.Ya=function(){return a(this.f)?this.f:String(this.f)},(r=Fn.prototype).wa=8,r.u=1,r.Da=function(){return 0==this.u},r.Ia=function(t){if(this.h)if(this.h=null,1==this.u){if(!t){this.P=Math.floor(1e5*Math.random());var e,n=new fe(this,t=this.P++,void 0),r=this.i;if(this.J&&(r?F(r=j(r),this.J):r=this.J),null===this.g&&(n.h=r),this.W)t:{for(var i=e=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&a(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.f.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Hn(this,n,e),Ve(i=Re(this.B),"RID",t),Ve(i,"CVER",22),this.o&&this.j&&Ve(i,"X-HTTP-Session-Id",this.j),Wn(this,i),this.g&&r&&Ln(i,this.g,r),yn(this.b,n),this.W?(Ve(i,"$req",e),Ve(i,"SID","null"),n.S=!0,ye(n,i,null)):ye(n,i,e),this.u=2}}else 3==this.u&&(t?zn(this,t):0==this.f.length||pn(this.b)||zn(this))},r.Ha=function(){this.l=null,this.a=new fe(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var t=Re(this.pa);Ve(t,"RID","rpc"),Ve(t,"SID",this.H),Ve(t,"CI",this.ia?"0":"1"),Ve(t,"AID",this.O),Wn(this,t),Ve(t,"TYPE","xmlhttp"),this.g&&this.i&&Ln(t,this.g,this.i),this.D&&this.a.setTimeout(this.D),be(this.a,t,!0,this.ga)},r.Ga=function(t,e){if(0!=this.u&&(this.a==t||mn(this.b,t)))if(this.m=t.o,!t.s&&mn(this.b,t)&&3==this.u){try{var n=this.ja.a.parse(e)}catch(o){n=null}if(d(n)&&3==n.length){if(0==(e=n)[0]){t:if(!this.l){if(this.a){if(!(this.a.v+3e3<t.v))break t;Gn(this),this.a.cancel(),this.a=null}$n(this),ee(18)}}else this.ra=e[1],0<this.ra-this.O&&37500>e[2]&&this.ia&&0==this.v&&!this.s&&(this.s=re(v(this.Za,this),6e3));if(1>=gn(this.b)&&this.fa){try{this.fa()}catch(o){}this.fa=void 0}}else Yn(this,11)}else if((t.s||this.a==t)&&Gn(this),!O(e))for(e=n=this.ja.a.parse(e),n=0;n<e.length;n++){var r=e[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var i=r[3];null!=i&&(this.wa=i),null!=(r=r[5])&&c(r)&&0<r&&(this.D=1.5*r),this.o&&(r=t.a)&&((i=jn(r,"X-Client-Wire-Protocol"))&&fn(this.b,i),this.j&&(r=jn(r,"X-HTTP-Session-Id")))&&(this.I=r,Ve(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=t,this.pa=Jn(this,this.Y()?this.ga:null,this.ha),r.s?(bn(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(Ie(r),Se(r)),this.a=r):Kn(this),0<this.f.length&&Bn(this)}else"stop"!=r[0]&&"close"!=r[0]||Yn(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?Yn(this,7):Un(this):"noop"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},r.Za=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,$n(this),ee(19))},r.na=function(t){var e=null;if(this.a==t){Gn(this),this.a=null;var n=2}else{if(!mn(this.b,t))return;e=t.j,bn(this.b,t),n=1}if(this.m=t.o,0!=this.u)if(t.b)1==n?(e=_()-t.v,Yt.dispatchEvent(new ne(Yt,t.l?t.l.length:0,e,this.A)),Bn(this)):Kn(this);else{var r=t.c;if(3==r||0==r&&0<this.m||!(1==n&&function(t,e){return!(gn(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.f=e.j.concat(t.f),0):1==t.u||2==t.u||t.A>=(t.Pa?0:t.Qa)||(t.h=re(v(t.Ia,t,e),Xn(t,t.A)),t.A++,0)))}(this,t)||2==n&&$n(this)))switch(e&&0<e.length&&(t=this.b,t.c=t.c.concat(e)),r){case 1:Yn(this,5);break;case 4:Yn(this,10);break;case 3:Yn(this,6);break;default:Yn(this,2)}}},r.fb=function(t){ee(t?2:1)},r.$=function(t){if(t&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new En(this.La)).F=this.R,t},r.ma=function(){return!!this.c&&!0},r.Y=function(){return this.R},(r=tr.prototype).va=function(){},r.ua=function(){},r.ta=function(){},r.sa=function(){},r.Ta=function(){},er.prototype.a=function(t,e){return new nr(t,e)},S(nr,kt),(r=nr.prototype).addEventListener=function(t,e,n,r){nr.N.addEventListener.call(this,t,e,n,r)},r.removeEventListener=function(t,e,n,r){nr.N.removeEventListener.call(this,t,e,n,r)},r.Wa=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var t=this.a,e=this.m,n=this.g,r=this.b||void 0;ee(0),t.ha=n,t.V=r||{},t.o&&(t.F.b=[],t.F.a=!1),t.w=new on(t),null===t.g&&(t.w.h=t.i),n=e,t.g&&t.i&&(n=Ln(e,t.g,t.i)),(t=t.w).i=n,e=Jn(t.a,null,t.i),ee(3),null!=(n=t.a.F.b)?(t.f=n[0],t.M=1,sn(t)):(qe(e,"MODE","init"),!t.a.o&&t.a.j&&qe(e,"X-HTTP-Session-Id",t.a.j),t.b=new fe(t,void 0,void 0),t.b.h=t.h,be(t.b,e,!1,null),t.M=0)},r.close=function(){Un(this.a)},r.Xa=function(t){if(a(t)){var e={};e.__data__=t,qn(this.a,e)}else this.h?((e={}).__data__=xt(t),qn(this.a,e)):qn(this.a,t)},r.G=function(){this.a.c=null,delete this.f,Un(this.a),delete this.a,nr.N.G.call(this)},S(rr,le),S(ir,he),S(or,tr),or.prototype.va=function(){this.a.dispatchEvent("a")},or.prototype.ua=function(t){this.a.dispatchEvent(new rr(t))},or.prototype.ta=function(t){this.a.dispatchEvent(new ir(t))},or.prototype.sa=function(){this.a.dispatchEvent("b")};var sr=w(function(t,e){function n(){}n.prototype=t.prototype;var r=new n;return t.apply(r,Array.prototype.slice.call(arguments,1)),r},er);er.prototype.createWebChannel=er.prototype.a,nr.prototype.send=nr.prototype.Xa,nr.prototype.open=nr.prototype.Wa,nr.prototype.close=nr.prototype.close,ie.NO_ERROR=0,ie.TIMEOUT=8,ie.HTTP_ERROR=6,oe.COMPLETE="complete",ae.EventType=ue,ue.OPEN="a",ue.CLOSE="b",ue.ERROR="c",ue.MESSAGE="d",kt.prototype.listen=kt.prototype.Aa,En.prototype.listenOnce=En.prototype.Ba,En.prototype.getLastError=En.prototype.Ya,En.prototype.getLastErrorCode=En.prototype.ya,En.prototype.getStatus=En.prototype.T,En.prototype.getStatusText=En.prototype.za,En.prototype.getResponseJson=En.prototype.Va,En.prototype.getResponseText=En.prototype.aa,En.prototype.send=En.prototype.ca;var ar={createWebChannelTransport:sr,ErrorCode:ie,EventType:oe,WebChannel:ae,XhrIo:En},cr=ar.createWebChannelTransport,ur=ar.ErrorCode,lr=ar.EventType,hr=ar.WebChannel,dr=ar.XhrIo;e.default=ar},xbPD:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t=null){return e=>e.lift(new o(t))}class o{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new s(t,this.defaultValue))}}class s extends r.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},xgIS:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("DH7j"),o=n("n6bG"),s=n("lJxs");function a(t,e,n,u){return Object(o.a)(n)&&(u=n,n=void 0),u?a(t,e,n).pipe(Object(s.a)(t=>Object(i.a)(t)?u(...t):u(t))):new r.a(r=>{c(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}function c(t,e,n,r,i){let o;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const r=t;t.addEventListener(e,n,i),o=()=>r.removeEventListener(e,n,i)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const r=t;t.on(e,n),o=()=>r.off(e,n)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const r=t;t.addListener(e,n),o=()=>r.removeListener(e,n)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let o=0,s=t.length;o<s;o++)c(t[o],e,n,r,i)}r.add(o)}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},yPWk:function(t,e,n){var r={"./emmet/emmet.plugin":["Xx8/",7],"./recording/recording.plugin":["1EBn",5],"./vim/vim.plugin":["vSQs",12]};function i(t){if(!n.o(r,t))return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e});var e=r[t],i=e[0];return n.e(e[1]).then(function(){return n(i)})}i.keys=function(){return Object.keys(r)},i.id="yPWk",t.exports=i},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL"),i=n("AytR"),o=n("jhN1"),s=n("Czum"),a=n("aECQ"),c=n("wj3C"),u=n.n(c);(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},n="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function r(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function i(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:r(t)}}!function(t,r){if(r){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in i||(i[s]={}),i=i[s]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Promise",function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function r(){this.a=null}function o(t){return t instanceof e?t:new e(function(e){e(t)})}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c(function(){e.g()})}this.a.push(t)};var s=n.setTimeout;r.prototype.c=function(t){s(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(r){this.f(r)}}}this.a=null},r.prototype.f=function(t){this.c(function(){throw t})},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.o(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.u(t):this.h(t)}},e.prototype.u=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.v(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new r;return e.prototype.o=function(t){var e=this.f();t.Ja(e.resolve,e.reject)},e.prototype.v=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(r){n.reject(r)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(n){o(n)}}:e}var i,o,s=new e(function(t,e){i=t,o=e});return this.Ja(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Ja=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=o,e.reject=function(t){return new e(function(e,n){n(t)})},e.race=function(t){return new e(function(e,n){for(var r=i(t),s=r.next();!s.done;s=r.next())o(s.value).Ja(e,n)})},e.all=function(t){var n=i(t),r=n.next();return r.done?o([]):new e(function(t,e){function i(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,o(r.value).Ja(i(s.length-1),e),r=n.next()}while(!r.done)})},e});var o=o||{},s=this||self;function a(t){return"string"==typeof t}function c(t){return"boolean"==typeof t}var l=/^[\w+/_-]+[=]{0,2}$/,h=null;function d(){}function f(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function p(t){return null===t}function g(t){return"array"==f(t)}function m(t){var e=f(t);return"array"==e||"object"==e&&"number"==typeof t.length}function y(t){return"function"==f(t)}function b(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var v="closure_uid_"+(1e9*Math.random()>>>0),w=0;function _(t,e,n){return t.call.apply(t.bind,arguments)}function S(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function C(t,e,n){return(C=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_:S).apply(null,arguments)}function I(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var E=Date.now||function(){return+new Date};function T(t,e){function n(){}n.prototype=e.prototype,t.qb=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.fd=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function k(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function O(t){if(Error.captureStackTrace)Error.captureStackTrace(this,O);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function x(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");O.call(this,n+t[r])}function A(t,e){throw new x("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function N(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function M(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function D(){this.b=this.a=null}T(O,Error),O.prototype.name="CustomError",T(x,O),x.prototype.name="AssertionError",N.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var P=new N(function(){return new j},function(t){t.reset()});function R(){var t=Bt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function j(){this.next=this.b=this.a=null}function L(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var i=r;break t}}catch(a){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(b(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(a){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;A("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}D.prototype.add=function(t,e){var n=P.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},j.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},j.prototype.reset=function(){this.next=this.b=this.a=null};var F=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(a(t))return a(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},U=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=a(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},V=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i=a(t)?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},q=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=a(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function B(t,e){return 0<=F(t,e)}function z(t,e){var n;return(n=0<=(e=F(t,e)))&&Array.prototype.splice.call(t,e,1),n}function W(t,e){!function(t,e){for(var n=a(t)?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1)})}function H(t){return Array.prototype.concat.apply([],arguments)}function K(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function $(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function Q(t){for(var e in t)return!1;return!0}function G(t){var e,n={};for(e in t)n[e]=t[e];return n}var X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Y(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<X.length;o++)n=X[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Z(t,e){this.a=t===et&&e||"",this.b=tt}function J(t){return t instanceof Z&&t.constructor===Z&&t.b===tt?t.a:(A("expected object of type Const, got '"+t+"'"),"type_error:Const")}Z.prototype.qa=!0,Z.prototype.pa=function(){return this.a},Z.prototype.toString=function(){return"Const{"+this.a+"}"};var tt={},et={},nt=new Z(et,"");function rt(){this.a="",this.b=ct}function it(t){return t instanceof rt&&t.constructor===rt&&t.b===ct?t.a:(A("expected object of type TrustedResourceUrl, got '"+t+"' of type "+f(t)),"type_error:TrustedResourceUrl")}function ot(t,e){var n=J(t);if(!at.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return ut(t=n.replace(st,function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof Z?J(t):encodeURIComponent(String(t))}))}rt.prototype.qa=!0,rt.prototype.pa=function(){return this.a.toString()},rt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var st=/%{(\w+)}/g,at=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,ct={};function ut(t){var e=new rt;return e.a=t,e}var lt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},ht=/&/g,dt=/</g,ft=/>/g,pt=/"/g,gt=/'/g,mt=/\x00/g,yt=/[\x00&<>"']/;function bt(t,e){return-1!=t.indexOf(e)}function vt(t,e){return t<e?-1:t>e?1:0}function wt(){this.a="",this.b=Et}function _t(t){return t instanceof wt&&t.constructor===wt&&t.b===Et?t.a:(A("expected object of type SafeUrl, got '"+t+"' of type "+f(t)),"type_error:SafeUrl")}wt.prototype.qa=!0,wt.prototype.pa=function(){return this.a.toString()},wt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var St=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Ct(t){return t instanceof wt?t:(t="object"==typeof t&&t.qa?t.pa():String(t),St.test(t)||(t="about:invalid#zClosurez"),Tt(t))}var It,Et={};function Tt(t){var e=new wt;return e.a=t,e}Tt("about:blank");t:{var kt=s.navigator;if(kt){var Ot=kt.userAgent;if(Ot){It=Ot;break t}}It=""}function xt(t){return bt(It,t)}function At(){this.a="",this.b=Mt}function Nt(t){return t instanceof At&&t.constructor===At&&t.b===Mt?t.a:(A("expected object of type SafeHtml, got '"+t+"' of type "+f(t)),"type_error:SafeHtml")}At.prototype.qa=!0,At.prototype.pa=function(){return this.a.toString()},At.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Mt={};function Dt(t){var e=new At;return e.a=t,e}Dt("<!DOCTYPE html>");var Pt,Rt,jt=Dt("");function Lt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Ft(t){return yt.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(ht,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(dt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(ft,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(pt,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(gt,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(mt,"&#0;"))),t}function Ut(t){s.setTimeout(function(){throw t},0)}function Vt(t,e){Rt||function(){if(s.Promise&&s.Promise.resolve){var t=s.Promise.resolve(void 0);Rt=function(){t.then(zt)}}else Rt=function(){var t=zt;!y(s.setImmediate)||s.Window&&s.Window.prototype&&!xt("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(Pt||(Pt=function(){var t=s.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!xt("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",function(t){var e=ut(J(nt));L(t,"HTMLIFrameElement"),t.src=it(e).toString()}(t),document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(Nt(jt)),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=C(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!xt("Trident")&&!xt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).yb;n.yb=null,t()}},function(t){r.next={yb:t},r=r.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){s.setTimeout(t,0)}}()),Pt(t)):s.setImmediate(t)}}(),qt||(Rt(),qt=!0),Bt.add(t,e)}Dt("<br>");var qt=!1,Bt=new D;function zt(){for(var t;t=R();){try{t.a.call(t.b)}catch(e){Ut(e)}M(P,t)}qt=!1}function Wt(t,e){if(this.a=Ht,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=d)try{var n=this;t.call(e,function(t){ie(n,Kt,t)},function(t){if(!(t instanceof he))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(e){}ie(n,$t,t)})}catch(r){ie(this,$t,r)}}var Ht=0,Kt=2,$t=3;function Qt(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Qt.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Gt=new N(function(){return new Qt},function(t){t.reset()});function Xt(t,e,n){var r=Gt.get();return r.g=t,r.b=e,r.f=n,r}function Yt(t){if(t instanceof Wt)return t;var e=new Wt(d);return ie(e,Kt,t),e}function Zt(t){return new Wt(function(e,n){n(t)})}function Jt(t,e,n){oe(t,e,n,null)||Vt(I(e,t))}function te(t){return new Wt(function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Gb:!0,value:o}:{Gb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Jt(t[o],I(i,o,!0),I(i,o,!1));else e(r)})}function ee(t,e){if(t.a==Ht)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,s=n.b;s&&(s.c||(r++,s.a==t&&(i=s),!(i&&1<r)));s=s.next)i||(o=s);i&&(n.a==Ht&&1==r?ee(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):ae(n),ce(n,i,$t,e)))}t.c=null}else ie(t,$t,e)}function ne(t,e){t.b||t.a!=Kt&&t.a!=$t||se(t),t.f?t.f.next=e:t.b=e,t.f=e}function re(t,e,n,r){var i=Xt(null,null,null);return i.a=new Wt(function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(s){o(s)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof he?o(e):t(i)}catch(s){o(s)}}:o}),i.a.c=t,ne(t,i),i.a}function ie(t,e,n){t.a==Ht&&(t===n&&(e=$t,n=new TypeError("Promise cannot resolve to itself")),t.a=1,oe(n,t.Oc,t.Pc,t)||(t.i=n,t.a=e,t.c=null,se(t),e!=$t||n instanceof he||function(t,e){t.g=!0,Vt(function(){t.g&&le.call(null,e)})}(t,n)))}function oe(t,e,n,r){if(t instanceof Wt)return ne(t,Xt(e||d,n||null,r)),!0;if(k(t))return t.then(e,n,r),!0;if(b(t))try{var i=t.then;if(y(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,function(t){s||(s=!0,n.call(i,t))},o)}catch(a){o(a)}}(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function se(t){t.h||(t.h=!0,Vt(t.Zb,t))}function ae(t){var e=null;return t.b&&(t.b=(e=t.b).next,e.next=null),t.b||(t.f=null),e}function ce(t,e,n,r){if(n==$t&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,ue(e,n,r);else try{e.c?e.g.call(e.f):ue(e,n,r)}catch(i){le.call(null,i)}M(Gt,e)}function ue(t,e,n){e==Kt?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}Wt.prototype.then=function(t,e,n){return re(this,y(t)?t:null,y(e)?e:null,n)},Wt.prototype.$goog_Thenable=!0,(t=Wt.prototype).ka=function(t,e){return(t=Xt(t,t,e)).c=!0,ne(this,t),this},t.s=function(t,e){return re(this,null,t,e)},t.cancel=function(t){this.a==Ht&&Vt(function(){ee(this,new he(t))},this)},t.Oc=function(t){this.a=Ht,ie(this,Kt,t)},t.Pc=function(t){this.a=Ht,ie(this,$t,t)},t.Zb=function(){for(var t;t=ae(this);)ce(this,t,this.a,this.i);this.h=!1};var le=Ut;function he(t){O.call(this,t)}function de(){0!=fe&&(pe[this[v]||(this[v]=++w)]=this),this.ta=this.ta,this.la=this.la}T(he,O),he.prototype.name="cancel";var fe=0,pe={};function ge(t){if(!t.ta&&(t.ta=!0,t.xa(),0!=fe)){var e=t[v]||(t[v]=++w);if(0!=fe&&t.la&&0<t.la.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete pe[e]}}function me(t){return me[" "](t),t}de.prototype.ta=!1,de.prototype.xa=function(){if(this.la)for(;this.la.length;)this.la.shift()()},me[" "]=d;var ye,be,ve=xt("Opera"),we=xt("Trident")||xt("MSIE"),_e=xt("Edge"),Se=_e||we,Ce=xt("Gecko")&&!(bt(It.toLowerCase(),"webkit")&&!xt("Edge"))&&!(xt("Trident")||xt("MSIE"))&&!xt("Edge"),Ie=bt(It.toLowerCase(),"webkit")&&!xt("Edge");function Ee(){var t=s.document;return t?t.documentMode:void 0}t:{var Te="",ke=(be=It,Ce?/rv:([^\);]+)(\)|;)/.exec(be):_e?/Edge\/([\d\.]+)/.exec(be):we?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(be):Ie?/WebKit\/(\S+)/.exec(be):ve?/(?:Version)[ \/]?(\S+)/.exec(be):void 0);if(ke&&(Te=ke?ke[1]:""),we){var Oe=Ee();if(null!=Oe&&Oe>parseFloat(Te)){ye=String(Oe);break t}}ye=Te}var xe,Ae={};function Ne(t){return function(t,e){var n=Ae;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=lt(String(ye)).split("."),r=lt(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=vt(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||vt(0==s[2].length,0==a[2].length)||vt(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}xe=s.document&&we?Ee():void 0;var Me=Object.freeze||function(t){return t},De=!we||9<=Number(xe),Pe=we&&!Ne("9"),Re=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",d,e),s.removeEventListener("test",d,e)}catch(n){}return t}();function je(t,e){this.type=t,this.b=this.target=e,this.Mb=!0}function Le(t,e){if(je.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Ce){t:{try{me(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=a(t.pointerType)?t.pointerType:Fe[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}je.prototype.preventDefault=function(){this.Mb=!1},T(Le,je);var Fe=Me({2:"touch",3:"pen",4:"mouse"});Le.prototype.preventDefault=function(){Le.qb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Pe)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},Le.prototype.f=function(){return this.a};var Ue="closure_listenable_"+(1e6*Math.random()|0),Ve=0;function qe(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Na=i,this.key=++Ve,this.ra=this.Ia=!1}function Be(t){t.ra=!0,t.listener=null,t.proxy=null,t.src=null,t.Na=null}function ze(t){this.src=t,this.a={},this.b=0}function We(t,e){var n=e.type;n in t.a&&z(t.a[n],e)&&(Be(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function He(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ra&&o.listener==e&&o.capture==!!n&&o.Na==r)return i}return-1}ze.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=He(t,e,r,i);return-1<s?(e=t[s],n||(e.Ia=!1)):((e=new qe(e,this.src,o,!!r,i)).Ia=n,t.push(e)),e};var Ke="closure_lm_"+(1e6*Math.random()|0),$e={};function Qe(t,e,n,r,i){if(r&&r.once)Xe(t,e,n,r,i);else if(g(e))for(var o=0;o<e.length;o++)Qe(t,e[o],n,r,i);else n=sn(n),t&&t[Ue]?cn(t,e,n,b(r)?!!r.capture:!!r,i):Ge(t,e,n,!1,r,i)}function Ge(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=b(i)?!!i.capture:!!i,a=rn(t);if(a||(t[Ke]=a=new ze(t)),!(n=a.add(e,n,r,s,o)).proxy)if(r=function(){var t=nn,e=De?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Re||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Je(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function Xe(t,e,n,r,i){if(g(e))for(var o=0;o<e.length;o++)Xe(t,e[o],n,r,i);else n=sn(n),t&&t[Ue]?un(t,e,n,b(r)?!!r.capture:!!r,i):Ge(t,e,n,!0,r,i)}function Ye(t,e,n,r,i){if(g(e))for(var o=0;o<e.length;o++)Ye(t,e[o],n,r,i);else r=b(r)?!!r.capture:!!r,n=sn(n),t&&t[Ue]?(t=t.u,(e=String(e).toString())in t.a&&-1<(n=He(o=t.a[e],n,r,i))&&(Be(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=rn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=He(e,n,r,i)),(n=-1<t?e[t]:null)&&Ze(n))}function Ze(t){if("number"!=typeof t&&t&&!t.ra){var e=t.src;if(e&&e[Ue])We(e.u,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Je(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=rn(e))?(We(n,t),0==n.b&&(n.src=null,e[Ke]=null)):Be(t)}}}function Je(t){return t in $e?$e[t]:$e[t]="on"+t}function tn(t,e,n,r){var i=!0;if((t=rn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.ra&&(o=en(o,r),i=i&&!1!==o)}return i}function en(t,e){var n=t.listener,r=t.Na||t.src;return t.Ia&&Ze(t),n.call(r,e)}function nn(t,e){if(t.ra)return!0;if(!De){if(!e)t:{e=["window","event"];for(var n=s,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Le(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(a){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=tn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=tn(r[i],t,!1,e),n=n&&o}return n}return en(t,new Le(e,this))}function rn(t){return(t=t[Ke])instanceof ze?t:null}var on="__closure_events_fn_"+(1e9*Math.random()>>>0);function sn(t){return y(t)?t:(t[on]||(t[on]=function(e){return t.handleEvent(e)}),t[on])}function an(){de.call(this),this.u=new ze(this),this.Sb=this,this.Wa=null}function cn(t,e,n,r,i){t.u.add(String(e),n,!1,r,i)}function un(t,e,n,r,i){t.u.add(String(e),n,!0,r,i)}function ln(t,e,n,r){if(!(e=t.u.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ra&&s.capture==n){var a=s.listener,c=s.Na||s.src;s.Ia&&We(t.u,s),i=!1!==a.call(c,r)&&i}}return i&&0!=r.Mb}function hn(t,e,n){if(y(t))n&&(t=C(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=C(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function dn(t){var e=null;return new Wt(function(n,r){-1==(e=hn(function(){n(void 0)},t))&&r(Error("Failed to schedule timer."))}).s(function(t){throw s.clearTimeout(e),t})}function fn(t){if(t.U&&"function"==typeof t.U)return t.U();if(a(t))return t.split("");if(m(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function pn(t){if(t.X&&"function"==typeof t.X)return t.X();if(!t.U||"function"!=typeof t.U){if(m(t)||a(t)){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function gn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof gn)for(n=t.X(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function mn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];yn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)yn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function yn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}T(an,de),an.prototype[Ue]=!0,an.prototype.addEventListener=function(t,e,n,r){Qe(this,t,e,n,r)},an.prototype.removeEventListener=function(t,e,n,r){Ye(this,t,e,n,r)},an.prototype.dispatchEvent=function(t){var e,n=this.Wa;if(n)for(e=[];n;n=n.Wa)e.push(n);n=this.Sb;var r=t.type||t;if(a(t))t=new je(t,n);else if(t instanceof je)t.target=t.target||n;else{var i=t;Y(t=new je(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=ln(s,r,!0,t)&&i}if(i=ln(s=t.b=n,r,!0,t)&&i,i=ln(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=ln(s=t.b=e[o],r,!1,t)&&i;return i},an.prototype.xa=function(){if(an.qb.xa.call(this),this.u){var t,e=this.u;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Be(n[r]);delete e.a[t],e.b--}}this.Wa=null},(t=gn.prototype).U=function(){mn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.X=function(){return mn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return yn(this.b,t)?this.b[t]:e},t.set=function(t,e){yn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.X(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var bn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function vn(t,e){var n;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,t instanceof vn?(this.h=void 0!==e?e:t.h,wn(this,t.f),this.i=t.i,this.b=t.b,_n(this,t.l),this.c=t.c,Sn(this,qn(t.a)),this.g=t.g):t&&(n=String(t).match(bn))?(this.h=!!e,wn(this,n[1]||"",!0),this.i=kn(n[2]||""),this.b=kn(n[3]||"",!0),_n(this,n[4]),this.c=kn(n[5]||"",!0),Sn(this,n[6]||"",!0),this.g=kn(n[7]||"")):(this.h=!!e,this.a=new Rn(null,this.h))}function wn(t,e,n){t.f=n?kn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function _n(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.l=e}else t.l=null}function Sn(t,e,n){e instanceof Rn?(t.a=e,function(t,e){e&&!t.f&&(jn(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Fn(this,e),Vn(this,n,t))},t)),t.f=e}(t.a,t.h)):(n||(e=On(e,Dn)),t.a=new Rn(e,t.h))}function Cn(t,e,n){t.a.set(e,n)}function In(t,e){return t.a.get(e)}function En(t){return t instanceof vn?new vn(t):new vn(t,void 0)}function Tn(t,e){var n=new vn(null,void 0);return wn(n,"https"),t&&(n.b=t),e&&(n.c=e),n}function kn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function On(t,e,n){return a(t)?(t=encodeURI(t).replace(e,xn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function xn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}vn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(On(e,An,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.i)&&t.push(On(e,An,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.l)&&t.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(On(n,"/"==n.charAt(0)?Mn:Nn,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.g)&&t.push("#",On(n,Pn)),t.join("")},vn.prototype.resolve=function(t){var e=new vn(this),n=!!t.f;n?wn(e,t.f):n=!!t.i,n?e.i=t.i:n=!!t.b,n?e.b=t.b:n=null!=t.l;var r=t.c;if(n)_n(e,t.l);else if(n=!!t.c){if("/"!=r.charAt(0))if(this.b&&!this.c)r="/"+r;else{var i=e.c.lastIndexOf("/");-1!=i&&(r=e.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(bt(i,"./")||bt(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.c=r:n=""!==t.a.toString(),n?Sn(e,qn(t.a)):n=!!t.g,n&&(e.g=t.g),e};var An=/[#\/\?@]/g,Nn=/[#\?:]/g,Mn=/[#\?]/g,Dn=/[#\?@]/g,Pn=/#/g;function Rn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function jn(t){t.a||(t.a=new gn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Ln(t){var e=pn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Rn(null,void 0);t=fn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];g(o)?Vn(n,i,o):n.add(i,o)}return n}function Fn(t,e){jn(t),e=Bn(t,e),yn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,yn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&mn(t)))}function Un(t,e){return jn(t),e=Bn(t,e),yn(t.a.b,e)}function Vn(t,e,n){Fn(t,e),0<n.length&&(t.c=null,t.a.set(Bn(t,e),K(n)),t.b+=n.length)}function qn(t){var e=new Rn;return e.c=t.c,t.a&&(e.a=new gn(t.a),e.b=t.b),e}function Bn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(t=Rn.prototype).add=function(t,e){jn(this),this.c=null,t=Bn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){jn(this),this.a.forEach(function(n,r){U(n,function(n){t.call(e,n,r,this)},this)},this)},t.X=function(){jn(this);for(var t=this.a.U(),e=this.a.X(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.U=function(t){jn(this);var e=[];if(a(t))Un(this,t)&&(e=H(e,this.a.get(Bn(this,t))));else{t=this.a.U();for(var n=0;n<t.length;n++)e=H(e,t[n])}return e},t.set=function(t,e){return jn(this),this.c=null,Un(this,t=Bn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.U(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.X(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.U(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var zn=!we||9<=Number(xe);function Wn(t){var e=document;return a(t)?e.getElementById(t):t}function Hn(t,e){$(e,function(e,n){e&&"object"==typeof e&&e.qa&&(e=e.pa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:Kn.hasOwnProperty(n)?t.setAttribute(Kn[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e})}var Kn={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function $n(t,e,n){function r(n){n&&e.appendChild(a(n)?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];!m(o)||b(o)&&0<o.nodeType?r(o):U(Qn(o)?K(o):o,r)}}function Qn(t){if(t&&"number"==typeof t.length){if(b(t))return"function"==typeof t.item||"string"==typeof t.item;if(y(t))return"function"==typeof t.item}return!1}function Gn(t){var e=[];return Yn(new Xn,t,e),e.join("")}function Xn(){}function Yn(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(g(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),Yn(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&"function"!=typeof(o=e[r])&&(n.push(i),tr(r,n),n.push(":"),Yn(t,o,n),i=",");return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":tr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}var Zn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Jn=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function tr(t,e){e.push('"',t.replace(Jn,function(t){var e=Zn[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Zn[t]=e),e}),'"')}function er(){var t=_r();return we&&!!xe&&11==xe||/Edge\/\d+/.test(t)}function nr(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function rr(t,e){e=e||s.window;var n="about:blank";t&&(n=_t(Ct(t)).toString()),e.location.href=n}function ir(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<ir(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function or(t){return!!((t=(t||_r()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function sr(t){t=t||s.window;try{t.close()}catch(e){}}function ar(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=_r().toLowerCase(),r&&(e.target=r,bt(n,"crios/")&&(e.target="_blank")),br(_r())==mr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof wt?n:Ct(void 0!==n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((xt("iPhone")&&!xt("iPod")&&!xt("iPad")||xt("iPad")||xt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(L(s=r.document.createElement("A"),"HTMLAnchorElement"),e instanceof wt||e instanceof wt||(e="object"==typeof e&&e.qa?e.pa():String(e),St.test(e)||(e="about:invalid#zClosurez"),e=Tt(e)),s.href=_t(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=r.open("",n,s),t=_t(e).toString(),s&&(Se&&bt(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t=Dt('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ft(t)+'">'),s.document.write(Nt(t)),s.document.close())):(s=r.open(_t(e).toString(),n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(a){}return s}var cr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ur=/^[^@]+@[^@]+$/;function lr(){var t=null;return new Wt(function(e){"complete"==s.document.readyState?e():(t=function(){e()},Xe(window,"load",t))}).s(function(e){throw Ye(window,"load",t),e})}function hr(t){return t=t||_r(),!("file:"!==Tr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function dr(){var t=s.window;try{return!(!t||t==t.top)}catch(e){return!1}}function fr(){return void 0!==s.WorkerGlobalScope&&"function"==typeof s.importScripts}function pr(){return u.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":u.a.INTERNAL.hasOwnProperty("node")?"Node":fr()?"Worker":"Browser"}function gr(){var t=pr();return"ReactNative"===t||"Node"===t}var mr="Firefox",yr="Chrome";function br(t){var e=t.toLowerCase();return bt(e,"opera/")||bt(e,"opr/")||bt(e,"opios/")?"Opera":bt(e,"iemobile")?"IEMobile":bt(e,"msie")||bt(e,"trident/")?"IE":bt(e,"edge/")?"Edge":bt(e,"firefox/")?mr:bt(e,"silk/")?"Silk":bt(e,"blackberry")?"Blackberry":bt(e,"webos")?"Webos":!bt(e,"safari/")||bt(e,"chrome/")||bt(e,"crios/")||bt(e,"android")?!bt(e,"chrome/")&&!bt(e,"crios/")||bt(e,"edge/")?bt(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":yr:"Safari"}var vr={Vc:"FirebaseCore-web",Xc:"FirebaseUI-web"};function wr(t,e){e=e||[];var n,r=[],i={};for(n in vr)i[vr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=pr())?r=br(i=_r()):"Worker"===r&&(r=br(i=_r())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function _r(){return s.navigator&&s.navigator.userAgent||""}function Sr(t,e){t=t.split("."),e=e||s;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Cr(){try{var t=s.localStorage,e=Nr();if(t)return t.setItem(e,"1"),t.removeItem(e),!er()||!!s.indexedDB}catch(n){return fr()&&!!s.indexedDB}return!1}function Ir(){return(Er()||"chrome-extension:"===Tr()||hr())&&!gr()&&Cr()&&!fr()}function Er(){return"http:"===Tr()||"https:"===Tr()}function Tr(){return s.location&&s.location.protocol||null}function kr(t){return!or(t=t||_r())&&br(t)!=mr}function Or(t){return void 0===t?null:Gn(t)}function xr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!=t[e]&&(n[e]=t[e]);return n}function Ar(t){if(null!==t)return JSON.parse(t)}function Nr(t){return t||Math.floor(1e9*Math.random()).toString()}function Mr(t){return"Safari"!=br(t=t||_r())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Dr(){var t=s.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Pr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=_r(),e=pr(),this.b=or(t)||"ReactNative"===e}function Rr(){var t=s.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function jr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function Lr(){return!(!Sr("fireauth.oauthhelper",s)&&!Sr("fireauth.iframe",s))}Pr.prototype.get=function(){var t=s.navigator;return!t||"boolean"!=typeof t.onLine||!Er()&&"chrome-extension:"!==Tr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Fr,Ur={};function Vr(t){Ur[t]||(Ur[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var qr={};Object.defineProperty(qr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(qr,"abcd",{configurable:!0,enumerable:!0,value:2}),Fr=2==qr.abcd}catch(be){Fr=!1}function Br(t,e,n){Fr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function zr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Br(t,n,e[n])}function Wr(t){var e={};return zr(e,t),e}function Hr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Br(e,n,Hr(t[n]));return e}function Kr(t){var e={},n=t[Qr],r=t[Gr];if(!(t=t[Xr])||t!=$r&&!n)throw Error("Invalid provider user info!");e[Zr]=r||null,e[Yr]=n||null,Br(this,ti,t),Br(this,Jr,Hr(e))}var $r="EMAIL_SIGNIN",Qr="email",Gr="newEmail",Xr="requestType",Yr="email",Zr="fromEmail",Jr="data",ti="operation";function ei(t,e){this.code=ri+t,this.message=e||ii[t]||""}function ni(t){var e=t&&t.code;return e?new ei(e.substring(ri.length),t.message):null}T(ei,Error),ei.prototype.A=function(){return{code:this.code,message:this.message}},ei.prototype.toJSON=function(){return this.A()};var ri="auth/",ii={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The OIDC ID token requires a valid unhashed nonce.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","user-cancelled":"User did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."};function oi(t){var e=In(t=En(t),si)||null,n=In(t,ai)||null,r=In(t,li)||null;if(r=r&&di[r]||null,!e||!n||!r)throw new ei("argument-error",si+", "+ai+"and "+li+" are required in a valid action code URL.");zr(this,{apiKey:e,operation:r,code:n,continueUrl:In(t,ci)||null,languageCode:In(t,ui)||null,tenantId:In(t,hi)||null})}var si="apiKey",ai="oobCode",ci="continueUrl",ui="languageCode",li="mode",hi="tenantId",di={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",signIn:$r,verifyEmail:"VERIFY_EMAIL"};function fi(t){try{return new oi(t)}catch(e){return null}}function pi(t){var e=t[vi];if(void 0===e)throw new ei("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new ei("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[gi];if(n&&"object"==typeof n){e=n[Si];var r=n[wi];if(n=n[_i],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new ei("argument-error",wi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new ei("argument-error",_i+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new ei("argument-error",Si+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new ei("missing-android-pkg-name")}}else if(void 0!==n)throw new ei("argument-error",gi+" property must be a non null object when specified.");if(this.f=null,(e=t[bi])&&"object"==typeof e){if("string"==typeof(e=e[Ci])&&e.length)this.f=e;else if(void 0!==e)throw new ei("argument-error",Ci+" property must be a non empty string when specified.")}else if(void 0!==e)throw new ei("argument-error",bi+" property must be a non null object when specified.");if(void 0!==(e=t[yi])&&"boolean"!=typeof e)throw new ei("argument-error",yi+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[mi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new ei("argument-error",mi+" property must be a non empty string when specified.");this.i=t||null}var gi="android",mi="dynamicLinkDomain",yi="handleCodeInApp",bi="iOS",vi="url",wi="installApp",_i="minimumVersion",Si="packageName",Ci="bundleId";function Ii(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Ei=null,Ti=null;function ki(t){this.f=t.sub,E(),this.a=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.c=t.firebase&&t.firebase.tenant||null,this.b=!!t.is_anonymous||"anonymous"==this.a}function Oi(t){return(t=xi(t))&&t.sub&&t.iss&&t.aud&&t.exp?new ki(t):null}function xi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(function(t){var e="";return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Ti[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Ei){Ei={},Ti={};for(var t=0;65>t;t++)Ei[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t),Ti[Ei[t]]=t,62<=t&&(Ti["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(t)]=t)}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,function(t){e+=String.fromCharCode(t)}),e}(t))}catch(r){}return null}ki.prototype.R=function(){return this.c},ki.prototype.g=function(){return this.b};var Ai,Ni={ad:{bb:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://securetoken.googleapis.com/v1/token",id:"p"},cd:{bb:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},dd:{bb:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",ib:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};function Mi(t){for(var e in Ni)if(Ni[e].id===t)return{firebaseEndpoint:(t=Ni[e]).bb,secureTokenEndpoint:t.ib};return null}Ai=Mi("__EID__")?"__EID__":void 0;var Di="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Pi=["client_id","response_type","scope","redirect_uri","state"],Ri={Wc:{Oa:"locale",Da:500,Ca:600,Pa:"facebook.com",hb:Pi},Yc:{Oa:null,Da:500,Ca:620,Pa:"github.com",hb:Pi},Zc:{Oa:"hl",Da:515,Ca:680,Pa:"google.com",hb:Pi},ed:{Oa:"lang",Da:485,Ca:705,Pa:"twitter.com",hb:Di}};function ji(t){for(var e in Ri)if(Ri[e].Pa==t)return Ri[e];return null}function Li(t){var e={};e["facebook.com"]=Bi,e["google.com"]=Wi,e["github.com"]=zi,e["twitter.com"]=Hi;var n=t&&t[Ui];try{if(n)return e[n]?new e[n](t):new qi(t);if(void 0!==t[Fi])return new Vi(t)}catch(r){}return null}var Fi="idToken",Ui="providerId";function Vi(t){var e=t[Ui];if(!e&&t[Fi]){var n=Oi(t[Fi]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Br(this,"providerId",e),Br(this,"isNewUser",n)}function qi(t){Vi.call(this,t),Br(this,"profile",Hr((t=Ar(t.rawUserInfo||"{}"))||{}))}function Bi(t){if(qi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function zi(t){if(qi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Br(this,"username",this.profile&&this.profile.login||null)}function Wi(t){if(qi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Hi(t){if(qi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Br(this,"username",t.screenName||null)}function Ki(t){var e=En(t),n=In(e,"link"),r=In(En(n),"link");return e=In(e,"deep_link_id"),In(En(e),"link")||e||r||n||t}function $i(){}function Qi(t,e){return t.then(function(t){if(t[Rs]){var n=Oi(t[Rs]);if(!n||e!=n.f)throw new ei("user-mismatch");return t}throw new ei("user-mismatch")}).s(function(t){throw t&&t.code&&t.code==ri+"user-not-found"?new ei("user-mismatch"):t})}function Gi(t,e){if(!e)throw new ei("internal-error","failed to construct a credential");this.a=e,Br(this,"providerId",t),Br(this,"signInMethod",t)}function Xi(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function Yi(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new Gi(t.providerId,t.pendingToken)}catch(e){}return null}function Zi(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Br(this,"idToken",e.idToken),e.accessToken&&Br(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Br(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new ei("internal-error","failed to construct a credential");Br(this,"accessToken",e.oauthToken),Br(this,"secret",e.oauthTokenSecret)}Br(this,"providerId",t),Br(this,"signInMethod",n)}function Ji(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Ln(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function to(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new Zi(t.providerId,e,t.signInMethod)}catch(n){}}return null}function eo(t,e){this.Fc=e||[],zr(this,{providerId:t,isOAuthProvider:!0}),this.zb={},this.cb=(ji(t)||{}).Oa||null,this.ab=null}function no(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new ei("argument-error",'SAML provider IDs must be prefixed with "saml."');eo.call(this,t,[])}function ro(t){eo.call(this,t,Pi),this.a=[]}function io(){ro.call(this,"facebook.com")}function oo(t){if(!t)throw new ei("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return b(t)&&(e=t.accessToken),(new io).credential({accessToken:e})}function so(){ro.call(this,"github.com")}function ao(t){if(!t)throw new ei("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return b(t)&&(e=t.accessToken),(new so).credential({accessToken:e})}function co(){ro.call(this,"google.com"),this.wa("profile")}function uo(t,e){var n=t;return b(t)&&(n=t.idToken,e=t.accessToken),(new co).credential({idToken:n,accessToken:e})}function lo(){eo.call(this,"twitter.com",Di)}function ho(t,e){var n=t;if(b(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new ei("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Zi("twitter.com",n,"twitter.com")}function fo(t,e,n){this.a=t,this.c=e,Br(this,"providerId","password"),Br(this,"signInMethod",n===go.EMAIL_LINK_SIGN_IN_METHOD?go.EMAIL_LINK_SIGN_IN_METHOD:go.EMAIL_PASSWORD_SIGN_IN_METHOD)}function po(t){return t&&t.email&&t.password?new fo(t.email,t.password,t.signInMethod):null}function go(){zr(this,{providerId:"password",isOAuthProvider:!1})}function mo(t,e){if(!(e=yo(e)))throw new ei("argument-error","Invalid email link!");return new fo(t,e.code,go.EMAIL_LINK_SIGN_IN_METHOD)}function yo(t){return(t=fi(t=Ki(t)))&&t.operation===$r?t:null}function bo(t){if(!(t.Ua&&t.Ta||t.Fa&&t.ba))throw new ei("internal-error");this.a=t,Br(this,"providerId","phone"),Br(this,"signInMethod","phone")}function vo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return U(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(n){t[n]&&(e[n]=t[n])}),new bo(e)}return null}function wo(t){return t.a.Fa&&t.a.ba?{temporaryProof:t.a.Fa,phoneNumber:t.a.ba}:{sessionInfo:t.a.Ua,code:t.a.Ta}}function _o(t){try{this.a=t||u.a.auth()}catch(e){throw new ei("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}zr(this,{providerId:"phone",isOAuthProvider:!1})}function So(t,e){if(!t)throw new ei("missing-verification-id");if(!e)throw new ei("missing-verification-code");return new bo({Ua:t,Ta:e})}function Co(t){if(t.temporaryProof&&t.phoneNumber)return new bo({Fa:t.temporaryProof,ba:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return uo(o,n);case"facebook.com":return oo(n);case"github.com":return ao(n);case"twitter.com":return ho(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new Gi(e,s):new Zi(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new ro(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(a){return null}}function Io(t){if(!t.isOAuthProvider)throw new ei("invalid-oauth-provider")}function Eo(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new ei("invalid-auth-event");if(this.g&&this.a)throw new ei("invalid-auth-event");if(this.g&&!this.f)throw new ei("invalid-auth-event")}function To(t){return(t=t||{}).type?new Eo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&ni(t.error),t.postBody,t.tenantId):null}function ko(){this.b=null,this.a=[]}T(qi,Vi),T(Bi,qi),T(zi,qi),T(Wi,qi),T(Hi,qi),Gi.prototype.na=function(t){return Js(t,Xi(this))},Gi.prototype.b=function(t,e){var n=Xi(this);return n.idToken=e,ta(t,n)},Gi.prototype.f=function(t,e){return Qi(ea(t,Xi(this)),e)},Gi.prototype.A=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Zi.prototype.na=function(t){return Js(t,Ji(this))},Zi.prototype.b=function(t,e){var n=Ji(this);return n.idToken=e,ta(t,n)},Zi.prototype.f=function(t,e){return Qi(ea(t,Ji(this)),e)},Zi.prototype.A=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},eo.prototype.Ea=function(t){return this.zb=G(t),this},T(no,eo),T(ro,eo),ro.prototype.wa=function(t){return B(this.a,t)||this.a.push(t),this},ro.prototype.Hb=function(){return K(this.a)},ro.prototype.credential=function(t,e){var n;if(!(n=b(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new ei("argument-error","credential failed: must provide the ID token and/or the access token.");return new Zi(this.providerId,n,this.providerId)},T(io,ro),Br(io,"PROVIDER_ID","facebook.com"),Br(io,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),T(so,ro),Br(so,"PROVIDER_ID","github.com"),Br(so,"GITHUB_SIGN_IN_METHOD","github.com"),T(co,ro),Br(co,"PROVIDER_ID","google.com"),Br(co,"GOOGLE_SIGN_IN_METHOD","google.com"),T(lo,eo),Br(lo,"PROVIDER_ID","twitter.com"),Br(lo,"TWITTER_SIGN_IN_METHOD","twitter.com"),fo.prototype.na=function(t){return this.signInMethod==go.EMAIL_LINK_SIGN_IN_METHOD?Aa(t,ua,{email:this.a,oobCode:this.c}):Aa(t,Ta,{email:this.a,password:this.c})},fo.prototype.b=function(t,e){return this.signInMethod==go.EMAIL_LINK_SIGN_IN_METHOD?Aa(t,la,{idToken:e,email:this.a,oobCode:this.c}):Aa(t,wa,{idToken:e,email:this.a,password:this.c})},fo.prototype.f=function(t,e){return Qi(this.na(t),e)},fo.prototype.A=function(){return{email:this.a,password:this.c,signInMethod:this.signInMethod}},zr(go,{PROVIDER_ID:"password"}),zr(go,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),zr(go,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),bo.prototype.na=function(t){return t.Va(wo(this))},bo.prototype.b=function(t,e){var n=wo(this);return n.idToken=e,Aa(t,Oa,n)},bo.prototype.f=function(t,e){var n=wo(this);return n.operation="REAUTH",Qi(t=Aa(t,xa,n),e)},bo.prototype.A=function(){var t={providerId:"phone"};return this.a.Ua&&(t.verificationId=this.a.Ua),this.a.Ta&&(t.verificationCode=this.a.Ta),this.a.Fa&&(t.temporaryProof=this.a.Fa),this.a.ba&&(t.phoneNumber=this.a.ba),t},_o.prototype.Va=function(t,e){var n=this.a.b;return Yt(e.verify()).then(function(r){if(!a(r))throw new ei("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":return function(t,e){return Aa(t,ba,e)}(n,{phoneNumber:t,recaptchaToken:r}).then(function(t){return"function"==typeof e.reset&&e.reset(),t},function(t){throw"function"==typeof e.reset&&e.reset(),t});default:throw new ei("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},zr(_o,{PROVIDER_ID:"phone"}),zr(_o,{PHONE_SIGN_IN_METHOD:"phone"}),Eo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Eo.prototype.R=function(){return this.h},Eo.prototype.A=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.A()}};var Oo,xo=null;function Ao(t){var e="unauthorized-domain",n=void 0,r=En(t);t=r.b,"chrome-extension"==(r=r.f)?n=Lt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Lt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",ei.call(this,e,n)}function No(t,e,n){ei.call(this,t,n),(t=e||{}).Ab&&Br(this,"email",t.Ab),t.ba&&Br(this,"phoneNumber",t.ba),t.credential&&Br(this,"credential",t.credential),t.Qb&&Br(this,"tenantId",t.Qb)}function Mo(t){if(t.code){var e=t.code||"";0==e.indexOf(ri)&&(e=e.substring(ri.length));var n={credential:Co(t),Qb:t.tenantId};if(t.email)n.Ab=t.email;else if(t.phoneNumber)n.ba=t.phoneNumber;else if(!n.credential)return new ei(e,t.message||void 0);return new No(e,n,t.message)}return null}function Do(){}function Po(){}function Ro(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(i){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function jo(){}function Lo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=C(this.fc,this),this.a.onerror=C(this.Ib,this),this.a.onprogress=C(this.gc,this),this.a.ontimeout=C(this.kc,this)}function Fo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Uo(t,e,n){this.reset(t,e,n,void 0,void 0)}function Vo(t){this.f=t,this.b=this.c=this.a=null}function qo(t,e){this.name=t,this.value=e}T(Ao,ei),T(No,ei),No.prototype.A=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.A();return e&&Y(t,e),t},No.prototype.toJSON=function(){return this.A()},Do.prototype.c=null,T(Po,Do),Po.prototype.a=function(){var t=Ro(this);return t?new ActiveXObject(t):new XMLHttpRequest},Po.prototype.b=function(){var t={};return Ro(this)&&(t[0]=!0,t[1]=!0),t},Oo=new Po,T(jo,Do),jo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Lo;throw Error("Unsupported browser")},jo.prototype.b=function(){return{}},(t=Lo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.fc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Fo(this,4)},t.Ib=function(){this.status=500,this.response=this.responseText="",Fo(this,4)},t.kc=function(){this.Ib()},t.gc=function(){this.status=200,Fo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Uo.prototype.a=null,Uo.prototype.reset=function(t,e,n,r,i){r||E(),delete this.a},qo.prototype.toString=function(){return this.name};var Bo=new qo("SEVERE",1e3),zo=new qo("WARNING",900),Wo=new qo("CONFIG",700),Ho=new qo("FINE",500);function Ko(t){return t.c?t.c:t.a?Ko(t.a):(A("Root logger has no level set."),null)}Vo.prototype.log=function(t,e,n){if(t.value>=Ko(this).value)for(y(e)&&(e=e()),t=new Uo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var $o={},Qo=null;function Go(t){var e;if(Qo||(Qo=new Vo(""),$o[""]=Qo,Qo.c=Wo),!(e=$o[t])){e=new Vo(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=Go(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,$o[t]=e}return e}function Xo(t,e){t&&t.log(Ho,e,void 0)}function Yo(t){this.f=t}function Zo(t){an.call(this),this.o=t,this.readyState=Jo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=Go("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}T(Yo,Do),Yo.prototype.a=function(){return new Zo(this.f)},Yo.prototype.b=function(t){return function(){return t}}({}),T(Zo,an);var Jo=0;function ts(t){t.c.read().then(t.ec.bind(t)).catch(t.Ma.bind(t))}function es(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,ns(t)}function ns(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function rs(t){an.call(this),this.headers=new gn,this.B=t||null,this.c=!1,this.w=this.a=null,this.h=this.O=this.l="",this.f=this.J=this.i=this.I=!1,this.g=0,this.o=null,this.m=is,this.v=this.P=!1}(t=Zo.prototype).open=function(t,e){if(this.readyState!=Jo)throw this.abort(),Error("Error reopening a connection");this.m=t,this.g=e,this.readyState=1,ns(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.i,method:this.m,credentials:void 0,cache:void 0};t&&(e.body=t),this.o.fetch(new Request(this.g,e)).then(this.jc.bind(this),this.Ma.bind(this))},t.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,es(this,!1)),this.readyState=Jo},t.jc=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,ns(this)),this.a&&(this.readyState=3,ns(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.hc.bind(this),this.Ma.bind(this)):void 0!==s.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.l=new TextDecoder,ts(this)):t.text().then(this.ic.bind(this),this.Ma.bind(this)))))},t.ec=function(t){if(this.a){var e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?es(this,!0):ns(this),3==this.readyState&&ts(this)}},t.ic=function(t){this.a&&(this.response=this.responseText=t,es(this,!0))},t.hc=function(t){this.a&&(this.response=t,es(this,!0))},t.Ma=function(t){var e=this.h;e&&e.log(zo,"Failed to fetch url "+this.g,t instanceof Error?t:Error(t)),this.a&&es(this,!0)},t.setRequestHeader=function(t,e){this.i.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(zo,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(zo,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},T(rs,an);var is="";rs.prototype.b=Go("goog.net.XhrIo");var os=/^https?$/i,ss=["POST","PUT"];function as(t){return"content-type"==t.toLowerCase()}function cs(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,us(t),hs(t)}function us(t){t.I||(t.I=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ls(t){if(t.c&&void 0!==o)if(t.w[1]&&4==fs(t)&&2==ps(t))Xo(t.b,gs(t,"Local request error detected and ignored"));else if(t.i&&4==fs(t))hn(t.Lb,0,t);else if(t.dispatchEvent("readystatechange"),4==fs(t)){Xo(t.b,gs(t,"Request complete")),t.c=!1;try{var e,n=ps(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var a=String(t.l).match(bn)[1]||null;if(!a&&s.self&&s.self.location){var c=s.self.location.protocol;a=c.substr(0,c.length-1)}i=!os.test(a?a.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var u=2<fs(t)?t.a.statusText:""}catch(l){Xo(t.b,"Can not get status: "+l.message),u=""}t.h=u+" ["+ps(t)+"]",us(t)}}finally{hs(t)}}}function hs(t,e){if(t.a){ds(t);var n=t.a,r=t.w[0]?d:null;t.a=null,t.w=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){(t=t.b)&&t.log(Bo,"Problem encountered resetting onreadystatechange: "+i.message,void 0)}}}function ds(t){t.a&&t.v&&(t.a.ontimeout=null),t.o&&(s.clearTimeout(t.o),t.o=null)}function fs(t){return t.a?t.a.readyState:0}function ps(t){try{return 2<fs(t)?t.a.status:-1}catch(e){return-1}}function gs(t,e){return e+" ["+t.O+" "+t.l+" "+ps(t)+"]"}function ms(t){var e=ks;this.g=[],this.v=e,this.o=t||null,this.f=this.a=!1,this.c=void 0,this.u=this.w=this.i=!1,this.h=0,this.b=null,this.l=0}function ys(t,e,n){t.a=!0,t.c=n,t.f=!e,_s(t)}function bs(t){if(t.a){if(!t.u)throw new Ss(t);t.u=!1}}function vs(t,e,n,r){t.g.push([e,n,r]),t.a&&_s(t)}function ws(t){return q(t.g,function(t){return y(t[1])})}function _s(t){if(t.h&&t.a&&ws(t)){var e=t.h,n=Es[e];n&&(s.clearTimeout(n.a),delete Es[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var c=o.call(i||t.o,e);void 0!==c&&(t.f=t.f&&(c==e||c instanceof Error),t.c=e=c),(k(e)||"function"==typeof s.Promise&&e instanceof s.Promise)&&(r=!0,t.i=!0)}catch(u){e=u,t.f=!0,ws(t)||(n=!0)}}t.c=e,r&&(c=C(t.m,t,!0),r=C(t.m,t,!1),e instanceof ms?(vs(e,c,r),e.w=!0):e.then(c,r)),n&&(e=new Is(e),Es[e.a]=e,t.h=e.a)}function Ss(){O.call(this)}function Cs(){O.call(this)}function Is(t){this.a=s.setTimeout(C(this.c,this),0),this.b=t}(t=rs.prototype).Ga=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Xo(this.b,gs(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(Xo(this.b,gs(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),hs(this))},t.xa=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),hs(this,!0)),rs.qb.xa.call(this)},t.Lb=function(){this.ta||(this.J||this.i||this.f?ls(this):this.yc())},t.yc=function(){ls(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case is:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Bo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return Xo(this.b,"Can not get response: "+e.message),null}},ms.prototype.cancel=function(t){if(this.a)this.c instanceof ms&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.v?this.v.call(this.o,this):this.u=!0,this.a||(t=new Cs(this),bs(this),ys(this,!1,t))}},ms.prototype.m=function(t,e){this.i=!1,ys(this,t,e)},ms.prototype.then=function(t,e,n){var r,i,o=new Wt(function(t,e){r=t,i=e});return vs(this,r,function(t){t instanceof Cs?o.cancel():i(t)}),o.then(t,e,n)},ms.prototype.$goog_Thenable=!0,T(Ss,O),Ss.prototype.message="Deferred has already fired",Ss.prototype.name="AlreadyCalledError",T(Cs,O),Cs.prototype.message="Deferred was canceled",Cs.prototype.name="CanceledError",Is.prototype.c=function(){throw delete Es[this.a],this.b};var Es={};function Ts(t){var e={},n=e.document||document,r=it(t).toString(),i=document.createElement("SCRIPT"),o={Nb:i,Ga:void 0},a=new ms(o),c=null,u=null!=e.timeout?e.timeout:5e3;return 0<u&&(c=window.setTimeout(function(){Os(i,!0);var t=new Ns(As,"Timeout reached for loading script "+r);bs(a),ys(a,!1,t)},u),o.Ga=c),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Os(i,e.gd||!1,c),bs(a),ys(a,!0,null))},i.onerror=function(){Os(i,!0,c);var t=new Ns(xs,"Error while loading script "+r);bs(a),ys(a,!1,t)},Y(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),Hn(i,o),function(t,e){L(t,"HTMLScriptElement"),t.src=it(e),null===h&&(h=(e=(e=s.document).querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&l.test(e)?e:""),(e=h)&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function ks(){if(this&&this.Nb){var t=this.Nb;t&&"SCRIPT"==t.tagName&&Os(t,!0,this.Ga)}}function Os(t,e,n){null!=n&&s.clearTimeout(n),t.onload=d,t.onerror=d,t.onreadystatechange=d,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var xs=0,As=1;function Ns(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),O.call(this,n),this.code=t}function Ms(t){this.f=t}function Ds(t,e,n){if(this.c=t,this.l=(t=e||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.u=t.secureTokenTimeout||js,this.g=G(t.secureTokenHeaders||Ls),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.firebaseTimeout||Fs,this.a=G(t.firebaseHeaders||Us),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==pr(),!(n=s.XMLHttpRequest||n&&u.a.INTERNAL.node&&u.a.INTERNAL.node.XMLHttpRequest)&&!fr())throw new ei("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,this.f=fr()?new Yo(self):gr()?new Ms(n):new jo,this.b=null}T(Ns,O),T(Ms,Do),Ms.prototype.a=function(){return new this.f},Ms.prototype.b=function(){return{}};var Ps,Rs="idToken",js=new Pr(3e4,6e4),Ls={"Content-Type":"application/x-www-form-urlencoded"},Fs=new Pr(3e4,6e4),Us={"Content-Type":"application/json"};function Vs(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function qs(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function Bs(t,e,n,r,i,o,a){(function(){var t=_r();return!((t=br(t)!=yr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||we&&xe&&!(9<xe))})()||fr()?t=C(t.o,t):(Ps||(Ps=new Wt(function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(s[Ws]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){vs(t,null,e,void 0)}(Ts(ot(zs,{onload:Ws})),function(){e(Error("CORS_UNSUPPORTED"))}))}(t,e)})),t=C(t.m,t)),t(e,n,r,i,o,a)}Ds.prototype.R=function(){return this.b},Ds.prototype.o=function(t,e,n,r,i,o){if(fr()&&(void 0===s.fetch||void 0===s.Headers||void 0===s.Request))throw new ei("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var c=new rs(this.f);if(o){c.g=Math.max(0,o);var u=setTimeout(function(){c.dispatchEvent("timeout")},o)}cn(c,"complete",function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return Xo(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(n){t=null}e&&e(t)}),un(c,"ready",function(){u&&clearTimeout(u),ge(this)}),un(c,"timeout",function(){u&&clearTimeout(u),ge(this),e&&e(null)}),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.O=n,t.I=!1,t.c=!0,t.a=t.B?t.B.a():Oo.a(),t.w=function(t){return t.c||(t.c=t.b())}(t.B?t.B:Oo),t.a.onreadystatechange=C(t.Lb,t);try{Xo(t.b,gs(t,"Opening Xhr")),t.J=!0,t.a.open(n,String(e),!0),t.J=!1}catch(c){return Xo(t.b,gs(t,"Error opening Xhr: "+c.message)),void cs(t,c)}e=r||"";var o=new gn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(m(t)||a(t))U(t,e,void 0);else for(var n=pn(t),r=fn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){o.set(e,t)}),i=function(t){t:{for(var e=as,n=t.length,r=a(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:a(t)?t.charAt(e):t[e]}(o.X()),r=s.FormData&&e instanceof s.FormData,!B(ss,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.P&&(t.a.withCredentials=t.P);try{ds(t),0<t.g&&(t.v=function(t){return we&&Ne(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),Xo(t.b,gs(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.v)),t.v?(t.a.timeout=t.g,t.a.ontimeout=C(t.Ga,t)):t.o=hn(t.Ga,t.g,t)),Xo(t.b,gs(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(c){Xo(t.b,gs(t,"Send error: "+c.message)),cs(t,c)}}(c,t,n,r,i)};var zs=new Z(et,"https://apis.google.com/js/client.js?onload=%{onload}"),Ws="__fcb"+Math.floor(1e6*Math.random()).toString();function Hs(t){if(!a(t=t.email)||!ur.test(t))throw new ei("invalid-email")}function Ks(t){"email"in t&&Hs(t)}function $s(t){if(!t[Rs])throw new ei("internal-error")}function Qs(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new ei("internal-error")}else{if(!t.sessionInfo)throw new ei("missing-verification-id");if(!t.code)throw new ei("missing-verification-code")}}Ds.prototype.m=function(t,e,n,r,i){var o=this;Ps.then(function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})}).s(function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},Ds.prototype.ob=function(){return Aa(this,_a,{})},Ds.prototype.rb=function(t,e){return Aa(this,va,{idToken:t,email:e})},Ds.prototype.sb=function(t,e){return Aa(this,wa,{idToken:t,password:e})};var Gs={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function Xs(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new ei("internal-error")}function Ys(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&Un(t=new Rn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function Zs(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Mo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Mo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Mo(t)):t.errorMessage&&(e=Na(t.errorMessage)),e)throw e;if(!t[Rs])throw new ei("internal-error")}function Js(t,e){return e.returnIdpCredential=!0,Aa(t,Sa,e)}function ta(t,e){return e.returnIdpCredential=!0,Aa(t,Ia,e)}function ea(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Aa(t,Ca,e)}function na(t){if(!t.oobCode)throw new ei("invalid-action-code")}(t=Ds.prototype).tb=function(t,e){var n={idToken:t},r=[];return $(Gs,function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)}),r.length&&(n.deleteAttribute=r),Aa(this,va,n)},t.kb=function(t,e){return Y(t={requestType:"PASSWORD_RESET",email:t},e),Aa(this,pa,t)},t.lb=function(t,e){return Y(t={requestType:"EMAIL_SIGNIN",email:t},e),Aa(this,da,t)},t.jb=function(t,e){return Y(t={requestType:"VERIFY_EMAIL",idToken:t},e),Aa(this,fa,t)},t.Va=function(t){return Aa(this,ka,t)},t.$a=function(t,e){return Aa(this,ya,{oobCode:t,newPassword:e})},t.Ka=function(t){return Aa(this,ia,{oobCode:t})},t.Xa=function(t){return Aa(this,ra,{oobCode:t})};var ra={endpoint:"setAccountInfo",D:na,fa:"email",F:!0},ia={endpoint:"resetPassword",D:na,K:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e)throw new ei("internal-error")},F:!0},oa={endpoint:"signupNewUser",D:function(t){if(Hs(t),!t.password)throw new ei("weak-password")},K:$s,T:!0,F:!0},sa={endpoint:"createAuthUri",F:!0},aa={endpoint:"deleteAccount",V:["idToken"]},ca={endpoint:"setAccountInfo",V:["idToken","deleteProvider"],D:function(t){if(!g(t.deleteProvider))throw new ei("internal-error")}},ua={endpoint:"emailLinkSignin",V:["email","oobCode"],D:Hs,K:$s,T:!0,F:!0},la={endpoint:"emailLinkSignin",V:["idToken","email","oobCode"],D:Hs,K:$s,T:!0},ha={endpoint:"getAccountInfo"},da={endpoint:"getOobConfirmationCode",V:["requestType"],D:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new ei("internal-error");Hs(t)},fa:"email",F:!0},fa={endpoint:"getOobConfirmationCode",V:["idToken","requestType"],D:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new ei("internal-error")},fa:"email",F:!0},pa={endpoint:"getOobConfirmationCode",V:["requestType"],D:function(t){if("PASSWORD_RESET"!=t.requestType)throw new ei("internal-error");Hs(t)},fa:"email",F:!0},ga={wb:!0,endpoint:"getProjectConfig",Kb:"GET"},ma={wb:!0,endpoint:"getRecaptchaParam",Kb:"GET",K:function(t){if(!t.recaptchaSiteKey)throw new ei("internal-error")}},ya={endpoint:"resetPassword",D:na,fa:"email",F:!0},ba={endpoint:"sendVerificationCode",V:["phoneNumber","recaptchaToken"],fa:"sessionInfo",F:!0},va={endpoint:"setAccountInfo",V:["idToken"],D:Ks,T:!0},wa={endpoint:"setAccountInfo",V:["idToken"],D:function(t){if(Ks(t),!t.password)throw new ei("weak-password")},K:$s,T:!0},_a={endpoint:"signupNewUser",K:$s,T:!0,F:!0},Sa={endpoint:"verifyAssertion",D:Xs,Qa:Ys,K:Zs,T:!0,F:!0},Ca={endpoint:"verifyAssertion",D:Xs,Qa:Ys,K:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new ei("user-not-found");if(t.errorMessage)throw Na(t.errorMessage);if(!t[Rs])throw new ei("internal-error")},T:!0,F:!0},Ia={endpoint:"verifyAssertion",D:function(t){if(Xs(t),!t.idToken)throw new ei("internal-error")},Qa:Ys,K:Zs,T:!0},Ea={endpoint:"verifyCustomToken",D:function(t){if(!t.token)throw new ei("invalid-custom-token")},K:$s,T:!0,F:!0},Ta={endpoint:"verifyPassword",D:function(t){if(Hs(t),!t.password)throw new ei("wrong-password")},K:$s,T:!0,F:!0},ka={endpoint:"verifyPhoneNumber",D:Qs,K:$s,F:!0},Oa={endpoint:"verifyPhoneNumber",D:function(t){if(!t.idToken)throw new ei("internal-error");Qs(t)},K:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Mo(t);$s(t)}},xa={Yb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",D:Qs,K:$s,F:!0};function Aa(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.V))return Zt(new ei("internal-error"));var r,i=e.Kb||"POST";return Yt(n).then(e.D).then(function(){return e.T&&(n.returnSecureToken=!0),e.F&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o){var s=En(t.h+e);Cn(s,"key",t.c),o&&Cn(s,"cb",E().toString());var a="GET"==n;if(a)for(var c in r)r.hasOwnProperty(c)&&Cn(s,c,r[c]);return new Wt(function(e,o){Bs(t,s.toString(),function(t){t?t.error?o(Ma(t,i||{})):e(t):o(new ei("network-request-failed"))},n,a?void 0:Gn(xr(r)),t.a,t.i.get())})}(t,e.endpoint,i,n,e.Yb,e.wb||!1)}).then(function(t){return r=t,e.Qa?e.Qa(n,r):r}).then(e.K).then(function(){if(!e.fa)return r;if(!(e.fa in r))throw new ei("internal-error");return r[e.fa]})}function Na(t){return Ma({error:{errors:[{message:t}],code:400,message:t}})}function Ma(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new ei(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",Y(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*(.*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new ei(r[i],e);return!e&&t&&(e=Or(t)),new ei("internal-error",e)}function Da(t){this.b=t,this.a=null,this.fb=function(t){return(La||(La=new Wt(function(t,e){function n(){Dr(),Sr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Dr(),e(Error("Network Error"))},timeout:Ra.get()})}if(Sr("gapi.iframes.Iframe"))t();else if(Sr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();s[r]=function(){Sr("gapi.load")?n():e(Error("Network Error"))},Yt(Ts(r=ot(Pa,{onload:r}))).s(function(){e(Error("Network Error"))})}}).s(function(t){throw La=null,t}))).then(function(){return new Wt(function(e,n){Sr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Sr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error("Network Error"))},ja.get());r.ping(i).then(i,function(){n(Error("Network Error"))})})})})}(this)}var Pa=new Z(et,"https://apis.google.com/js/api.js?onload=%{onload}"),Ra=new Pr(3e4,6e4),ja=new Pr(5e3,15e3),La=null;function Fa(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=Tn(this.i,"/__/auth/iframe"),Cn(this.a,"apiKey",this.g),Cn(this.a,"appName",this.h),this.b=null,this.c=[]}function Ua(t,e,n,r,i){this.o=t,this.m=e,this.c=n,this.u=r,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function Va(t){try{return u.a.app(t).auth().Aa()}catch(e){return[]}}function qa(t,e,n,r,i){this.u=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.m=this.o=this.v=null,this.g=[],this.l=this.a=null}function Ba(t){var e=nr();return function(t){return Aa(t,ga,{}).then(function(t){return t.authorizedDomains||[]})}(t).then(function(t){t:{var n=En(e),r=n.f;n=n.b;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=En(o).b==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:cr.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new Ao(nr())})}function za(t){return t.l||(t.l=lr().then(function(){if(!t.o){var e=t.c,n=t.h,r=Va(t.b),i=new Fa(t.u,t.f,t.b);i.f=e,i.b=n,i.c=K(r||[]),t.o=i.toString()}t.i=new Da(t.o),function(t){if(!t.i)throw Error("IfcHandler must be initialized!");!function(t,e){t.fb.then(function(){t.a.register("authEvent",e,Sr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(t.i,function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=To(e.authEvent),n=0;n<t.g.length;n++)r=t.g[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Yt(n)}return n.status="ERROR",Yt(n)})}(t)})),t.l}function Wa(t){return t.m||(t.v=t.c?wr(t.c,Va(t.b)):null,t.m=new Ds(t.f,Mi(t.h),t.v)),t.m}function Ha(t,e,n,r,i,o,s,a,c,u,l){return(t=new Ua(t,e,n,r,i)).l=o,t.g=s,t.i=a,t.b=G(c||null),t.f=u,t.nb(l).toString()}function Ka(t){if(this.a=t||u.a.INTERNAL.reactNative&&u.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new ei("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function $a(t){this.b=t,this.a={},this.f=C(this.c,this)}Fa.prototype.toString=function(){return this.f?Cn(this.a,"v",this.f):Fn(this.a.a,"v"),this.b?Cn(this.a,"eid",this.b):Fn(this.a.a,"eid"),this.c.length?Cn(this.a,"fw",this.c.join(",")):Fn(this.a.a,"fw"),this.a.toString()},Ua.prototype.nb=function(t){return this.h=t,this},Ua.prototype.toString=function(){var t=Tn(this.o,"/__/auth/handler");if(Cn(t,"apiKey",this.m),Cn(t,"appName",this.c),Cn(t,"authType",this.u),this.a.isOAuthProvider){var e=this.a;try{var n=u.a.app(this.c).auth().ha()}catch(a){n=null}for(var r in e.ab=n,Cn(t,"providerId",this.a.providerId),n=xr((e=this.a).zb))n[r]=n[r].toString();r=e.Fc,n=G(n);for(var i=0;i<r.length;i++){var o=r[i];o in n&&delete n[o]}e.cb&&e.ab&&!n[e.cb]&&(n[e.cb]=e.ab),Q(n)||Cn(t,"customParameters",Or(n))}if("function"==typeof this.a.Hb&&(e=this.a.Hb()).length&&Cn(t,"scopes",e.join(",")),this.l?Cn(t,"redirectUrl",this.l):Fn(t.a,"redirectUrl"),this.g?Cn(t,"eventId",this.g):Fn(t.a,"eventId"),this.i?Cn(t,"v",this.i):Fn(t.a,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!In(t,s)&&Cn(t,s,this.b[s]);return this.h?Cn(t,"tid",this.h):Fn(t.a,"tid"),this.f?Cn(t,"eid",this.f):Fn(t.a,"eid"),(s=Va(this.c)).length&&Cn(t,"fw",s.join(",")),t.toString()},(t=qa.prototype).Fb=function(t,e,n){var r=new ei("popup-closed-by-user"),i=new ei("web-storage-unsupported"),o=this,s=!1;return this.ia().then(function(){(function(t){var e={type:"webStorageSupport"};return za(t).then(function(){return function(t,e){return t.fb.then(function(){return new Wt(function(n){t.a.send(e.type,e,n,Sr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(t.i,e)}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})})(o).then(function(n){n||(t&&sr(t),e(i),s=!0)})}).s(function(){}).then(function(){if(!s)return function(t){return new Wt(function(e){return function n(){dn(2e3).then(function(){if(t&&!t.closed)return n();e()})}()})}(t)}).then(function(){if(!s)return dn(n).then(function(){e(r)})})},t.Ob=function(){var t=_r();return!kr(t)&&!Mr(t)},t.Jb=function(){return!1},t.Db=function(t,e,n,r,i,o,s,a){if(!t)return Zt(new ei("popup-blocked"));if(s&&!kr())return this.ia().s(function(e){sr(t),i(e)}),r(),Yt();this.a||(this.a=Ba(Wa(this)));var c=this;return this.a.then(function(){var e=c.ia().s(function(e){throw sr(t),i(e),e});return r(),e}).then(function(){Io(n),s||rr(Ha(c.u,c.f,c.b,e,n,null,o,c.c,void 0,c.h,a),t)}).s(function(t){throw"auth/network-request-failed"==t.code&&(c.a=null),t})},t.Eb=function(t,e,n,r){this.a||(this.a=Ba(Wa(this)));var i=this;return this.a.then(function(){Io(e),rr(Ha(i.u,i.f,i.b,t,e,nr(),n,i.c,void 0,i.h,r))}).s(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},t.ia=function(){var t=this;return za(this).then(function(){return t.i.fb}).s(function(){throw t.a=null,new ei("network-request-failed")})},t.Rb=function(){return!0},t.ya=function(t){this.g.push(t)},t.La=function(t){W(this.g,function(e){return e==t})},(t=Ka.prototype).get=function(t){return Yt(this.a.getItem(t)).then(function(t){return t&&Ar(t)})},t.set=function(t,e){return Yt(this.a.setItem(t,Or(e)))},t.S=function(t){return Yt(this.a.removeItem(t))},t.$=function(){},t.ea=function(){};var Qa,Ga=[];function Xa(t,e,n){Q(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Ya(t){this.a=t}function Za(t){this.c=t,this.b=!1,this.a=[]}function Ja(t,e,n,r){var i,o,s,a,c=n||{},u=null;if(t.b)return Zt(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new Wt(function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),s=setTimeout(function(){r(Error("unsupported_event"))},l),t.a.push(u={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout(function(){r(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}}),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:c},[h.port2])):r(Error("connection_unavailable"))}).then(function(e){return tc(t,u),e}).s(function(e){throw tc(t,u),e})}function tc(t,e){if(e){var n=e.messageChannel;n&&(n.port1.removeEventListener("message",e.onMessage),n.port1.close()),W(t.a,function(t){return t==e})}}function ec(){if(!ic())throw new ei("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=s.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.o=!1,this.h=null;var t=this;fr()&&self?(this.l=function(){var t=fr()?self:null;if(U(Ga,function(n){n.b==t&&(e=n)}),!e){var e=new $a(t);Ga.push(e)}return e}(),Xa(this.l,"keyChanged",function(e,n){return uc(t).then(function(e){return 0<e.length&&U(t.a,function(t){t(e)}),{keyProcessed:B(e,n.key)}})}),Xa(this.l,"ping",function(){return Yt(["keyChanged"])})):function(){var t=s.navigator;return t&&t.serviceWorker?Yt().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).s(function(){return null}):Yt(null)}().then(function(e){(t.h=e)&&(t.g=new Za(new Ya(e)),Ja(t.g,"ping",null,!0).then(function(e){e[0].fulfilled&&B(e[0].value,"keyChanged")&&(t.o=!0)}).s(function(){}))})}function nc(t){return new Wt(function(e,n){var r=t.u.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(e){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new Wt(function(e,n){var r=t.u.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}})}(t).then(function(){return nc(t)}).then(function(t){e(t)}).s(function(t){n(t)})}})}function rc(t){return t.m||(t.m=nc(t)),t.m}function ic(){try{return!!s.indexedDB}catch(be){return!1}}function oc(t){return t.objectStore("firebaseLocalStorage")}function sc(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function ac(t){return new Wt(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function cc(t,e){return t.g&&t.h&&function(){var t=s.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Ja(t.g,"keyChanged",{key:e},t.o).then(function(){}).s(function(){}):Yt()}function uc(t){return rc(t).then(function(t){var e=oc(sc(t,!1));return e.getAll?ac(e.getAll()):new Wt(function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}})}).then(function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=ir(t.c,n),t.c=n}return r})}function lc(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function hc(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Yt().then(function(){if(ic()){var t=Nr(),r="__sak"+t;return Qa||(Qa=new ec),(n=Qa).set(r,t).then(function(){return n.get(r)}).then(function(e){if(e!==t)throw Error("indexedDB not supported!");return n.S(r)}).then(function(){return n}).s(function(){return e.c})}return e.c}).then(function(t){return e.type=t.type,t.$(function(t){U(e.a,function(e){e(t)})}),t})}function dc(){this.a={},this.type="inMemory"}function fc(){if(!function(){var t="Node"==pr();if(!(t=pc()||t&&u.a.INTERNAL.node&&u.a.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==pr())throw new ei("internal-error","The LocalStorage compatibility library was not found.");throw new ei("web-storage-unsupported")}this.a=pc()||u.a.INTERNAL.node.localStorage,this.type="localStorage"}function pc(){try{var t=s.localStorage,e=Nr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function gc(){this.type="nullStorage"}function mc(){if(!function(){var t="Node"==pr();if(!(t=yc()||t&&u.a.INTERNAL.node&&u.a.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==pr())throw new ei("internal-error","The SessionStorage compatibility library was not found.");throw new ei("web-storage-unsupported")}this.a=yc()||u.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function yc(){try{var t=s.sessionStorage,e=Nr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function bc(){var t={};t.Browser=_c,t.Node=Sc,t.ReactNative=Cc,t.Worker=Ic,this.a=t[pr()]}$a.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];U(r,function(e){i.push(Yt().then(function(){return e(t.origin,t.data.data)}))}),te(i).then(function(r){var i=[];U(r,function(t){i.push({fulfilled:t.Gb,value:t.value,reason:t.reason?t.reason.message:void 0})}),U(i,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})})}},Ya.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Za.prototype.close=function(){for(;0<this.a.length;)tc(this,this.a[0]);this.b=!0},(t=ec.prototype).set=function(t,e){var n,r=!1,i=this;return rc(this).then(function(e){return ac((e=oc(sc(n=e,!0))).get(t))}).then(function(o){var s=oc(sc(n,!0));return o?(o.value=e,ac(s.put(o))):(i.b++,r=!0,(o={}).fbase_key=t,o.value=e,ac(s.add(o)))}).then(function(){return i.c[t]=e,cc(i,t)}).ka(function(){r&&i.b--})},t.get=function(t){return rc(this).then(function(e){return ac(oc(sc(e,!1)).get(t))}).then(function(t){return t&&t.value})},t.S=function(t){var e=!1,n=this;return rc(this).then(function(r){return e=!0,n.b++,ac(oc(sc(r,!0)).delete(t))}).then(function(){return delete n.c[t],cc(n,t)}).ka(function(){e&&n.b--})},t.$=function(t){0==this.a.length&&function(t){lc(t),function e(){t.f=setTimeout(function(){t.i=uc(t).then(function(e){0<e.length&&U(t.a,function(t){t(e)})}).then(function(){e()}).s(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()}(this),this.a.push(t)},t.ea=function(t){W(this.a,function(e){return e==t}),0==this.a.length&&lc(this)},(t=hc.prototype).get=function(t){return this.b.then(function(e){return e.get(t)})},t.set=function(t,e){return this.b.then(function(n){return n.set(t,e)})},t.S=function(t){return this.b.then(function(e){return e.S(t)})},t.$=function(t){this.a.push(t)},t.ea=function(t){W(this.a,function(e){return e==t})},(t=dc.prototype).get=function(t){return Yt(this.a[t])},t.set=function(t,e){return this.a[t]=e,Yt()},t.S=function(t){return delete this.a[t],Yt()},t.$=function(){},t.ea=function(){},(t=fc.prototype).get=function(t){var e=this;return Yt().then(function(){return Ar(e.a.getItem(t))})},t.set=function(t,e){var n=this;return Yt().then(function(){var r=Or(e);null===r?n.S(t):n.a.setItem(t,r)})},t.S=function(t){var e=this;return Yt().then(function(){e.a.removeItem(t)})},t.$=function(t){s.window&&Qe(s.window,"storage",t)},t.ea=function(t){s.window&&Ye(s.window,"storage",t)},(t=gc.prototype).get=function(){return Yt(null)},t.set=function(){return Yt()},t.S=function(){return Yt()},t.$=function(){},t.ea=function(){},(t=mc.prototype).get=function(t){var e=this;return Yt().then(function(){return Ar(e.a.getItem(t))})},t.set=function(t,e){var n=this;return Yt().then(function(){var r=Or(e);null===r?n.S(t):n.a.setItem(t,r)})},t.S=function(t){var e=this;return Yt().then(function(){e.a.removeItem(t)})},t.$=function(){},t.ea=function(){};var vc,wc,_c={C:fc,Sa:mc},Sc={C:fc,Sa:mc},Cc={C:Ka,Sa:gc},Ic={C:fc,Sa:gc},Ec={$c:"local",NONE:"none",bd:"session"};function Tc(){var t=!(Mr(_r())||!dr()),e=kr(),n=Cr();this.m=t,this.h=e,this.l=n,this.a={},vc||(vc=new bc),t=vc;try{this.g=!er()&&Lr()||!s.indexedDB?new t.a.C:new hc(fr()?new dc:new t.a.C)}catch(r){this.g=new dc,this.h=!0}try{this.i=new t.a.Sa}catch(r){this.i=new dc}this.u=new dc,this.f=C(this.Pb,this),this.b={}}function kc(){return wc||(wc=new Tc),wc}function Oc(t,e){switch(e){case"session":return t.i;case"none":return t.u;default:return t.g}}function xc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Ac(t,e,n){return n=xc(e,n),"local"==e.C&&(t.b[n]=null),Oc(t,e.C).S(n)}function Nc(t){t.c&&(clearInterval(t.c),t.c=null)}function Mc(t){this.a=t,this.b=kc()}(t=Tc.prototype).get=function(t,e){return Oc(this,t.C).get(xc(t,e))},t.set=function(t,e,n){var r=xc(t,n),i=this,o=Oc(this,t.C);return o.set(r,e).then(function(){return o.get(r)}).then(function(e){"local"==t.C&&(i.b[r]=e)})},t.addListener=function(t,e,n){t=xc(t,e),this.l&&(this.b[t]=s.localStorage.getItem(t)),Q(this.a)&&(Oc(this,"local").$(this.f),this.h||(er()||!Lr())&&s.indexedDB||!this.l||function(t){Nc(t),t.c=setInterval(function(){for(var e in t.a){var n=s.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Le({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Pb(n))}},1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=xc(t,e),this.a[t]&&(W(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),Q(this.a)&&(Oc(this,"local").ea(this.f),Nc(this))},t.Pb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=s.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.Za(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Oc(this,"local").ea(this.f):Nc(this),this.m)if(n=s.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?s.localStorage.setItem(e,r):s.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===s.localStorage.getItem(e)||(o.b[e]=s.localStorage.getItem(e),o.Za(e))},we&&xe&&10==xe&&s.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else U(t,C(this.Za,this))},t.Za=function(t){this.a[t]&&U(this.a[t],function(t){t()})};var Dc,Pc={name:"authEvent",C:"local"};function Rc(){this.a=kc()}function jc(t,e){this.b=Lc,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=s.Int32Array?new Int32Array(64):Array(64),void 0!==Dc||(Dc=s.Int32Array?new Int32Array(Wc):Wc),this.reset()}T(jc,function(){this.b=-1});for(var Lc=64,Fc=Lc-1,Uc=[],Vc=0;Vc<Fc;Vc++)Uc[Vc]=0;var qc=H(128,Uc);function Bc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){var o=(0|n[e-16])+(((i=0|n[e-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+(((r=0|n[e-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],c=0|t.a[3],u=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var d=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7))|0)+((s=(s=u&l^~u&h)+(0|Dc[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=u,u=c+s|0,c=a,a=i,i=r,r=s+d|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+c|0,t.a[4]=t.a[4]+u|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function zc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if(a(e))for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(Bc(t),i=0);else{if(!m(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(Bc(t),i=0)}}t.c=i,t.g+=n}jc.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.h):K(this.h)};var Wc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Hc(){jc.call(this,8,Kc)}T(Hc,jc);var Kc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function $c(t,e,n,r,i){this.u=t,this.i=e,this.l=n,this.m=r||null,this.o=i||null,this.h=e+":"+n,this.v=new Rc,this.g=new Mc(this.h),this.f=null,this.b=[],this.a=this.c=null}function Qc(t){return new ei("invalid-cordova-configuration",t)}function Gc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function Xc(t){return t.f||(t.f=t.ia().then(function(){return new Wt(function(e){t.ya(function n(r){return e(r),t.La(n),!1}),function(t){function e(e){r=!0,i&&i.cancel(),Yc(t).then(function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=Ki(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Ar(In(o=En(i),"firebaseError")||null))?ni(o):null)?new Eo(r.c,r.b,null,null,o,null,r.R()):new Eo(r.c,r.b,i,r.f,null,null,r.R())),i=o||n}Gc(t,i)})}var n=new Eo("unknown",null,null,null,new ei("no-auth-event")),r=!1,i=dn(500).then(function(){return Yc(t).then(function(){r||Gc(t,n)})}),o=s.handleOpenURL;s.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Sr("BuildInfo.packageName",s).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(n){console.error(n)}},xo||(xo=new ko),function(t){var e=xo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Sr("universalLinks.subscribe",s))&&t(null,e.b))}(e)}(t)})})),t.f}function Yc(t){var e=null;return function(t){return t.b.get(Pc,t.a).then(function(t){return To(t)})}(t.g).then(function(n){return e=n,Ac((n=t.g).b,Pc,n.a)}).then(function(){return e})}function Zc(t){this.a=t,this.b=kc()}(t=$c.prototype).ia=function(){return this.Ba?this.Ba:this.Ba=(hr(void 0)?lr().then(function(){return new Wt(function(t,e){var n=s.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):Zt(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof Sr("universalLinks.subscribe",s))throw Qc("cordova-universal-links-plugin-fix is not installed");if(void 0===Sr("BuildInfo.packageName",s))throw Qc("cordova-plugin-buildinfo is not installed");if("function"!=typeof Sr("cordova.plugins.browsertab.openUrl",s))throw Qc("cordova-plugin-browsertab is not installed");if("function"!=typeof Sr("cordova.InAppBrowser.open",s))throw Qc("cordova-plugin-inappbrowser is not installed")},function(){throw new ei("cordova-not-ready")})},t.Fb=function(t,e){return e(new ei("operation-not-supported-in-this-environment")),Yt()},t.Db=function(){return Zt(new ei("operation-not-supported-in-this-environment"))},t.Rb=function(){return!1},t.Ob=function(){return!0},t.Jb=function(){return!0},t.Eb=function(t,e,n,r){if(this.c)return Zt(new ei("redirect-operation-pending"));var i=this,o=s.document,a=null,c=null,u=null,l=null;return this.c=Yt().then(function(){return Io(e),Xc(i)}).then(function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new Eo(e,r,null,o,new ei("no-auth-event"),null,i),c=Sr("BuildInfo.packageName",s);if("string"!=typeof c)throw new ei("invalid-cordova-configuration");var u=Sr("BuildInfo.displayName",s),l={};if(_r().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=c;else{if(!_r().toLowerCase().match(/android/))return Zt(new ei("operation-not-supported-in-this-environment"));l.apn=c}u&&(l.appDisplayName=u),o=function(t){var e=new Hc;zc(e,t),t=[];var n=8*e.g;zc(e,qc,56>e.c?56-e.c:e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(Bc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return V(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}(t)}(o),l.sessionId=o;var h=Ha(t.u,t.i,t.l,e,n,null,r,t.m,l,t.o,i);return t.ia().then(function(){var e=t.h;return t.v.a.set(Pc,a.A(),e)}).then(function(){var e=Sr("cordova.plugins.browsertab.isAvailable",s);if("function"!=typeof e)throw new ei("invalid-cordova-configuration");var n=null;e(function(e){if(e){if("function"!=typeof(n=Sr("cordova.plugins.browsertab.openUrl",s)))throw new ei("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=Sr("cordova.InAppBrowser.open",s)))throw new ei("invalid-cordova-configuration");e=_r(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,t,e,n,r)}).then(function(){return new Wt(function(t,e){c=function(){var e=Sr("cordova.plugins.browsertab.close",s);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.ya(c),l=function(){Rr()&&u()},o.addEventListener("resume",u=function(){a||(a=dn(2e3).then(function(){e(new ei("redirect-cancelled-by-user"))}))},!1),_r().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)}).s(function(t){return Yc(i).then(function(){throw t})})}).ka(function(){u&&o.removeEventListener("resume",u,!1),l&&o.removeEventListener("visibilitychange",l,!1),a&&a.cancel(),c&&i.La(c),i.c=null})},t.ya=function(t){this.b.push(t),Xc(this).s(function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Eo("unknown",null,null,null,new ei("no-auth-event")),t(e))})},t.La=function(t){W(this.b,function(e){return e==t})};var Jc={name:"pendingRedirect",C:"session"};function tu(t){return Ac(t.b,Jc,t.a)}function eu(t,e,n){this.i={},this.v=0,this.B=t,this.u=e,this.m=n,this.h=[],this.f=!1,this.l=C(this.o,this),this.b=new gu,this.w=new wu,this.g=new Zc(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.w,this.c.linkViaPopup=this.w,this.c.reauthViaPopup=this.w,this.a=nu(this.B,this.u,this.m,Ai)}function nu(t,e,n,r){var i=u.a.SDK_VERSION||null;return hr()?new $c(t,e,n,i,r):new qa(t,e,n,i,r)}function ru(t){t.f||(t.f=!0,t.a.ya(t.l));var e=t.a;return t.a.ia().s(function(n){throw t.a==e&&t.reset(),n})}function iu(t){t.a.Ob()&&ru(t).s(function(e){var n=new Eo("unknown",null,null,null,new ei("operation-not-supported-in-this-environment"));lu(e)&&t.o(n)}),t.a.Jb()||mu(t.b)}function ou(t,e){B(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Jc,t.a).then(function(t){return"pending"==t})}(t.g).then(function(e){e?tu(t.g).then(function(){ru(t).s(function(e){var n=new Eo("unknown",null,null,null,new ei("operation-not-supported-in-this-environment"));lu(e)&&t.o(n)})}):iu(t)}).s(function(){iu(t)})}function su(t,e){W(t.h,function(t){return t==e})}eu.prototype.reset=function(){this.f=!1,this.a.La(this.l),this.a=nu(this.B,this.u,this.m),this.i={}},eu.prototype.o=function(t){if(!t)throw new ei("invalid-auth-event");if(6e5<=E()-this.v&&(this.i={},this.v=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.xb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.v=E())),e=!0;break}}return mu(this.b),e};var au=new Pr(2e3,1e4),cu=new Pr(3e4,6e4);function uu(t,e,n,r,i,o,s){return t.a.Db(e,n,r,function(){t.f||(t.f=!0,t.a.ya(t.l))},function(){t.reset()},i,o,s)}function lu(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function hu(t,e,n,r,i){var o;return function(t){return t.b.set(Jc,"pending",t.a)}(t.g).then(function(){return t.a.Eb(e,n,r,i).s(function(e){if(lu(e))throw new ei("operation-not-supported-in-this-environment");return o=e,tu(t.g).then(function(){throw o})}).then(function(){return t.a.Rb()?new Wt(function(){}):tu(t.g).then(function(){return t.oa()}).then(function(){}).s(function(){})})})}function du(t,e,n,r,i){return t.a.Fb(r,function(t){e.ja(n,null,t,i)},au.get())}eu.prototype.oa=function(){return this.b.oa()};var fu={};function pu(t,e,n){var r=e+":"+n;return fu[r]||(fu[r]=new eu(t,e,n)),fu[r]}function gu(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function mu(t){t.g||(t.g=!0,vu(t,!1,null,null))}function yu(t){t.g&&!t.i&&vu(t,!1,null,null)}function bu(t,e){if(t.b=function(){return Yt(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function vu(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Zt(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):bu(t,n):bu(t,{user:null}),t.f=[],t.c=[]}function wu(){}function _u(){this.vb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.vb},set:function(t){this.vb=t},enumerable:!1})}function Su(t,e){this.a=e,Br(this,"verificationId",t)}function Cu(t,e,n,r){return new _o(t).Va(e,n).then(function(t){return new Su(t,r)})}function Iu(t){var e=xi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new ei("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");zr(this,{token:t,expirationTime:jr(1e3*e.exp),authTime:jr(1e3*e.auth_time),issuedAtTime:jr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,claims:e})}function Eu(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Tu(t,e){t.stop(),t.b=dn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then(function(){return function(){var t=s.document,e=null;return Rr()||!t?Yt():new Wt(function(n){e=function(){Rr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)}).s(function(n){throw t.removeEventListener("visibilitychange",e,!1),n})}()}).then(function(){return t.h()}).then(function(){Tu(t,!0)}).s(function(e){t.i(e)&&Tu(t,!1)})}function ku(t){this.f=t,this.b=this.a=null,this.c=0}function Ou(t,e){var n=e[Rs],r=e.refreshToken;e=xu(e.expiresIn),t.b=n,t.c=e,t.a=r}function xu(t){return E()+1e3*parseInt(t,10)}function Au(t,e){this.a=t||null,this.b=e||null,zr(this,{lastSignInTime:jr(e||null),creationTime:jr(t||null)})}function Nu(t,e,n,r,i,o){zr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function Mu(t,e){for(var n in je.call(this,t),e)this[n]=e[n]}function Du(t,e,n){this.I=[],this.l=t.apiKey,this.m=t.appName,this.o=t.authDomain||null,t=u.a.SDK_VERSION?wr(u.a.SDK_VERSION):null,this.a=new Ds(this.l,Mi(Ai),t),this.b=new ku(this.a),Vu(this,e[Rs]),Ou(this.b,e),Br(this,"refreshToken",this.b.a),zu(this,n||{}),an.call(this),this.J=!1,this.o&&Ir()&&(this.i=pu(this.o,this.l,this.m)),this.O=[],this.h=null,this.w=function(t){return new Eu(function(){return t.G(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var e=t.b.c-E()-3e5;return 0<e?e:0})}(this),this.W=C(this.Ha,this);var r=this;this.ga=null,this.va=function(t){r.sa(t.g)},this.Z=null,this.P=[],this.ua=function(t){Ru(r,t.c)},this.Y=null}function Pu(t,e){t.Z&&Ye(t.Z,"languageCodeChanged",t.va),(t.Z=e)&&Qe(e,"languageCodeChanged",t.va)}function Ru(t,e){t.P=e,qs(t.a,u.a.SDK_VERSION?wr(u.a.SDK_VERSION,t.P):null)}function ju(t,e){t.Y&&Ye(t.Y,"frameworkChanged",t.ua),(t.Y=e)&&Qe(e,"frameworkChanged",t.ua)}function Lu(t){try{return u.a.app(t.m).auth()}catch(e){throw new ei("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Fu(t){t.B||t.w.b||(t.w.start(),Ye(t,"tokenChanged",t.W),Qe(t,"tokenChanged",t.W))}function Uu(t){Ye(t,"tokenChanged",t.W),t.w.stop()}function Vu(t,e){t.ma=e,Br(t,"_lat",e)}function qu(t){for(var e=[],n=0;n<t.O.length;n++)e.push(t.O[n](t));return te(e).then(function(){return t})}function Bu(t){t.i&&!t.J&&(t.J=!0,ou(t.i,t))}function zu(t,e){zr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new Au(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Wu(){}function Hu(t){return Yt().then(function(){if(t.B)throw new ei("app-deleted")})}function Ku(t){return V(t.providerData,function(t){return t.providerId})}function $u(t,e){e&&(Qu(t,e.providerId),t.providerData.push(e))}function Qu(t,e){W(t.providerData,function(t){return t.providerId==e})}function Gu(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Br(t,e,n)}function Xu(t,e){t!=e&&(zr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),Br(t,"metadata",e.metadata?function(t){return new Au(t.a,t.b)}(e.metadata):new Au),U(e.providerData,function(e){$u(t,e)}),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.b,e.b),Br(t,"refreshToken",t.b.a))}function Yu(t){return t.G().then(function(e){var n=t.isAnonymous;return function(t,e){return Aa(t.a,ha,{idToken:e}).then(C(t.zc,t))}(t,e).then(function(){return n||Gu(t,"isAnonymous",!1),e})})}function Zu(t,e){e[Rs]&&t.ma!=e[Rs]&&(Ou(t.b,e),t.dispatchEvent(new Mu("tokenChanged")),Vu(t,e[Rs]),Gu(t,"refreshToken",t.b.a))}function Ju(t,e){return Yu(t).then(function(){if(B(Ku(t),e))return qu(t).then(function(){throw new ei("provider-already-linked")})})}function tl(t,e,n){return Wr({user:t,credential:Co(e),additionalUserInfo:e=Li(e),operationType:n})}function el(t,e){return Zu(t,e),t.reload().then(function(){return t})}function nl(t,e,n,r,i){if(!Ir())return Zt(new ei("operation-not-supported-in-this-environment"));if(t.h&&!i)return Zt(t.h);var o=ji(n.providerId),s=Nr(t.uid+":::"),a=null;(!kr()||dr())&&t.o&&n.isOAuthProvider&&(a=Ha(t.o,t.l,t.m,e,n,null,s,u.a.SDK_VERSION||null,null,null,t.tenantId));var c=ar(a,o&&o.Da,o&&o.Ca);return r=r().then(function(){if(il(t),!i)return t.G().then(function(){})}).then(function(){return uu(t.i,c,e,n,s,!!a,t.tenantId)}).then(function(){return new Wt(function(n,r){t.ja(e,null,new ei("cancelled-popup-request"),t.g||null),t.f=n,t.v=r,t.g=s,t.c=du(t.i,t,e,c,s)})}).then(function(t){return c&&sr(c),t?Wr(t):null}).s(function(t){throw c&&sr(c),t}),ol(t,r,i)}function rl(t,e,n,r,i){if(!Ir())return Zt(new ei("operation-not-supported-in-this-environment"));if(t.h&&!i)return Zt(t.h);var o=null,s=Nr(t.uid+":::");return r=r().then(function(){if(il(t),!i)return t.G().then(function(){})}).then(function(){return t.ca=s,qu(t)}).then(function(e){return t.da&&(e=(e=t.da).b.set(cl,t.A(),e.a)),e}).then(function(){return hu(t.i,e,n,s,t.tenantId)}).s(function(e){if(o=e,t.da)return ul(t.da);throw o}).then(function(){if(o)throw o}),ol(t,r,i)}function il(t){if(!t.i||!t.J){if(t.i&&!t.J)throw new ei("internal-error");throw new ei("auth-domain-config-required")}}function ol(t,e,n){var r=function(t,e,n){return t.h&&!n?(e.cancel(),Zt(t.h)):e.s(function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new Mu("userInvalidated")),t.h=e),e})}(t,e,n);return t.I.push(r),r.ka(function(){z(t.I,r)}),r}function sl(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!(t.stsTokenManager&&t.stsTokenManager.accessToken&&t.stsTokenManager.expirationTime))return null;n[Rs]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null,n.expiresIn=(t.stsTokenManager.expirationTime-E())/1e3;var r=new Du(e,n,t);return t.providerData&&U(t.providerData,function(t){t&&$u(r,Wr(t))}),t.redirectEventId&&(r.ca=t.redirectEventId),r}function al(t){this.a=t,this.b=kc()}gu.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},gu.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(vu(this,!0,null,t.a),Yt()):e.za(n,r)?function(t,e,n){n=n.za(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.R(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then(function(e){vu(t,a,e,null)}).s(function(e){vu(t,a,null,e)})}(this,t,e):Zt(new ei("invalid-auth-event")):(vu(this,!1,null,null),Yt())}else Zt(new ei("invalid-auth-event"))},gu.prototype.oa=function(){var t=this;return new Wt(function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new ei("timeout");t.a&&t.a.cancel(),t.a=dn(cu.get()).then(function(){t.b||(t.g=!0,vu(t,!0,null,e))})}(t))})},wu.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.ja(t.c,null,t.a,t.b),Yt()):e.za(n,r)?function(t,e){var n=t.b,r=t.c;e.za(r,n)(t.g,t.f,t.R(),t.i).then(function(t){e.ja(r,t,null,n)}).s(function(t){e.ja(r,null,t,n)})}(t,e):Zt(new ei("invalid-auth-event"))}else Zt(new ei("invalid-auth-event"))},Su.prototype.confirm=function(t){return t=So(this.verificationId,t),this.a(t)},Eu.prototype.start=function(){this.a=this.c,Tu(this,!0)},Eu.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},ku.prototype.A=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},ku.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Zt(new ei("user-token-expired")):t||!this.b||E()>this.c-3e4?this.a?function(t,e){return function(t,e){return new Wt(function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?Bs(t,t.l+"?key="+encodeURIComponent(t.c),function(t){t?t.error?r(Ma(t)):t.access_token&&t.refresh_token?n(t):r(new ei("internal-error")):r(new ei("network-request-failed"))},"POST",Ln(e).toString(),t.g,t.u.get()):r(new ei("internal-error"))})}(t.f,e).then(function(e){return t.b=e.access_token,t.c=xu(e.expires_in),t.a=e.refresh_token,{accessToken:t.b,expirationTime:t.c,refreshToken:t.a}}).s(function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e})}(this,{grant_type:"refresh_token",refresh_token:this.a}):Yt(null):Yt({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},Au.prototype.A=function(){return{lastLoginAt:this.b,createdAt:this.a}},T(Mu,je),T(Du,an),Du.prototype.sa=function(t){this.ga=t,Vs(this.a,t)},Du.prototype.ha=function(){return this.ga},Du.prototype.Aa=function(){return K(this.P)},Du.prototype.Ha=function(){this.w.b&&(this.w.stop(),this.w.start())},Br(Du.prototype,"providerId","firebase"),(t=Du.prototype).reload=function(){var t=this;return ol(this,Hu(this).then(function(){return Yu(t).then(function(){return qu(t)}).then(Wu)}))},t.dc=function(t){return this.G(t).then(function(t){return new Iu(t)})},t.G=function(t){var e=this;return ol(this,Hu(this).then(function(){return e.b.getToken(t)}).then(function(t){if(!t)throw new ei("internal-error");return t.accessToken!=e.ma&&(Vu(e,t.accessToken),e.dispatchEvent(new Mu("tokenChanged"))),Gu(e,"refreshToken",t.refreshToken),t.accessToken}))},t.zc=function(t){if(!(t=t.users)||!t.length)throw new ei("internal-error");zu(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?V(t,function(t){return new Nu(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[]}(t),n=0;n<e.length;n++)$u(this,e[n]);Gu(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length))},t.Ac=function(t){return Vr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.gb(t)},t.gb=function(t){var e=this,n=null;return ol(this,t.f(this.a,this.uid).then(function(t){return Zu(e,t),n=tl(e,t,"reauthenticate"),e.h=null,e.reload()}).then(function(){return n}),!0)},t.rc=function(t){return Vr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.eb(t)},t.eb=function(t){var e=this,n=null;return ol(this,Ju(this,t.providerId).then(function(){return e.G()}).then(function(n){return t.b(e.a,n)}).then(function(t){return n=tl(e,t,"link"),el(e,t)}).then(function(){return n}))},t.sc=function(t,e){var n=this;return ol(this,Ju(this,"phone").then(function(){return Cu(Lu(n),t,e,C(n.eb,n))}))},t.Bc=function(t,e){var n=this;return ol(this,Yt().then(function(){return Cu(Lu(n),t,e,C(n.gb,n))}),!0)},t.rb=function(t){var e=this;return ol(this,this.G().then(function(n){return e.a.rb(n,t)}).then(function(t){return Zu(e,t),e.reload()}))},t.Sc=function(t){var e=this;return ol(this,this.G().then(function(n){return t.b(e.a,n)}).then(function(t){return Zu(e,t),e.reload()}))},t.sb=function(t){var e=this;return ol(this,this.G().then(function(n){return e.a.sb(n,t)}).then(function(t){return Zu(e,t),e.reload()}))},t.tb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Hu(this);var e=this;return ol(this,this.G().then(function(n){return e.a.tb(n,{displayName:t.displayName,photoUrl:t.photoURL})}).then(function(t){return Zu(e,t),Gu(e,"displayName",t.displayName||null),Gu(e,"photoURL",t.photoUrl||null),U(e.providerData,function(t){"password"===t.providerId&&(Br(t,"displayName",e.displayName),Br(t,"photoURL",e.photoURL))}),qu(e)}).then(Wu))},t.Qc=function(t){var e=this;return ol(this,Yu(this).then(function(n){return B(Ku(e),t)?function(t,e,n){return Aa(t,ca,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then(function(t){var n={};return U(t.providerUserInfo||[],function(t){n[t.providerId]=!0}),U(Ku(e),function(t){n[t]||Qu(e,t)}),n[_o.PROVIDER_ID]||Br(e,"phoneNumber",null),qu(e)}):qu(e).then(function(){throw new ei("no-such-provider")})}))},t.delete=function(){var t=this;return ol(this,this.G().then(function(e){return Aa(t.a,aa,{idToken:e})}).then(function(){t.dispatchEvent(new Mu("userDeleted"))})).then(function(){for(var e=0;e<t.I.length;e++)t.I[e].cancel("app-deleted");Pu(t,null),ju(t,null),t.I=[],t.B=!0,Uu(t),Br(t,"refreshToken",null),t.i&&su(t.i,t)})},t.xb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ca||null)==e||"reauthViaRedirect"==t&&(this.ca||null)==e)},t.ja=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.za=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?C(this.Bb,this):"reauthViaPopup"==t&&e==(this.g||null)?C(this.Cb,this):"linkViaRedirect"==t&&(this.ca||null)==e?C(this.Bb,this):"reauthViaRedirect"==t&&(this.ca||null)==e?C(this.Cb,this):null},t.tc=function(t){var e=this;return nl(this,"linkViaPopup",t,function(){return Ju(e,t.providerId).then(function(){return qu(e)})},!1)},t.Cc=function(t){return nl(this,"reauthViaPopup",t,function(){return Yt()},!0)},t.uc=function(t){var e=this;return rl(this,"linkViaRedirect",t,function(){return Ju(e,t.providerId)},!1)},t.Dc=function(t){return rl(this,"reauthViaRedirect",t,function(){return Yt()},!0)},t.Bb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return ol(this,this.G().then(function(n){return ta(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})}).then(function(t){return o=tl(i,t,"link"),el(i,t)}).then(function(){return o}))},t.Cb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return ol(this,Yt().then(function(){return Qi(ea(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)}).then(function(t){return o=tl(i,t,"reauthenticate"),Zu(i,t),i.h=null,i.reload()}).then(function(){return o}),!0)},t.jb=function(t){var e=this,n=null;return ol(this,this.G().then(function(e){return n=e,void 0===t||Q(t)?{}:Ii(new pi(t))}).then(function(t){return e.a.jb(n,t)}).then(function(t){if(e.email!=t)return e.reload()}).then(function(){}))},t.toJSON=function(){return this.A()},t.A=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.o,stsTokenManager:this.b.A(),redirectEventId:this.ca||null};return this.metadata&&Y(t,this.metadata.A()),U(this.providerData,function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))}),t};var cl={name:"redirectUser",C:"session"};function ul(t){return Ac(t.b,cl,t.a)}function ll(t){this.a=t,this.b=kc(),this.c=null,this.f=function(t){var e=fl("local"),n=fl("session"),r=fl("none");return function(t,e,n){var r=xc(e,n),i=Oc(t,e.C);return t.get(e,n).then(function(o){var a=null;try{a=Ar(s.localStorage.getItem(r))}catch(c){}if(a&&!o)return s.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&s.localStorage.removeItem(r)})}(t.b,e,t.a).then(function(){return t.b.get(n,t.a)}).then(function(i){return i?n:t.b.get(r,t.a).then(function(n){return n?r:t.b.get(e,t.a).then(function(n){return n?e:t.b.get(dl,t.a).then(function(t){return t?fl(t):e})})})}).then(function(e){return t.c=e,hl(t,e.C)}).s(function(){t.c||(t.c=e)})}(this),this.b.addListener(fl("local"),this.a,C(this.g,this))}function hl(t,e){var n,r=[];for(n in Ec)Ec[n]!==e&&r.push(Ac(t.b,fl(Ec[n]),t.a));return r.push(Ac(t.b,dl,t.a)),function(t){return new Wt(function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)Jt(t[a],I(o,a),s);else e(i)})}(r)}ll.prototype.g=function(){var t=this,e=fl("local");yl(this,function(){return Yt().then(function(){return t.c&&"local"!=t.c.C?t.b.get(e,t.a):null}).then(function(n){if(n)return hl(t,"local").then(function(){t.c=e})})})};var dl={name:"persistence",C:"session"};function fl(t){return{name:"authUser",C:t}}function pl(t,e){return yl(t,function(){return t.b.set(t.c,e.A(),t.a)})}function gl(t){return yl(t,function(){return Ac(t.b,t.c,t.a)})}function ml(t,e){return yl(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),sl(t||{})})})}function yl(t,e){return t.f=t.f.then(e,e),t.f}function bl(t){if(this.l=!1,Br(this,"settings",new _u),Br(this,"app",t),!Tl(this).options||!Tl(this).options.apiKey)throw new ei("invalid-api-key");t=u.a.SDK_VERSION?wr(u.a.SDK_VERSION):null,this.b=new Ds(Tl(this).options&&Tl(this).options.apiKey,Mi(Ai),t),this.O=[],this.m=[],this.J=[],this.Ub=u.a.INTERNAL.createSubscribe(C(this.oc,this)),this.W=void 0,this.Vb=u.a.INTERNAL.createSubscribe(C(this.pc,this)),Il(this,null),this.h=new ll(Tl(this).options.apiKey+":"+Tl(this).name),this.w=new al(Tl(this).options.apiKey+":"+Tl(this).name),this.Y=Al(this,function(t){var e=Tl(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(cl,t.a).then(function(t){return t&&e&&(t.authDomain=e),sl(t||{})})}(t.w,Tl(t).options.authDomain).then(function(e){return(t.B=e)&&(e.da=t.w),ul(t.w)});return Al(t,e)}(t).then(function(){return ml(t.h,e)}).then(function(e){return e?(e.da=t.w,t.B&&(t.B.ca||null)==(e.ca||null)?e:e.reload().then(function(){return pl(t.h,e).then(function(){return e})}).s(function(n){return"auth/network-request-failed"==n.code?e:gl(t.h)})):null}).then(function(e){Il(t,e||null)});return Al(t,n)}(this)),this.i=Al(this,function(t){return t.Y.then(function(){return Sl(t)}).s(function(){}).then(function(){if(!t.l)return t.ma()}).s(function(){}).then(function(){if(!t.l){t.ga=!0;var e=t.h;e.b.addListener(fl("local"),e.a,t.ma)}})}(this)),this.ga=!1,this.ma=C(this.Nc,this),this.ub=C(this.aa,this),this.ua=C(this.bc,this),this.va=C(this.mc,this),this.Ha=C(this.nc,this),this.a=null,function(t){var e=Tl(t).options.authDomain,n=Tl(t).options.apiKey;e&&Ir()&&(t.Tb=t.Y.then(function(){if(!t.l){if(t.a=pu(e,n,Tl(t).name),ou(t.a,t),kl(t)&&Bu(kl(t)),t.B){Bu(t.B);var r=t.B;r.sa(t.ha()),Pu(r,t),Ru(r=t.B,t.I),ju(r,t),t.B=null}return t.a}}))}(this),this.INTERNAL={},this.INTERNAL.delete=C(this.delete,this),this.INTERNAL.logFramework=C(this.vc,this),this.o=0,an.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.ha()},set:function(t){this.sa(t)},enumerable:!1}),t.Z=null,Object.defineProperty(t,"ti",{get:function(){return this.R()},set:function(t){this.nb(t)},enumerable:!1}),t.P=null}(this),this.I=[]}function vl(t){je.call(this,"languageCodeChanged"),this.g=t}function wl(t){je.call(this,"frameworkChanged"),this.c=t}function _l(t){return t.Tb||Zt(new ei("auth-domain-config-required"))}function Sl(t){if(!Ir())return Zt(new ei("operation-not-supported-in-this-environment"));var e=_l(t).then(function(){return t.a.oa()}).then(function(t){return t?Wr(t):null});return Al(t,e)}function Cl(t,e){var n={};return n.apiKey=Tl(t).options.apiKey,n.authDomain=Tl(t).options.authDomain,n.appName=Tl(t).name,t.Y.then(function(){return function(t,e,n,r){var i=new Du(t,e);return n&&(i.da=n),r&&Ru(i,r),i.reload().then(function(){return i})}(n,e,t.w,t.Aa())}).then(function(e){return kl(t)&&e.uid==kl(t).uid?(Xu(kl(t),e),t.aa(e)):(Il(t,e),Bu(e),t.aa(e))}).then(function(){xl(t)})}function Il(t,e){kl(t)&&(function(t,e){W(t.O,function(t){return t==e})}(kl(t),t.ub),Ye(kl(t),"tokenChanged",t.ua),Ye(kl(t),"userDeleted",t.va),Ye(kl(t),"userInvalidated",t.Ha),Uu(kl(t))),e&&(e.O.push(t.ub),Qe(e,"tokenChanged",t.ua),Qe(e,"userDeleted",t.va),Qe(e,"userInvalidated",t.Ha),0<t.o&&Fu(e)),Br(t,"currentUser",e),e&&(e.sa(t.ha()),Pu(e,t),Ru(e,t.I),ju(e,t))}function El(t,e){var n=null,r=null;return Al(t,e.then(function(e){return n=Co(e),r=Li(e),Cl(t,e)}).then(function(){return Wr({user:kl(t),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function Tl(t){return t.app}function kl(t){return t.currentUser}function Ol(t){return kl(t)&&kl(t)._lat||null}function xl(t){if(t.ga){for(var e=0;e<t.m.length;e++)t.m[e]&&t.m[e](Ol(t));if(t.W!==t.getUid()&&t.J.length)for(t.W=t.getUid(),e=0;e<t.J.length;e++)t.J[e]&&t.J[e](Ol(t))}}function Al(t,e){return t.O.push(e),e.ka(function(){z(t.O,e)}),e}function Nl(){}function Ml(){this.a={},this.b=1e12}ll.prototype.mb=function(t){var e=null,n=this;return function(t){var e=new ei("invalid-persistence-type"),n=new ei("unsupported-persistence-type");t:{for(r in Ec)if(Ec[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(pr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;default:if(!Cr()&&"none"!==t)throw n}}(t),yl(this,function(){return t!=n.c.C?n.b.get(n.c,n.a).then(function(r){return e=r,hl(n,t)}).then(function(){if(n.c=fl(t),e)return n.b.set(n.c,e,n.a)}):Yt()})},T(bl,an),T(vl,je),T(wl,je),(t=bl.prototype).mb=function(t){return Al(this,t=this.h.mb(t))},t.sa=function(t){this.Z===t||this.l||(this.Z=t,Vs(this.b,this.Z),this.dispatchEvent(new vl(this.ha())))},t.ha=function(){return this.Z},t.Tc=function(){var t=s.navigator;this.sa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.vc=function(t){this.I.push(t),qs(this.b,u.a.SDK_VERSION?wr(u.a.SDK_VERSION,this.I):null),this.dispatchEvent(new wl(this.I))},t.Aa=function(){return K(this.I)},t.nb=function(t){this.P===t||this.l||(this.P=t,this.b.b=this.P)},t.R=function(){return this.P},t.toJSON=function(){return{apiKey:Tl(this).options.apiKey,authDomain:Tl(this).options.authDomain,appName:Tl(this).name,currentUser:kl(this)&&kl(this).A()}},t.xb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.ja=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.za=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?C(this.ac,this):null},t.ac=function(t,e,n,r){var i=this;t={requestUri:t,postBody:r,sessionId:e,tenantId:n},this.c&&(this.c.cancel(),this.c=null);var o=null,s=null,a=Js(i.b,t).then(function(t){return o=Co(t),s=Li(t),t});return Al(this,t=i.Y.then(function(){return a}).then(function(t){return Cl(i,t)}).then(function(){return Wr({user:kl(i),credential:o,additionalUserInfo:s,operationType:"signIn"})}))},t.Lc=function(t){if(!Ir())return Zt(new ei("operation-not-supported-in-this-environment"));var e=this,n=ji(t.providerId),r=Nr(),i=null;(!kr()||dr())&&Tl(this).options.authDomain&&t.isOAuthProvider&&(i=Ha(Tl(this).options.authDomain,Tl(this).options.apiKey,Tl(this).name,"signInViaPopup",t,null,r,u.a.SDK_VERSION||null,null,null,this.R()));var o=ar(i,n&&n.Da,n&&n.Ca);return Al(this,n=_l(this).then(function(n){return uu(n,o,"signInViaPopup",t,r,!!i,e.R())}).then(function(){return new Wt(function(t,n){e.ja("signInViaPopup",null,new ei("cancelled-popup-request"),e.g),e.f=t,e.v=n,e.g=r,e.c=du(e.a,e,"signInViaPopup",o,r)})}).then(function(t){return o&&sr(o),t?Wr(t):null}).s(function(t){throw o&&sr(o),t}))},t.Mc=function(t){if(!Ir())return Zt(new ei("operation-not-supported-in-this-environment"));var e=this;return Al(this,_l(this).then(function(){return function(t){return yl(t,function(){return t.b.set(dl,t.c.C,t.a)})}(e.h)}).then(function(){return hu(e.a,"signInViaRedirect",t,void 0,e.R())}))},t.oa=function(){var t=this;return Sl(this).then(function(e){return t.a&&yu(t.a.b),e}).s(function(e){throw t.a&&yu(t.a.b),e})},t.Rc=function(t){if(!t)return Zt(new ei("null-user"));if(this.P!=t.tenantId)return Zt(new ei("tenant-id-mismatch"));var e=this,n={};n.apiKey=Tl(this).options.apiKey,n.authDomain=Tl(this).options.authDomain,n.appName=Tl(this).name;var r=function(t,e,n,r){e=e||{apiKey:t.l,authDomain:t.o,appName:t.m};var i=t.b,o={};return o[Rs]=i.b,o.refreshToken=i.a,o.expiresIn=(i.c-E())/1e3,e=new Du(e,o),n&&(e.da=n),r&&Ru(e,r),Xu(e,t),e}(t,n,e.w,e.Aa());return Al(this,this.i.then(function(){if(Tl(e).options.apiKey!=t.l)return r.reload()}).then(function(){return kl(e)&&t.uid==kl(e).uid?(Xu(kl(e),t),e.aa(t)):(Il(e,r),Bu(r),e.aa(r))}).then(function(){xl(e)}))},t.pb=function(){var t=this;return Al(this,this.i.then(function(){return t.a&&yu(t.a.b),kl(t)?(Il(t,null),gl(t.h).then(function(){xl(t)})):Yt()}))},t.Nc=function(){var t=this;return ml(this.h,Tl(this).options.authDomain).then(function(e){if(!t.l){var n;if(n=kl(t)&&e){n=kl(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Xu(kl(t),e),kl(t).G();(kl(t)||e)&&(Il(t,e),e&&(Bu(e),e.da=t.w),t.a&&ou(t.a,t),xl(t))}})},t.aa=function(t){return pl(this.h,t)},t.bc=function(){xl(this),this.aa(kl(this))},t.mc=function(){this.pb()},t.nc=function(){this.pb()},t.oc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(kl(e))})},t.pc=function(t){var e=this;!function(t,e){t.J.push(e),Al(t,t.i.then(function(){!t.l&&B(t.J,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(Ol(t)))}))}(this,function(){t.next(kl(e))})},t.xc=function(t,e,n){var r=this;return this.ga&&Promise.resolve().then(function(){y(t)?t(kl(r)):y(t.next)&&t.next(kl(r))}),this.Ub(t,e,n)},t.wc=function(t,e,n){var r=this;return this.ga&&Promise.resolve().then(function(){r.W=r.getUid(),y(t)?t(kl(r)):y(t.next)&&t.next(kl(r))}),this.Vb(t,e,n)},t.cc=function(t){var e=this;return Al(this,this.i.then(function(){return kl(e)?kl(e).G(t).then(function(t){return{accessToken:t}}):null}))},t.Hc=function(t){var e=this;return this.i.then(function(){return El(e,Aa(e.b,Ea,{token:t}))}).then(function(t){var n=t.user;return Gu(n,"isAnonymous",!1),e.aa(n),t})},t.Ic=function(t,e){var n=this;return this.i.then(function(){return El(n,Aa(n.b,Ta,{email:t,password:e}))})},t.Xb=function(t,e){var n=this;return this.i.then(function(){return El(n,Aa(n.b,oa,{email:t,password:e}))})},t.Ra=function(t){var e=this;return this.i.then(function(){return El(e,t.na(e.b))})},t.Gc=function(t){return Vr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Ra(t)},t.ob=function(){var t=this;return this.i.then(function(){var e=kl(t);if(e&&e.isAnonymous){var n=Wr({providerId:null,isNewUser:!1});return Wr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return El(t,t.b.ob()).then(function(e){var n=e.user;return Gu(n,"isAnonymous",!0),t.aa(n),e})})},t.getUid=function(){return kl(this)&&kl(this).uid||null},t.Wb=function(t){this.addAuthTokenListener(t),this.o++,0<this.o&&kl(this)&&Fu(kl(this))},t.Ec=function(t){var e=this;U(this.m,function(n){n==t&&e.o--}),0>this.o&&(this.o=0),0==this.o&&kl(this)&&Uu(kl(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.m.push(t),Al(this,this.i.then(function(){e.l||B(e.m,t)&&t(Ol(e))}))},t.removeAuthTokenListener=function(t){W(this.m,function(e){return e==t})},t.delete=function(){this.l=!0;for(var t=0;t<this.O.length;t++)this.O[t].cancel("app-deleted");return this.O=[],this.h&&(t=this.h).b.removeListener(fl("local"),t.a,this.ma),this.a&&(su(this.a,this),yu(this.a.b)),Promise.resolve()},t.$b=function(t){return Al(this,function(t,e){return Aa(t,sa,{identifier:e,continueUri:Er()?nr():"http://localhost"}).then(function(t){return t.signinMethods||[]})}(this.b,t))},t.qc=function(t){return!!yo(t)},t.lb=function(t,e){var n=this;return Al(this,Yt().then(function(){var t=new pi(e);if(!t.c)throw new ei("argument-error",yi+" must be true when sending sign in link to email");return Ii(t)}).then(function(e){return n.b.lb(t,e)}).then(function(){}))},t.Uc=function(t){return this.Ka(t).then(function(t){return t.data.email})},t.$a=function(t,e){return Al(this,this.b.$a(t,e).then(function(){}))},t.Ka=function(t){return Al(this,this.b.Ka(t).then(function(t){return new Kr(t)}))},t.Xa=function(t){return Al(this,this.b.Xa(t).then(function(){}))},t.kb=function(t,e){var n=this;return Al(this,Yt().then(function(){return void 0===e||Q(e)?{}:Ii(new pi(e))}).then(function(e){return n.b.kb(t,e)}).then(function(){}))},t.Kc=function(t,e){return Al(this,Cu(this,t,e,C(this.Ra,this)))},t.Jc=function(t,e){var n=this;return Al(this,Yt().then(function(){var r=e||nr(),i=mo(t,r);if(!(r=yo(r)))throw new ei("argument-error","Invalid email link!");if(r.tenantId!==n.R())throw new ei("tenant-id-mismatch");return n.Ra(i)}))},Nl.prototype.render=function(){},Nl.prototype.reset=function(){},Nl.prototype.getResponse=function(){},Nl.prototype.execute=function(){};var Dl=null;function Pl(t,e){return(e=Rl(e))&&t.a[e]||null}function Rl(t){return(t=void 0===t?1e12:t)?t.toString():null}function jl(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=Wn(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():Qe(this.f,"click",this.i)}function Ll(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Fl(){}Ml.prototype.render=function(t,e){return this.a[this.b.toString()]=new jl(t,e),this.b++},Ml.prototype.reset=function(t){var e=Pl(this,t);t=Rl(t),e&&t&&(e.delete(),delete this.a[t])},Ml.prototype.getResponse=function(t){return(t=Pl(this,t))?t.getResponse():null},Ml.prototype.execute=function(t){(t=Pl(this,t))&&t.execute()},jl.prototype.getResponse=function(){return Ll(this),this.b},jl.prototype.execute=function(){Ll(this);var t=this;this.a||(this.a=setTimeout(function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout(function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()},6e4)},500))},jl.prototype.delete=function(){Ll(this),this.g=!0,clearTimeout(this.a),this.a=null,Ye(this.f,"click",this.i)},Fl.prototype.g=function(){return Dl||(Dl=new Ml),Yt(Dl)},Fl.prototype.c=function(){};var Ul=null;function Vl(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var ql=new Z(et,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Bl=new Pr(3e4,6e4);Vl.prototype.g=function(t){var e=this;return new Wt(function(n,r){var i=setTimeout(function(){r(new ei("network-request-failed"))},Bl.get());!s.grecaptcha||t!==e.f&&!e.b?(s[e.a]=function(){if(s.grecaptcha){e.f=t;var o=s.grecaptcha.render;s.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(s.grecaptcha)}else clearTimeout(i),r(new ei("internal-error"));delete s[e.a]},Yt(Ts(ot(ql,{onload:e.a,hl:t||""}))).s(function(){clearTimeout(i),r(new ei("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(i),n(s.grecaptcha))})},Vl.prototype.c=function(){this.b--};var zl=null;function Wl(t,e,n,r,i,o,a){if(Br(this,"type","recaptcha"),this.c=this.f=null,this.B=!1,this.u=e,this.g=null,a?(Ul||(Ul=new Fl),a=Ul):(zl||(zl=new Vl),a=zl),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[$l])throw new ei("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Ql],!s.document)throw new ei("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!Wn(e)||!this.i&&Wn(e).hasChildNodes())throw new ei("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.o=new Ds(t,o||null,i||null),this.v=r||function(){return null};var c=this;this.l=[];var u=this.a[Hl];this.a[Hl]=function(t){if(Gl(c,t),"function"==typeof u)u(t);else if("string"==typeof u){var e=Sr(u,s);"function"==typeof e&&e(t)}};var l=this.a[Kl];this.a[Kl]=function(){if(Gl(c,null),"function"==typeof l)l();else if("string"==typeof l){var t=Sr(l,s);"function"==typeof t&&t()}}}var Hl="callback",Kl="expired-callback",$l="sitekey",Ql="size";function Gl(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function Xl(t,e){return t.h.push(e),e.ka(function(){z(t.h,e)}),e}function Yl(t){if(t.B)throw new ei("internal-error","RecaptchaVerifier instance has been destroyed.")}function Zl(t,e,n){var r=!1;try{this.b=n||u.a.app()}catch(s){throw new ei("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new ei("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Aa()}catch(s){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(s){}o=u.a.SDK_VERSION?wr(u.a.SDK_VERSION,o):null,Wl.call(this,n,t,e,function(){try{var t=i.b.auth().ha()}catch(e){t=null}return t},o,Mi(Ai),r)}function Jl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new ei("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].N(n[i])&&!o){if(e=e[i],0>i||i>=th.length)throw new ei("internal-error","Argument validator received an unsupported number of arguments.");n=th[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.M+".";break t}r=null}}if(r)throw new ei("argument-error",t+" failed: "+r)}(t=Wl.prototype).Ba=function(){var t=this;return this.f?this.f:this.f=Xl(this,Yt().then(function(){if(Er()&&!fr())return lr();throw new ei("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return t.m.g(t.v())}).then(function(e){return t.g=e,Aa(t.o,ma,{})}).then(function(e){t.a[$l]=e.recaptchaSiteKey}).s(function(e){throw t.f=null,e}))},t.render=function(){Yl(this);var t=this;return Xl(this,this.Ba().then(function(){if(null===t.c){var e=t.u;if(!t.i){var n=Wn(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!zn&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',Ft(s.name),'"'),s.type){o.push(' type="',Ft(s.type),'"');var c={};Y(c,s),delete c.type,s=c}o.push(">"),o=o.join("")}return o=i.createElement(o),s&&(a(s)?o.className=s:g(s)?o.className=s.join(" "):Hn(o,s)),2<r.length&&$n(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c}))},t.verify=function(){Yl(this);var t=this;return Xl(this,this.render().then(function(e){return new Wt(function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){W(t.l,function(t){return t==e})}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}})}))},t.reset=function(){Yl(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Yl(this),this.B=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=Wn(this.u);for(var e;e=t.firstChild;)t.removeChild(e)}},T(Zl,Wl);var th="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function eh(t,e){return{name:t||"",M:"a valid string",optional:!!e,N:a}}function nh(t,e){return{name:t||"",M:"a boolean",optional:!!e,N:c}}function rh(t,e){return{name:t||"",M:"a valid object",optional:!!e,N:b}}function ih(t,e){return{name:t||"",M:"a function",optional:!!e,N:y}}function oh(t,e){return{name:t||"",M:"null",optional:!!e,N:p}}function sh(t){return{name:t?t+"Credential":"credential",M:t?"a valid "+t+" credential":"a valid credential",optional:!1,N:function(e){return!!e&&!(!e.na||t&&e.providerId!==t)}}}function ah(){return{name:"applicationVerifier",M:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,N:function(t){return!!(t&&a(t.type)&&y(t.verify))}}}function ch(t,e,n,r){return{name:n||"",M:t.M+" or "+e.M,optional:!!r,N:function(n){return t.N(n)||e.N(n)}}}function uh(t,e){for(var n in e){var r=e[n].name;t[r]=dh(r,t[n],e[n].j)}}function lh(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:I(function(t){return this[t]},n),set:I(function(t,e,n,r){Jl(t,[n],[r],!0),this[e]=r},r,n,e[n].Ya),enumerable:!0})}}function hh(t,e,n,r){t[e]=dh(e,n,r)}function dh(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Jl(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}uh(bl.prototype,{Xa:{name:"applyActionCode",j:[eh("code")]},Ka:{name:"checkActionCode",j:[eh("code")]},$a:{name:"confirmPasswordReset",j:[eh("code"),eh("newPassword")]},Xb:{name:"createUserWithEmailAndPassword",j:[eh("email"),eh("password")]},$b:{name:"fetchSignInMethodsForEmail",j:[eh("email")]},oa:{name:"getRedirectResult",j:[]},qc:{name:"isSignInWithEmailLink",j:[eh("emailLink")]},wc:{name:"onAuthStateChanged",j:[ch(rh(),ih(),"nextOrObserver"),ih("opt_error",!0),ih("opt_completed",!0)]},xc:{name:"onIdTokenChanged",j:[ch(rh(),ih(),"nextOrObserver"),ih("opt_error",!0),ih("opt_completed",!0)]},kb:{name:"sendPasswordResetEmail",j:[eh("email"),ch(rh("opt_actionCodeSettings",!0),oh(null,!0),"opt_actionCodeSettings",!0)]},lb:{name:"sendSignInLinkToEmail",j:[eh("email"),rh("actionCodeSettings")]},mb:{name:"setPersistence",j:[eh("persistence")]},Gc:{name:"signInAndRetrieveDataWithCredential",j:[sh()]},ob:{name:"signInAnonymously",j:[]},Ra:{name:"signInWithCredential",j:[sh()]},Hc:{name:"signInWithCustomToken",j:[eh("token")]},Ic:{name:"signInWithEmailAndPassword",j:[eh("email"),eh("password")]},Jc:{name:"signInWithEmailLink",j:[eh("email"),eh("emailLink",!0)]},Kc:{name:"signInWithPhoneNumber",j:[eh("phoneNumber"),ah()]},Lc:{name:"signInWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Mc:{name:"signInWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Rc:{name:"updateCurrentUser",j:[ch({name:"user",M:"an instance of Firebase User",optional:!1,N:function(t){return!!(t&&t instanceof Du)}},oh(),"user")]},pb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[eh(null,!0)]},Tc:{name:"useDeviceLanguage",j:[]},Uc:{name:"verifyPasswordResetCode",j:[eh("code")]}}),lh(bl.prototype,{lc:{name:"languageCode",Ya:ch(eh(),oh(),"languageCode")},ti:{name:"tenantId",Ya:ch(eh(),oh(),"tenantId")}}),(bl.Persistence=Ec).LOCAL="local",bl.Persistence.SESSION="session",bl.Persistence.NONE="none",uh(Du.prototype,{delete:{name:"delete",j:[]},dc:{name:"getIdTokenResult",j:[nh("opt_forceRefresh",!0)]},G:{name:"getIdToken",j:[nh("opt_forceRefresh",!0)]},rc:{name:"linkAndRetrieveDataWithCredential",j:[sh()]},eb:{name:"linkWithCredential",j:[sh()]},sc:{name:"linkWithPhoneNumber",j:[eh("phoneNumber"),ah()]},tc:{name:"linkWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},uc:{name:"linkWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Ac:{name:"reauthenticateAndRetrieveDataWithCredential",j:[sh()]},gb:{name:"reauthenticateWithCredential",j:[sh()]},Bc:{name:"reauthenticateWithPhoneNumber",j:[eh("phoneNumber"),ah()]},Cc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Dc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},jb:{name:"sendEmailVerification",j:[ch(rh("opt_actionCodeSettings",!0),oh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[eh(null,!0)]},Qc:{name:"unlink",j:[eh("provider")]},rb:{name:"updateEmail",j:[eh("email")]},sb:{name:"updatePassword",j:[eh("password")]},Sc:{name:"updatePhoneNumber",j:[sh("phone")]},tb:{name:"updateProfile",j:[rh("profile")]}}),uh(Ml.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),uh(Nl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),uh(Wt.prototype,{ka:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),lh(_u.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",Ya:nh("appVerificationDisabledForTesting")}}),uh(Su.prototype,{confirm:{name:"confirm",j:[eh("verificationCode")]}}),hh($i,"fromJSON",function(t){t=a(t)?JSON.parse(t):t;for(var e,n=[to,po,vo,Yi],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[ch(eh(),rh(),"json")]),hh(go,"credential",function(t,e){return new fo(t,e)},[eh("email"),eh("password")]),uh(fo.prototype,{A:{name:"toJSON",j:[eh(null,!0)]}}),uh(io.prototype,{wa:{name:"addScope",j:[eh("scope")]},Ea:{name:"setCustomParameters",j:[rh("customOAuthParameters")]}}),hh(io,"credential",oo,[ch(eh(),rh(),"token")]),hh(go,"credentialWithLink",mo,[eh("email"),eh("emailLink")]),uh(so.prototype,{wa:{name:"addScope",j:[eh("scope")]},Ea:{name:"setCustomParameters",j:[rh("customOAuthParameters")]}}),hh(so,"credential",ao,[ch(eh(),rh(),"token")]),uh(co.prototype,{wa:{name:"addScope",j:[eh("scope")]},Ea:{name:"setCustomParameters",j:[rh("customOAuthParameters")]}}),hh(co,"credential",uo,[ch(eh(),ch(rh(),oh()),"idToken"),ch(eh(),oh(),"accessToken",!0)]),uh(lo.prototype,{Ea:{name:"setCustomParameters",j:[rh("customOAuthParameters")]}}),hh(lo,"credential",ho,[ch(eh(),rh(),"token"),eh("secret",!0)]),uh(ro.prototype,{wa:{name:"addScope",j:[eh("scope")]},credential:{name:"credential",j:[ch(eh(),ch(rh(),oh()),"optionsOrIdToken"),ch(eh(),oh(),"accessToken",!0)]},Ea:{name:"setCustomParameters",j:[rh("customOAuthParameters")]}}),uh(Zi.prototype,{A:{name:"toJSON",j:[eh(null,!0)]}}),uh(Gi.prototype,{A:{name:"toJSON",j:[eh(null,!0)]}}),hh(_o,"credential",So,[eh("verificationId"),eh("verificationCode")]),uh(_o.prototype,{Va:{name:"verifyPhoneNumber",j:[eh("phoneNumber"),ah()]}}),uh(bo.prototype,{A:{name:"toJSON",j:[eh(null,!0)]}}),uh(ei.prototype,{toJSON:{name:"toJSON",j:[eh(null,!0)]}}),uh(No.prototype,{toJSON:{name:"toJSON",j:[eh(null,!0)]}}),uh(Ao.prototype,{toJSON:{name:"toJSON",j:[eh(null,!0)]}}),uh(Zl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),hh(oi,"parseLink",fi,[eh("link")]),function(){if(void 0===u.a||!u.a.INTERNAL||!u.a.INTERNAL.registerService)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:$r,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:bl,AuthCredential:$i,Error:ei};hh(t,"EmailAuthProvider",go,[]),hh(t,"FacebookAuthProvider",io,[]),hh(t,"GithubAuthProvider",so,[]),hh(t,"GoogleAuthProvider",co,[]),hh(t,"TwitterAuthProvider",lo,[]),hh(t,"OAuthProvider",ro,[eh("providerId")]),hh(t,"SAMLAuthProvider",no,[eh("providerId")]),hh(t,"PhoneAuthProvider",_o,[{name:"auth",M:"an instance of Firebase Auth",optional:!0,N:function(t){return!!(t&&t instanceof bl)}}]),hh(t,"RecaptchaVerifier",Zl,[ch(eh(),{name:"",M:"an HTML element",optional:!1,N:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),rh("recaptchaParameters",!0),{name:"app",M:"an instance of Firebase App",optional:!0,N:function(t){return!!(t&&t instanceof u.a.app.App)}}]),hh(t,"ActionCodeURL",oi,[]),u.a.INTERNAL.registerService("auth",function(t,e){return e({INTERNAL:{getUid:C((t=new bl(t)).getUid,t),getToken:C(t.cc,t),addAuthTokenListener:C(t.Wb,t),removeAuthTokenListener:C(t.Ec,t)}}),t},t,function(t,e){if("create"===t)try{e.auth()}catch(n){}}),u.a.INTERNAL.extendNamespace({User:Du})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});let l=(()=>{let t=class{};return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},providers:[a.a]}),t})();var h,d=n("S/Aq");n("6Joi");let f=(()=>{let t=h=class{static enablePersistence(t){return{ngModule:h,providers:[{provide:d.b,useValue:!0},{provide:d.c,useValue:t}]}}};return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},providers:[d.a]}),t})();var p=n("tyNb"),g=n("7dP1");let m=(()=>{class t{constructor(t){this.auth=t}canActivate(t,e){return this.auth.authenticated$}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(g.a))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),y=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},imports:[[p.b.forRoot([{path:"about",loadChildren:()=>n.e(10).then(n.bind(null,"FQ1g")).then(t=>t.AboutModule)},{path:"lessons",loadChildren:()=>n.e(11).then(n.bind(null,"zbKj")).then(t=>t.LessonsModule),canActivate:[m]}],{relativeLinkResolution:"legacy"})],p.b]}),t})();var b=n("M0ag"),v=n("2Vo4"),w=n("XNiG"),_=n("itXk"),S=n("7o/Q");class C{constructor(t){this.total=t}call(t,e){return e.subscribe(new I(t,this.total))}}class I extends S.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){++this.count>this.total&&this.destination.next(t)}}var E=n("1G5W"),T=n("vkgz"),k=n("YU+1"),O=n("5roe"),x=n("xgIS"),A=n("9uVP"),N=n("XnF7"),M=n.n(N);let D;var P=n("j0t/"),R=n("IzEk");const j=["rxjs/operators","rxjs/ajax","@angular/common/http"];let L=(()=>{class t{constructor(t){this.projectStore=t,this.exports={},this.extraLibs={},this.imports={},this.templatePositions={},this.models=new Map,this.filesAdded$=new w.a,this.vendorsLoaded$=new w.a,Object(_.b)([this.filesAdded$,this.vendorsLoaded$]).pipe(Object(R.a)(1)).subscribe(()=>{this.enableValidation()})}enableValidation(){window.setTimeout(()=>{monaco.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSemanticValidation:!1,noSyntaxValidation:!1})})}openFile(t,e){if(!t)return;this.has(e)||this.addModel(e,this.projectStore.state.files[e].contents);const n=this.getModel(e);n.setValue(n.getValue()),n.updateOptions({tabSize:2,insertSpaces:!0}),F(n),t.setModel(n)}addFiles(t){Object.keys(t).forEach(e=>{t[e].type!==k.a.File||this.models.has(e)||this.addModel(e,t[e].contents)}),this.filesAdded$.next()}loadVendors(t){let e=Object.keys(this.isExtraLibsEmpty()?t.vendors:t.newVendors||t.vendors).filter(t=>t.endsWith(".d.ts")||t.endsWith("package.json")||t.endsWith(".metadata.json")).map(e=>{const n=e.replace("https://unpkg.com/",""),r=n.lastIndexOf("@");return{path:"node_modules/"+(r>0?n.substr(0,r)+n.substr(n.indexOf("/",r)):n),content:t.vendors[e].contents}});t.newVendors||(e=e.concat(Object.keys(t.dependencies).map(e=>{const n=t.dependencies[e];return{path:`node_modules/${e}/package.json`,content:`{"name":"${e}","version":"${n.version}"${n.hasOwnProperty("types")?',"types":"'+n.types+'"':""}${n.hasOwnProperty("typings")?',"typings":"'+n.typings+'"':""}}`}}))),e.forEach(t=>{this.addExtraLib(t.path,monaco.languages.typescript.typescriptDefaults.addExtraLib(t.content,t.path))}),[...Object.keys(t.dependencies),...j].forEach(t=>{monaco.languages.typescript.typescriptDefaults.addExtraLib(function(t){return`import {  } from "${t}"`}(t),"zuz_/"+t)}),this.vendorsLoaded$.next(),setTimeout(()=>{this.loadSuggestions()},0)}loadSuggestions(){const t=[...Object.keys(this.projectStore.state.dependencies),...j];monaco.languages.typescript.getTypeScriptWorker().then(e=>{e("").then(e=>{t.slice().forEach(n=>{this.exports[n]||e.getCompletionsAtPosition("zuz_/"+n,9).then(e=>{e&&e.entries&&(this.exports[n]={type:"global",set:e.entries.filter(t=>0!==t.name.indexOf("\u0275")).map(t=>t.name)}),t.shift()})})})})}has(t){return this.models.has(t)}getModel(t){return this.models.get(t)}addModel(t,e){if(this.models.has(t))return;const n=monaco.editor.createModel(e,void 0,monaco.Uri.parse("ng:src/"+t,!0));F(n),this.models.set(t,n)}updateModel(t,e){if(this.models.has(t)){const n=this.models.get(t);n.getValue()!==e&&(n.setValue(e),F(n))}}_clearModelFor(t){const e=this.models.get(t);e&&(e.dispose(),this.models.delete(t),delete this.exports[t],delete this.imports[t],delete this.templatePositions[t],this.models.forEach(t=>{t.setValue(t.getValue()),F(t)}))}clearExportsFor(t){delete this.exports[t]}isExtraLibsEmpty(){return 0===Object.keys(this.extraLibs).length}addExtraLib(t,e){this.extraLibs[t]=e}disposeExtraLibsForPackage(t){Object.keys(this.extraLibs).forEach(e=>{e.startsWith("node_modules/"+t)&&(this.extraLibs[e].dispose(),delete this.extraLibs[e])})}deleteSolutionItem(t){t.type===k.a.File&&this._clearModelFor(t.fullPath)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(k.c))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function F(t){t.setEOL(monaco.editor.EndOfLineSequence.LF)}let U=(()=>{class t{constructor(t,e,n){this.projectStore=t,this.monacoStore=e,this.playgroundStore=n,this.errorInfo$=new v.a({}),this.passed$=new w.a,this.confirmInstallState$=new v.a(null),this.installState$=new v.a(null),this.bundleSuccess$=new v.a(!1),this.inspect$=new w.a,this.decoratorsUpdated$=new v.a(!1),this.wasLexerError=!1,this.previewLoaded=new Promise(t=>{this.resolvePreviewLoaded=t}),this.changesTimeout={},this.files={},this.toUnresolvedModules=t=>{const e=this.projectStore.state.files[t.file];if(e)return e.contents.slice(t.startPos+1,t.endPos-1)},this.worker=new A.a(new Worker(`/${i.a.hash?i.a.hash+".":""}app.worker.js`)),this.worker.on("WORKER_CONNECTED",()=>{this.projectStore.projectLoaded$.subscribe(()=>{this.updateDecorators(this.projectStore.state.files),this.worker.postMessage({type:"START",payload:Object.assign(Object.assign({},this.projectStore.state),{testMode:this.playgroundStore.state.testMode,aot:!!this.projectStore.state.aot&&this.projectStore.getAotVersion()})})})}).on("PASSED",t=>{this.previewLoaded.then(()=>{this.confirmInstallState$.next(null);const e=t.payload.project,n=this.projectStore.state.aot;t.payload.updated&&(this.projectStore.updateDeps(e.dependencies),V({type:"UPDATE",payload:t.payload}),setTimeout(()=>{this.installState$.next(null)},500),this.bundleSuccess$.next(e),n&&monaco.languages.typescript.typescriptDefaults.refresh()),n?this.initPassed?t.payload.refreshed&&(this.files&&(e.files=this.files),setTimeout(()=>{this.runIvyAOT({},e)})):Object(P.b)().then(()=>{this.bundleSuccess$.next(e),setTimeout(()=>{this.runIvyAOT({},e)})}):t.payload.diff?V({type:"DIFF",payload:t.payload.diff}):t.payload.updated||(V({type:"START",payload:Object.assign(Object.assign({},e),{aot:n})}),this.bundleSuccess$.next(e)),this.passed$.next(),this.initPassed||(this.initPassed=!0)})}).on("FAILED",t=>{if(this.initPassed||this.monacoStore.enableValidation(),this.installState$.next(null),this.confirmInstallState$.next(null),t.payload.type&&"glob"===t.payload.type){const e=q(t.payload.sources);if(!this.initPassed||this.confirmInstall(e))return void this.install(e)}this.errorInfo$.next(t.payload),V({type:"FAILED",payload:t.payload})}).on("COMPILE_SASS",t=>{return t?(e=t,(D||(D=new Promise(t=>{fetch("https://cdnjs.cloudflare.com/ajax/libs/sass.js/0.10.6/sass.worker.min.js").then(t=>t.text()).then(e=>{const n=new Blob([e],{type:"text/javascript"});t(new M.a(window.URL.createObjectURL(n)))})})),D).then(t=>new Promise((n,r)=>{t.compile(e,t=>{t.formatted?r(t.formatted):n(t.text)})}))).catch(t=>{V({type:"FAILED",payload:{message:t,file:""}})}):Promise.resolve("");var e}),this.bundleSuccess$.subscribe(t=>{t&&this.monacoStore.loadVendors(t)}),this.handleWindowMessages()}handleWindowMessages(){Object(x.a)(window,"message").subscribe(t=>{if(t.data)switch(t.data.type){case"PREVIEW_ERROR":this.errorInfo$.next(t.data.data);break;case"REFRESH":this.files=t.data.data;break;case"FAILED":{const e=t.data.data;if("rel"===e.type){this.errorInfo$.next(e),V({type:"FAILED",payload:e});break}const n=q(e.sources);this.confirmInstall(n);break}case"PREVIEW_CONNECTED":this.initPassed&&this.post({type:"REFRESH",payload:Object.assign(Object.assign({},this.projectStore.state),{testMode:this.playgroundStore.state.testMode})}),this.resolvePreviewLoaded();break;case"URL_CHANGED":this.playgroundStore.changePreviewUrl(t.data.payload);break;case"OPEN_FILE":{let e,{filePath:n,offset:r}=t.data.payload;if(n.includes("@")){const[t,r]=n.split("@");n=t;const[i,o]=r.split(":"),s=parseInt(i,10),a=parseInt(o,10)+1;e=new monaco.Position(s,a)}this.inspect$.next({filePath:n,offset:r,position:e});break}}})}updateDecorators(t){this.worker.postMessage({type:"PARSE",payload:{files:t}}).then(t=>{this.decoratorsUpdated$.next(t);const{exports:e,imports:n,templatePositions:r}=t;Object.keys(e).forEach(t=>{this.monacoStore.exports[t]={type:"local",set:e[t]}}),Object.keys(n).forEach(t=>{this.monacoStore.imports[t]=n[t]}),Object.keys(r).forEach(t=>{this.monacoStore.templatePositions[t]=r[t]})})}detectChanges(t,e){const n=this.projectStore.state,r=n.files;if(!r[t]||r[t].contents===e)return;if(this.setErrors({}),r[t].contents=e,this.projectStore.setDirty(),t.endsWith(".ts")&&this.updateDecorators({[t]:r[t]}),"save"===this.playgroundStore.state.reloadMode)return void(this.projectStore.state.files[t].dirty||this.projectStore.setDirtyOnFiles(!0,[t]));const i={fullPath:t,contents:e,lastModified:Date.now()},o={add:{[t]:i},remove:[]};this.changesTimeout[t]&&clearTimeout(this.changesTimeout[t]),this.changesTimeout[t]=setTimeout(()=>{this.change(o,n),delete this.changesTimeout[t]},500)}change(t,e=this.projectStore.state){if(this.installState$.value)return;const n={type:this.initPassed?"MERGE":"START",payload:this.initPassed?t:e};this.projectStore.state.aot?this.runIvyAOT(n):this.post(n)}post(t){this.worker.postMessage(t)}setErrors(t){this.errorInfo$.next(t)}confirmInstall(t){this.installState$.next(null),this.confirmInstallState$.next(t)}install(t){this.installState$.next(t),this.confirmInstallState$.next(null),this.worker.postMessage({type:"INSTALL",payload:{packages:t,aotEnabled:!!this.projectStore.state.aot&&this.projectStore.getAotVersion()}})}runIvyAOT(t,e){let n;this.setErrors({}),i.a.production||(n=performance.now(),console.log("AOT started"));const r=this.projectStore.getAotVersion();this.confirmInstallState$.next(null),monaco.languages.typescript.getAotWorker(this.projectStore.getAotVersion()).then(o=>{V({type:"COMPILE_START"}),o("").then(o=>{this.wasLexerError&&(this.wasLexerError=!1,Object.keys(this.projectStore.state.files).forEach(e=>{e.endsWith(".ts")&&(t.payload.add[e]=this.projectStore.state.files[e])})),o.ivy(t,r).then(o=>{if(e)Object.keys(o.output).forEach(t=>{const n=t.slice(4);e.files[n]||(e.files[n]={fullPath:n}),e.files[n].contents=o.output[t]}),V({type:"START",payload:Object.assign(Object.assign({},e),{aot:r,failed:!!o.diagnostics})});else if(!o.diagnostics){const e={add:{},remove:[]};Object.keys(o.output).forEach(t=>{e.add[t.slice(4)]={fullPath:t.slice(4),contents:o.output[t]}}),"MERGE"===t.type&&Object.keys(t.payload.add||{}).forEach(n=>{n.endsWith(".css")&&(e.add[n]=t.payload.add[n])}),V({type:"DIFF",payload:e})}if(o.diagnostics&&(o.ngtscDiagnostics.length&&(this.wasLexerError=o.ngtscDiagnostics.some(t=>t.message.includes("Lexer Error"))),V({type:"FAILED",payload:{message:o.diagnostics}})),o.ngtscDiagnostics&&o.ngtscDiagnostics.length){const t=o.ngtscDiagnostics[0],e=o.ngtscDiagnostics.filter(({code:t,category:e})=>2307===t&&1===e).map(this.toUnresolvedModules).filter(Boolean);if(e.length){const t=q(e);(!this.initPassed||this.confirmInstall(t))&&this.install(t)}else this.errorInfo$.next(t)}if(!i.a.production){const t=performance.now();console.log("Ivy:AOT",t-n)}})})})}doSave(){if("edit"===this.playgroundStore.state.reloadMode)return;const{files:t}=this.projectStore.state,e=Object.keys(t).filter(e=>t[e].dirty),n={add:{},remove:[]};e.forEach(e=>{const r=t[e];n.add[r.fullPath]={fullPath:r.fullPath,contents:r.contents,lastModified:Date.now()}}),this.projectStore.setDirtyOnFiles(!1),this.change(n,this.projectStore.state)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(k.c),r.Qb(L),r.Qb(k.b))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function V(t){preview.postMessage(t,"*")}function q(t){return t.map(t=>function(t){if(t.startsWith("@")){const[e,n]=t.split("/");return e+(n?"/"+n:"")}if(t.startsWith("."))return t;{const e=t.indexOf("/");return t.substring(0,e>0?e:t.length)}}(t)).filter(B)}function B(t,e,n){return n.indexOf(t)===e}var z=n("ofXK"),W=n("mrSG"),H=n("pLZG");const K="live";let $=(()=>{class t{constructor(t,e,n,r,i,o){this.authService=t,this.location=e,this.projectStore=n,this.monacoStore=r,this.editorWorker=i,this.notificationService=o,this.roomId$=new v.a(Object(A.d)(K)),this.room$=new v.a(null),this.activeEditor$=new v.a(null),this._listeners=Object.create(null),t.authState$.subscribe(t=>{this.roomId&&(t?this.activeEditor$.pipe(Object(H.a)(Boolean)).pipe(Object(R.a)(1)).subscribe(()=>{this.getLiveManager().then(e=>{e.connect(t,this.roomId).then()})}):this.isConnected?this.liveManager.disconnect():this.notificationService.notify({type:"error",message:"You can't access this session. Please sign in"},1e4))}),this.listenToModelChanges().then()}get roomId(){return this.roomId$.value}set roomId(t){this.roomId$.next(t)}get isConnected(){return this.roomId&&this.liveManager&&this.liveManager.isConnected}get isApplyingOperation(){return this.liveManager&&this.liveManager.isApplyingOperation}detectChangeCursor(t,e,n){this.isConnected&&this.liveManager.detectChangeCursor(t,e,n)}listenToModelChanges(){return Object(W.a)(this,void 0,void 0,function*(){yield Object(P.b)(),monaco.editor.onDidCreateModel(t=>{const e=t.uri.path.substring(4);this.isConnected&&this.projectStore.state&&!Object.keys(this.projectStore.state.files).includes(e)&&this.liveManager.send("addModel",this.roomId,{path:e,contents:t.getValue()}),this._listeners[t.uri.toString()]=t.onDidChangeContent(n=>{if(this.isApplyingOperation)return;const r=t.getValue(),i=this.projectStore.state.files[e];this.isConnected&&i&&i.contents!==r&&this.liveManager.sendChangeOperations(n,i),i&&i.contents!==r&&this.editorWorker.detectChanges(e,r)})}),monaco.editor.onWillDisposeModel(t=>{const e=t.uri.path.substring(4);this.isConnected&&this.liveManager.send("removeItem",this.roomId,{path:e,type:"file"});let n=t.uri.toString(),r=this._listeners[n];r&&(r.dispose(),delete this._listeners[n])})})}getLiveManager(){return this.liveManagerPromise$||(this.liveManagerPromise$=n.e(1).then(n.bind(null,"vpja")).then(t=>(this.liveManager=new t.LiveSessionManager(this.location,this.projectStore,this.monacoStore,this.editorWorker,this.notificationService,this.activeEditor$,this.room$,this.roomId$),this.liveManager))),this.liveManagerPromise$}toggleLive(){return Object(W.a)(this,void 0,void 0,function*(){this.roomId=this.roomId?null:yield Object(A.c)(),document.body.classList.toggle("live-enabled",!!this.roomId),this.location.replaceState(Object(A.g)(K,this.roomId)),this.getLiveManager().then(t=>{this.roomId?(this.projectStore.save(!1).then(),t.connect(this.authService.user,this.roomId,!0).then()):t.disconnect()})})}gotoUser(t){this.isConnected&&this.liveManager.gotoUser(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(g.a),r.Qb(z.i),r.Qb(k.c),r.Qb(L),r.Qb(U),r.Qb(b.b))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Q=n("lJxs"),G=n("+eVz"),X=n("++hd"),Y=n("0njA");function Z(t,e){if(1&t){const t=r.Ob();r.Nb(0,"div",7),r.Tb("click",function(){r.lc(t);const n=e.$implicit;r.Xb();const i=r.jc(1);return r.Xb().applyTheme(n),i.close()}),r.uc(1),r.Mb()}if(2&t){const t=e.$implicit,n=r.Xb().ngIf;r.Ab("menu-item--active",t.key===n.key),r.wb(1),r.wc(" ",t.label," ")}}function J(t,e){if(1&t&&(r.Nb(0,"ng-run-dropdown-menu",1,2),r.Lb(2,3),r.Jb(3,"ng-run-icon",4),r.Nb(4,"span",5),r.uc(5),r.Mb(),r.Kb(),r.sc(6,Z,2,3,"div",6),r.Mb()),2&t){const t=e.ngIf,n=r.Xb();r.wb(5),r.vc(t.label),r.wb(1),r.dc("ngForOf",n.themes)}}let tt=(()=>{class t{constructor(t){this.playgroundStore=t,this.themes=[{key:"atom",label:"Atom one dark"},{key:"dark",label:"Dark+"},{key:"dracula",label:"Dracula"},{key:"vstudio",label:"Light (Visual Studio)"},{key:"light",label:"Light+"},{key:"material",label:"Material"},{key:"monokai",label:"Monokai"},{key:"monokaiPro",label:"Monokai Pro (Filter Ristretto)"},{key:"night-owl",label:"Night Owl"},{key:"nord",label:"Nord"},{key:"northemDark",label:"Northem Dark"},{key:"oceanicNext",label:"Oceanic Next"},{key:"winter-is-coming",label:"Winter is coming"}],this.activeTheme$=this.playgroundStore.activeTheme$.pipe(Object(Q.a)(t=>this.themes.find(e=>e.key===t)))}applyTheme(t){this.playgroundStore.applyTheme(t.key)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(k.b))},t.\u0275cmp=r.Cb({type:t,selectors:[["ng-run-theme-picker"]],decls:2,vars:3,consts:[["align","right","ng-run-tooltip","Theme Picker",4,"ngIf"],["align","right","ng-run-tooltip","Theme Picker"],["menu",""],["menuTrigger",""],["name","fill",1,"mr-1"],[1,"active-theme"],["class","menu-item",3,"menu-item--active","click",4,"ngFor","ngForOf"],[1,"menu-item",3,"click"]],template:function(t,e){1&t&&(r.sc(0,J,7,2,"ng-run-dropdown-menu",0),r.Yb(1,"async")),2&t&&r.dc("ngIf",r.Zb(1,1,e.activeTheme$))},directives:[z.m,G.a,X.b,Y.a,z.l],pipes:[z.b],styles:['[_ngcontent-%COMP%]:root{--color:#c7c7c7;--color-hover:#fff;--solution-tree-bg:#1d2129;--sidebar-bg:#2e3440;--header-bg:#2e3440;--logo-color:#fff;--box-header-bg:#1d2129;--box-resizer-bg:#2e3440;--box-resizer-border-left-color:hsla(0,0%,100%,0.15);--box-resizer-border-right-color:rgba(0,0,0,0.34);--tab-bg:#444446;--tab-color:#fff;--editor-action-color:#c7c7c7;--editor-action-hovered-color:#fff;--cursor-color:#fff;--tray-bg:#2978bb;--scrollbar:rgba(67,76,94,0.6);--lineNumbers:rgba(216,222,233,0.4);--activeLineNumber:rgba(216,222,233,0.9);--bg:#2e3440;--foreground:#d8dee9;--comment:#67728a;--className:#8fbcbb;--functionName:#88c0d0;--decorator:#d08770;--string:#a3be8c;--keyword:#81a1c1;--tag:#81a1c1;--attr:#8fbcbb;--type:#8fbcbb;--constKeyword:#81a1c1;--consoleKeyword:#8fbcbb;--constant:#b48ead;--this:#81a1c1;--propAccess:#d8dee9;--method:#88c0d0;--param:#d8dee9;--call:#88c0d0;--brackets:#d8dee}[_nghost-%COMP%]     .trigger{padding:0 10px}.menu-item.menu-item[_ngcontent-%COMP%]{padding-left:30px}.menu-item--active[_ngcontent-%COMP%]{background:rgba(0,0,0,.08)}.menu-item--active[_ngcontent-%COMP%]:before{content:"";position:absolute;left:13px;top:50%;width:4px;height:8px;border:solid #000;border-width:0 2px 2px 0;transform:rotate(45deg);margin-top:-5.5px}@media (max-width:960px){.active-theme[_ngcontent-%COMP%]{display:none}ng-run-icon[_ngcontent-%COMP%]{margin-right:0}}'],changeDetection:0}),t})();function et(t,e){if(1&t){const t=r.Ob();r.Nb(0,"div",2),r.Tb("click",function(){return r.lc(t),r.Xb().login()}),r.Jb(1,"ng-run-icon",3),r.uc(2," Sign in\n"),r.Mb()}}function nt(t,e){if(1&t&&(r.Nb(0,"div",10),r.Jb(1,"img",11),r.Mb()),2&t){const t=r.Xb().ngIf;r.wb(1),r.dc("src",t.photoURL,r.oc)("alt",t.displayName)}}function rt(t,e){if(1&t){const t=r.Ob();r.Nb(0,"ng-run-dropdown-menu",5),r.Lb(1,6),r.sc(2,nt,2,2,"div",7),r.Nb(3,"div",8),r.uc(4),r.Mb(),r.Kb(),r.Nb(5,"div",9),r.Tb("click",function(){return r.lc(t),r.Xb(2).logout()}),r.uc(6," Sign out "),r.Mb(),r.Mb()}if(2&t){const t=e.ngIf;r.dc("showArrow",!0),r.wb(2),r.dc("ngIf",t.photoURL),r.wb(1),r.Ab("ml-2",!!t.photoURL),r.wb(1),r.wc(" ",t.displayName||t.email," ")}}function it(t,e){if(1&t&&(r.sc(0,rt,7,5,"ng-run-dropdown-menu",4),r.Yb(1,"async")),2&t){const t=r.Xb();r.dc("ngIf",r.Zb(1,1,t.user$))}}let ot=(()=>{class t{constructor(t){this.auth=t,this.user$=this.auth.user$}login(){this.auth.signInWithGithub().then()}logout(){this.auth.signOut()}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(g.a))},t.\u0275cmp=r.Cb({type:t,selectors:[["ng-run-user-panel"]],decls:4,vars:4,consts:[["class","flex-y-center h-100 login-btn trigger",3,"click",4,"ngIf","ngIfElse"],["userTmpl",""],[1,"flex-y-center","h-100","login-btn","trigger",3,"click"],["name","github","width","35","height","35",1,"mr-1"],["align","right",3,"showArrow",4,"ngIf"],["align","right",3,"showArrow"],["menuTrigger",""],["class","user-photo",4,"ngIf"],[1,"user-name"],[1,"menu-item",3,"click"],[1,"user-photo"],["width","35","height","35",3,"src","alt"]],template:function(t,e){if(1&t&&(r.sc(0,et,3,0,"div",0),r.Yb(1,"async"),r.sc(2,it,2,3,"ng-template",null,1,r.tc)),2&t){const t=r.jc(3);r.dc("ngIf",!r.Zb(1,2,e.user$))("ngIfElse",t)}},directives:[z.m,Y.a,G.a],pipes:[z.b],styles:["[_ngcontent-%COMP%]:root{--color:#c7c7c7;--color-hover:#fff;--solution-tree-bg:#1d2129;--sidebar-bg:#2e3440;--header-bg:#2e3440;--logo-color:#fff;--box-header-bg:#1d2129;--box-resizer-bg:#2e3440;--box-resizer-border-left-color:hsla(0,0%,100%,0.15);--box-resizer-border-right-color:rgba(0,0,0,0.34);--tab-bg:#444446;--tab-color:#fff;--editor-action-color:#c7c7c7;--editor-action-hovered-color:#fff;--cursor-color:#fff;--tray-bg:#2978bb;--scrollbar:rgba(67,76,94,0.6);--lineNumbers:rgba(216,222,233,0.4);--activeLineNumber:rgba(216,222,233,0.9);--bg:#2e3440;--foreground:#d8dee9;--comment:#67728a;--className:#8fbcbb;--functionName:#88c0d0;--decorator:#d08770;--string:#a3be8c;--keyword:#81a1c1;--tag:#81a1c1;--attr:#8fbcbb;--type:#8fbcbb;--constKeyword:#81a1c1;--consoleKeyword:#8fbcbb;--constant:#b48ead;--this:#81a1c1;--propAccess:#d8dee9;--method:#88c0d0;--param:#d8dee9;--call:#88c0d0;--brackets:#d8dee}.login-btn[_ngcontent-%COMP%]{text-transform:uppercase;font-size:12px}@media (max-width:960px){.user-name[_ngcontent-%COMP%]{display:none}.user-photo[_ngcontent-%COMP%]{border-radius:50%;overflow:hidden}[_nghost-%COMP%]{margin-right:10px}[_nghost-%COMP%]     .trigger.trigger{padding-right:0}[_nghost-%COMP%]     .trigger.trigger:before{content:none}}"],changeDetection:0}),t})();var st=n("0IqT");let at=(()=>{class t{constructor(t){this.playgroundStore=t,this.layout$=this.playgroundStore.layout$}toggle(){this.playgroundStore.toggleLayout()}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(k.b))},t.\u0275cmp=r.Cb({type:t,selectors:[["ng-run-layout-picker"]],hostBindings:function(t,e){1&t&&r.Tb("click",function(){return e.toggle()})},decls:8,vars:4,consts:[["ng-run-tooltip","Layout Picker",1,"layout-picker"],[1,"layout-option"],["width","20","height","18","viewBox","0 -1 16 16"],["d","M1 1v12h14V1H1zm1 3h12v8H2V4z"],["d","M1 1v12h14V1H1zm1 3h4.999v8H2V4zm12 8H8.999V4H14v8z"]],template:function(t,e){1&t&&(r.Nb(0,"div",0),r.Yb(1,"async"),r.Nb(2,"div",1),r.Wb(),r.Nb(3,"svg",2),r.Jb(4,"path",3),r.Mb(),r.Mb(),r.Vb(),r.Nb(5,"div",1),r.Wb(),r.Nb(6,"svg",2),r.Jb(7,"path",4),r.Mb(),r.Mb(),r.Mb()),2&t&&r.Ab("layout-picker--right","1"===r.Zb(1,2,e.layout$))},directives:[X.b],pipes:[z.b],styles:['[_ngcontent-%COMP%]:root{--color:#c7c7c7;--color-hover:#fff;--solution-tree-bg:#1d2129;--sidebar-bg:#2e3440;--header-bg:#2e3440;--logo-color:#fff;--box-header-bg:#1d2129;--box-resizer-bg:#2e3440;--box-resizer-border-left-color:hsla(0,0%,100%,0.15);--box-resizer-border-right-color:rgba(0,0,0,0.34);--tab-bg:#444446;--tab-color:#fff;--editor-action-color:#c7c7c7;--editor-action-hovered-color:#fff;--cursor-color:#fff;--tray-bg:#2978bb;--scrollbar:rgba(67,76,94,0.6);--lineNumbers:rgba(216,222,233,0.4);--activeLineNumber:rgba(216,222,233,0.9);--bg:#2e3440;--foreground:#d8dee9;--comment:#67728a;--className:#8fbcbb;--functionName:#88c0d0;--decorator:#d08770;--string:#a3be8c;--keyword:#81a1c1;--tag:#81a1c1;--attr:#8fbcbb;--type:#8fbcbb;--constKeyword:#81a1c1;--consoleKeyword:#8fbcbb;--constant:#b48ead;--this:#81a1c1;--propAccess:#d8dee9;--method:#88c0d0;--param:#d8dee9;--call:#88c0d0;--brackets:#d8dee}.layout-picker[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;padding:0 10px;height:30px;border-right:1px solid #505050;cursor:pointer}.layout-picker[_ngcontent-%COMP%]:hover:before{background:var(--color-hover)}.layout-picker[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:15px;width:22px;height:22px;background:var(--color);border-radius:50%;box-shadow:0 2px 5px rgba(0,0,0,.3);transition:left .3s;transform:translateY(-50%)}.layout-picker--right[_ngcontent-%COMP%]:before{left:48px}.layout-option[_ngcontent-%COMP%]{padding:0 6px;fill:var(--color);cursor:pointer}@media (max-width:960px){[_nghost-%COMP%]{display:none}}'],changeDetection:0}),t})();function ct(t,e){if(1&t){const t=r.Ob();r.Nb(0,"div",10),r.Tb("click",function(){return r.lc(t),r.Xb().toggleMenu()}),r.Mb()}}function ut(t,e){}function lt(t,e){1&t&&r.sc(0,ut,0,0,"ng-template",17)}function ht(t,e){if(1&t&&(r.Nb(0,"i"),r.uc(1),r.Mb()),2&t){const t=r.Xb(2).ngIf;r.wb(1),r.wc(" ",t.room.users.length," ")}}function dt(t,e){1&t&&(r.Nb(0,"span",28),r.uc(1,"host"),r.Mb())}function ft(t,e){1&t&&(r.Nb(0,"span"),r.uc(1,"(you)"),r.Mb())}function pt(t,e){if(1&t){const t=r.Ob();r.Nb(0,"li",23),r.Tb("click",function(){r.lc(t);const n=e.$implicit;return r.Xb(4).gotoUser(n)}),r.Nb(1,"div",24),r.Jb(2,"img",25),r.sc(3,dt,2,0,"span",26),r.Mb(),r.Nb(4,"div",27),r.uc(5),r.sc(6,ft,2,0,"span",12),r.Mb(),r.Mb()}if(2&t){const t=e.$implicit,n=r.Xb(3).ngIf;r.wb(2),r.dc("src",t.photoUrl,r.oc)("alt",t.displayName),r.wb(1),r.dc("ngIf",n.room.owner.conId===t.conId),r.wb(2),r.wc(" ",t.displayName||t.email," "),r.wb(1),r.dc("ngIf",n.room.currentUser.conId===t.conId)}}function gt(t,e){if(1&t&&(r.Nb(0,"div",21),r.Nb(1,"ul"),r.sc(2,pt,7,5,"li",22),r.Mb(),r.Mb()),2&t){const t=r.Xb(2).ngIf;r.wb(2),r.dc("ngForOf",t.room.users)}}function mt(t,e){if(1&t){const t=r.Ob();r.Nb(0,"div",18),r.Nb(1,"ng-run-icon",19),r.Tb("click",function(){r.lc(t);const e=r.Xb().ngIf,n=r.Xb();return e.canEdit&&n.toggleLive()}),r.Mb(),r.sc(2,ht,2,1,"i",12),r.sc(3,gt,3,1,"div",20),r.Mb()}if(2&t){const t=r.Xb().ngIf;r.wb(1),r.Ab("live-btn--enabled",t.room),r.dc("title",t.canEdit?(t.room?"Stop":"Start")+" live collaboration":""),r.wb(1),r.dc("ngIf",t.room),r.wb(1),r.dc("ngIf",t.room)}}function yt(t,e){1&t&&r.Jb(0,"div",29)}function bt(t,e){if(1&t){const t=r.Ob();r.Nb(0,"button",33),r.Tb("click",function(){return r.lc(t),r.Xb(3).saveOrForkProject()}),r.uc(1," Save "),r.Mb()}if(2&t){const t=r.Xb(2).ngIf;r.dc("title",t.loading||!t.isProjectDirty?"There is no changes":"Save your changes")("disabled",t.loading||!t.isProjectDirty)}}function vt(t,e){if(1&t){const t=r.Ob();r.Nb(0,"button",34),r.Tb("click",function(){return r.lc(t),r.Xb(3).saveOrForkProject(!0)}),r.uc(1," Fork "),r.Mb()}if(2&t){const t=r.Xb(2).ngIf;r.dc("disabled",t.loading)}}function wt(t,e){if(1&t){const t=r.Ob();r.Nb(0,"div",36),r.Tb("click",function(){return r.lc(t),r.Xb(4).toggleTest()}),r.Mb()}if(2&t){const t=e.ngIf;r.Ab("test-mode-switcher--enabled",t.testEnabled),r.xb("title",t.testEnabled?"Disable tests":"Enable tests")}}const _t=function(t){return{testEnabled:t}};function St(t,e){if(1&t&&(r.Lb(0),r.sc(1,wt,1,3,"div",35),r.Yb(2,"async"),r.Kb()),2&t){const t=r.Xb(3);r.wb(1),r.dc("ngIf",r.gc(3,_t,r.Zb(2,1,t.testEnabled$)))}}function Ct(t,e){if(1&t&&(r.Lb(0),r.sc(1,bt,2,2,"button",30),r.sc(2,vt,2,1,"button",31),r.Yb(3,"async"),r.sc(4,St,3,5,"ng-container",12),r.Yb(5,"async"),r.Jb(6,"ng-run-layout-picker",32),r.Kb()),2&t){const t=r.Xb().ngIf,e=r.Xb();r.wb(1),r.dc("ngIf",t.canEdit),r.wb(1),r.dc("ngIf",r.Zb(3,3,e.authenticated$)),r.wb(2),r.dc("ngIf",r.Zb(5,5,e.isTestsSupported$))}}function It(t,e){if(1&t&&(r.Nb(0,"div",11),r.sc(1,lt,1,0,void 0,12),r.Yb(2,"async"),r.sc(3,mt,4,5,"div",13),r.sc(4,yt,1,0,"div",14),r.sc(5,Ct,7,7,"ng-container",12),r.Jb(6,"ng-run-theme-picker",15),r.Jb(7,"ng-run-user-panel",16),r.Mb()),2&t){const t=e.ngIf,n=r.Xb();r.wb(1),r.dc("ngIf",r.Zb(2,4,n.authenticated$)),r.wb(2),r.dc("ngIf",(t.canEdit||t.room)&&!t.isLessonRecording&&!t.isLesson),r.wb(1),r.dc("ngIf",t.loading),r.wb(1),r.dc("ngIf",!t.isLesson&&!t.isLessonRecording)}}const Et=function(t,e,n,r,i,o,s){return{isLesson:t,isLessonRecording:e,loading:n,isProjectDirty:r,canEdit:i,room:o,recordState:s}};let Tt=(()=>{class t{constructor(t,e,n,r,i,o,s,a){this.projectStore=t,this.editorWorker=e,this.authService=n,this.playgroundStore=r,this.notificationService=i,this.location=o,this.elRef=s,this.liveService=a,this.menuOpened$=new v.a(!1),this.loading$=new v.a(!1),this.canEdit$=this.projectStore.canEdit$,this.isProjectDirty$=this.projectStore.isProjectDirty$,this.isLesson$=this.projectStore.isLesson$,this.isLessonRecording$=this.projectStore.isLessonRecording$,this.authenticated$=this.authService.authenticated$,this.isTestsSupported$=this.projectStore.isTestsSupported$,this.testEnabled$=this.playgroundStore.testEnabled$,this.recordState$=new v.a("init")}ngOnInit(){this.projectStore.aotEnabled$.subscribe(t=>{this.elRef.nativeElement.classList.toggle("header--aot",t)})}onBeforeUnload(t){const{dirty:e}=this.projectStore.state;if(e){const e="You have unsaved changes on this page. Do you want to leave this page and discard your changes or stay on this page?";return t.returnValue=e,e}}toggleMenu(t){const e=void 0!==t?t:!this.menuOpened$.value;this.menuOpened$.value!==e&&(this.menuOpened$.next(e),document.body.classList.toggle("menu--opened",this.menuOpened$.value))}saveOrForkProject(t=!1){this.loading$.next(!0),this.editorWorker.doSave(),this.projectStore.save(t).then(e=>{this.notificationService.notify({type:"success",message:"Project has been successfully "+(t?"forked":"updated")}),t&&this.location.go("/edit/"+e)}).catch(t=>{this.notificationService.notify({type:"error",message:t.message})}).finally(()=>this.loading$.next(!1))}toggleTest(){this.playgroundStore.toggleTestMode(),setTimeout(()=>{location.reload()},400)}toggleLive(){this.playgroundStore.setReloadMode("edit"),this.liveService.toggleLive()}gotoUser(t){this.liveService.gotoUser(t)}toggleActive(){this.recordState$.next("active"===this.recordState$.value?"init":"active")}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(k.c),r.Ib(U),r.Ib(g.a),r.Ib(k.b),r.Ib(b.b),r.Ib(z.i),r.Ib(r.l),r.Ib($))},t.\u0275cmp=r.Cb({type:t,selectors:[["ng-run-header"]],hostBindings:function(t,e){1&t&&r.Tb("beforeunload",function(t){return e.onBeforeUnload(t)},!1,r.kc)},decls:20,vars:26,consts:[[1,"menu",3,"click"],[1,"menu-icon"],["class","fake-bg",3,"click",4,"ngIf"],["href",".",1,"flex-y-center","logo"],["viewBox","0 0 500 500","width","40","height","40","xmlns","http://www.w3.org/2000/svg"],["d","M250.696,82 L91,138.2 L116.235,347.426 L250.864,421.421 L386.186,346.424 L411.413,137.205 L250.696,82","fill","#FFFFFF"],["d","M395.484,149.298 L250.323,99.795 L250.323,403.742 L371.974,336.416 L395.484,149.298","fill","#a80e00"],["d","M108.92,150.189 L130.544,337.309 L250.32,403.742 L250.32,99.789 L108.92,150.189","fill","#e01600"],["d","M210,180 L210,300 L310,240 z","fill","#FFFFFF"],["class","ml-auto flex-y-center h-100",4,"ngIf"],[1,"fake-bg",3,"click"],[1,"ml-auto","flex-y-center","h-100"],[4,"ngIf"],["class","mr-1 cursor-pointer live-icon",4,"ngIf"],["class","loader",4,"ngIf"],[1,"h-100"],[1,"ml-1","h-100"],["ng-run-container","header-menu"],[1,"mr-1","cursor-pointer","live-icon"],["name","live","width","24","height","24",1,"cursor-pointer","live-btn",3,"title","click"],["class","live-menu",4,"ngIf"],[1,"live-menu"],["class","client",3,"click",4,"ngFor","ngForOf"],[1,"client",3,"click"],[1,"mr-1","client-photo"],["width","35","height","35",3,"src","alt"],["class","host-marker",4,"ngIf"],[1,"client-info"],[1,"host-marker"],[1,"loader"],["class","top-button top-button--save ml-2",3,"title","disabled","click",4,"ngIf"],["class","top-button ml-2 trigger","ng-run-tooltip","Save your changes as a fork of this project",3,"disabled","click",4,"ngIf"],[1,"mr-1"],[1,"top-button","top-button--save","ml-2",3,"title","disabled","click"],["ng-run-tooltip","Save your changes as a fork of this project",1,"top-button","ml-2","trigger",3,"disabled","click"],["class","test-mode-switcher",3,"test-mode-switcher--enabled","click",4,"ngIf"],[1,"test-mode-switcher",3,"click"]],template:function(t,e){1&t&&(r.Nb(0,"div",0),r.Tb("click",function(){return e.toggleMenu()}),r.Jb(1,"i",1),r.Mb(),r.sc(2,ct,1,0,"div",2),r.Yb(3,"async"),r.Nb(4,"a",3),r.Wb(),r.Nb(5,"svg",4),r.Jb(6,"path",5),r.Jb(7,"path",6),r.Jb(8,"path",7),r.Jb(9,"path",8),r.Mb(),r.Vb(),r.Nb(10,"h1"),r.uc(11,"Angular demo"),r.Mb(),r.Mb(),r.sc(12,It,8,6,"div",9),r.Yb(13,"async"),r.Yb(14,"async"),r.Yb(15,"async"),r.Yb(16,"async"),r.Yb(17,"async"),r.Yb(18,"async"),r.Yb(19,"async")),2&t&&(r.wb(2),r.dc("ngIf",r.Zb(3,2,e.menuOpened$)),r.wb(10),r.dc("ngIf",r.hc(18,Et,r.Zb(13,4,e.isLesson$),r.Zb(14,6,e.isLessonRecording$),r.Zb(15,8,e.loading$),r.Zb(16,10,e.isProjectDirty$),r.Zb(17,12,e.canEdit$),r.Zb(18,14,e.liveService.room$),r.Zb(19,16,e.recordState$))))},directives:[z.m,tt,ot,st.a,Y.a,z.l,at,X.b],pipes:[z.b],styles:['[_ngcontent-%COMP%]:root{--color:#c7c7c7;--color-hover:#fff;--solution-tree-bg:#1d2129;--sidebar-bg:#2e3440;--header-bg:#2e3440;--logo-color:#fff;--box-header-bg:#1d2129;--box-resizer-bg:#2e3440;--box-resizer-border-left-color:hsla(0,0%,100%,0.15);--box-resizer-border-right-color:rgba(0,0,0,0.34);--tab-bg:#444446;--tab-color:#fff;--editor-action-color:#c7c7c7;--editor-action-hovered-color:#fff;--cursor-color:#fff;--tray-bg:#2978bb;--scrollbar:rgba(67,76,94,0.6);--lineNumbers:rgba(216,222,233,0.4);--activeLineNumber:rgba(216,222,233,0.9);--bg:#2e3440;--foreground:#d8dee9;--comment:#67728a;--className:#8fbcbb;--functionName:#88c0d0;--decorator:#d08770;--string:#a3be8c;--keyword:#81a1c1;--tag:#81a1c1;--attr:#8fbcbb;--type:#8fbcbb;--constKeyword:#81a1c1;--consoleKeyword:#8fbcbb;--constant:#b48ead;--this:#81a1c1;--propAccess:#d8dee9;--method:#88c0d0;--param:#d8dee9;--call:#88c0d0;--brackets:#d8dee}[_nghost-%COMP%]{position:relative;z-index:2;display:flex;align-items:center;height:50px;-webkit-user-select:none;user-select:none;background-color:var(--header-bg);box-shadow:0 1px 8px rgba(0,0,0,.3)}.header--aot[_nghost-%COMP%]:before{content:"";position:absolute;top:-120px;left:-149px;width:411px;height:181px;background:url(/assets/images/ivy-top.png) 0 0/contain no-repeat}.logo[_ngcontent-%COMP%]{position:relative}.logo[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:42px}.menu[_ngcontent-%COMP%]{position:relative;display:none;min-width:46px;width:46px;height:48px;border-radius:50%;cursor:pointer}.menu-icon[_ngcontent-%COMP%], .menu-icon[_ngcontent-%COMP%]:after, .menu-icon[_ngcontent-%COMP%]:before{position:absolute;border-top:2px solid #fff}.menu-icon[_ngcontent-%COMP%]{top:19px;right:14px;left:14px}.menu-icon[_ngcontent-%COMP%]:before{content:"";top:3px;right:0;left:0}.menu-icon[_ngcontent-%COMP%]:after{content:"";top:8px;right:0;left:0}[_nghost-%COMP%]     .top-button{padding:0 20px 0 35px;outline:none;border:1px solid #505050;border-top:none;border-bottom:none;font-size:12px;line-height:30px;text-transform:uppercase;background-color:initial;background-image:url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 438.529 438.529" fill="%23c7c7c7"><path d="M349.459,52.534c-10.663-10.657-23.605-15.987-38.834-15.987c-15.222,0-28.165,5.327-38.825,15.987 c-10.656,10.657-15.984,23.598-15.984,38.828c0,9.897,2.467,19.081,7.416,27.55c4.948,8.47,11.604,15.086,19.985,19.842   c0,9.897-0.805,18.608-2.42,26.125c-1.622,7.517-4.284,14.128-7.994,19.842c-3.72,5.711-7.566,10.561-11.566,14.56   c-4.001,3.999-9.616,7.755-16.848,11.278c-7.231,3.521-13.945,6.468-20.129,8.851c-6.184,2.375-14.514,5.182-24.982,8.419   c-19.036,5.903-33.689,11.323-43.968,16.275V102.206c8.375-4.755,15.037-11.37,19.985-19.84c4.947-8.47,7.421-17.655,7.421-27.552   c0-15.225-5.327-28.169-15.987-38.826C156.073,5.332,143.132,0,127.903,0c-15.23,0-28.171,5.328-38.831,15.988   C78.416,26.645,73.085,39.589,73.085,54.814c0,9.897,2.474,19.082,7.421,27.552c4.948,8.47,11.609,15.085,19.985,19.84v234.117   c-8.376,4.753-15.037,11.375-19.985,19.842c-4.947,8.473-7.421,17.658-7.421,27.552c0,15.225,5.327,28.168,15.987,38.824   s23.604,15.988,38.831,15.988c15.226,0,28.17-5.332,38.826-15.988c10.657-10.656,15.987-23.6,15.987-38.824   c0-9.894-2.474-19.079-7.421-27.552c-4.949-8.467-11.61-15.089-19.985-19.842V328.9c0-13.131,3.949-22.645,11.847-28.544   c7.898-5.907,24.029-12.662,48.395-20.273c25.699-8.186,45.021-15.899,57.963-23.134c42.633-24.167,64.142-63.568,64.521-118.196   c8.381-4.755,15.037-11.372,19.985-19.842c4.945-8.47,7.423-17.653,7.423-27.55C365.447,76.135,360.116,63.194,349.459,52.534z    M147.321,403.138c-5.332,5.331-11.803,7.994-19.414,7.994c-7.616,0-14.087-2.663-19.417-7.994   c-5.327-5.325-7.994-11.8-7.994-19.411c0-7.617,2.664-14.085,7.994-19.417c5.33-5.328,11.801-7.994,19.417-7.994   c7.611,0,14.083,2.669,19.414,7.994c5.33,5.332,7.993,11.8,7.993,19.417C155.313,391.338,152.651,397.812,147.321,403.138z M147.321,74.232c-5.332,5.33-11.803,7.994-19.414,7.994c-7.616,0-14.087-2.664-19.417-7.994 c-5.327-5.33-7.994-11.798-7.994-19.414c0-7.614,2.664-14.087,7.994-19.412c5.33-5.329,11.801-7.994,19.417-7.994 c7.611,0,14.083,2.666,19.414,7.994c5.33,5.325,7.993,11.798,7.993,19.412C155.313,62.434,152.651,68.905,147.321,74.232z M330.042,110.779c-5.328,5.327-11.796,7.993-19.41,7.993c-7.618,0-14.09-2.666-19.414-7.993 c-5.328-5.327-7.994-11.799-7.994-19.414c0-7.614,2.666-14.083,7.994-19.414s11.796-7.993,19.414-7.993 c7.614,0,14.082,2.663,19.41,7.993c5.328,5.326,7.994,11.799,7.994,19.414C338.036,98.979,335.374,105.452,330.042,110.779z"></path></svg>\');background-position-x:14px;background-position-y:center;background-size:20px;background-repeat:no-repeat;transition:background .1s ease}[_nghost-%COMP%]     .top-button:hover{background-image:url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 438.529 438.529" fill="%23ffffff"><path d="M349.459,52.534c-10.663-10.657-23.605-15.987-38.834-15.987c-15.222,0-28.165,5.327-38.825,15.987 c-10.656,10.657-15.984,23.598-15.984,38.828c0,9.897,2.467,19.081,7.416,27.55c4.948,8.47,11.604,15.086,19.985,19.842   c0,9.897-0.805,18.608-2.42,26.125c-1.622,7.517-4.284,14.128-7.994,19.842c-3.72,5.711-7.566,10.561-11.566,14.56   c-4.001,3.999-9.616,7.755-16.848,11.278c-7.231,3.521-13.945,6.468-20.129,8.851c-6.184,2.375-14.514,5.182-24.982,8.419   c-19.036,5.903-33.689,11.323-43.968,16.275V102.206c8.375-4.755,15.037-11.37,19.985-19.84c4.947-8.47,7.421-17.655,7.421-27.552   c0-15.225-5.327-28.169-15.987-38.826C156.073,5.332,143.132,0,127.903,0c-15.23,0-28.171,5.328-38.831,15.988   C78.416,26.645,73.085,39.589,73.085,54.814c0,9.897,2.474,19.082,7.421,27.552c4.948,8.47,11.609,15.085,19.985,19.84v234.117   c-8.376,4.753-15.037,11.375-19.985,19.842c-4.947,8.473-7.421,17.658-7.421,27.552c0,15.225,5.327,28.168,15.987,38.824   s23.604,15.988,38.831,15.988c15.226,0,28.17-5.332,38.826-15.988c10.657-10.656,15.987-23.6,15.987-38.824   c0-9.894-2.474-19.079-7.421-27.552c-4.949-8.467-11.61-15.089-19.985-19.842V328.9c0-13.131,3.949-22.645,11.847-28.544   c7.898-5.907,24.029-12.662,48.395-20.273c25.699-8.186,45.021-15.899,57.963-23.134c42.633-24.167,64.142-63.568,64.521-118.196   c8.381-4.755,15.037-11.372,19.985-19.842c4.945-8.47,7.423-17.653,7.423-27.55C365.447,76.135,360.116,63.194,349.459,52.534z    M147.321,403.138c-5.332,5.331-11.803,7.994-19.414,7.994c-7.616,0-14.087-2.663-19.417-7.994   c-5.327-5.325-7.994-11.8-7.994-19.411c0-7.617,2.664-14.085,7.994-19.417c5.33-5.328,11.801-7.994,19.417-7.994   c7.611,0,14.083,2.669,19.414,7.994c5.33,5.332,7.993,11.8,7.993,19.417C155.313,391.338,152.651,397.812,147.321,403.138z M147.321,74.232c-5.332,5.33-11.803,7.994-19.414,7.994c-7.616,0-14.087-2.664-19.417-7.994 c-5.327-5.33-7.994-11.798-7.994-19.414c0-7.614,2.664-14.087,7.994-19.412c5.33-5.329,11.801-7.994,19.417-7.994 c7.611,0,14.083,2.666,19.414,7.994c5.33,5.325,7.993,11.798,7.993,19.412C155.313,62.434,152.651,68.905,147.321,74.232z M330.042,110.779c-5.328,5.327-11.796,7.993-19.41,7.993c-7.618,0-14.09-2.666-19.414-7.993 c-5.328-5.327-7.994-11.799-7.994-19.414c0-7.614,2.666-14.083,7.994-19.414s11.796-7.993,19.414-7.993 c7.614,0,14.082,2.663,19.41,7.993c5.328,5.326,7.994,11.799,7.994,19.414C338.036,98.979,335.374,105.452,330.042,110.779z"></path></svg>\')}[_nghost-%COMP%]     .top-button--save{margin-right:5px;padding-left:25px;border-right:none;color:#fff;background:#539a42;border-radius:3px}[_nghost-%COMP%]     .top-button--save:hover{background:#53a53f}[_nghost-%COMP%]     .top-button--save:disabled{background:#565658;cursor:default}[_nghost-%COMP%]     .top-button--save:disabled, [_nghost-%COMP%]     .top-button--save:disabled:hover{color:var(--color)}.loader[_ngcontent-%COMP%]{--width:22px;--height:22px}.test-mode-switcher[_ngcontent-%COMP%]{display:flex;position:relative;align-items:center;cursor:pointer;width:65px;height:30px;padding:0 10px;border-left:1px solid #505050}.test-mode-switcher[_ngcontent-%COMP%]:before{content:"";position:absolute;height:22px;left:13px;width:22px;transition:left .3s;border-radius:50%;top:50%;transform:translateY(-50%);box-shadow:0 2px 5px rgba(0,0,0,.3);background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMAUExURQAAAM2kwapile7g6osobryDq93A1JpFgfr1+KBOiMSRtbBunebS4NWyy5U8e/Tr8pdAfbZ4pKVYjuPL3J1KhceYudm4z+rZ5pg/fr6Ir9Gpxf7+/qxll/fw9bR0oZAydKJTi/Dk7eXQ36heksugvsmbu9/E17l+qNi2zejW48aVt9Otx+zd6MCLsdCnxJI2d9q70ZhBfqZbkK5pmvLo77Jwno4tcrh7pvjy9o8wc+DG2AAAAACZZgCZmQCZzACZ/wDMAADMMwDMZgDMmQDMzADM/wD/AAD/MwD/ZgD/mQD/zAD//zMAADMAMzMAZjMAmTMAzDMA/zMzADMzMzMzZjMzmTMzzDMz/zNmADNmMzNmZjNmmTNmzDNm/zOZADOZMzOZZjOZmTOZzDOZ/zPMADPMMzPMZjPMmTPMzDPM/zP/ADP/MzP/ZjP/mTP/zDP//2YAAGYAM2YAZmYAmWYAzGYA/2YzAGYzM2YzZmYzmWYzzGYz/2ZmAGZmM2ZmZmZmmWZmzGZm/2aZAGaZM2aZZmaZmWaZzGaZ/2bMAGbMM2bMZmbMmWbMzGbM/2b/AGb/M2b/Zmb/mWb/zGb//5kAAJkAM5kAZpkAmZkAzJkA/5kzAJkzM5kzZpkzmZkzzJkz/5lmAJlmM5lmZplmmZlmzJlm/5mZAJmZM5mZZpmZmZmZzJmZ/5nMAJnMM5nMZpnMmZnMzJnM/5n/AJn/M5n/Zpn/mZn/zJn//8wAAMwAM8wAZswAmcwAzMwA/8wzAMwzM8wzZswzmcwzzMwz/8xmAMxmM8xmZsxmmcxmzMxm/8yZAMyZM8yZZsyZmcyZzMyZ/8zMAMzMM8zMZszMmczMzMzM/8z/AMz/M8z/Zsz/mcz/zMz///8AAP8AM/8AZv8Amf8AzP8A//8zAP8zM/8zZv8zmf8zzP8z//9mAP9mM/9mZv9mmf9mzP9m//+ZAP+ZM/+ZZv+Zmf+ZzP+Z///MAP/MM//MZv/Mmf/MzP/M////AP//M///Zv//mf//zP////ODlywAAAA8dFJOUwD/////////////////////////////////////////////////////////////////////////////ANr9ko0AAAAJcEhZcwAADsMAAA7DAcdvqGQAAAW1SURBVFhHdVfpgqI4EAZcxPaIB8z2tlGEcRlb0ZHoTrfT7/9gW1dCUOf7A1SSL3WlKgT6D7i99sPT/LpajT6H9VdPpI94TnBc7haZUsoQ4JlFp2Yqg108IRg0c1hsEh9AoopTKjN8PBAMJtH9aoFRyfyR4p6gf1VKFjyBSuJXmWjRJShj2MYB9SZ4CqmXUOYKOgTpxS2Hxdklj0/D4Wk3KpKWxKi8lOkEn2AJKjKUWsST/VrkepqG+YszTV18T3gEld1FJfnkIWbHEJwr41kjQkBLMJT1SuVfIupiXW/tlORdZB7BN0tfTETyiOlBjDRJX0SO4KddP/eytqkngOVePgFf4mb1MhaJEPwAUoD558DfjOsZg7jxZeUvYYj+YwETlExsTDfII5KqSj4Jt50w7PibCWIR8voyvNFT826WoHwf4GPwKZPZV0TQiHNl5vxDXroE8W9+WV9ZXFBCIcE6YsknCgCNMZwqHYKJyiSBeguWn/ADCZb8vXApWm22lEg+wfHlXOMT0aA4MRmGBwjWW57Xptdg9BHj0yOwIsYbD7zBKxBM+GvOY4Tji8LtPIJvohSjLNBrpoCcAYKcpiWdWgEGg34tQV+JWwQVj0DUAr3P6J0VcLucfkfTluBYnP+VAZ7CKqgrEoQ0y5AH0supzxzTyIxbgvp3TlJdTvIrJcmJhpIxEJAFsy0d/uqszIXr7x5UbjPx7yOIjvVnAZWFbElxBG0IpqwMxVRjihhlFjHXcPbOmcO4xJoCcxUdjVs0w2VzHYxxjlgwJncQRxFDTeljVTxfSv0a5q7Sq4gymmwwl0HwTi8Zqii+JcDS61Q3P+s63Ou02yfIBg5+dgwO+MKsA05yi7M9xndytuE7a5sGn+QCCuIruojEBOUiJ5lCANUoIhLIJrjSk33omwrquR7ChwVg1KyI3+nM3OgEqp/BFgdYK4RzdqJGIgJhhgIvPAiyS1XBgggoUoIehVttvOqUb6CkS4JYUJapwxMCwH+Tz9XBm72Po1NfypSFJWAThiJlrF1PcoAoUfhbWBNGZC+ebMEtPRQYlH7sCkQ4hCJebne+CestpeIyoHrKkUHxj+FWfajRAJLqnFS0aS+H1y/I/o+zDQFKbRgp+2ZbMrB/uqiPWXRIb7qPjUL9ggRtCpihtqXeh7+SzbnYTYiDTxMkUoMECZW3QfSXWVUpblty3TznupfRG7eB12Webbhmc25kZSD1hIp8jbYS5jSMFeOVexZYyyO9ZU5ngU2PdHC7kC1exQRwkQHxUK9X/G4yS06Y2mWBplZluEsIvlPmwfgK4plaFfDDgXsRlN5A17QDVWHB1G2617dBqw4fGAZ3SKgCgY0H1EcLrvogW+rxAmyTZpiY9uYgnoPoQ1nnzso1CcGlAoZhbYrE0ruhG1LZQUhnAUYg+MHmrCRVxwWmGAiglAEBnsk+CUA0klQck5PUAj6BwBZfOX2nDX6B5/CmxAS21iklNxuuMHQEkYA9auN0q+gixAdUCAa0hyrETHbrjCKHBJZwJQriRUhOhxBAa5rBDVOuTylHmVUmAgm1uyCUO+svS4CetTWjxz5VKzo/ROBsdJGuJGKOQFf2YlfydcRIN2YCW7jV213VoDB2cOT1rogxAdgo4u5NGoyzlUJg7+Mql62EgM8/Dmw799zBvvu3FPLhhmNoN7IEemKEIRl2lfAwzm1/XLie4Qh0bTgDIdyh3EK72L/J9jCjvf22BHoiN2noIMWQ6pKHaRPb5aC/99/jEeiU6xgAfnxWw/fxlFhuZVrHF/cvdPfL4hPo3rxtrtDfsiIa5fkoKvzuDgnVUa5DAKVSwsmQvy63GCXR3d/IHYE+gqnegi7AOfYe7nBPAAURKHw1LECdRfUY4UcCqP7VyvvPQ6At2ZM/McAzAkjAtMoXGbAwkiyKa1fOunhOgLgdv97Db8NDtWzSP+am1v8D/C1knnnu4z4AAAAASUVORK5CYII=");background-size:100%;z-index:1;opacity:.75}.test-mode-switcher[_ngcontent-%COMP%]:after{content:"";position:absolute;left:10px;right:10px;height:13px;background:#fff;border-radius:9px;opacity:.65}.test-mode-switcher--enabled[_ngcontent-%COMP%]:before{left:35px;opacity:1}.test-mode-switcher--enabled[_ngcontent-%COMP%]:after{opacity:1}.live-icon[_ngcontent-%COMP%]{position:relative;margin-top:4px;padding-bottom:4px}.live-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;right:-6px;bottom:-2px;color:#fff;font-family:Arial;font-size:9px;font-style:normal}.live-menu[_ngcontent-%COMP%]{visibility:hidden;position:absolute;top:100%;right:0;z-index:2;overflow:hidden;margin-top:8px;height:0;color:#333;background:#fff;border-radius:4px;box-shadow:0 2px 10px rgba(0,0,0,.2);opacity:0;transition:opacity .1s linear,top .1s linear,visibility .1s linear,margin .1s linear;pointer-events:none}.live-icon[_ngcontent-%COMP%]:hover   .live-menu[_ngcontent-%COMP%]{visibility:visible;margin-top:0;height:auto;opacity:1;pointer-events:auto}.live-btn[_ngcontent-%COMP%]:hover     .icon{fill:#fff}.live-btn--enabled[_ngcontent-%COMP%]     .icon, .live-btn--enabled[_ngcontent-%COMP%]:hover     .icon{fill:#80e480}.client[_ngcontent-%COMP%]{display:flex;align-items:center;margin:10px 0;padding:0 15px;line-height:35px;white-space:nowrap}.client[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:unset}.client[_ngcontent-%COMP%]:hover{background:#f3f3f3}.client-photo[_ngcontent-%COMP%]{position:relative}.client-photo[_ngcontent-%COMP%]   .host-marker[_ngcontent-%COMP%]{position:absolute;bottom:100%;left:100%;margin-bottom:-6px;margin-left:-10px;padding:0 5px;color:#fff;font-size:10px;line-height:13px;background:#2978bb;border-radius:5px}.client-info[_ngcontent-%COMP%]{flex-shrink:0}@media (max-width:500px){h1[_ngcontent-%COMP%]{display:none}}@media (max-width:960px){.menu[_ngcontent-%COMP%]{display:block}}'],changeDetection:0}),t})();var kt=n("dJ3e");function Ot(t,e){if(1&t&&(r.Nb(0,"option",4),r.uc(1),r.Mb()),2&t){const t=e.$implicit,n=r.Xb();r.dc("value",t)("selected",n.version===t),r.wb(1),r.vc(t)}}let xt=(()=>{class t{constructor(t,e,n,i){this.projectService=t,this.projectStore=e,this.monacoStore=n,this.editorWorker=i,this.versionChanged=new r.n}ngOnInit(){document.querySelector("ng-run-sidebar").addEventListener("mouseenter",()=>{this.projectService.getVersions(this.depName).then(t=>{this.versions=t,Object(r.gb)(this)})},{once:!0})}changeVersion(t){const e={name:this.depName,version:t,prevVersion:this.version};if(this.depName.startsWith("@angular")&&parseInt(t,10)>7){const e=[],n=this.projectStore.state.dependencies;if(Object.keys(n).forEach(r=>{if(!r.startsWith("@angular"))return;const i={name:r,version:t,prevVersion:n[r].version};e.push(i),this.monacoStore.clearExportsFor(r),this.monacoStore.disposeExtraLibsForPackage(r),this.projectStore.updateDep(i)}),!e.length)return;return this.editorWorker.installState$.next(e.map(t=>`${t.name}@${t.version}`)),void this.editorWorker.post({type:"UPDATE_DEPS",payload:{aot:!!this.projectStore.state.aot&&this.projectStore.getAotVersion(),deps:e}})}this.editorWorker.installState$.next([`${this.depName}@${t}`]),this.monacoStore.clearExportsFor(this.depName),this.monacoStore.disposeExtraLibsForPackage(this.depName),this.projectStore.updateDep(e),this.editorWorker.post({type:"UPDATE_DEPS",payload:{aot:!!this.projectStore.state.aot&&this.projectStore.getAotVersion(),deps:[e]}})}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(kt.b),r.Ib(k.c),r.Ib(L),r.Ib(U))},t.\u0275cmp=r.Cb({type:t,selectors:[["ng-run-dependency-resolver"]],inputs:{depName:"depName",version:"version"},outputs:{versionChanged:"versionChanged"},decls:5,vars:2,consts:[[1,"d-flex"],[1,"dependency-versions",3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],[1,"dependency-version"],[3,"value","selected"]],template:function(t,e){1&t&&(r.Nb(0,"label",0),r.Nb(1,"select",1),r.Tb("change",function(t){return e.changeVersion(t.target.value)}),r.sc(2,Ot,2,3,"option",2),r.Mb(),r.Nb(3,"span",3),r.uc(4),r.Mb(),r.Mb()),2&t&&(r.wb(2),r.dc("ngForOf",e.versions),r.wb(2),r.vc(e.version))},directives:[z.l],styles:['[_ngcontent-%COMP%]:root{--color:#c7c7c7;--color-hover:#fff;--solution-tree-bg:#1d2129;--sidebar-bg:#2e3440;--header-bg:#2e3440;--logo-color:#fff;--box-header-bg:#1d2129;--box-resizer-bg:#2e3440;--box-resizer-border-left-color:hsla(0,0%,100%,0.15);--box-resizer-border-right-color:rgba(0,0,0,0.34);--tab-bg:#444446;--tab-color:#fff;--editor-action-color:#c7c7c7;--editor-action-hovered-color:#fff;--cursor-color:#fff;--tray-bg:#2978bb;--scrollbar:rgba(67,76,94,0.6);--lineNumbers:rgba(216,222,233,0.4);--activeLineNumber:rgba(216,222,233,0.9);--bg:#2e3440;--foreground:#d8dee9;--comment:#67728a;--className:#8fbcbb;--functionName:#88c0d0;--decorator:#d08770;--string:#a3be8c;--keyword:#81a1c1;--tag:#81a1c1;--attr:#8fbcbb;--type:#8fbcbb;--constKeyword:#81a1c1;--consoleKeyword:#8fbcbb;--constant:#b48ead;--this:#81a1c1;--propAccess:#d8dee9;--method:#88c0d0;--param:#d8dee9;--call:#88c0d0;--brackets:#d8dee}  .dependency-item:hover .dependency-versions{opacity:1}.dependency-versions[_ngcontent-%COMP%]{display:block;opacity:0;width:50px;font-size:12px;font-family:sans-serif;font-weight:700;color:#444;line-height:1;padding:0 16px 0 4px;max-width:100%;box-sizing:border-box;margin:0;box-shadow:0 1px 0 1px rgba(0,0,0,.04);border-radius:.5em;-moz-appearance:none;-webkit-appearance:none;appearance:none;background-color:#fff;background-image:url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23007CB2%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E"),linear-gradient(180deg,#fff 0,#e5e5e5);background-repeat:no-repeat,repeat;background-position:right .7em top 50%,0 0;background-size:.65em auto,100%;border:0}.dependency-versions[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]:checked{color:#fff;background:#22596f}.dependency-versions[_ngcontent-%COMP%]:focus{outline:none}.dependency-versions[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{font-weight:400}.dependency-version[_ngcontent-%COMP%]{margin-left:5px;padding:0 5px;border-radius:5px;background:var(--sidebar-bg)}'],changeDetection:0}),t})();var At=n("hVnv");function Nt(t,e){if(1&t){const t=r.Ob();r.Nb(0,"ng-run-checkbox",3),r.Tb("change",function(){return r.lc(t),r.Xb().toggleAot()}),r.Yb(1,"async"),r.Mb()}if(2&t){const t=r.Xb();r.dc("checked",r.Zb(1,1,t.aotEnabled$))}}function Mt(t,e){1&t&&(r.Nb(0,"span",8),r.uc(1,"Only for ng >=9"),r.Mb())}let Dt=(()=>{class t{constructor(t,e,n,r,i){this.projectStore=t,this.editorWorker=e,this.monacoStore=n,this.playgroundStore=r,this.liveService=i,this.ngVersion$=this.projectStore.ngVersion$,this.aotEnabled$=this.projectStore.aotEnabled$,this.vimEnabled$=this.projectStore.vimEnabled$,this.recording$=this.projectStore.recording$,this.reloadMode$=this.playgroundStore.reloadMode$}toggleAot(){this.projectStore.toggleAotStatus();const t=this.projectStore.state.dependencies,e=[];Object.keys(t).forEach(n=>{n.startsWith("@angular")&&(e.push({name:n,version:t[n].version,prevVersion:t[n].version}),this.monacoStore.clearExportsFor(n),this.monacoStore.disposeExtraLibsForPackage(n))}),this.editorWorker.installState$.next(e.map(t=>`${t.name}@${t.version}`)),this.editorWorker.post({type:"UPDATE_DEPS",payload:{aot:!!this.projectStore.state.aot&&this.projectStore.getAotVersion(),deps:e,force:!0,files:this.projectStore.state.files}})}toggleVim(){this.projectStore.toggleVimMode()}toggleRecording(){this.projectStore.toggleRecording()}setReloadMode(t){this.playgroundStore.setReloadMode(t.target.value)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(k.c),r.Ib(U),r.Ib(L),r.Ib(k.b),r.Ib($))},t.\u0275cmp=r.Cb({type:t,selectors:[["ng-run-solution-settings"]],decls:23,vars:16,consts:[[1,"d-flex","align-items-center","no-wrap","mb-2","setting"],["class","ml-auto",3,"checked","change",4,"ngIf","ngIfElse"],["notSupportedTmpl",""],[1,"ml-auto",3,"checked","change"],[1,"d-flex","align-items-center","no-wrap","setting"],[1,"ml-auto",3,"disabled","value","change"],["value","edit"],["value","save"],[1,"ml-auto"]],template:function(t,e){if(1&t&&(r.Nb(0,"div",0),r.uc(1," Ivy AOT "),r.sc(2,Nt,2,3,"ng-run-checkbox",1),r.Yb(3,"async"),r.sc(4,Mt,2,0,"ng-template",null,2,r.tc),r.Mb(),r.Nb(6,"div",0),r.uc(7," Vim mode "),r.Nb(8,"ng-run-checkbox",3),r.Tb("change",function(){return e.toggleVim()}),r.Yb(9,"async"),r.Mb(),r.Mb(),r.Nb(10,"div",0),r.uc(11," Recording "),r.Nb(12,"ng-run-checkbox",3),r.Tb("change",function(){return e.toggleRecording()}),r.Yb(13,"async"),r.Mb(),r.Mb(),r.Nb(14,"label",4),r.uc(15," Reload mode "),r.Nb(16,"select",5),r.Tb("change",function(t){return e.setReloadMode(t)}),r.Yb(17,"async"),r.Yb(18,"async"),r.Nb(19,"option",6),r.uc(20,"Edit"),r.Mb(),r.Nb(21,"option",7),r.uc(22,"Save"),r.Mb(),r.Mb(),r.Mb()),2&t){const t=r.jc(5);r.wb(2),r.dc("ngIf",r.Zb(3,6,e.ngVersion$)>8)("ngIfElse",t),r.wb(6),r.dc("checked",r.Zb(9,8,e.vimEnabled$)),r.wb(4),r.dc("checked",r.Zb(13,10,e.recording$)),r.wb(4),r.dc("disabled",r.Zb(17,12,e.liveService.roomId$))("value",r.Zb(18,14,e.reloadMode$))}},directives:[z.m,At.a],pipes:[z.b],styles:["[_nghost-%COMP%]{display:block;padding:10px;font-size:12px;background:#1d2129}.setting[_ngcontent-%COMP%]:hover{color:#fff}"]}),t})();const Pt=["editTitleControl"];function Rt(t,e){if(1&t){const t=r.Ob();r.Nb(0,"ng-run-icon",9),r.Tb("click",function(){return r.lc(t),r.Xb(3).editTitle()}),r.Mb()}}function jt(t,e){if(1&t&&(r.Nb(0,"div",7),r.uc(1),r.sc(2,Rt,1,0,"ng-run-icon",8),r.Yb(3,"async"),r.Mb()),2&t){const t=r.Xb().ngIf,e=r.Xb();r.wb(1),r.wc(" ",t.title," "),r.wb(1),r.dc("ngIf",r.Zb(3,2,e.canEdit$))}}function Lt(t,e){if(1&t&&(r.Nb(0,"div",14),r.uc(1),r.Mb()),2&t){const t=e.ngIf;r.wb(1),r.vc(t)}}function Ft(t,e){if(1&t){const t=r.Ob();r.Nb(0,"input",10,11),r.Tb("keyup.enter",function(){return r.lc(t),r.Xb(2).updateTitle()})("keydown.escape",function(){return r.lc(t),r.Xb(2).editMode$.next(!1)}),r.Mb(),r.Nb(2,"div",12),r.Tb("click",function(){return r.lc(t),r.Xb(2).editMode$.next(!1)}),r.Mb(),r.sc(3,Lt,2,1,"div",13),r.Yb(4,"async")}if(2&t){const t=r.Xb().ngIf,e=r.Xb();r.dc("value",t.title),r.wb(3),r.dc("ngIf",r.Zb(4,2,e.error$))}}function Ut(t,e){if(1&t){const t=r.Ob();r.Nb(0,"div",2),r.sc(1,jt,4,4,"div",3),r.Yb(2,"async"),r.sc(3,Ft,5,4,"ng-template",null,4,r.tc),r.Nb(5,"div",5),r.Tb("click",function(){r.lc(t);const e=r.Xb();return e.settingsOpened$.next(!e.settingsOpened$.value)}),r.Jb(6,"ng-run-icon",6),r.Mb(),r.Mb()}if(2&t){const t=r.jc(4),e=r.Xb();r.wb(1),r.dc("ngIf",!r.Zb(2,2,e.editMode$))("ngIfElse",t)}}function Vt(t,e){1&t&&r.Jb(0,"ng-run-solution-settings")}let qt=(()=>{class t{constructor(t){this.projectStore=t,this.project$=this.projectStore.state$,this.canEdit$=this.projectStore.canEdit$,this.error$=new v.a(null),this.editMode$=new v.a(!1),this.settingsOpened$=new v.a(!1)}editTitle(){this.error$.next(""),this.editMode$.next(!0),this.editTitleControl.nativeElement.focus(),this.editTitleControl.nativeElement.setSelectionRange(0,this.editTitleControl.nativeElement.value.length)}updateTitle(){const t=this.editTitleControl.nativeElement.value.trim(),e=this.validate(t);e?this.error$.next(e):(this.editMode$.next(!1),this.projectStore.setTitle(t))}validate(t){return t?/[a-z0-9\-]+$/i.test(t)?t.length>100?"Please enter a Title that is less than 100 characters long":void 0:"Sorry, only alphanumeric values and '-' are allowed! Please consider another title.":"Please enter title."}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(k.c))},t.\u0275cmp=r.Cb({type:t,selectors:[["ng-run-solution-title"]],viewQuery:function(t,e){if(1&t&&r.yc(Pt,!0),2&t){let t;r.ic(t=r.Ub())&&(e.editTitleControl=t.first)}},decls:4,vars:6,consts:[["class","flex-y-center title p-2",4,"ngIf"],[4,"ngIf"],[1,"flex-y-center","title","p-2"],["class","flex-y-center flex-1",4,"ngIf","ngIfElse"],["editTmpl",""],["ng-run-tooltip","App settings",1,"icon-settings-btn","trigger",3,"click"],["name","settings","height","16","width","16",1,"icon-settings"],[1,"flex-y-center","flex-1"],["class","icon-edit ml-2","name","pencil",3,"click",4,"ngIf"],["name","pencil",1,"icon-edit","ml-2",3,"click"],["autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false",1,"solution-tree-item__input",3,"value","keyup.enter","keydown.escape"],["editTitleControl",""],[1,"solution-tree-item__blocker",3,"click"],["class","solution-tree-item__error",4,"ngIf"],[1,"solution-tree-item__error"]],template:function(t,e){1&t&&(r.sc(0,Ut,7,4,"div",0),r.Yb(1,"async"),r.sc(2,Vt,1,0,"ng-run-solution-settings",1),r.Yb(3,"async")),2&t&&(r.dc("ngIf",r.Zb(1,2,e.project$)),r.wb(2),r.dc("ngIf",r.Zb(3,4,e.settingsOpened$)))},directives:[z.m,X.b,Y.a,Dt],pipes:[z.b],styles:[".title[_ngcontent-%COMP%]{display:flex;font-size:14px;line-height:20px;color:#fff;justify-content:space-between}.icon-edit[_ngcontent-%COMP%]{fill:#afb0b3;width:12px;height:12px;cursor:pointer;stroke:#afb0b3}"]}),t})();var Bt=n("qrOX"),zt=n("/uUt");const Wt=["newItemControl"],Ht=["dropdown"];function Kt(t,e){1&t&&r.Jb(0,"i",6)}function $t(t,e){if(1&t&&r.Jb(0,"ng-run-icon",9),2&t){const t=r.Xb(2);r.dc("name","arrow-"+(t.opened?"down":"right"))}}function Qt(t,e){if(1&t&&(r.Lb(0),r.Jb(1,"ng-run-icon",7),r.sc(2,$t,1,1,"ng-run-icon",8),r.Kb()),2&t){const t=r.Xb();r.wb(1),r.dc("name",t.opened?"opened-folder":"folder"),r.wb(1),r.dc("ngIf",!t.newItem&&!t.editMode)}}function Gt(t,e){if(1&t&&r.Jb(0,"ng-run-icon",11),2&t){const t=r.Xb(2);r.dc("name",t.extension||"")}}function Xt(t,e){if(1&t&&r.sc(0,Gt,1,1,"ng-run-icon",10),2&t){const t=r.Xb();r.dc("ngIf","ts"!==t.extension)}}function Yt(t,e){if(1&t){const t=r.Ob();r.Lb(0),r.Nb(1,"input",12,13),r.Tb("keyup.enter",function(e){return r.lc(t),r.Xb().updateItem(e.target)})("keydown.escape",function(){return r.lc(t),r.Xb().deleteItem()}),r.Mb(),r.Nb(3,"div",14),r.Tb("click",function(){return r.lc(t),r.Xb().deleteItem()}),r.Mb(),r.Kb()}if(2&t){const t=r.Xb();r.wb(1),r.dc("value",t.editMode?t.item.name:"")}}function Zt(t,e){if(1&t&&r.uc(0),2&t){const t=r.Xb();r.vc(t.item.name)}}function Jt(t,e){if(1&t){const t=r.Ob();r.Nb(0,"div",29),r.Tb("click",function(){r.lc(t);const n=e.$implicit;r.Xb();const i=r.jc(2);return r.Xb(2).openCliGenerator(n),i.close()}),r.uc(1),r.Mb()}if(2&t){const t=e.$implicit;r.wb(1),r.wc(" ",t," ")}}const te=function(){return["Component","Directive","Module","Service","Pipe"]};function ee(t,e){if(1&t){const t=r.Ob();r.Lb(0),r.Nb(1,"ng-run-dropdown-menu",19,20),r.Nb(3,"div",21),r.Wb(),r.Nb(4,"svg",22),r.Jb(5,"use",23),r.Mb(),r.Mb(),r.Vb(),r.Nb(6,"div"),r.sc(7,Jt,2,1,"div",24),r.Mb(),r.Mb(),r.Nb(8,"div",25),r.Tb("click",function(){return r.lc(t),r.Xb(2).addItem("file")}),r.Wb(),r.Nb(9,"svg"),r.Jb(10,"use",26),r.Mb(),r.Mb(),r.Vb(),r.Nb(11,"div",27),r.Tb("click",function(){return r.lc(t),r.Xb(2).addItem("folder")}),r.Wb(),r.Nb(12,"svg"),r.Jb(13,"use",28),r.Mb(),r.Mb(),r.Kb()}2&t&&(r.wb(7),r.dc("ngForOf",r.fc(1,te)))}function ne(t,e){if(1&t){const t=r.Ob();r.Wb(),r.Nb(0,"svg",30),r.Tb("click",function(){return r.lc(t),r.Xb(2).editItem()}),r.Jb(1,"use",31),r.Mb()}}function re(t,e){if(1&t){const t=r.Ob();r.Wb(),r.Nb(0,"svg",32),r.Tb("click",function(){return r.lc(t),r.Xb(2).deleteItem()}),r.Jb(1,"use",33),r.Mb()}}function ie(t,e){if(1&t&&(r.Nb(0,"div",15),r.Tb("mousedown",function(t){return t.stopPropagation()}),r.Yb(1,"async"),r.sc(2,ee,14,2,"ng-container",16),r.sc(3,ne,2,0,"svg",17),r.sc(4,re,2,0,"svg",18),r.Mb()),2&t){const t=r.Xb();r.Ab("solution-actions--opened",t.dropdown&&r.Zb(1,5,t.dropdown.opened)),r.wb(2),r.dc("ngIf",t.isFolder),r.wb(1),r.dc("ngIf",t.canDelete),r.wb(1),r.dc("ngIf",t.canDelete)}}let oe=(()=>{class t{constructor(t,e,n,r){this.playgroundStore=t,this.projectStore=e,this.editorWorker=n,this.monacoStore=r,this.opened=!1,this.isFailed$=this.editorWorker.errorInfo$.pipe(Object(Q.a)(t=>!(!t.file||t.file!==this.item.fullPath)),Object(zt.a)()),this.actionsOpened$=new v.a(!1),this.supportedExtensions=["css","scss","ts","html"],this.isDirty$=this.projectStore.select(t=>t.files[this.item.fullPath].dirty),this.destroyed$=new w.a}get className(){return`solution-tree-item ${this.item.type}${this.isSelected?" selected":""}${this.opened?" opened":""}`}onClick(t){if(!this.editMode&&!this.newItem&&3!==t.which){if(this.item.type!==k.a.Folder)return this.projectStore.selectFile(this.item.fullPath),void Object(r.qb)(this);this.opened=!this.opened,Object(r.qb)(this)}}ngOnInit(){this.canDelete=-1===["main.ts","index.html","styles.css","app","index.ts"].indexOf(this.item.fullPath),this.isFolder=this.item.type===k.a.Folder,!this.isFolder&&this.item.name&&(this.extension=this.item.name.substr(this.item.name.lastIndexOf(".")+1)),this.newItem=""===this.item.name,this.isFolder&&0===this.projectStore.state.selectedFile.indexOf(this.item.fullPath)&&(this.opened=!0),this.projectStore.select(t=>t.selectedFile).pipe(Object(E.a)(this.destroyed$)).subscribe(t=>{const e=this.item.fullPath===t,n=this.isFolder&&0===t.indexOf(this.item.fullPath);this.isSelected===e&&this.opened===n||(this.isSelected=e,this.opened=n||this.opened,Object(r.qb)(this))})}ngAfterViewInit(){this.newItem&&this.newItemControl.nativeElement.focus()}openCliGenerator(t){this.playgroundStore.useSchematic({command:t,path:this.item.fullPath}),this.actionsOpened$.next(!1)}addItem(t){this.opened=!0,this.projectStore.addItem({key:this.item.fullPath+"/",value:{name:"",type:t,contents:""}}),Object(r.gb)(this)}editItem(){this.editMode=!0,Object(r.gb)(this),this.newItemControl.nativeElement.focus(),this.newItemControl.nativeElement.setSelectionRange(0,this.newItemControl.nativeElement.value.length)}updateItem(t){const e=this.newItemControl.nativeElement.value,n=this.item.fullPath.endsWith("/")?this.item.fullPath:this.item.fullPath.substring(0,this.item.fullPath.length-this.item.name.length),r=this.validate(e,n,this.isFolder);if(r)return void this.openError(r,t);this.editMode=!1,this.closeError();const i={add:{},remove:[]},o=this.projectStore.state.files;i.remove.push(this.item.fullPath),this.monacoStore.deleteSolutionItem(this.item),this.isFolder&&Object.keys(o).forEach(t=>{if(0===t.indexOf(this.item.fullPath+"/")){i.remove.push(t),this.monacoStore.deleteSolutionItem(Object.assign(o[t],{fullPath:t}));const r=Object.assign({},o[t]);r.fullPath=r.fullPath.replace(this.item.fullPath,n+e),i.add[r.fullPath]=r}});const s=this.item,a=this.item.fullPath;s.name=e,s.fullPath=n+e,i.add[s.fullPath]=s,this.monacoStore.addFiles(i.add),this.projectStore.merge(i),this.newItem||this.editorWorker.updateDecorators(Object.keys(i.add).reduce((t,e)=>e.endsWith(".ts")?(t[e]=i.add[e],t):t,{}));let c=s.fullPath;if(this.isFolder){const t=this.projectStore.state.selectedFile;0===t.indexOf(a+"/")&&(c=t.replace(a,s.fullPath))}this.projectStore.selectFile(c),this.editorWorker.change(i)}deleteItem(){if(this.editMode)return this.editMode=!1,this.closeError(),void Object(r.gb)(this);if(this.newItem||confirm(`Are you sure you want to delete ${this.item.fullPath} ${this.isFolder?"folder":"file"}?`)){const t={add:{},remove:[]},e=this.projectStore.state.files;this.isFolder&&Object.keys(e).forEach(n=>{0===n.indexOf(this.item.fullPath+"/")&&(t.remove.push(n),this.monacoStore.deleteSolutionItem(Object.assign(e[n],{fullPath:n})))}),t.remove.push(this.item.fullPath),this.editorWorker.change(t),this.projectStore.deleteItem(this.item),this.monacoStore.deleteSolutionItem(this.item),(!this.isFolder&&this.item.fullPath===this.projectStore.state.selectedFile||this.isFolder&&this.projectStore.state.selectedFile.startsWith(this.item.fullPath))&&this.projectStore.selectFile(this.projectStore.state.selectedFile.endsWith(".html")?"index.html":"main.ts")}}ngOnDestroy(){this.closeError(),this.destroyed$.next()}openError(t,e){const n=document.createElement("div");n.className="solution-tree-item__error",n.textContent=t;const{top:i,left:o}=e.getBoundingClientRect();n.style.top=i+"px",n.style.left=o+e.clientWidth+"px",document.body.appendChild(n),this.errorElem=n,Object(r.gb)(this)}closeError(){this.errorElem&&(document.body.removeChild(this.errorElem),this.errorElem=null,Object(r.gb)(this))}validate(t,e,n){if(!t||!t.trim())return"Please enter name.";const r="Please consider another name.";return this.projectStore.state.files[e+t]?"There is already file with such name! "+r:/[a-z0-9\-]+$/i.test(t)?n&&t.indexOf(".")>-1?"Sorry, using '.' character is forbidden for folders. "+r:n||this.supportedExtensions.includes(t.split(".").pop())?void 0:`Sorry, we only support ${this.supportedExtensions.join(", ")} extensions. Please consider another name.`:"Sorry, only alphanumeric values and '-' are allowed! "+r}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(k.b),r.Ib(k.c),r.Ib(U),r.Ib(L))},t.\u0275cmp=r.Cb({type:t,selectors:[["ng-run-solution-tree-item"]],viewQuery:function(t,e){if(1&t&&(r.yc(Wt,!0),r.yc(Ht,!0)),2&t){let t;r.ic(t=r.Ub())&&(e.newItemControl=t.first),r.ic(t=r.Ub())&&(e.dropdown=t.first)}},hostVars:2,hostBindings:function(t,e){1&t&&r.Tb("mousedown",function(t){return e.onClick(t)}),2&t&&r.yb(e.className)},inputs:{item:"item"},decls:11,vars:13,consts:[[1,"solution-tree-item__name",3,"ngClass"],["class","item-dirty",4,"ngIf"],[4,"ngIf","ngIfElse"],["fileIconTmpl",""],["inline",""],["class","solution-actions",3,"solution-actions--opened","mousedown",4,"ngIf"],[1,"item-dirty"],[1,"icon-folder",3,"name"],["class","icon-arrow",3,"name",4,"ngIf"],[1,"icon-arrow",3,"name"],["class","icon-file","width","15","height","15",3,"name",4,"ngIf"],["width","15","height","15",1,"icon-file",3,"name"],["autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false",1,"solution-tree-item__input",3,"value","keyup.enter","keydown.escape"],["newItemControl",""],[1,"solution-tree-item__blocker",3,"click"],[1,"solution-actions",3,"mousedown"],[4,"ngIf"],["class","icon-edit",3,"click",4,"ngIf"],["class","icon-delete",3,"click",4,"ngIf"],["align","left"],["dropdown",""],["menuTrigger","","title","CLI Generator",1,"cli-trigger"],[1,"ng-icon"],["href","#angular"],["class","option-item",3,"click",4,"ngFor","ngForOf"],["title","New File",1,"icon-add-file",3,"click"],["href","#icon-add-file"],["title","New Folder",1,"icon-add-folder",3,"click"],["href","#icon-add-folder"],[1,"option-item",3,"click"],[1,"icon-edit",3,"click"],[0,"xlink","href","#icon-pencil"],[1,"icon-delete",3,"click"],[0,"xlink","href","#icon-delete"]],template:function(t,e){if(1&t&&(r.Nb(0,"span",0),r.Yb(1,"async"),r.sc(2,Kt,1,0,"i",1),r.Yb(3,"async"),r.sc(4,Qt,3,2,"ng-container",2),r.sc(5,Xt,1,1,"ng-template",null,3,r.tc),r.sc(7,Yt,4,1,"ng-container",2),r.sc(8,Zt,1,1,"ng-template",null,4,r.tc),r.Mb(),r.sc(10,ie,5,7,"div",5)),2&t){const t=r.jc(6),n=r.jc(9);r.Ab("solution-tree-item--failed",r.Zb(1,9,e.isFailed$)),r.dc("ngClass",e.extension),r.wb(2),r.dc("ngIf",r.Zb(3,11,e.isDirty$)),r.wb(2),r.dc("ngIf",e.isFolder)("ngIfElse",t),r.wb(3),r.dc("ngIf",e.newItem||e.editMode)("ngIfElse",n),r.wb(3),r.dc("ngIf",!e.newItem&&!e.editMode)}},directives:[z.k,z.m,Y.a,G.a,z.l],pipes:[z.b],styles:['@charset "UTF-8";  .solution-tree-item{display:flex;-webkit-user-select:none;user-select:none;position:relative;padding:0 10px 0 1000px;margin-left:-1000px;align-items:center;justify-content:space-between;cursor:pointer}  .solution-tree-item:hover,   .solution-tree-item:hover .solution-actions{background:#34393c}  .solution-tree-item.selected{background:#22596f;color:#f3f3f3}  .solution-tree-item.selected:hover .solution-actions{background:#22596f}  .solution-tree-item__name{display:flex;width:100%;position:relative;padding-left:37px;font-size:13px;line-height:28px;height:28px;white-space:nowrap;align-items:center}  .item-dirty:before{content:"\u25cf";position:absolute;top:50%;left:0;transform:translateY(-50%)}  .solution-tree-item--failed:after{content:"";position:absolute;left:0;background:url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 90"><path d="M0,90 50,0 100,90" fill="%23FFC107"></path><line x1="50" y1="32" x2="50" y2="60" stroke="%23212121" stroke-width="9"></line><circle r="5" cx="50" cy="75" fill="%23212121" /></svg>\');width:14px;height:14px;top:50%;transform:translateY(-50%)}  .solution-tree-item__input{border:none;color:#fff;padding:0 3px;line-height:18px;background:#3e3e39;z-index:11;position:relative;width:calc(100% - 15px)}  .icon-add-file,   .icon-add-folder{cursor:pointer;position:relative;padding:0 7px 0 3px;line-height:normal}  .icon-add-folder   svg{width:14px;height:14px;fill:#afb0b3}  .icon-delete,   .solution-tree-item .icon-edit{display:inline-block}  .icon-add-folder svg{width:14px;height:14px;fill:#afb0b3}  .cli-generator-input{position:fixed;top:30%;left:50%;z-index:100;transform:translate(-50%,-50%)}  .cli-generator-input input{position:relative;line-height:32px;padding:0 10px;width:400px;font-size:16px}  .cli-trigger{display:flex;align-items:center;margin-right:2px}  .ng-icon{width:20px;height:21px;opacity:.8}  .ng-icon:hover{opacity:1}  .icon-add-file svg{width:10px;height:12px;stroke:#afb0b3}  .icon-delete,   .icon-edit{fill:#afb0b3;width:12px;height:12px;cursor:pointer;stroke:#afb0b3}  .icon-edit{margin:0 5px}  .icon-add-file:before,   .icon-add-folder:before{content:"+";position:absolute;color:#1aa01a;right:0;bottom:6px;font-size:14px;font-weight:700;font-family:Arial;line-height:0}  .icon-add-file:hover:before,   .icon-add-folder:hover:before{color:#25d625}  .solution-explorer:hover .solution-title .icon-add-file,   .solution-explorer:hover .solution-title .icon-add-folder{display:block}  .icon-add-file:hover svg,   .icon-add-folder:hover svg,   .icon-delete:hover,   .icon-edit:hover{fill:#d6d6d6;stroke:#d6d6d6}  .solution-actions{display:none;position:absolute;top:0;right:0;bottom:0;padding:0 10px;align-items:center;justify-content:space-between}  .icon-folder+.solution-tree-item__input,   .solution-title>.solution-tree-item__input{width:100%}  .solution-title>.solution-tree-item__input{font-size:14px;font-family:inherit}  .solution-tree-item__blocker{position:fixed;top:0;left:0;right:0;bottom:0;z-index:10;background:rgba(0,0,0,.5)}  .solution-tree{display:block;background:var(--solution-tree-bg);padding:10px 0 10px 5px}  .solution-tree-item__error{position:absolute;left:100%;top:10px;z-index:12;padding:10px;background:#cc441a;color:#fff;line-height:24px;font-size:13px;margin-left:8px;margin-top:-10px;border-radius:8px}  .solution-tree-item__error:before{content:"";position:absolute;width:0;height:0;left:-16px;border:8px solid transparent;border-right-color:#cc441a;top:10px}  .solution-tree-item.file .solution-tree-item__name{padding-left:19px}  .solution-tree-item__name:after{position:absolute}  .solution-tree-item__name .icon-folder{position:absolute;top:50%;width:17px;height:15px;left:16px;transform:translateY(-50%)}  .solution-tree-item__name .icon-folder svg{fill:#ecb81c}  .solution-tree-item__name .icon-file{width:15px;height:15px;position:relative;vertical-align:top;left:-3px}  .solution-tree-item.folder .icon-arrow{position:absolute;width:14px;height:14px;left:0;top:50%;transform:translateY(-50%)}  .solution-tree-item.file .solution-tree-item__name.ts:before{content:"TS";color:#95c9de;margin-right:3px;font-size:10px;position:relative;left:-2px}  .solution-tree-item.folder+ng-run-solution-tree{display:none}  .solution-tree-item.folder.opened+ng-run-solution-tree{display:block;padding-left:20px}  .solution-tree-item .icon-add-file,   .solution-tree-item .icon-add-folder{margin-right:2px;top:1px}  .solution-tree-item ng-run-menu{margin-right:2px}  .solution-tree-item ng-run-menu .animated-menu{left:0;right:auto}  .solution-actions--opened,   .solution-tree-item:hover .solution-actions{display:flex}  .solution-tree-item ng-run-menu.opened{display:inline-block}.option-item[_ngcontent-%COMP%]{line-height:34px;padding:0 15px}.option-item[_ngcontent-%COMP%]:hover{background:#f3f3f3}'],changeDetection:0}),t})();function se(t,e){if(1&t&&(r.Lb(0),r.Jb(1,"ng-run-solution-tree-item",1),r.Jb(2,"ng-run-solution-tree",2),r.Kb()),2&t){const t=e.$implicit,n=r.Xb();r.wb(1),r.dc("item",t),r.wb(1),r.dc("curItem",t)("files",n.files)}}let ae=(()=>{class t{ngOnChanges(){this.items=this.files.filter(this.curItem?this.filter.bind(this):this.rootFilter).sort((t,e)=>t.type!==e.type?t.type===k.a.Folder?-1:1:t.fullPath<e.fullPath?-1:t.fullPath>e.fullPath?1:0)}trackByFn(t,e){return e.fullPath}rootFilter(t){return 1===t.fullPath.split("/").length}filter(t){if(t.fullPath.startsWith(this.curItem.fullPath)){const e=t.fullPath.split("/"),n=this.curItem.fullPath.split("/");return e.length===n.length+1&&n[n.length-1]===e[e.length-2]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Cb({type:t,selectors:[["ng-run-solution-tree"]],inputs:{curItem:"curItem",files:"files"},features:[r.vb],decls:1,vars:2,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],[3,"item"],[3,"curItem","files"]],template:function(t,e){1&t&&r.sc(0,se,3,3,"ng-container",0),2&t&&r.dc("ngForOf",e.items)("ngForTrackBy",e.trackByFn)},directives:[z.l,oe,t],encapsulation:2,changeDetection:0}),t})();function ce(t,e){if(1&t){const t=r.Ob();r.Nb(0,"div",2),r.Nb(1,"div",3),r.Tb("click",function(){return r.lc(t),r.Xb().deleteProject()}),r.uc(2," Delete project "),r.Wb(),r.Nb(3,"svg",4),r.Jb(4,"use",5),r.Mb(),r.Mb(),r.Mb()}}let ue=(()=>{class t{constructor(t,e,n){this.projectStore=t,this.notificationService=e,this.location=n,this.files$=this.projectStore.select(t=>Object.keys(t.files).reduce((e,n)=>(t.files[n].fullPath=n,e.push(t.files[n]),e),[])),this.canEdit$=this.projectStore.canEdit$}deleteProject(){const t=this.projectStore.state;confirm(`Are you sure you want to delete project: "${t.title}"?`)&&this.projectStore.deleteProject(t.id).then(()=>{this.notificationService.notify({type:"success",message:"Project has been successfully deleted"}),this.location.go("/"),location.reload()}).catch(t=>{this.notificationService.notify({type:"error",message:t.message})})}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(k.c),r.Ib(b.b),r.Ib(z.i))},t.\u0275cmp=r.Cb({type:t,selectors:[["ng-run-solution-explorer"]],decls:4,vars:6,consts:[[1,"solution-tree",3,"files"],["class","project-actions",4,"ngIf"],[1,"project-actions"],[1,"flex-y-center","trigger",3,"click"],[1,"icon-delete","ml-1"],[0,"xlink","href","#icon-delete"]],template:function(t,e){1&t&&(r.Jb(0,"ng-run-solution-tree",0),r.Yb(1,"async"),r.sc(2,ce,5,0,"div",1),r.Yb(3,"async")),2&t&&(r.dc("files",r.Zb(1,2,e.files$)),r.wb(2),r.dc("ngIf",r.Zb(3,4,e.canEdit$)))},directives:[ae,z.m],pipes:[z.b],styles:["[_nghost-%COMP%]{display:block}.project-actions[_ngcontent-%COMP%]{margin-top:5px;padding:10px;font-size:12px}"],changeDetection:0}),t})();const le=["newItemControl"];function he(t,e){if(1&t){const t=r.Ob();r.Nb(0,"li",4),r.Nb(1,"a",5),r.uc(2),r.Mb(),r.Wb(),r.Nb(3,"svg",6),r.Tb("click",function(){r.lc(t);const n=e.$implicit;return r.Xb().deleteSource(n)}),r.Jb(4,"use",7),r.Mb(),r.Mb()}if(2&t){const t=e.$implicit;r.wb(1),r.dc("href",t,r.oc)("title",t),r.wb(1),r.vc(t.split("/").pop())}}let de=(()=>{class t{constructor(t){this.projectStore=t,this.resources$=this.projectStore.externalResources$,this.supportedExtensions=["css","js"]}addSource(){const t=this.newItemControl.nativeElement.value,e=this.validate(t);e?this.openError(e,this.newItemControl.nativeElement):(this.projectStore.addExternalResource(t),this.closeError(),this.newItemControl.nativeElement.value="")}deleteSource(t){this.projectStore.removeExternalResource(t)}openError(t,e){const n=document.createElement("div");n.className="solution-tree-item__error",n.textContent=t;const{top:r,left:i}=e.getBoundingClientRect();n.style.top=r+"px",n.style.left=i+e.clientWidth+"px",document.body.appendChild(n),this.errorElem=n,setTimeout(()=>{this.closeError()},2e3)}closeError(){this.errorElem&&(document.body.removeChild(this.errorElem),this.errorElem=null)}validate(t){return t&&t.trim()?/[a-z0-9\-]+$/i.test(t)?this.supportedExtensions.includes(t.split(".").pop())?void 0:`Sorry, we only support ${this.supportedExtensions.join(", ")} extensions. Please consider another url.`:"Sorry, only alphanumeric values and '-' are allowed! Please consider another url.":"Please enter url."}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(k.c))},t.\u0275cmp=r.Cb({type:t,selectors:[["ng-run-external-resources"]],viewQuery:function(t,e){if(1&t&&r.qc(le,!0),2&t){let t;r.ic(t=r.Ub())&&(e.newItemControl=t.first)}},decls:5,vars:3,consts:[["type","text","id","external-resources","placeholder",".js or .css url","autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false",1,"input",3,"keyup.enter"],["newItemControl",""],[1,"list"],["class","flex-y-center mb-2",4,"ngFor","ngForOf"],[1,"flex-y-center","mb-2"],["target","_blank",1,"-item-link",3,"href","title"],[1,"icon-delete","ml-1",3,"click"],[0,"xlink","href","#icon-delete"]],template:function(t,e){1&t&&(r.Nb(0,"input",0,1),r.Tb("keyup.enter",function(){return e.addSource()}),r.Mb(),r.Nb(2,"ul",2),r.sc(3,he,5,3,"li",3),r.Yb(4,"async"),r.Mb()),2&t&&(r.wb(3),r.dc("ngForOf",r.Zb(4,1,e.resources$)))},directives:[z.l],pipes:[z.b],styles:["[_nghost-%COMP%]{display:block}.input[_ngcontent-%COMP%]{border:none;color:#fff;padding:0 5px;line-height:26px;width:100%;box-sizing:border-box;background:var(--solution-tree-bg)}.list[_ngcontent-%COMP%]{margin:5px 0 0;font-size:12px}"],changeDetection:0}),t})();var fe=n("SxV6"),pe=n("nYR2");let ge=(()=>{class t{constructor(t){this.el=t,this.scrollPosition=new r.n}onScroll(t){const e=t.target.scrollTop;e>this.el.nativeElement.scrollHeight-this.el.nativeElement.offsetHeight-1&&this.scrollPosition.emit("bottom"),0===e&&this.scrollPosition.emit("top")}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.l))},t.\u0275dir=r.Db({type:t,selectors:[["","scrollable",""]],hostBindings:function(t,e){1&t&&r.Tb("scroll",function(t){return e.onScroll(t)})},outputs:{scrollPosition:"scrollPosition"}}),t})();function me(t,e){1&t&&(r.Nb(0,"div",5),r.Jb(1,"div",6),r.Mb())}function ye(t,e){if(1&t&&(r.Nb(0,"li",10),r.Nb(1,"a",11),r.Nb(2,"span",12),r.uc(3),r.Mb(),r.Nb(4,"span",13),r.uc(5),r.Mb(),r.Mb(),r.Mb()),2&t){const t=e.$implicit;r.wb(1),r.Ab("active",t.current),r.ec("href","/edit/",t.id,"",r.oc),r.wb(2),r.vc(t.title),r.wb(2),r.vc(t.timeAgo)}}function be(t,e){if(1&t){const t=r.Ob();r.Nb(0,"div",14),r.Tb("click",function(){return r.lc(t),r.Xb(3).openAllProjects()}),r.uc(1," see all projects "),r.Mb()}}function ve(t,e){if(1&t&&(r.Lb(0),r.Nb(1,"ul",7),r.sc(2,ye,6,5,"li",8),r.Mb(),r.sc(3,be,2,0,"div",9),r.Kb()),2&t){const t=r.Xb().ngIf;r.wb(2),r.dc("ngForOf",t),r.wb(1),r.dc("ngIf",5===t.length)}}function we(t,e){if(1&t&&(r.Lb(0),r.sc(1,ve,4,2,"ng-container",2),r.Kb()),2&t){const t=e.ngIf;r.wb(1),r.dc("ngIf",t.length)}}function _e(t,e){if(1&t&&(r.Nb(0,"li",19),r.Nb(1,"a",20),r.Nb(2,"span",21),r.uc(3),r.Mb(),r.Nb(4,"span",22),r.uc(5),r.Mb(),r.Mb(),r.Mb()),2&t){const t=e.$implicit;r.wb(1),r.Ab("active",t.current),r.ec("href","/edit/",t.id,"",r.oc),r.wb(2),r.vc(t.title),r.wb(2),r.vc(t.timeAgo)}}function Se(t,e){1&t&&(r.Nb(0,"div"),r.uc(1," Loading... "),r.Mb())}function Ce(t,e){if(1&t){const t=r.Ob();r.Nb(0,"div",15),r.Nb(1,"div",16),r.Tb("scrollPosition",function(e){return r.lc(t),r.Xb().scrollHandler(e)}),r.Nb(2,"ul",17),r.sc(3,_e,6,5,"li",18),r.Yb(4,"async"),r.Mb(),r.sc(5,Se,2,0,"div",2),r.Yb(6,"async"),r.Mb(),r.Mb()}if(2&t){const t=r.Xb();r.wb(3),r.dc("ngForOf",r.Zb(4,2,t.page.data)),r.wb(2),r.dc("ngIf",r.Zb(6,4,t.page.loading))}}function Ie(t,e){if(1&t){const t=r.Ob();r.Nb(0,"div",23),r.Tb("click",function(){return r.lc(t),r.Xb().close()}),r.Mb()}}let Ee=(()=>{class t{constructor(t,e,n){this.projectStore=t,this.projectService=e,this.page=n,this.projects$=this.projectService.getLastProjects().snapshotChanges().pipe(Object(fe.a)(),Object(Q.a)(t=>{const e=this.projectStore.state?this.projectStore.state.id:"";return t.map(t=>{const n=t.payload.doc.data(),r=t.payload.doc.id;return{id:r,title:n.title,timeAgo:n.createdAt?Object(A.f)(n.createdAt):"",current:r===e}})}),Object(pe.a)(()=>{this.loading$.next(!1)})),this.loading$=new v.a(!0),this.opened$=new v.a(!1)}scrollHandler(t){"bottom"===t&&this.page.more()}openAllProjects(){this.page.reset(),this.page.init("projects","createdAt",{reverse:!0,prepend:!1}),this.opened$.next(!this.opened$.value)}close(){this.opened$.next(!1)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(k.c),r.Ib(kt.b),r.Ib(kt.a))},t.\u0275cmp=r.Cb({type:t,selectors:[["ng-run-latest-projects"]],decls:9,vars:12,consts:[[1,"latest-projects"],["class","flex-center p-2",4,"ngIf"],[4,"ngIf"],["class","projects-modal",4,"ngIf"],["class","fake-bg",3,"click",4,"ngIf"],[1,"flex-center","p-2"],[1,"loader"],[1,"list"],["class","project",4,"ngFor","ngForOf"],["class","flex-center mt-1 trigger see-all",3,"click",4,"ngIf"],[1,"project"],[1,"link",3,"href"],[1,"d-block"],[1,"time"],[1,"flex-center","mt-1","trigger","see-all",3,"click"],[1,"projects-modal"],["scrollable","","tabindex","0",1,"projects-modal__content",3,"scrollPosition"],[1,"projects-modal__list"],["class","-project",4,"ngFor","ngForOf"],[1,"-project"],[1,"-link",3,"href"],[1,"-title"],[1,"-time"],[1,"fake-bg",3,"click"]],template:function(t,e){1&t&&(r.Nb(0,"div",0),r.sc(1,me,2,0,"div",1),r.Yb(2,"async"),r.sc(3,we,2,1,"ng-container",2),r.Yb(4,"async"),r.Mb(),r.sc(5,Ce,7,6,"div",3),r.Yb(6,"async"),r.sc(7,Ie,1,0,"div",4),r.Yb(8,"async")),2&t&&(r.wb(1),r.dc("ngIf",r.Zb(2,4,e.loading$)),r.wb(2),r.dc("ngIf",r.Zb(4,6,e.projects$)),r.wb(2),r.dc("ngIf",r.Zb(6,8,e.opened$)),r.wb(2),r.dc("ngIf",r.Zb(8,10,e.opened$)))},directives:[z.m,z.l,ge],pipes:[z.b],styles:["[_nghost-%COMP%]{display:block;background:var(--solution-tree-bg)}.latest-projects[_ngcontent-%COMP%]{font-size:12px}.list[_ngcontent-%COMP%]{margin:5px 0 0}.link[_ngcontent-%COMP%]{display:block;padding:10px;text-decoration:none}.link.active[_ngcontent-%COMP%]{background:#2c5c6b;color:#fff}.project[_ngcontent-%COMP%]:hover{background:#34393c;color:#fff}.time[_ngcontent-%COMP%]{display:block;text-align:right;font-size:11px}.see-all[_ngcontent-%COMP%]{margin-bottom:15px;line-height:28px}.projects-modal[_ngcontent-%COMP%]{position:fixed;top:0;bottom:0;right:0;padding:15px;background:#fff;color:#333;z-index:6;width:380px}.projects-modal__content[_ngcontent-%COMP%]{overflow-y:auto;height:100%}.projects-modal__content[_ngcontent-%COMP%]:focus{outline:none}.projects-modal__list[_ngcontent-%COMP%]   .-link[_ngcontent-%COMP%]{display:block;padding:10px;text-decoration:none;color:#333}.projects-modal__list[_ngcontent-%COMP%]   .-link[_ngcontent-%COMP%]:hover{background:#f1f1f1}.projects-modal__list[_ngcontent-%COMP%]   .-time[_ngcontent-%COMP%]{display:block;text-align:right;font-size:11px}"],changeDetection:0}),t})();function Te(t,e){if(1&t){const t=r.Ob();r.Nb(0,"div",25),r.Tb("click",function(t){return t.stopPropagation()}),r.Nb(1,"div",26),r.Tb("click",function(){return r.lc(t),r.Xb(2).addItem("file")}),r.Wb(),r.Nb(2,"svg"),r.Jb(3,"use",27),r.Mb(),r.Mb(),r.Vb(),r.Nb(4,"div",28),r.Tb("click",function(){return r.lc(t),r.Xb(2).addItem("folder")}),r.Wb(),r.Nb(5,"svg"),r.Jb(6,"use",29),r.Mb(),r.Mb(),r.Mb()}}function ke(t,e){if(1&t&&r.Jb(0,"img",33),2&t){const t=r.Xb().ngIf;r.dc("src",t.photoURL,r.oc)("alt",t.displayName)}}function Oe(t,e){if(1&t&&(r.Lb(0),r.Nb(1,"h3",30),r.uc(2,"Author"),r.Mb(),r.Nb(3,"div",31),r.sc(4,ke,1,2,"img",32),r.uc(5),r.Mb(),r.Kb()),2&t){const t=e.ngIf;r.wb(4),r.dc("ngIf",t.photoURL),r.wb(1),r.wc(" ",t.displayName," ")}}function xe(t,e){if(1&t&&(r.Nb(0,"div",34),r.Nb(1,"div",35),r.uc(2),r.Mb(),r.Jb(3,"ng-run-dependency-resolver",36),r.Mb()),2&t){const t=e.$implicit;r.wb(2),r.vc(t.name),r.wb(1),r.dc("depName",t.name)("version",t.version)}}function Ae(t,e){if(1&t){const t=r.Ob();r.Lb(0),r.Jb(1,"ng-run-solution-title"),r.Nb(2,"ng-run-toggler",11),r.sc(3,Te,7,0,"div",12),r.Yb(4,"async"),r.Jb(5,"ng-run-solution-explorer",13),r.sc(6,Oe,6,2,"ng-container",14),r.Yb(7,"async"),r.Mb(),r.Nb(8,"ng-run-toggler",11),r.Nb(9,"div",15),r.Tb("click",function(e){return r.lc(t),r.Xb().updateAllDeps(),e.stopPropagation()}),r.Wb(),r.Nb(10,"svg",16),r.Jb(11,"use",17),r.Mb(),r.Mb(),r.Vb(),r.Nb(12,"div",18),r.sc(13,xe,4,3,"div",19),r.Yb(14,"async"),r.Nb(15,"div",20),r.Nb(16,"input",21,22),r.Tb("keyup.enter",function(){r.lc(t);const e=r.jc(17);return r.Xb().installDep(e)}),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Nb(18,"ng-run-toggler",23),r.Jb(19,"ng-run-external-resources",24),r.Mb(),r.Kb()}if(2&t){const t=r.Xb();r.wb(2),r.dc("title","Files"),r.wb(1),r.dc("ngIf",r.Zb(4,7,t.nonNg$)),r.wb(3),r.dc("ngIf",r.Zb(7,9,t.author$)),r.wb(2),r.dc("title","Dependencies"),r.wb(5),r.dc("ngForOf",r.Zb(14,11,t.dependencies$))("ngForTrackBy",t.trackByFn),r.wb(5),r.dc("title","External resources")}}function Ne(t,e){1&t&&(r.Nb(0,"ng-run-toggler",11),r.Nb(1,"div",37),r.Jb(2,"div",38),r.Mb(),r.Mb()),2&t&&r.dc("title","Files")}function Me(t,e){1&t&&(r.Nb(0,"ng-run-toggler",11),r.Jb(1,"ng-run-latest-projects"),r.Mb()),2&t&&r.dc("title","Latest projects")}let De=(()=>{class t{constructor(t,e,n,i,o){this.projectStore=t,this.auth=e,this.playgroundStore=n,this.monacoStore=i,this.editorWorker=o,this.closeMenu=new r.n,this.projectLoaded$=this.projectStore.projectLoaded$,this.author$=this.projectStore.author$,this.nonNg$=this.projectStore.nonNg$,this.authenticated$=this.auth.authenticated$,this.dependencies$=this.projectStore.dependencies$}trackByFn(t,e){return e.name}updateAllDeps(){const t=[],e=this.projectStore.state.dependencies;this.resolvers.forEach(n=>{const r=n.versions[0];if(e[n.depName].version===r)return;const i={name:n.depName,version:r,prevVersion:n.version};t.push(i),this.monacoStore.clearExportsFor(n.depName),this.monacoStore.disposeExtraLibsForPackage(n.depName),this.projectStore.updateDep(i)}),t.length&&(this.editorWorker.installState$.next(t.map(t=>`${t.name}@${t.version}`)),this.editorWorker.post({type:"UPDATE_DEPS",payload:{aot:!!this.projectStore.state.aot&&this.projectStore.getAotVersion(),deps:t}}))}installDep(t){t.value.length&&(this.editorWorker.install([t.value]),t.value="")}addItem(t){this.projectStore.addItem({key:"",value:{name:"",type:t,contents:""}})}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(k.c),r.Ib(g.a),r.Ib(k.b),r.Ib(L),r.Ib(U))},t.\u0275cmp=r.Cb({type:t,selectors:[["ng-run-sidebar"]],viewQuery:function(t,e){if(1&t&&r.yc(xt,!0),2&t){let t;r.ic(t=r.Ub())&&(e.resolvers=t)}},outputs:{closeMenu:"closeMenu"},decls:17,vars:7,consts:[[1,"h-100","overflow-y-auto","sidebar"],[1,"close-menu",3,"click"],["viewBox","0, 0, 500, 500","width","40","height","40","xmlns","http://www.w3.org/2000/svg"],["d","M250.696,82 L91,138.2 L116.235,347.426 L250.864,421.421 L386.186,346.424 L411.413,137.205 L250.696,82","fill","#FFFFFF"],["d","M395.484,149.298 L250.323,99.795 L250.323,403.742 L371.974,336.416 L395.484,149.298","fill","#a80e00"],["d","M108.92,150.189 L130.544,337.309 L250.32,403.742 L250.32,99.789 L108.92,150.189","fill","#e01600"],["d","M210,180 L210,300 L310,240 z","fill","#FFFFFF"],[4,"ngIf","ngIfElse"],["loadingTmpl",""],[3,"title",4,"ngIf"],["href","/about",1,"about-project"],[3,"title"],["class","icon d-flex ml-auto folder-actions",3,"click",4,"ngIf"],[1,"mb-2"],[4,"ngIf"],["title","Update all to latest",1,"icon","ml-auto","icon-update-link","trigger",3,"click"],["width","13","height","14",1,"icon"],[0,"xlink","href","#icon-update"],[1,"dependencies","p-2"],["class","dependency-item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"install-dep"],["placeholder","type package to install","autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false",1,"install-dep-input",3,"keyup.enter"],["newDepName",""],[1,"external-deps",3,"title"],[1,"p-2"],[1,"icon","d-flex","ml-auto","folder-actions",3,"click"],["title","New File",1,"icon-add-file",3,"click"],["href","#icon-add-file"],["title","New Folder",1,"icon-add-folder",3,"click"],["href","#icon-add-folder"],[1,"mb-2","px-2","author-title"],[1,"flex-y-center","px-2","author"],["class","author-image mr-1","width","30",3,"src","alt",4,"ngIf"],["width","30",1,"author-image","mr-1",3,"src","alt"],[1,"dependency-item"],[1,"dependency-name"],[1,"dependency-resolver",3,"depName","version"],[1,"flex-center","p-2","bg"],[1,"loader"]],template:function(t,e){if(1&t&&(r.Nb(0,"div",0),r.Nb(1,"div",1),r.Tb("click",function(){return e.closeMenu.emit()}),r.Wb(),r.Nb(2,"svg",2),r.Jb(3,"path",3),r.Jb(4,"path",4),r.Jb(5,"path",5),r.Jb(6,"path",6),r.Mb(),r.Vb(),r.Nb(7,"h1"),r.uc(8,"Angular demo"),r.Mb(),r.Mb(),r.sc(9,Ae,20,13,"ng-container",7),r.Yb(10,"async"),r.sc(11,Ne,3,1,"ng-template",null,8,r.tc),r.sc(13,Me,2,1,"ng-run-toggler",9),r.Yb(14,"async"),r.Mb(),r.Nb(15,"a",10),r.uc(16,"About project"),r.Mb()),2&t){const t=r.jc(12);r.wb(9),r.dc("ngIf",r.Zb(10,3,e.projectLoaded$))("ngIfElse",t),r.wb(4),r.dc("ngIf",r.Zb(14,5,e.authenticated$))}},directives:[z.m,qt,Bt.a,ue,z.l,de,xt,Ee],pipes:[z.b],styles:['[_ngcontent-%COMP%]:root{--color:#c7c7c7;--color-hover:#fff;--solution-tree-bg:#1d2129;--sidebar-bg:#2e3440;--header-bg:#2e3440;--logo-color:#fff;--box-header-bg:#1d2129;--box-resizer-bg:#2e3440;--box-resizer-border-left-color:hsla(0,0%,100%,0.15);--box-resizer-border-right-color:rgba(0,0,0,0.34);--tab-bg:#444446;--tab-color:#fff;--editor-action-color:#c7c7c7;--editor-action-hovered-color:#fff;--cursor-color:#fff;--tray-bg:#2978bb;--scrollbar:rgba(67,76,94,0.6);--lineNumbers:rgba(216,222,233,0.4);--activeLineNumber:rgba(216,222,233,0.9);--bg:#2e3440;--foreground:#d8dee9;--comment:#67728a;--className:#8fbcbb;--functionName:#88c0d0;--decorator:#d08770;--string:#a3be8c;--keyword:#81a1c1;--tag:#81a1c1;--attr:#8fbcbb;--type:#8fbcbb;--constKeyword:#81a1c1;--consoleKeyword:#8fbcbb;--constant:#b48ead;--this:#81a1c1;--propAccess:#d8dee9;--method:#88c0d0;--param:#d8dee9;--call:#88c0d0;--brackets:#d8dee}[_nghost-%COMP%]{position:relative;-webkit-user-select:none;user-select:none;padding-bottom:24px;background:var(--sidebar-bg)}.sidebar[_ngcontent-%COMP%]{overflow-x:hidden}.bg[_ngcontent-%COMP%]{background:var(--solution-tree-bg)}.close-menu[_ngcontent-%COMP%]{display:none;position:relative;color:#fff;line-height:60px;padding:0 5px;align-items:center;cursor:pointer;background:var(--header-bg)}.close-menu[_ngcontent-%COMP%]:after{content:"";position:absolute;display:inline-block;width:.6em;height:.6em;border-right:.2em solid;border-top:.2em solid;transform:rotate(-135deg);right:15px}.about-project[_ngcontent-%COMP%]{color:#fff;position:absolute;bottom:0;left:0;right:0;text-align:center;line-height:24px;text-decoration:underline;background:var(--tray-bg)}.about-project[_ngcontent-%COMP%]:hover{text-decoration:none}.author-title[_ngcontent-%COMP%]{font-size:13px;font-weight:400;color:#fff}.author[_ngcontent-%COMP%]{font-size:12px}.author-image[_ngcontent-%COMP%]{flex-shrink:0;max-width:30px;height:auto}.dependencies[_ngcontent-%COMP%]{background:var(--solution-tree-bg);font-size:12px;padding-bottom:0}.dependency-item[_ngcontent-%COMP%]{position:relative;overflow:hidden;margin-bottom:10px;line-height:18px}.dependency-name[_ngcontent-%COMP%]{white-space:nowrap}.dependency-resolver[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;display:flex;padding-left:5px}.icon-update-link[_ngcontent-%COMP%]{fill:var(--editor-action-color);padding:0 5px}.install-dep[_ngcontent-%COMP%]{padding:10px;margin:0 -10px;background:var(--sidebar-bg)}.install-dep-input[_ngcontent-%COMP%]{border:none;color:#fff;padding:0 5px;line-height:26px;width:100%;box-sizing:border-box;background:var(--solution-tree-bg)}.folder-actions[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]     .toggler:hover .folder-actions{display:flex}@media (max-width:960px){.close-menu[_ngcontent-%COMP%]{display:flex}}'],changeDetection:0}),t})();var Pe=n("Xv3O"),Re=n("VRyK");function je(t,e){if(1&t){const t=r.Ob();r.Nb(0,"div",18),r.Tb("click",function(){return r.lc(t),r.Xb().setCurrentFile()}),r.Yb(1,"async"),r.Yb(2,"async"),r.uc(3),r.Mb()}if(2&t){const t=r.Xb();r.Ab("editor-tab-title--active",r.Zb(1,5,t.selectedFile$)===t.openedFile)("editor-tab-title--dirty",r.Zb(2,7,t.isDirty$)),r.wb(3),r.wc(" ",t.openedFile," ")}}function Le(t,e){1&t&&(r.Lb(0),r.Nb(1,"div",8),r.Nb(2,"b"),r.uc(3,"Emmet"),r.Mb(),r.uc(4," is enabled."),r.Mb(),r.Nb(5,"div",19),r.Nb(6,"b"),r.uc(7,"Angular language service"),r.Mb(),r.uc(8," is enabled."),r.Mb(),r.Kb())}function Fe(t,e){1&t&&(r.Nb(0,"div",8),r.Nb(1,"b"),r.uc(2,"F2"),r.Mb(),r.uc(3," - Next highlighted error"),r.Mb(),r.Nb(4,"div",8),r.Nb(5,"b"),r.uc(6,"Alt + Enter"),r.Mb(),r.uc(7," - Auto-import current symbol"),r.Mb(),r.Nb(8,"div",8),r.Nb(9,"b"),r.uc(10,"Ctrl + Alt + C"),r.Mb(),r.uc(11," - console.log($0)"),r.Mb())}let Ue=(()=>{class t{constructor(t,e){this.projectStore=t,this.playgroundStore=e,this.formatCodeClicked=new r.n,this.isScreenShotMode$=this.playgroundStore.screenShotMode$.pipe(Object(Q.a)(t=>this.mode&&t===this.mode)),this.selectedFile$=this.projectStore.select(t=>t.selectedFile),this.isDirty$=this.projectStore.select(t=>t.files[this.openedFile]&&t.files[this.openedFile].dirty),this.prettierConfig$=this.playgroundStore.prettierConfig$}setCurrentFile(){this.projectStore.state.selectedFile!==this.openedFile&&this.projectStore.selectFile(this.openedFile)}makeScreenShot(){this.playgroundStore.toggleScreenShotMode(this.mode)}formatCode(){this.formatCodeClicked.emit()}updatePrettierConfig(t){this.playgroundStore.updatePrettierConfig(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(k.c),r.Ib(k.b))},t.\u0275cmp=r.Cb({type:t,selectors:[["ng-run-editor-header"]],inputs:{openedFile:"openedFile",mode:"mode"},outputs:{formatCodeClicked:"formatCodeClicked"},decls:38,vars:13,consts:[[1,"editor-header","flex-y-center"],["class","editor-tab-title",3,"editor-tab-title--active","editor-tab-title--dirty","click",4,"ngIf"],[1,"editor-actions","ml-auto"],["ng-run-tooltip","Toggle screenshot mode",1,"editor-action","editor-action-screenshot",3,"click"],["width","30","height","30",1,"icon-screenshot"],[0,"xlink","href","#icon-screenshot"],[1,"ml-2",3,"showArrow"],["menuTrigger",""],[1,"editor-action-option"],[4,"ngIf","ngIfElse"],["tips",""],["title","Shift-Alt-F",1,"editor-action",3,"click"],["width","30",1,"icon-format"],[0,"xlink","href","#icon-format"],["align","right",1,"ml-2"],["width","16","height","16",1,"icon-settings"],[0,"xlink","href","#icon-settings"],[1,"prettier-config",3,"value","input"],[1,"editor-tab-title",3,"click"],[1,"editor-action-option","editor-action-option--new"]],template:function(t,e){if(1&t&&(r.Nb(0,"div",0),r.sc(1,je,4,9,"div",1),r.Nb(2,"div",2),r.Nb(3,"div",3),r.Tb("click",function(){return e.makeScreenShot()}),r.Yb(4,"async"),r.Wb(),r.Nb(5,"svg",4),r.Jb(6,"use",5),r.Mb(),r.Mb(),r.Vb(),r.Nb(7,"ng-run-dropdown-menu",6),r.Lb(8,7),r.uc(9,"Tips"),r.Kb(),r.Lb(10),r.Nb(11,"div",8),r.Nb(12,"b"),r.uc(13,"Alt + Shift + F"),r.Mb(),r.uc(14," - Auto-format"),r.Mb(),r.Nb(15,"div",8),r.Nb(16,"b"),r.uc(17,"Ctrl + Alt + Shift + P"),r.Mb(),r.uc(18," - Prettier format"),r.Mb(),r.sc(19,Le,9,0,"ng-container",9),r.sc(20,Fe,12,0,"ng-template",null,10,r.tc),r.Nb(22,"div",8),r.Nb(23,"b"),r.uc(24,"Ctrl + P"),r.Mb(),r.uc(25," - Quick open recent files"),r.Mb(),r.Kb(),r.Mb(),r.Nb(26,"div",11),r.Tb("click",function(){return e.formatCode()}),r.Wb(),r.Nb(27,"svg",12),r.Jb(28,"use",13),r.Mb(),r.uc(29," Format "),r.Mb(),r.Vb(),r.Nb(30,"ng-run-dropdown-menu",14),r.Lb(31,7),r.Wb(),r.Nb(32,"svg",15),r.Jb(33,"use",16),r.Mb(),r.uc(34,"\xa0 .prettierrc "),r.Kb(),r.Vb(),r.Nb(35,"textarea",17),r.Tb("input",function(t){return e.updatePrettierConfig(t.target.value)}),r.Yb(36,"json"),r.Yb(37,"async"),r.Mb(),r.Mb(),r.Mb(),r.Mb()),2&t){const t=r.jc(21);r.wb(1),r.dc("ngIf",e.openedFile),r.wb(2),r.Ab("editor-action-screenshot--enabled",r.Zb(4,7,e.isScreenShotMode$)),r.wb(4),r.dc("showArrow",!0),r.wb(12),r.dc("ngIf","html"===e.mode)("ngIfElse",t),r.wb(16),r.dc("value",r.Zb(36,9,r.Zb(37,11,e.prettierConfig$)))}},directives:[z.m,X.b,G.a],pipes:[z.b,z.g],styles:['@charset "UTF-8";.editor-header[_ngcontent-%COMP%]{height:40px;background:var(--box-header-bg)}.editor-tab-title[_ngcontent-%COMP%]{position:relative;padding:0 22px 0 15px;line-height:40px;cursor:pointer;font-size:13px;-webkit-user-select:none;user-select:none;white-space:nowrap;background:var(--tab-bg);color:var(--tab-color)}.editor-tab-title--active[_ngcontent-%COMP%]{box-shadow:inset 0 -1px 0 var(--tab-color)}.editor-tab-title--dirty[_ngcontent-%COMP%]:after{content:"\u25cf";position:absolute;top:50%;right:9px;transform:translateY(-50%)}.editor-actions[_ngcontent-%COMP%]{display:flex;padding:0 10px;height:100%;line-height:40px;flex-shrink:0}.editor-action[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;position:relative;margin-left:10px}.editor-action[_ngcontent-%COMP%]:hover{color:var(--editor-action-hovered-color)}.icon-format[_ngcontent-%COMP%]{stroke:var(--editor-action-color)}.editor-action[_ngcontent-%COMP%]:hover   .icon-format[_ngcontent-%COMP%]{stroke:var(--editor-action-hovered-color)}.icon-screenshot[_ngcontent-%COMP%]{fill:var(--editor-action-color)}.editor-action[_ngcontent-%COMP%]:hover   .icon-screenshot[_ngcontent-%COMP%]{fill:var(--editor-action-hovered-color)}.prettier-config[_ngcontent-%COMP%]{width:190px;height:135px;resize:none;border:none;margin:15px 15px 0;outline:none}.editor-action-option[_ngcontent-%COMP%]{position:relative;font-size:13px;white-space:nowrap;padding:0 10px}.editor-action-option--new[_ngcontent-%COMP%]:before{content:"New";position:absolute;right:2px;top:-5px;background:#539a42;color:#fff;padding:0 3px;line-height:18px;font-size:10px;border-radius:5px}.editor-action-screenshot[_ngcontent-%COMP%]{display:flex;align-items:center;width:36px;height:100%;justify-content:center}.editor-action-screenshot--enabled[_ngcontent-%COMP%]{background:#565d61}.editor-action-screenshot--enabled[_ngcontent-%COMP%]   .icon-screenshot[_ngcontent-%COMP%], .editor-action-screenshot--enabled[_ngcontent-%COMP%]:hover   .icon-screenshot[_ngcontent-%COMP%]{fill:#fff!important}.icon-format[_ngcontent-%COMP%], .icon-screenshot[_ngcontent-%COMP%]{width:18px;height:18px;margin-right:5px}.icon-screenshot[_ngcontent-%COMP%]{margin-right:0}.icon-settings[_ngcontent-%COMP%]{fill:var(--color)}'],changeDetection:0}),t})();var Ve=n("fqV1");const qe=["editorTarget"],Be=["editorBody"];function ze(t,e){if(1&t){const t=r.Ob();r.Nb(0,"ng-run-editor-header",21),r.Tb("formatCodeClicked",function(){return r.lc(t),r.Xb(2).formatCode()}),r.Yb(1,"async"),r.Mb()}if(2&t){const t=r.Xb(2);r.dc("openedFile",r.Zb(1,2,t.openedFile$))("mode",t.mode)}}function We(t,e){1&t&&r.Jb(0,"ng-run-loading")}function He(t,e){if(1&t){const t=r.Ob();r.Nb(0,"li",15),r.Nb(1,"label",17),r.Nb(2,"input",22),r.Tb("change",function(n){r.lc(t);const i=e.$implicit,o=r.Xb(2);return i.checked=n.target.checked,o.updateCompilerOptions()}),r.Mb(),r.uc(3),r.Mb(),r.Mb()}if(2&t){const t=e.$implicit;r.wb(2),r.dc("checked",t.checked),r.wb(1),r.wc(" ",t.key," ")}}function Ke(t,e){if(1&t){const t=r.Ob();r.Lb(0),r.sc(1,ze,2,4,"ng-run-editor-header",1),r.Nb(2,"div",2,3),r.sc(4,We,1,0,"ng-run-loading",0),r.Yb(5,"async"),r.Jb(6,"div",4,5),r.Mb(),r.Nb(8,"div",6),r.Jb(9,"div",7),r.Nb(10,"div",8),r.Nb(11,"div"),r.uc(12,"Typescript"),r.Mb(),r.Nb(13,"div",9),r.uc(14,"4.0.5"),r.Mb(),r.Nb(15,"ng-run-dropdown-menu",10,11),r.Lb(17,12),r.uc(18,"tsconfig.json "),r.Jb(19,"ng-run-icon",13),r.Kb(),r.Nb(20,"div",14),r.Nb(21,"div",15),r.Nb(22,"b"),r.uc(23,"Compiler options"),r.Mb(),r.Mb(),r.Nb(24,"ul"),r.sc(25,He,4,2,"li",16),r.Yb(26,"async"),r.Nb(27,"li",15),r.Nb(28,"label",17),r.Nb(29,"b"),r.uc(30,"Target"),r.Mb(),r.Nb(31,"select",18),r.Tb("change",function(e){r.lc(t);const n=r.jc(16);return r.Xb().setTarget(e),n.close()}),r.Yb(32,"async"),r.Nb(33,"option",19),r.uc(34,"es5"),r.Mb(),r.Nb(35,"option",20),r.uc(36,"es2015"),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Kb()}if(2&t){const t=e.ngIf,n=r.Xb();r.wb(1),r.dc("ngIf",t.projectLoaded),r.wb(3),r.dc("ngIf",r.Zb(5,4,n.loading$)||!t.projectLoaded),r.wb(21),r.dc("ngForOf",r.Zb(26,6,n.compilerOptions$)),r.wb(6),r.dc("value",r.Zb(32,8,n.target$))}}const $e=function(t){return{projectLoaded:t}},Qe="app/app.component.html",Ge="app/app.component.ts";let Xe=(()=>{class t{constructor(t,e,n,r,i,o,s,a){this.elRef=t,this.route=e,this.projectStore=n,this.playgroundStore=r,this.monacoStore=i,this.editorWorker=o,this.liveService=s,this.injector=a,this.cursorPositions={},this.decorationsCache={},this.projectLoaded$=this.projectStore.projectLoaded$,this.target$=this.projectStore.target$,this.openedFile$=this.projectStore.select(t=>t.selectedFile).pipe(Object(Q.a)(t=>{const e=t.endsWith(".html"),n=this.projectStore.state;return this.isHtml&&!e?t=this.openedFile||(n.files[Qe]?Qe:n.manifest.indexHtml):!this.isHtml&&e&&(t=this.openedFile||(n.files[Ge]?Ge:n.manifest.entry)),n.files[t]||(t=this.isHtml?n.manifest.indexHtml:n.manifest.entry),t}),Object(T.a)(t=>{if(this.openedFile===t)return this.cursorPositions[t]=this.editor&&this.editor.getPosition(),void(this.projectStore.state.selectedFile===t&&this.focus(t));this.openFile(t),this.refreshDecorators()})),this.loading$=new v.a(!0),this.compilerOptions$=new v.a([])}ngOnInit(){return Object(W.a)(this,void 0,void 0,function*(){this.isHtml="html"===this.mode,yield Object(P.b)(),this.initEditor()})}formatCode(){this.editor.getAction("editor.action.formatDocument").run()}refreshDecorators(){if(!this.editor||!this.projectStore.state||this.projectStore.state.selectedFile!==this.openedFile)return;const t=this.openedFile,e=this.editor.getModel(),n=e.getModeId();if(!["typescript","html"].includes(n))return;const r=this.decorationsCache.hasOwnProperty(t)?this.decorationsCache[t]:[];this.decorations=this.editor.deltaDecorations(this.decorations?this.decorations:[],r);const i=this.editorWorker.errorInfo$.getValue();if(!i||i.file&&i.file!==this.openedFile)return void monaco.editor.setModelMarkers(e,null,[]);let o;if(i.startPos){const t=e.getPositionAt(i.startPos),n=e.getPositionAt(i.endPos);o=t.lineNumber,i.start={line:t.lineNumber,ch:t.column},i.end={line:n.lineNumber,ch:n.column}}else o=i.line;const s=void 0!==o?[{range:new monaco.Range(o,1,o,1),options:{isWholeLine:!0,glyphMarginClassName:"errored-line",glyphMarginHoverMessage:{value:i.message},hoverMessage:{value:i.message}}}]:[];let a=[];if(i.start&&i.end){const{start:t,end:e}=i;t.ch===e.ch&&t.line===e.line&&e.ch++,a=[{severity:monaco.MarkerSeverity.Error,startLineNumber:t.line,startColumn:t.ch,endLineNumber:e.line,endColumn:e.ch,message:i.message}]}monaco.editor.setModelMarkers(e,null,a),this.decorations=this.editor.deltaDecorations(this.decorations,r.concat(s))}initEditor(){const{theme:t}=this.playgroundStore.state;this.editor=monaco.editor.create(this.editorTarget.nativeElement,{theme:["light","vstudio"].includes(t)?"vs-light":"vs-dark",minimap:{enabled:!1},wordWrapColumn:0,wordWrap:"on",dragAndDrop:!1,glyphMargin:!0,fixedOverflowWidgets:!0,trimAutoWhitespace:!1}),this.handleEvents()}handleEvents(){this.enableAutoResize(),this.projectStore.projectLoaded$.subscribe(()=>{const{compilerOptions:t,files:e}=this.projectStore.state;t&&Object(P.c)(t),this.compilerOptions$.next(["strict","noImplicitAny","noImplicitThis","noImplicitReturns","alwaysStrict","strictBindCallApply","strictNullChecks","strictFunctionTypes","strictPropertyInitialization"].map(e=>({key:e,checked:t&&!!t[e]}))),this.monacoStore.addFiles(e),this.openFile(this.openedFile),this.enablePlugins()}),"typescript"===this.mode?this.editorWorker.decoratorsUpdated$.subscribe(t=>{if(!t)return;const{decorators:e}=t;Object.keys(e).forEach(t=>{this.decorationsCache[t]=e[t]}),Object.keys(e).indexOf(this.openedFile)>-1&&this.refreshDecorators(),this.loading$.value&&this.loading$.next(!1)}):this.loading$.next(!1),Object(Re.a)(this.editorWorker.passed$,this.editorWorker.errorInfo$).subscribe(()=>this.refreshDecorators()),this.editorWorker.inspect$.subscribe(t=>this.inspect(t)),this.playgroundStore.screenShotMode$.pipe(Object(H.a)(t=>t===this.mode)).subscribe(()=>this.prepareScreenShot()),this.editor.onDidChangeCursorSelection(t=>{this.playgroundStore.state.screenShotMode?this.prepareScreenShot(t.selection):this.liveService.detectChangeCursor(this.editor,t,this.openedFile)})}enablePlugins(){var t;const e=["emmet"];this.projectStore.state.vimMode&&e.push("vim"),(this.projectStore.state.record||(null===(t=this.route.snapshot.params)||void 0===t?void 0:t.lessonId))&&e.push("recording");for(const i of e)n("yPWk")(`./${i}/${i}.plugin`).then(({plugIn:t})=>{t(this.editor,this)});const r=["go-to-definition","prettier"];"typescript"===this.mode&&r.push("auto-import","macros","go-to-error","path-completion");for(const i of r){const{plugIn:t}=n("vt3g")(`./${i}/${i}.plugin`);t(this.editor,this)}}enableAutoResize(){new ResizeObserver(()=>{requestAnimationFrame(()=>this.editor.layout())}).observe(this.editorTarget.nativeElement)}openFile(t){this.openedFile&&(this.cursorPositions[this.openedFile]=this.editor&&this.editor.getPosition()),this.openedFile=t,this.monacoStore.openFile(this.editor,t),this.projectStore.state.selectedFile===t&&this.focus(t)}focus(t){this.editor&&(this.liveService.activeEditor$.next(this.editor),this.refreshDecorators(),setTimeout(()=>{const e=this.cursorPositions[t];this.editor.focus(),e&&this.editor.setPosition(e),this.liveService.detectChangeCursor(this.editor,{selection:this.editor.getSelections(),secondarySelections:[],source:"api"},this.openedFile)},0))}prepareScreenShot(t){t||(t=this.editor.getSelection()).startLineNumber===t.endLineNumber&&(t=void 0);const e=this.editor._modelData.viewModel.lines,{startLineNumber:n,startColumn:r,endLineNumber:i,endColumn:o}=t||{startLineNumber:1,endLineNumber:e.lines.length,startColumn:0,endColumn:0};if(t&&n===i&&r===o)return;const s=document.getElementById("screenshot");s.innerHTML="";const a=this.editorBody.nativeElement;a.classList.add("screenshot-mode");const c=a.offsetWidth;let u=0;for(let m=n-1;m<i;m++)u+=e.lines[m].outputLineCount||1;let l=1;for(let m=0;m<n-1;m++)l+=e.lines[m].outputLineCount||1;let h=0;for(let m=n-1;m<i;m++)h+=e.lines[m].outputLineCount||1;const d=l+h-1,f=19*u+60,p=a.cloneNode(!0);a.classList.remove("screenshot-mode"),[].forEach.call(p.querySelectorAll(".view-line"),(t,e)=>{t.style.top=parseInt(t.style.top,10)-19*(l-1)+"px",(e<l-1||e>d-1)&&t.parentNode.removeChild(t)});const g=p.querySelector(".monaco-editor");p.style.width=c+"px",g.style.width="auto",g.style.height=19*u+"px",p.style.height=f+"px",s.appendChild(p)}inspect({filePath:t,position:e,offset:n}){if("typescript"===this.mode&&!t.endsWith(".ts")||"html"===this.mode&&!t.endsWith(".html"))return;let r=this.editor;this.projectStore.state.selectedFile!==t&&this.projectStore.selectFile(t),this.monacoStore.openFile(r,t);const i=r.getModel();e&&(n+=i.getOffsetAt(e)),e=i.getPositionAt(n),setTimeout(()=>{r.focus(),r.setPosition(e),r.revealLineInCenter(e.lineNumber),this.highlightLine(e.lineNumber),clearTimeout(this.highlightTimeout),this.highlightTimeout=setTimeout(()=>{this.clearHighlighting()},1500)},50)}highlightLine(t){const e=this.openedFile,n=this.decorationsCache.hasOwnProperty(e)?this.decorationsCache[e]:[],r=[{range:new monaco.Range(t,1,t,1),options:{isWholeLine:!0,glyphMarginClassName:"source-map-line"}}];this.decorations=this.editor.deltaDecorations(this.decorations||[],n.concat(r))}clearHighlighting(){const t=this.openedFile,e=this.decorationsCache.hasOwnProperty(t)?this.decorationsCache[t]:[];this.decorations=this.editor.deltaDecorations(this.decorations?this.decorations:[],e)}updateCompilerOptions(){const t=this.compilerOptions$.value.filter(t=>t.checked).reduce((t,e)=>(t[e.key]=!0,t),{});this.projectStore.updateCompilerOptions(Object.keys(t).length?t:null),Object(P.c)(t),this.projectStore.state.aot&&this.editorWorker.runIvyAOT({})}setTarget(t){const e=t.target.value;this.projectStore.setTarget(e),this.editorWorker.post({type:"UPDATE_TARGET",payload:{files:this.projectStore.state.files,target:e}})}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.l),r.Ib(p.a),r.Ib(k.c),r.Ib(k.b),r.Ib(L),r.Ib(U),r.Ib($),r.Ib(r.r))},t.\u0275cmp=r.Cb({type:t,selectors:[["ng-run-editor"]],viewQuery:function(t,e){if(1&t&&(r.yc(qe,!0),r.yc(Be,!0)),2&t){let t;r.ic(t=r.Ub())&&(e.editorTarget=t.first),r.ic(t=r.Ub())&&(e.editorBody=t.first)}},inputs:{mode:"mode"},decls:2,vars:5,consts:[[4,"ngIf"],[3,"openedFile","mode","formatCodeClicked",4,"ngIf"],[1,"editor-body"],["editorBody",""],[1,"h-100"],["editorTarget",""],[1,"status-bar"],[1,"status-bar-line","flex-1","flex-y-center"],[1,"d-flex","no-wrap","ml-3"],[1,"ml-2"],["align","top",1,"ml-2"],["menu",""],["menuTrigger",""],["name","pencil",1,"icon-edit","ml-2"],[1,"tsconfig-options-menu"],[1,"mb-1"],["class","mb-1",4,"ngFor","ngForOf"],[1,"flex-y-center"],[1,"ml-auto",3,"value","change"],["value","es5"],["value","es2015"],[3,"openedFile","mode","formatCodeClicked"],["type","checkbox",3,"checked","change"]],template:function(t,e){1&t&&(r.sc(0,Ke,37,10,"ng-container",0),r.Yb(1,"async")),2&t&&r.dc("ngIf",r.gc(3,$e,r.Zb(1,1,e.projectLoaded$)))},directives:[z.m,G.a,Y.a,z.l,Ue,Ve.a],pipes:[z.b],styles:['[_nghost-%COMP%]{position:relative;display:flex;flex-direction:column}.editor-body[_ngcontent-%COMP%], [_nghost-%COMP%]     .monaco-editor-background, [_nghost-%COMP%]     .monaco-editor .margin{background:var(--bg)}.editor-body[_ngcontent-%COMP%]{padding-top:10px;width:100%;flex:1;box-sizing:border-box;position:relative}.status-bar[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;left:0;display:flex;padding:0 15px;line-height:24px;font-size:12px;background:var(--tray-bg);color:#fff}.status-bar-line[_ngcontent-%COMP%]{font-size:13px}.status-bar-line[_ngcontent-%COMP%]     input{margin-left:2px;border:none}  .editor-body.screenshot-mode{display:inline-block;text-align:left;margin:30px;padding:48px 18px 18px 15px;border-radius:5px;overflow:hidden}  .editor-body.screenshot-mode:after,   .editor-body.screenshot-mode:before,   .editor-body.screenshot-mode>div:before{content:"";position:absolute;top:15px;width:12px;height:12px;background:#fff;border-radius:50%;border:.5px solid}  .editor-body.screenshot-mode:before{left:15px;background:#ff5e5e;border-color:#e0443e}  .editor-body.screenshot-mode:after{left:35px;background:#ffbe4d;border-color:#dea123}  .editor-body.screenshot-mode>div:before{left:55px;background:#00cd5a;border-color:#1aab29}  .editor-body.screenshot-mode .monaco-scrollable-element{left:0!important;height:100%!important}  .editor-body.screenshot-mode .cursors-layer,   .editor-body.screenshot-mode .margin,   .editor-body.screenshot-mode .slider,   .editor-body.screenshot-mode .view-overlays,   .editor-body.screenshot-mode .view-zones{display:none}  .editor-body.screenshot-mode .overflow-guard{height:100%!important}.tsconfig-options-menu[_ngcontent-%COMP%]{white-space:nowrap;padding:10px;font-size:13px}.icon-edit[_ngcontent-%COMP%], .icon-edit[_ngcontent-%COMP%]:hover{stroke:#fff}'],changeDetection:0}),Object(W.b)([Object(A.b)()],t.prototype,"prepareScreenShot",null),t})();var Ye=n("3c/+");const Ze=["child"];function Je(t,e){1&t&&(r.Nb(0,"ng-run-loading"),r.uc(1,"Preparing preview..."),r.Mb())}function tn(t,e){if(1&t&&(r.Nb(0,"div",17),r.uc(1),r.Mb()),2&t){const t=e.$implicit;r.wb(1),r.vc(t)}}function en(t,e){if(1&t){const t=r.Ob();r.Nb(0,"ng-run-loading",13),r.uc(1),r.Jb(2,"br"),r.Jb(3,"br"),r.sc(4,tn,2,1,"div",14),r.Nb(5,"div",15),r.Nb(6,"div",16),r.Tb("click",function(){r.lc(t);const n=e.ngIf;return r.Xb().editorWorker.install(n)}),r.uc(7,"Install"),r.Mb(),r.Mb(),r.Mb()}if(2&t){const t=e.ngIf;r.wb(1),r.wc(" Can't find package",(null==t?null:t.length)>1?"s":""," "),r.wb(3),r.dc("ngForOf",t)}}function nn(t,e){if(1&t&&(r.Nb(0,"b",19),r.uc(1),r.Mb()),2&t){const t=e.$implicit,n=e.last;r.wb(1),r.xc("",t," ",n?"":",\xa0","")}}function rn(t,e){if(1&t&&(r.Nb(0,"ng-run-loading"),r.sc(1,nn,2,2,"b",18),r.Jb(2,"br"),r.Jb(3,"br"),r.uc(4),r.Mb()),2&t){const t=e.ngIf;r.wb(1),r.dc("ngForOf",t),r.wb(3),r.wc(" ",t.length>1?"packages have":"package has"," been installing... ")}}function on(t,e){1&t&&r.Jb(0,"div",26)}const sn=function(){return[]};function an(t,e){if(1&t){const t=r.Ob();r.Nb(0,"div",20),r.Jb(1,"div",21,22),r.Nb(3,"div",23),r.Tb("click",function(){r.lc(t);const e=r.jc(2);return r.Xb().saveScreenShot(e.firstElementChild)}),r.Nb(4,"div",24),r.sc(5,on,1,0,"div",25),r.Mb(),r.Mb(),r.Mb()}2&t&&(r.wb(5),r.dc("ngForOf",r.fc(1,sn).constructor(6)))}let cn=(()=>{class t{constructor(t,e){this.editorWorker=t,this.playgroundStore=e,this.previewUrl=`${i.a.previewUrl}?${i.a.hash}`,this.hash=i.a.hash,this.url$=this.playgroundStore.previewUrl$,this.bundleSuccess$=this.editorWorker.bundleSuccess$,this.error$=this.editorWorker.errorInfo$.pipe(Object(Q.a)(t=>t&&t.constructor===Object&&Object.keys(t).length>1)),this.pkgNames$=this.editorWorker.confirmInstallState$,this.installingPkgNames$=this.editorWorker.installState$,this.inspectMode$=new v.a(!1),this.screenShotMode$=this.playgroundStore.screenShotMode$}ngAfterViewInit(){window.preview=this.child.nativeElement.contentWindow}reload(t){preview.postMessage({type:"RELOAD",payload:t},"*")}toggleInspectMode(){this.inspectMode$.next(!this.inspectMode$.value),preview.postMessage({type:"TOGGLE_INSPECT"},"*")}saveScreenShot(t){n.e(13).then(n.t.bind(null,"wOnQ",7)).then(t=>t.default).then(e=>{e(t,{width:t.offsetWidth,height:t.offsetHeight,scale:2}).then(t=>{const e=t.toDataURL(),n=document.createElement("a");n.download="code.png",n.href=e,document.body.appendChild(n),n.click(),document.body.removeChild(n)})})}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(U),r.Ib(k.b))},t.\u0275cmp=r.Cb({type:t,selectors:[["ng-run-preview"]],viewQuery:function(t,e){if(1&t&&r.qc(Ze,!0),2&t){let t;r.ic(t=r.Ub())&&(e.child=t.first)}},decls:24,vars:29,consts:[[1,"overflow-hidden"],[4,"ngIf"],["class","broken",4,"ngIf"],[1,"preview-toolbar"],["title","Inspect mode",1,"icon-inspect",3,"click"],["width","16","height","16"],[0,"xlink","href","#icon-inspect"],[1,"icon-reload",3,"click"],[0,"xlink","href","#icon-reload"],["type","text","aria-label","App address bar",1,"address-bar",3,"value","change","keydown.enter"],["title","Preview",3,"name","src"],["child",""],["class","screenshot-preview",4,"ngIf"],[1,"broken"],["class","package-name",4,"ngFor","ngForOf"],[1,"-actions"],[1,"-confirm",3,"click"],[1,"package-name"],["class","package-name--info",4,"ngFor","ngForOf"],[1,"package-name--info"],[1,"screenshot-preview"],["id","screenshot",1,"screenshot-preview-content"],["screenshot",""],["title","Take a screenshot",1,"capture-btn",3,"click"],[1,"capture-inner"],["class","capture-blade",4,"ngFor","ngForOf"],[1,"capture-blade"]],template:function(t,e){1&t&&(r.Nb(0,"div",0),r.Yb(1,"async"),r.sc(2,Je,2,0,"ng-run-loading",1),r.Yb(3,"async"),r.Yb(4,"async"),r.sc(5,en,8,2,"ng-run-loading",2),r.Yb(6,"async"),r.sc(7,rn,5,2,"ng-run-loading",1),r.Yb(8,"async"),r.Nb(9,"div",3),r.Nb(10,"div",4),r.Tb("click",function(){return e.toggleInspectMode()}),r.Yb(11,"async"),r.Wb(),r.Nb(12,"svg",5),r.Jb(13,"use",6),r.Mb(),r.Mb(),r.Vb(),r.Nb(14,"div",7),r.Tb("click",function(){return e.reload()}),r.Wb(),r.Nb(15,"svg",5),r.Jb(16,"use",8),r.Mb(),r.Mb(),r.Vb(),r.Nb(17,"input",9),r.Tb("change",function(t){return e.reload(t.target.value)})("keydown.enter",function(t){return e.reload(t.target.value)}),r.Yb(18,"async"),r.Mb(),r.Mb(),r.Jb(19,"iframe",10,11),r.Yb(21,"safeUrl"),r.Mb(),r.sc(22,an,6,2,"div",12),r.Yb(23,"async")),2&t&&(r.Ab("d-none",r.Zb(1,11,e.screenShotMode$)),r.wb(2),r.dc("ngIf",!r.Zb(3,13,e.bundleSuccess$)&&!r.Zb(4,15,e.error$)),r.wb(3),r.dc("ngIf",r.Zb(6,17,e.pkgNames$)),r.wb(2),r.dc("ngIf",r.Zb(8,19,e.installingPkgNames$)),r.wb(3),r.Ab("icon-inspect--enabled",r.Zb(11,21,e.inspectMode$)),r.wb(7),r.dc("value",r.Zb(18,23,e.url$)),r.wb(2),r.dc("name","preview_"+e.hash)("src",r.Zb(21,25,e.previewUrl),r.nc),r.wb(3),r.dc("ngIf",r.Zb(23,27,e.screenShotMode$)))},directives:[z.m,Ve.a,z.l],pipes:[z.b,Ye.a],styles:['[_nghost-%COMP%]{position:relative}.-actions[_ngcontent-%COMP%]{margin-top:20px;text-align:center}.-confirm[_ngcontent-%COMP%]{border:none;line-height:34px;padding:0 20px;cursor:pointer;background:#2a7b9e;color:#fff;margin-right:10px;display:inline-block}.package-name[_ngcontent-%COMP%]{display:inline-block;background:#fff;font-weight:700;color:#333;padding:0 10px;line-height:22px;margin-right:5px;margin-bottom:10px}.package-name--info[_ngcontent-%COMP%]{color:#fff}iframe[_ngcontent-%COMP%]{position:absolute;left:0;top:40px;width:100%;height:calc(100% - 40px);background:#fff;border:none}.preview-toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;height:40px;background:#f0f0f0}.preview-toolbar[_ngcontent-%COMP%]   .icon-inspect[_ngcontent-%COMP%], .preview-toolbar[_ngcontent-%COMP%]   .icon-reload[_ngcontent-%COMP%]{margin:0 5px;cursor:pointer;padding:3px 5px;border-radius:3px}.preview-toolbar[_ngcontent-%COMP%]   .icon-inspect[_ngcontent-%COMP%]:hover, .preview-toolbar[_ngcontent-%COMP%]   .icon-reload[_ngcontent-%COMP%]:hover{background:#dcdbdb}.preview-toolbar[_ngcontent-%COMP%]   .icon-inspect[_ngcontent-%COMP%]{margin-right:0}.preview-toolbar[_ngcontent-%COMP%]   .icon-inspect--enabled[_ngcontent-%COMP%]{background:#dcdbdb;fill:#0671c7}.preview-toolbar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;margin-right:10px;padding:0 3px;line-height:22px;border:1px solid #b3b0b0;outline:none}.screenshot-preview[_ngcontent-%COMP%]{width:100%;height:100%;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAAAAACo4kLRAAAAF0lEQVR4AWP4CQf/4WBoCyKYCOkhLQgAFBGJ0NmZHwYAAAAASUVORK5CYII=)}.screenshot-preview-content[_ngcontent-%COMP%]{text-align:center;width:100%;height:100%;overflow:auto}.address-bar[_ngcontent-%COMP%]{min-width:0}.capture-btn[_ngcontent-%COMP%]{position:absolute;bottom:30px;right:30px;width:57px;height:57px;border-radius:50%;border:3px solid #555;box-sizing:initial;cursor:pointer}.capture-btn[_ngcontent-%COMP%]:hover   .capture-inner[_ngcontent-%COMP%]   .capture-blade[_ngcontent-%COMP%]:after{transform:rotate(-14deg) scale(1.12)}.capture-inner[_ngcontent-%COMP%]{border-radius:52px;content:"";height:calc(52px * 2);left:50%;overflow:hidden;position:absolute;top:50%;transform:scale(.5) translate(-100%,-100%);width:calc(52px * 2)}.capture-inner[_ngcontent-%COMP%]   .capture-blade[_ngcontent-%COMP%]:first-child{transform:rotate(60deg);transform-origin:center top}.capture-inner[_ngcontent-%COMP%]   .capture-blade[_ngcontent-%COMP%]:first-child, .capture-inner[_ngcontent-%COMP%]   .capture-blade[_ngcontent-%COMP%]:nth-child(2){align-items:flex-end;bottom:0;display:flex;height:52px;left:calc(50% - 82px);position:absolute}.capture-inner[_ngcontent-%COMP%]   .capture-blade[_ngcontent-%COMP%]:nth-child(2){transform:rotate(120deg);transform-origin:center top}.capture-inner[_ngcontent-%COMP%]   .capture-blade[_ngcontent-%COMP%]:nth-child(3){transform:rotate(180deg);transform-origin:center top}.capture-inner[_ngcontent-%COMP%]   .capture-blade[_ngcontent-%COMP%]:nth-child(3), .capture-inner[_ngcontent-%COMP%]   .capture-blade[_ngcontent-%COMP%]:nth-child(4){align-items:flex-end;bottom:0;display:flex;height:52px;left:calc(50% - 82px);position:absolute}.capture-inner[_ngcontent-%COMP%]   .capture-blade[_ngcontent-%COMP%]:nth-child(4){transform:rotate(240deg);transform-origin:center top}.capture-inner[_ngcontent-%COMP%]   .capture-blade[_ngcontent-%COMP%]:nth-child(5){transform:rotate(300deg);transform-origin:center top}.capture-inner[_ngcontent-%COMP%]   .capture-blade[_ngcontent-%COMP%]:nth-child(5), .capture-inner[_ngcontent-%COMP%]   .capture-blade[_ngcontent-%COMP%]:nth-child(6){align-items:flex-end;bottom:0;display:flex;height:52px;left:calc(50% - 82px);position:absolute}.capture-inner[_ngcontent-%COMP%]   .capture-blade[_ngcontent-%COMP%]:nth-child(6){transform:rotate(1turn);transform-origin:center top}.capture-blade[_ngcontent-%COMP%]:after{border-bottom:142px solid #555;border-left:82px solid transparent;border-right:82px solid transparent;content:"";display:block;height:0;margin-bottom:-105px;transform-origin:center center;transition:transform .3s cubic-bezier(0,0,0,.9);transform:rotate(-28deg);width:0}']}),t})();const un=["cliInput"];function ln(t,e){if(1&t){const t=r.Ob();r.Lb(0),r.Nb(1,"div",1),r.Nb(2,"input",2,3),r.Tb("keydown.enter",function(){r.lc(t);const e=r.jc(3);return r.Xb().runSchematics(e.value)})("keydown.escape",function(){return r.lc(t),r.Xb().closeWindow()}),r.Mb(),r.Mb(),r.Nb(4,"div",4),r.Tb("click",function(){return r.lc(t),r.Xb().closeWindow()}),r.Mb(),r.Kb()}if(2&t){const t=e.ngIf;r.wb(2),r.ec("placeholder","Type ",t.command," name...")}}let hn=(()=>{class t{constructor(t,e,n,r){this.editorWorker=t,this.playgroundStore=e,this.projectStore=n,this.monacoStore=r,this.schematic$=this.playgroundStore.schematicOptions$}set cliInput(t){t&&t.nativeElement.focus()}closeWindow(){this.playgroundStore.useSchematic()}runSchematics(t){if(!t)return;const{command:e,path:n}=this.playgroundStore.state.schematicOptions;this.playgroundStore.useSchematic(),this.editorWorker.worker.postMessage({type:"RUN_SCHEMATIC",payload:{command:e.toLowerCase(),name:t,path:n,files:this.projectStore.state.files}}).then(({changes:t,selected:e,newFiles:n})=>{const r={add:{},remove:[]};Object.keys(n).forEach(t=>{r.add[n[t].fullPath]=n[t],"folder"!==n[t].type&&this.monacoStore.addModel(t,n[t].contents),this.projectStore.addItem({key:t,value:n[t]}),this.projectStore.selectFile(e)}),this.applyChanges(t).forEach(t=>{r.add[t.fullPath]={type:"file",contents:t.contents},n[t.fullPath]={contents:t.contents}}),this.editorWorker.updateDecorators(n),this.editorWorker.change(r)})}applyChanges(t){const e=this.projectStore.state.files;return t.map(t=>{const n=e[t.file];if(n){const e=n.contents,r=e.substr(0,t.position)+t.toInsert+e.substr(t.position);return this.monacoStore.updateModel(n.fullPath,r),n.contents=r,{fullPath:n.fullPath,contents:r}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(U),r.Ib(k.b),r.Ib(k.c),r.Ib(L))},t.\u0275cmp=r.Cb({type:t,selectors:[["ng-run-cli-generator"]],viewQuery:function(t,e){if(1&t&&r.yc(un,!0),2&t){let t;r.ic(t=r.Ub())&&(e.cliInput=t.first)}},decls:2,vars:3,consts:[[4,"ngIf"],[1,"cli-generator-input"],["type","text",3,"placeholder","keydown.enter","keydown.escape"],["cliInput",""],[1,"fake-bg",3,"click"]],template:function(t,e){1&t&&(r.sc(0,ln,5,1,"ng-container",0),r.Yb(1,"async")),2&t&&r.dc("ngIf",r.Zb(1,1,e.schematic$))},directives:[z.m],pipes:[z.b],encapsulation:2,changeDetection:0}),t})();const dn=["input"];function fn(t,e){if(1&t&&r.Jb(0,"ng-run-icon",7),2&t){const t=r.Xb().$implicit;r.dc("name",t.extension||"")}}function pn(t,e){if(1&t){const t=r.Ob();r.Nb(0,"div",5),r.Tb("click",function(){r.lc(t);const n=e.$implicit;return r.Xb().select(n)}),r.Nb(1,"div"),r.sc(2,fn,1,1,"ng-run-icon",6),r.Mb(),r.uc(3),r.Nb(4,"span"),r.uc(5),r.Mb(),r.Mb()}if(2&t){const t=e.$implicit,n=e.index,i=r.Xb();r.Ab("selected",i.selectedIndex===n),r.wb(1),r.zb("type d-flex ",t.extension,""),r.wb(1),r.dc("ngIf","ts"!==t.extension),r.wb(1),r.wc(" ",t.name," "),r.wb(2),r.vc(t.fullPath)}}let gn=(()=>{class t{constructor(t){this.projectStore=t,this.closed=new r.n,this.files=[],this.filteredFiles=[],this.selectedIndex=0}set input(t){t&&t.nativeElement.focus()}ngOnInit(){const{files:t,selectedFile:e}=this.projectStore.state;this.files=Object.keys(t).filter(n=>t[n].type===k.a.File&&n!==e);const n=this.projectStore.selectedFiles.slice(1);this.files=this.files.sort((t,e)=>{const r=n.indexOf(t),i=n.indexOf(e);return r>-1&&-1===i?-1:i>-1&&-1===r?1:r>-1&&i>-1?r-i:0}),this.files=this.filteredFiles=this.files.map(e=>({name:t[e].name,fullPath:e,extension:e.substr(e.lastIndexOf(".")+1)}))}onKeyDown(t){switch(t.key){case"ArrowUp":this.selectedIndex--,this.selectedIndex<0&&(this.selectedIndex=this.filteredFiles.length-1),Object(r.gb)(this);break;case"ArrowDown":this.selectedIndex++,this.selectedIndex===this.filteredFiles.length&&(this.selectedIndex=0),Object(r.gb)(this);break;case"Escape":this.closed.emit();break;case"Enter":this.select(this.filteredFiles[this.selectedIndex])}}filter(t){this.filteredFiles=this.files.filter(e=>e.fullPath.includes(t.target.value)),this.selectedIndex=0,Object(r.gb)(this)}select(t){this.projectStore.selectFile(t.fullPath),this.closed.emit()}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(k.c))},t.\u0275cmp=r.Cb({type:t,selectors:[["ng-run-go-to-file"]],viewQuery:function(t,e){if(1&t&&r.yc(dn,!0),2&t){let t;r.ic(t=r.Ub())&&(e.input=t.first)}},outputs:{closed:"closed"},decls:5,vars:1,consts:[[1,"filter","p-2"],["placeholder","Type file name...","type","text",3,"input","keydown"],["input",""],[1,"files"],["class","file d-flex px-2",3,"selected","click",4,"ngFor","ngForOf"],[1,"file","d-flex","px-2",3,"click"],["class","icon-file","width","15","height","15",3,"name",4,"ngIf"],["width","15","height","15",1,"icon-file",3,"name"]],template:function(t,e){1&t&&(r.Nb(0,"div",0),r.Nb(1,"input",1,2),r.Tb("input",function(t){return e.filter(t)})("keydown",function(t){return e.onKeyDown(t)}),r.Mb(),r.Mb(),r.Nb(3,"div",3),r.sc(4,pn,6,8,"div",4),r.Mb()),2&t&&(r.wb(4),r.dc("ngForOf",e.filteredFiles))},directives:[z.l,z.m,Y.a],styles:['[_nghost-%COMP%]{position:absolute;top:20px;left:50%;z-index:6;min-width:300px;max-width:90%;background:var(--solution-tree-bg);box-shadow:0 2px 8px #000;transform:translateX(-50%)}input[_ngcontent-%COMP%]{padding:0 5px;width:100%;line-height:26px}.files[_ngcontent-%COMP%]{overflow-y:auto;max-height:45vh}.file[_ngcontent-%COMP%]{cursor:pointer;font-size:13px;line-height:28px}.file[_ngcontent-%COMP%]:hover{background:#34393c}.file.selected[_ngcontent-%COMP%]{color:#f3f3f3;background:#22596f}.file.selected[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#e0e0e0}.file[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:3px;color:#94989a;font-size:10px}.type[_ngcontent-%COMP%]{width:20px}.type.ts[_ngcontent-%COMP%]:before{content:"TS";position:relative;left:2px;color:#95c9de;font-size:10px}']}),t})();const mn=["header"];function yn(t,e){if(1&t){const t=r.Ob();r.Nb(0,"div"),r.Nb(1,"ng-run-go-to-file",9),r.Tb("closed",function(){return r.lc(t),r.Xb().toggleGoToFileDialog(!1)}),r.Mb(),r.Nb(2,"div",10),r.Tb("click",function(){return r.lc(t),r.Xb().toggleGoToFileDialog(!1)}),r.Mb(),r.Mb()}}function bn(t,e){}const vn=24e3/window.innerWidth,wn=(100-vn)/3;let _n=(()=>{class t{constructor(t,e,n,i,o){this.playgroundStore=t,this.projectStore=e,this.editorWorker=n,this.monacoStore=i,this.route=o,this.areas=[vn,wn,wn,wn],this.goToFileDialogOpened$=new v.a(!1),this.destroyed$=new w.a,Promise.resolve().then(()=>Object(r.qb)(this))}handleKeyboardEvent(t){(t.ctrlKey||t.metaKey)&&"s"===t.key.toLowerCase()&&"save"===this.playgroundStore.state.reloadMode&&(this.editorWorker.doSave(),this.projectStore.state.id&&this.projectStore.save(!1).then(),t.preventDefault()),!t.ctrlKey&&!t.metaKey||"p"!==t.key.toLowerCase()||t.altKey||(t.preventDefault(),this.goToFileDialogOpened$.next(!0))}ngOnInit(){const t=this.route.snapshot.params?this.route.snapshot.params.workspace:null,e=this.route.snapshot.params?this.route.snapshot.params.lessonId:null,{testMode:n}=this.playgroundStore.state;this.projectStore.loadProject(n,t,e).then(()=>this.trackAotChanges())}trackAotChanges(){this.projectStore.aotEnabled$.pipe(t=>t.lift(new C(1)),Object(E.a)(this.destroyed$)).subscribe(t=>{const{key:e,contents:n}=Object(k.d)(t,this.projectStore.state);this.monacoStore.updateModel(e,n),this.editorWorker.detectChanges(e,n)})}ngAfterViewInit(){this.updateLayout(),Object(_.b)([this.projectStore.selectedFile$.pipe(Object(T.a)(()=>this.header.toggleMenu(!1))),this.playgroundStore.layout$]).pipe(Object(E.a)(this.destroyed$)).subscribe(()=>this.updateLayout())}get isMobile(){return window.matchMedia("(max-width: 960px)").matches}updateLayout(){const{areas:t}=this.splitter,e="1"===this.playgroundStore.state.layout,n=this.isMobile;if(n)this.resize();else{const n=this.splitter.areas$.value.map(t=>t*(this.splitter.containerSize-this.splitter.separatorsSize));if(!e||t[1].hidden||t[2].hidden){if(!e&&(t[1].hidden||t[2].hidden)){t[2].hidden?t[2].hidden=!1:t[1].hidden=!1;const e=n[1]/2-this.splitter.separatorSize/2;n[1]=e,n.splice(2,0,e);const r=this.splitter.containerSize-this.splitter.separatorsSize;n.map(t=>t/r*100).forEach((e,n)=>t[n].size=e)}}else{t[2].hidden=!0;const e=n.splice(2,1);n[1]+=e[0]+this.splitter.separatorSize;const r=this.splitter.containerSize-this.splitter.separatorsSize,i=n.map(t=>t/r*100);t[0].size=i[0],t[1].size=i[1],t[3].size=i[2]}this.splitter.updateLayout()}if(e||n){const e=!!this.projectStore.state&&this.projectStore.state.selectedFile.endsWith("html");e&&t[2].hidden?(t[2].size=t[1].size,t[1].hidden=!0,t[2].hidden=!1):!e&&t[1].hidden&&(t[1].size=t[2].size,t[2].hidden=!0,t[1].hidden=!1),this.splitter.updateLayout()}}resize(){const{areas:t}=this.splitter,e=this.isMobile;if(e&&!t[0].hidden){this.sizesCache=t.map(t=>t.size),t[0].hidden=!0;const e=!!this.projectStore.state&&this.projectStore.state.selectedFile.endsWith("html");t[e?1:2].hidden=!0,t[0].size=0,t[1].size=e?0:100,t[2].size=e?100:0,t[3].size=0}else!e&&t[0].hidden&&(this.header.toggleMenu(!1),t[0].hidden=!1,this.playgroundStore.state&&"2"===this.playgroundStore.state.layout?(t[1].hidden=t[2].hidden=!1,this.areas.forEach((e,n)=>t[n].size=e)):this.sizesCache&&(this.sizesCache.forEach((e,n)=>t[n].size=e),t[2].hidden?t[1].size+=t[2].size:t[1].hidden&&(t[2].size+=t[1].size)));this.splitter.updateLayout()}toggleGoToFileDialog(t){this.goToFileDialogOpened$.next(t)}ngOnDestroy(){this.destroyed$.next()}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(k.b),r.Ib(k.c),r.Ib(U),r.Ib(L),r.Ib(p.a))},t.\u0275cmp=r.Cb({type:t,selectors:[["ng-run-playground-page"]],viewQuery:function(t,e){if(1&t&&(r.qc(O.a,!0),r.qc(mn,!0)),2&t){let t;r.ic(t=r.Ub())&&(e.splitter=t.first),r.ic(t=r.Ub())&&(e.header=t.first)}},hostBindings:function(t,e){1&t&&r.Tb("keydown",function(t){return e.handleKeyboardEvent(t)},!1,r.kc)("resize",function(){return e.resize()},!1,r.kc)},decls:11,vars:7,consts:[[1,"px-2"],["header",""],["splitter","",1,"main"],[1,"sidebar-area",3,"split-area","closeMenu"],["mode","typescript",3,"split-area"],["mode","html",3,"split-area"],[3,"split-area"],[4,"ngIf"],["ng-run-container","player"],[3,"closed"],[1,"fake-bg",3,"click"]],template:function(t,e){if(1&t){const t=r.Ob();r.Jb(0,"ng-run-header",0,1),r.Nb(2,"section",2),r.Nb(3,"ng-run-sidebar",3),r.Tb("closeMenu",function(){return r.lc(t),r.jc(1).toggleMenu(!1)}),r.Mb(),r.Jb(4,"ng-run-editor",4),r.Jb(5,"ng-run-editor",5),r.Jb(6,"ng-run-preview",6),r.sc(7,yn,3,0,"div",7),r.Yb(8,"async"),r.Mb(),r.Jb(9,"ng-run-cli-generator"),r.sc(10,bn,0,0,"ng-template",8)}2&t&&(r.wb(3),r.dc("split-area",e.areas[0]),r.wb(1),r.dc("split-area",e.areas[1]),r.wb(1),r.dc("split-area",e.areas[2]),r.wb(1),r.dc("split-area",e.areas[3]),r.wb(1),r.dc("ngIf",r.Zb(8,5,e.goToFileDialogOpened$)))},directives:[Tt,O.a,De,Pe.a,Xe,cn,z.m,hn,st.a,gn],pipes:[z.b],styles:[".main[_ngcontent-%COMP%]{position:absolute;top:50px;right:0;bottom:0;left:0;height:auto}.dragging[_nghost-%COMP%], .dragging   [_nghost-%COMP%]{cursor:col-resize;-webkit-user-select:none;user-select:none}.dragging[_nghost-%COMP%]   .main[_ngcontent-%COMP%] > *[_ngcontent-%COMP%], .dragging   [_nghost-%COMP%]   .main[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{pointer-events:none;-webkit-user-select:none;user-select:none}[split-area][_ngcontent-%COMP%]{width:0}@media (max-width:960px){.sidebar-area[_ngcontent-%COMP%]{display:block!important;position:fixed;box-shadow:0 16px 24px 2px rgba(0,0,0,.14),0 6px 30px 5px rgba(0,0,0,.12),0 8px 10px -5px rgba(0,0,0,.4);z-index:5;top:0;left:0;bottom:0;width:300px!important;overflow:hidden;transition:transform .25s;transform:translateX(-300px)}  .menu--opened .sidebar-area{transform:translateX(0);overflow:visible}}"]}),t})(),Sn=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},imports:[[b.c]]}),t})(),Cn=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},imports:[[b.c,Sn,p.b.forChild([{path:"fork/:workspace",component:_n},{path:"lesson/:lessonId",component:_n},{path:"**",component:_n}])]]}),t})(),In=(()=>{class t{constructor(){z.b.prototype._updateLatestValue=function(t,e){t===this._obj&&(this._latestValue=e,this._ref.detectChanges())}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Cb({type:t,selectors:[["ng-run-root"]],decls:1,vars:0,template:function(t,e){1&t&&r.Jb(0,"router-outlet")},directives:[p.c],encapsulation:2}),t})();const En={apiKey:"AIzaSyD5BqwnntqBqNfn0nqGMItC8R3vyg6u5us",authDomain:"ng-run.firebaseapp.com",databaseURL:"https://ng-run.firebaseio.com",projectId:"ng-run",storageBucket:"ng-run.appspot.com"};let Tn=(()=>{class t{}return t.\u0275mod=r.Gb({type:t,bootstrap:[In]}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},imports:[[o.a,y,Cn,l,f,s.a.initializeApp(En)]]}),t})();i.a.production&&Object(r.R)(),o.c().bootstrapModule(Tn,{ngZone:"noop"}).catch(t=>console.error(t))},zVF4:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("30Go"),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(t,e){if(!t)throw s(e)},s=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},a=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},c={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,l=(15&a)<<2|u>>6,h=63&u;c||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,c=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==c)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==c&&r.push(a<<6&192|c))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){try{return c.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=l(t[n],e[n]));return t}var h=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var f=function(t){function e(n,r){var i=t.call(this,r)||this;return i.code=n,i.name="FirebaseError",Object.setPrototypeOf(i,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,p.prototype.create),i}return r.__extends(e,t),e}(Error),p=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?g(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",c=new f(i,a),u=0,l=Object.keys(r);u<l.length;u++){var h=l[u];"_"!==h.slice(-1)&&(h in c&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),c[h]=r[h])}return c},t}();function g(t,e){return t.replace(m,function(t,n){var r=e[n];return null!=r?r.toString():"<"+n+"?>"})}var m=/\{\$([^}]+)}/g;function y(t){return JSON.parse(t)}var b=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=y(u(o[0])||""),n=y(u(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},v=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],c=this.chain_[2],u=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=u^a&(c^u),o=1518500249):(i=a^c^u,o=1859775393):r<60?(i=a&c|u&(a|c),o=2400959708):(i=a^c^u,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=u,u=c,c=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}(),w=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=_),void 0===r.error&&(r.error=_),void 0===r.complete&&(r.complete=_);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function _(){}function S(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}e.CONSTANTS=i,e.Deferred=h,e.ErrorFactory=p,e.FirebaseError=f,e.Sha1=v,e.assert=o,e.assertionError=s,e.async=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){t.apply(void 0,n)}).catch(function(t){e&&e(t)})}},e.base64=c,e.base64Decode=u,e.base64Encode=function(t){var e=a(t);return c.encodeByteArray(e,!0)},e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.createSubscribe=function(t,e){var n=new w(t,e);return n.subscribe.bind(n)},e.decode=b,e.deepCopy=function(t){return l(void 0,t)},e.deepExtend=l,e.errorPrefix=S,e.getUA=d,e.isAdmin=function(t){var e=b(t).claims;return"object"==typeof e&&!0===e.admin},e.isBrowser=function(){return"object"==typeof self&&self.self===self},e.isEmpty=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())},e.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}},e.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.isValidFormat=function(t){var e=b(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e=b(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),i=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},e.issuedAtTime=function(t){var e=b(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.jsonEval=y,e.map=function(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r},e.querystring=function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach(function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}}),e},e.safeGet=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},e.stringToByteArray=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var s=i-55296;r++,o(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},e.stringify=function(t){return JSON.stringify(t)},e.validateArgCount=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},e.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(S(t,e,r)+"must be a valid function.")},e.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(S(t,e,r)+"must be a valid context object.")},e.validateNamespace=function(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(S(t,e,r)+"must be a valid firebase namespace.")}},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return c});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function c(t,e){if(!e.closed)return t instanceof i.a?t.subscribe(e):Object(o.a)(t)(e)}}},[[0,0]]]);
//# sourceMappingURL=main.b10dcab7683f96083073.js.map